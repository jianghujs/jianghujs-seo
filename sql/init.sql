/*
 Navicat Premium Data Transfer

 Source Server         : localhost
 Source Server Type    : MySQL
 Source Server Version : 50720 (5.7.20)
 Source Host           : localhost:3306
 Source Schema         : jianghujs_seo

 Target Server Type    : MySQL
 Target Server Version : 50720 (5.7.20)
 File Encoding         : 65001

 Date: 29/08/2022 17:00:13
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for _cache
-- ----------------------------
DROP TABLE IF EXISTS `_cache`;
CREATE TABLE `_cache` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userId` varchar(255) NOT NULL COMMENT '用户Id',
  `content` longtext COMMENT '缓存数据',
  `recordStatus` varchar(255) DEFAULT 'active',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='缓存表';

-- ----------------------------
-- Records of _cache
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for _constant
-- ----------------------------
DROP TABLE IF EXISTS `_constant`;
CREATE TABLE `_constant` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `constantKey` varchar(255) DEFAULT NULL,
  `constantType` varchar(255) DEFAULT NULL COMMENT '常量类型; object, array',
  `desc` varchar(255) DEFAULT NULL COMMENT '描述',
  `constantValue` text COMMENT '常量内容; object, array',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8mb4 COMMENT='常量表;';

-- ----------------------------
-- Records of _constant
-- ----------------------------
BEGIN;
INSERT INTO `_constant` (`id`, `constantKey`, `constantType`, `desc`, `constantValue`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (6, 'notice', 'object', '', '{\"title\":\"4.3.7 版本发布\",\"content\":\"快来使用吧！\\n测试12123123\\n快来使用吧！\\n测试12123123\\n快来使用吧！\\n测试12123123\\n快来使用吧！\\n测试12123123\\n\",\"imageSrc\":\"/noticeImage/1647076649263_719911_noticeImage.jpeg\",\"isImageShown\":false,\"isTextShown\":true}', 'update', 'admin01', 'admin01', '2022-03-12T17:19:50+08:00');
INSERT INTO `_constant` (`id`, `constantKey`, `constantType`, `desc`, `constantValue`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (59, 'userStatus', 'array', NULL, '[{\"value\": \"active\", \"text\": \"正常\"}, {\"value\": \"banned\", \"text\": \"禁用\"}]', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant` (`id`, `constantKey`, `constantType`, `desc`, `constantValue`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (60, 'userType', 'array', NULL, '[{\"value\": \"common\", \"text\": \"普通用户\"},{\"value\": \"xiaochengxu\", \"text\": \"小程序机器人\"}]', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant` (`id`, `constantKey`, `constantType`, `desc`, `constantValue`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (61, 'gender', 'array', NULL, '[{\"value\": \"male\", \"text\": \"男\"}, {\"value\": \"female\", \"text\": \"女\"}]', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant` (`id`, `constantKey`, `constantType`, `desc`, `constantValue`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (62, 'version', 'object', NULL, '{\"testUserIdList\": \"\",\"version\": \"4.3.11\", \"title\": \"4.3.7 版本发布\", \"note\": \"新版本介绍\\n 1. 聊天输入优化\", \"apkVersion\": \"5.0.20\", \"apkLink\": \"https://duoxing.openjianghu.org/duoxing/upload/10002/1647840662817_956853_D多星MD-4.7.10.apk\", \"apkNote\": \"\", \"desktopVersion\": \"4.3.2\", \"desktopLink\": \"http://192.168.110.215:8082/duoxing/upload/duoxing-1.0.1.dmg.zip\", \"desktopNote\": \"测试桌面客户端升级\" }', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant` (`id`, `constantKey`, `constantType`, `desc`, `constantValue`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (64, 'emotion', 'array', NULL, '[\n  {\n    \"dir\":\"face01\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"png\",\n    \"cols\":5,\n    \"total\":86\n  },\n  {\n    \"dir\":\"face02\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":16\n  },\n  {\n    \"dir\":\"face03\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":16\n  },\n  {\n    \"dir\":\"face04\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":16\n  },\n  {\n    \"dir\":\"face05\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":1,\n    \"total\":7\n  },\n  {\n    \"dir\":\"face06\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":3,\n    \"total\":24\n  },\n  {\n    \"dir\":\"face07\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":16\n  },\n  {\n    \"dir\":\"face08\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":3,\n    \"total\":23\n  },\n  {\n    \"dir\":\"face09\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":16\n  },\n  {\n    \"dir\":\"face10\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":3,\n    \"total\":20\n  },\n  {\n    \"dir\":\"face11\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":13\n  },\n  {\n    \"dir\":\"face12\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":16\n  },\n  {\n    \"dir\":\"face13\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":15\n  },\n  {\n    \"dir\":\"face14\",\n    \"cover\":\"face-lbl\",\n    \"ext\":\"gif\",\n    \"cols\":2,\n    \"total\":16\n  }\n]\n', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant` (`id`, `constantKey`, `constantType`, `desc`, `constantValue`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (65, 'appLinkActionConfig', 'array', NULL, '[{\"regex\":\".openjianghu.org\\/*\", \"action\": \"internal\"}, {\"regex\":\"http:\\/\\/192.168.\\/*\", \"action\": \"internal\"}]', 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _constant_ui
-- ----------------------------
DROP TABLE IF EXISTS `_constant_ui`;
CREATE TABLE `_constant_ui` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `constantKey` varchar(255) DEFAULT NULL,
  `constantType` varchar(255) DEFAULT NULL COMMENT '常量类型; object, array',
  `pageId` varchar(255) DEFAULT 'all' COMMENT '页面id',
  `desc` varchar(255) DEFAULT NULL COMMENT '描述',
  `en` text COMMENT '常量内容; object, array',
  `zh` text COMMENT '常量内容; object, array',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `pageId_constantKey_unique` (`constantKey`,`pageId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8mb4 COMMENT='常量表;';

-- ----------------------------
-- Records of _constant_ui
-- ----------------------------
BEGIN;
INSERT INTO `_constant_ui` (`id`, `constantKey`, `constantType`, `pageId`, `desc`, `en`, `zh`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1, 'header', 'object', 'all', NULL, '{\n	\"logo\": \"/logo.png\",\n	\"title\": \"JIANGHU\",\n	\"menuList\": [{\n		\"categoryId\": \"10004\",\n		\"categoryName\": \"jianghuJS\",\n		\"path\": \"/page/article/10004\",\n		\"isLogin\": true\n	}, {\n		\"categoryName\": \"Training\",\n		\"path\": \"/page/article/10083\",\n		\"isLogin\": false\n	}, {\n	  \"categoryId\": \"10005\",\n		\"categoryName\": \"duoxing-instant message\",\n		\"path\": \"/page/article/10016\",\n		\"isLogin\": true\n	}, {\n	    \"categoryId\": \"10009\",\n		\"categoryName\": \"xuanfeng-content management\",\n		\"path\": \"/page/article/10075\",\n		\"isLogin\": true\n	}, {\n	  \"categoryId\": \"10010\",\n		\"categoryName\": \"wulin-live classroom\",\n		\"path\": \"/page/article/10076\",\n		\"isLogin\": true\n	}],\n	\"userAction\": {\n		\"isOpen\": true,\n		\"admin\": true,\n		\"password\": true,\n		\"logout\": true\n	}\n}', '{\n	\"logo\": \"/img/logo.svg\",\n	\"title\": \"nunjuck demo\"\n}', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant_ui` (`id`, `constantKey`, `constantType`, `pageId`, `desc`, `en`, `zh`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (10, 'body', 'object', 'home', '首页说明文字', '{ \r\n  \"title\": \"<span class=\'jianghu-home-hero-accent\'>SEO DEMO</span></p>\", \r\n  \"desc\": \"beginners will enjoy learning and using\",\r\n	\"btnGettingStarted\": \"Getting Started\"\r\n}', '{\"title\": \"<span class=\'jianghu-home-hero-accent\'>nunjucks</span></br>SEO DEMO</p>\", \"desc\": \"构建短平快的学习路径，系统学习企业级应用开发的整体框架\", \"btnGettingStarted\": \"开始使用\"}', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant_ui` (`id`, `constantKey`, `constantType`, `pageId`, `desc`, `en`, `zh`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (11, 'features', 'array', 'home', NULL, '[{\r\n	\"title\": \"learn enterprise application development\\n the overall framework\",\r\n	\"content\": \"start with the overall framework，easy for beginners to learn，grasp the core concepts，improve learning and development efficiency。\",\r\n	\"img\": \"/images/home/icon-3.png\"\r\n}, {\r\n	\"title\": \"build the shortest learning path\",\r\n	\"content\": \"learn what you need，put aside what you dont，bulid the shortest lerning path for enterprise application development。\",\r\n	\"img\": \"/images/home/icon-4.png\"\r\n}, {\r\n	\"title\": \"jianghu scaffold \\n quick page generation\",\r\n	\"content\": \"integrate scaffold jianghu-init，It can be used to quickly build frameworks, pages, management, and other business components。\",\r\n	\"img\": \"/images/home/icon-2.png\"\r\n}, {\r\n	\"title\": \"Based on lake JS ecology \\n Out of the box application\",\r\n	\"content\": \"jianghuJS、duoxing-IM、xuanfeng-Content management、wulin live classroom、training、IT primary programming training。\",\r\n	\"img\": \"/images/home/icon-1.png\"\r\n}]', '[{\r\n	\"title\": \"学习企业级应用开发\\n整体框架\",\r\n	\"content\": \"先从整体框架入手，便于新手学习，把握核心概念，提升学习与开发效率。\",\r\n	\"img\": \"/images/home/icon-3.png\"\r\n}, {\r\n	\"title\": \"构建最短学习路径\",\r\n	\"content\": \"用到学习，不用的先放一放，构建能够开发企业级应用的最短学习路径。\",\r\n	\"img\": \"/images/home/icon-4.png\"\r\n}, {\r\n	\"title\": \"江湖脚手架\\n快速生成页面\",\r\n	\"content\": \"集成脚手架 jianghu-init，可用于快速构建框架、页面、管理等业务组件。\",\r\n	\"img\": \"/images/home/icon-2.png\"\r\n}, {\r\n	\"title\": \"基于江湖JS生态\\n开箱即用的江湖应用\",\r\n	\"content\": \"江湖JS、多星-即时通讯、旋风-内容管理、武林直播课堂、training、IT初级编程培训等。\",\r\n	\"img\": \"/images/home/icon-1.png\"\r\n}]', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant_ui` (`id`, `constantKey`, `constantType`, `pageId`, `desc`, `en`, `zh`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (12, 'links', 'array', 'all', NULL, '[{\r\n	\"label\": \"Reference\",\r\n	\"list\": [{\r\n		\"title\": \"EggJS\",\r\n		\"path\": \"https://www.eggjs.org/\"\r\n	}, {\r\n		\"title\": \"CNode\",\r\n		\"path\": \"https://cnodejs.org/\"\r\n	}]\r\n}, {\r\n	\"label\": \"jianghu application\",\r\n	\"list\": [{\r\n		\"title\": \"jianghuJS\",\r\n		\"path\": \"/page/article/10005\"\r\n	}, {\r\n		\"title\": \"xuanfeng content management\",\r\n		\"path\": \"/page/article/10075\"\r\n	}]\r\n}, {\r\n	\"label\": \"community\",\r\n	\"list\": [{\r\n		\"title\": \"CNode commuinty\",\r\n		\"path\": \"https://cnodejs.org/\"\r\n	}, {\r\n		\"title\": \"BBS\",\r\n		\"path\": \"\"\r\n	}, {\r\n		\"title\": \"submit feedback\",\r\n		\"path\": \"\"\r\n	}, {\r\n		\"title\": \"release the log\",\r\n		\"path\": \"\"\r\n	}]\r\n}, {\r\n	\"label\": \"take part in the discussion\",\r\n	\"img\": \"OR code link\"\r\n}]', '[{\r\n	\"label\": \"Reference\",\r\n	\"list\": [{\r\n		\"title\": \"EggJS\",\r\n		\"path\": \"https://www.eggjs.org/\"\r\n	}, {\r\n		\"title\": \"CNode\",\r\n		\"path\": \"https://cnodejs.org/\"\r\n	}]\r\n}, {\r\n	\"label\": \"江湖应用\",\r\n	\"list\": [{\r\n		\"title\": \"江湖JS\",\r\n		\"path\": \"/page/article/10005\"\r\n	}, {\r\n		\"title\": \"旋风内容管理\",\r\n		\"path\": \"/page/article/10075\"\r\n	}]\r\n}, {\r\n	\"label\": \"社区\",\r\n	\"list\": [{\r\n		\"title\": \"CNode 社区\",\r\n		\"path\": \"https://cnodejs.org/\"\r\n	}, {\r\n		\"title\": \"论坛\",\r\n		\"path\": \"\"\r\n	}, {\r\n		\"title\": \"提交反馈\",\r\n		\"path\": \"\"\r\n	}, {\r\n		\"title\": \"发布日志\",\r\n		\"path\": \"\"\r\n	}]\r\n}, {\r\n	\"label\": \"参与讨论\",\r\n	\"img\": \"二维码链接\"\r\n}]', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant_ui` (`id`, `constantKey`, `constantType`, `pageId`, `desc`, `en`, `zh`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (13, 'footer', 'object', 'all', '', '{ \"copyright\": \"Copyright © 2022 openjianghu.org\" }', '{ \"copyright\": \"Copyright © 2022 cn.openjianghu.org\" }', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant_ui` (`id`, `constantKey`, `constantType`, `pageId`, `desc`, `en`, `zh`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (20, 'article', 'object', 'article', NULL, '{\"comment\": {\"isOpen\": false}}', '{\"comment\": {\"isOpen\": true}}', 'insert', NULL, NULL, NULL);
INSERT INTO `_constant_ui` (`id`, `constantKey`, `constantType`, `pageId`, `desc`, `en`, `zh`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (21, 'errorInfo', 'object', 'home', '错误信息', '{\"title\": \"Error\", \"contentEnum\": { \"article_not_found\": \"Article not found\" } }', '{\"title\": \"错误\", \"contentEnum\": { \"article_not_found\": \"文章找不到\" } }', 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _file
-- ----------------------------
DROP TABLE IF EXISTS `_file`;
CREATE TABLE `_file` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fileId` varchar(255) DEFAULT NULL COMMENT 'fileId',
  `fileDirectory` varchar(255) DEFAULT NULL COMMENT '文件保存路径;',
  `filename` varchar(255) DEFAULT NULL COMMENT '文件名;',
  `filenameStorage` varchar(255) DEFAULT NULL COMMENT '文件保存名',
  `downloadPath` varchar(255) DEFAULT NULL COMMENT '文件下载路径',
  `fileType` varchar(255) DEFAULT NULL COMMENT '文件类型;(预留字段)',
  `fileDesc` varchar(255) DEFAULT NULL COMMENT '文件描述',
  `binarySize` varchar(255) DEFAULT NULL COMMENT '文件二进制大小',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `fileId_index` (`fileId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=132 DEFAULT CHARSET=utf8mb4 COMMENT='文件表; 软删除未启用;';

-- ----------------------------
-- Records of _file
-- ----------------------------
BEGIN;
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (12, '1649252929341_746602', '/material/audio/', '1.mp3', '1649252929341_746602_1.mp3', '//material/audio//1649252929341_746602_1.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:48:49+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (13, '1649252954237_667151', '/material/audio/', '2.mp4', '2.mp4', '//material/audio//2.mp4', NULL, NULL, '3.40MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:49:14+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (14, '1649253102779_261969', '/material/audio/', '圣经.png', '圣经.png', '//material/audio//圣经.png', NULL, NULL, '4.05KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:51:42+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (15, '1649253104878_933455', '/material/audio/', '数据库.png', '数据库.png', '//material/audio//数据库.png', NULL, NULL, '5.11KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:51:44+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (16, '1649253106624_418323', '/material/audio/', '学校.png', '学校.png', '//material/audio//学校.png', NULL, NULL, '5.40KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:51:46+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (17, '1649253108808_969252', '/material/audio/', 'avatar.png', 'avatar.png', '//material/audio//avatar.png', NULL, NULL, '6.19KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:51:48+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (18, '1649253189828_628760', '/material/audio/', '恒星5.0.11.apk', '恒星5.0.11.apk', '//material/audio//恒星5.0.11.apk', NULL, NULL, '24.01MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:53:09+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (19, '1649253321900_881225', '/material/audio/', '1.mp3', '1.mp3', '//material/audio//1.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:55:21+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (20, '1649253567830_642905', '/material/audio/', '0002.mp3', '0002.mp3', '//material/audio//0002.mp3', NULL, NULL, '15.44MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T21:59:27+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (21, '1649253683198_406541', '/material/audio/', '0005.mp4', '0005.mp4', '//material/audio//0005.mp4', NULL, NULL, '76.00MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:01:23+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (22, '1649253770117_256720', '/material/audio/', '0001.mp3', '0001.mp3', '//material/audio//0001.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:02:50+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (23, '1649253773739_568964', '/material/audio/', '0002.mp3', '0002.mp3', '//material/audio//0002.mp3', NULL, NULL, '15.44MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:02:53+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (24, '1649253775987_640948', '/material/audio/', '0003.mp4', '0003.mp4', '//material/audio//0003.mp4', NULL, NULL, '1.39MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:02:55+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (25, '1649253778706_292956', '/material/audio/', '0004.mp4', '0004.mp4', '//material/audio//0004.mp4', NULL, NULL, '3.40MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:02:58+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (26, '1649253790942_315276', '/material/audio/', '0005.mp4', '0005.mp4', '//material/audio//0005.mp4', NULL, NULL, '76.00MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:03:11+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (27, '1649253795628_804284', '/material/audio/', '1001.png', '1001.png', '//material/audio//1001.png', NULL, NULL, '265.51KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:03:15+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (28, '1649253799600_874309', '/material/audio/', '1002.png', '1002.png', '//material/audio//1002.png', NULL, NULL, '56.01KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:03:19+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (29, '1649253803470_282260', '/material/audio/', '1003.png', '1003.png', '//material/audio//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:03:23+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (30, '1649253807398_637089', '/material/audio/', '1004.png', '1004.png', '//material/audio//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:03:27+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (31, '1649253812454_371500', '/material/audio/', '1005.png', '1005.png', '//material/audio//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:03:32+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (32, '1649253817152_226425', '/material/audio/', '1006.png', '1006.png', '//material/audio//1006.png', NULL, NULL, '649.76KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:03:37+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (33, '1649253843267_811027', '/material/audio/', '0005.mp4', '0005.mp4', '//material/audio//0005.mp4', NULL, NULL, '76.00MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:04:03+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (34, '1649256282013_521335', '/materialRepo/_recycle/', '0004.mp4', '0004.mp4', '//materialRepo/_recycle//0004.mp4', NULL, NULL, '3.40MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:44:42+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (35, '1649256347259_569061', '/materialRepo/_recycle/', '0005.mp4', '0005.mp4', '//materialRepo/_recycle//0005.mp4', NULL, NULL, '76.00MB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T22:45:47+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (36, '1649259126452_736900', '/materialRepo/image/', '1001.png', '1001.png', '//materialRepo/image//1001.png', NULL, NULL, '265.51KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:32:06+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (37, '1649259128840_155704', '/materialRepo/image/', '1002.png', '1002.png', '//materialRepo/image//1002.png', NULL, NULL, '56.01KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:32:08+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (38, '1649259131490_706850', '/materialRepo/image/', '1003.png', '1003.png', '//materialRepo/image//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:32:11+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (39, '1649259134223_223102', '/materialRepo/image/', '1004.png', '1004.png', '//materialRepo/image//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:32:14+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (40, '1649259136823_766020', '/materialRepo/image/', '1005.png', '1005.png', '//materialRepo/image//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:32:16+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (41, '1649259139385_966079', '/materialRepo/image/', '1006.png', '1006.png', '//materialRepo/image//1006.png', NULL, NULL, '649.76KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:32:19+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (42, '1649260588980_629374', '/materialRepo/', '1006.png', '1006.png', '//materialRepo//1006.png', NULL, NULL, '649.76KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:56:28+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (43, '1649260601203_774938', '/materialRepo/image/', '1001.png', '1001.png', '//materialRepo/image//1001.png', NULL, NULL, '265.51KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:56:41+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (44, '1649260601583_463482', '/materialRepo/image/', '1002.png', '1002.png', '//materialRepo/image//1002.png', NULL, NULL, '56.01KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:56:41+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (45, '1649260602301_127242', '/materialRepo/image/', '1003.png', '1003.png', '//materialRepo/image//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:56:42+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (46, '1649260603052_629888', '/materialRepo/image/', '1004.png', '1004.png', '//materialRepo/image//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:56:43+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (47, '1649260603621_717111', '/materialRepo/image/', '1005.png', '1005.png', '//materialRepo/image//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:56:43+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (48, '1649260604216_141206', '/materialRepo/image/', '1006.png', '1006.png', '//materialRepo/image//1006.png', NULL, NULL, '649.76KB', 'jhInsert', 'admin', '武林盟主', '2022-04-06T23:56:44+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (49, '1649319674791_880794', '/materialRepo/image/', '1004.png', '1004.png', '//materialRepo/image//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T16:21:14+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (50, '1649333807021_908479', '/materialRepo/audio', '0001.mp3', '0001.mp3', '//materialRepo/audio/0001.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T20:16:47+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (51, '1649333811630_579352', '/materialRepo/audio', '0002.mp3', '0002.mp3', '//materialRepo/audio/0002.mp3', NULL, NULL, '15.44MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T20:16:51+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (52, '1649334263610_761036', '/materialRepo/image', 'SCR-20220404-la6.png', '1649334263610_761036_SCR-20220404-la6.png', '//materialRepo/image/1649334263610_761036_SCR-20220404-la6.png', NULL, NULL, '304.41KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T20:24:23+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (53, '1649334740146_317533', '/materialRepo/audio/10001/', '0001.mp3', '0001.mp3', '//materialRepo/audio/10001//0001.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T20:32:20+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (54, '1649335420799_769594', '/materialRepo/attachment/', '恒星5.0.11.apk', '恒星5.0.11.apk', '//materialRepo/attachment//恒星5.0.11.apk', NULL, NULL, '24.01MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T20:43:40+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (55, '1649336540061_114964', '/articleMaterial/100010', '圣经.png', '1649336540061_114964_圣经.png', '//articleMaterial/100010/1649336540061_114964_圣经.png', NULL, NULL, '4.05KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:02:20+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (56, '1649336633058_778196', '/articleMaterial/100010', '圣经.png', '1649336633058_778196_圣经.png', '//articleMaterial/100010/1649336633058_778196_圣经.png', NULL, NULL, '4.05KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:03:53+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (57, '1649336727809_498342', '/articleMaterial/100010', '0001.mp3', '1649336727809_498342_0001.mp3', '//articleMaterial/100010/1649336727809_498342_0001.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:05:27+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (58, '1649336735689_869559', '/articleMaterial/100010', '0004.mp4', '1649336735689_869559_0004.mp4', '//articleMaterial/100010/1649336735689_869559_0004.mp4', NULL, NULL, '3.40MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:05:35+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (59, '1649336746154_933938', '/articleMaterial/100010', '1003.png', '1649336746154_933938_1003.png', '//articleMaterial/100010/1649336746154_933938_1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:05:46+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (60, '1649337159025_254479', '/articleMaterial/100010', '1001.png', '1649337159025_254479_1001.png', '//articleMaterial/100010/1649337159025_254479_1001.png', NULL, NULL, '265.51KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:12:39+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (61, '1649337167478_435544', '/articleMaterial/100010', '0001.mp3', '1649337167478_435544_0001.mp3', '//articleMaterial/100010/1649337167478_435544_0001.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:12:47+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (62, '1649337234749_247847', '/articleMaterial/100010', '1004.png', '1649337234749_247847_1004.png', '//articleMaterial/100010/1649337234749_247847_1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:13:54+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (63, '1649337274746_150558', 'articleMaterial/100010', '1002.png', '1649337274746_150558_1002.png', '/articleMaterial/100010/1649337274746_150558_1002.png', NULL, NULL, '56.01KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:14:34+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (64, '1649337297939_881414', 'articleMaterial/100010', '0002.mp3', '1649337297939_881414_0002.mp3', '/articleMaterial/100010/1649337297939_881414_0002.mp3', NULL, NULL, '15.44MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:14:58+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (65, '1649337319177_864283', 'articleMaterial/100010', '0005.mp4', '1649337319177_864283_0005.mp4', '/articleMaterial/100010/1649337319177_864283_0005.mp4', NULL, NULL, '76.00MB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T21:15:19+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (66, '1649340713142_315915', '/materialRepo/image/10001/', '1001.png', '1001.png', '//materialRepo/image/10001//1001.png', NULL, NULL, '265.51KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:11:53+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (67, '1649340715836_764489', '/materialRepo/image/10001/', '1002.png', '1002.png', '//materialRepo/image/10001//1002.png', NULL, NULL, '56.01KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:11:55+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (68, '1649340719237_980048', '/materialRepo/image/10001/', '1003.png', '1003.png', '//materialRepo/image/10001//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:11:59+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (69, '1649340722255_770253', '/materialRepo/image/10001/', '1004.png', '1004.png', '//materialRepo/image/10001//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:12:02+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (70, '1649340724806_680778', '/materialRepo/image/10001/', '1005.png', '1005.png', '//materialRepo/image/10001//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:12:04+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (71, '1649340727997_252456', '/materialRepo/image/10001/', '1006.png', '1006.png', '//materialRepo/image/10001//1006.png', NULL, NULL, '649.76KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:12:08+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (72, '1649340806549_370270', '/materialRepo/image/10001/test/', '1003.png', '1003.png', '//materialRepo/image/10001/test//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:13:26+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (73, '1649340809953_281135', '/materialRepo/image/10001/test/', '1004.png', '1004.png', '//materialRepo/image/10001/test//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:13:29+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (74, '1649340812717_156336', '/materialRepo/image/10001/test/', '1005.png', '1005.png', '//materialRepo/image/10001/test//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'admin', '武林盟主', '2022-04-07T22:13:32+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (75, '1649409767101_138660', 'articleMaterial/100052', '0001.mp3', '1649409767101_138660_0001.mp3', '/articleMaterial/100052/1649409767101_138660_0001.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'admin', '武林盟主', '2022-04-08T17:22:47+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (76, '1649409772807_999233', 'articleMaterial/100052', '0003.mp4', '1649409772807_999233_0003.mp4', '/articleMaterial/100052/1649409772807_999233_0003.mp4', NULL, NULL, '1.39MB', 'jhInsert', 'admin', '武林盟主', '2022-04-08T17:22:52+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (77, '1649514048945_407214', '/materialRepo/attachment/', 'SCR-20220408-p2i.png', 'SCR-20220408-p2i.png', '//materialRepo/attachment//SCR-20220408-p2i.png', NULL, NULL, '5.38KB', 'jhInsert', 'admin', '武林盟主', '2022-04-09T22:20:48+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (78, '1649515352842_447458', '/materialRepo/attachment/', 'SCR-20220404-la6.png', 'SCR-20220404-la6.png', '//materialRepo/attachment//SCR-20220404-la6.png', NULL, NULL, '304.41KB', 'jhInsert', 'admin', '武林盟主', '2022-04-09T22:42:32+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (79, '1649517563612_497722', '/materialRepoaudio/', '1649401761557.mp4', '1649401761557.mp4', '//materialRepoaudio//1649401761557.mp4', NULL, NULL, '84.23MB', 'jhInsert', 'admin', '武林盟主', '2022-04-09T23:19:24+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (80, '1649517694113_464183', '/materialRepo/video/', '2020.10.11联考方法精讲-资料1上.mp4', '2020.10.11联考方法精讲-资料1上.mp4', '//materialRepo/video//2020.10.11联考方法精讲-资料1上.mp4', NULL, NULL, '82.52MB', 'jhInsert', 'admin', '武林盟主', '2022-04-09T23:21:34+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (81, '1649517758037_217352', '/materialRepoaudio/', '19｜全篇通读（下）：不是所有的文章和书籍都值得读完.m4a', '19｜全篇通读（下）：不是所有的文章和书籍都值得读完.m4a', '//materialRepoaudio//19｜全篇通读（下）：不是所有的文章和书籍都值得读完.m4a', NULL, NULL, '14.22MB', 'jhInsert', 'admin', '武林盟主', '2022-04-09T23:22:38+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (82, '1649517816446_904418', '/materialRepoaudio/', 'bamboo.mp3', 'bamboo.mp3', '//materialRepoaudio//bamboo.mp3', NULL, NULL, '601.90KB', 'jhInsert', 'admin', '武林盟主', '2022-04-09T23:23:36+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (83, '1649518289014_556300', '/materialRepo/audio/', 'bamboo.mp3', 'bamboo.mp3', '//materialRepo/audio//bamboo.mp3', NULL, NULL, '601.90KB', 'jhInsert', 'admin', '武林盟主', '2022-04-09T23:31:29+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (84, '1649679954569_818570', '/materialRepo/image/', '1001.png', '1001.png', '//materialRepo/image//1001.png', NULL, NULL, '265.51KB', 'jhInsert', 'm3611F', '刘计', '2022-04-11T20:25:54+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (85, '1649679976156_637655', '/materialRepo/video/', '0004.mp4', '0004.mp4', '//materialRepo/video//0004.mp4', NULL, NULL, '3.40MB', 'jhInsert', 'm3611F', '刘计', '2022-04-11T20:26:16+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (86, '1649686114654_674840', '/materialRepo/attachment/', 'app-arm64-v8a-dev-release.apk', 'app-arm64-v8a-dev-release.apk', '//materialRepo/attachment//app-arm64-v8a-dev-release.apk', NULL, NULL, '18.21MB', 'jhInsert', 'admin', '武林盟主', '2022-04-11T22:08:34+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (87, '1649749508542_701201', '/materialRepo/video/', '0004.mp4', '0004.mp4', '//materialRepo/video//0004.mp4', NULL, NULL, '3.40MB', 'jhInsert', 'm3611F', '刘计', '2022-04-12T15:45:08+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (88, '1649771851248_183502', '/materialRepo/attachment/123123/', '3.txt', '3.txt', '//materialRepo/attachment/123123//3.txt', NULL, NULL, '76.56KB', 'jhInsert', 'admin', '武林盟主', '2022-04-12T21:57:31+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (89, '1649774920577_196939', '/materialRepoimage/', 'pexels-francesco-ungaro-1525041.jpg', 'pexels-francesco-ungaro-1525041.jpg', '//materialRepoimage//pexels-francesco-ungaro-1525041.jpg', NULL, NULL, '4.95MB', 'jhInsert', 'admin', '武林盟主', '2022-04-12T22:48:40+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (90, '1649774944877_161545', '/materialRepoimage/', 'pexels-francesco-ungaro-1525041.jpg', 'pexels-francesco-ungaro-1525041.jpg', '//materialRepoimage//pexels-francesco-ungaro-1525041.jpg', NULL, NULL, '4.95MB', 'jhInsert', 'admin', '武林盟主', '2022-04-12T22:49:04+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (91, '1649775028135_932353', '/materialRepoimage/', 'pexels-francesco-ungaro-1525041.jpg', 'pexels-francesco-ungaro-1525041.jpg', '//materialRepoimage//pexels-francesco-ungaro-1525041.jpg', NULL, NULL, '4.95MB', 'jhInsert', 'admin', '武林盟主', '2022-04-12T22:50:28+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (92, '1649775085907_936691', '/materialRepoimage/', 'pexels-francesco-ungaro-1525041.jpg', 'pexels-francesco-ungaro-1525041.jpg', '//materialRepoimage//pexels-francesco-ungaro-1525041.jpg', NULL, NULL, '4.95MB', 'jhInsert', 'admin', '武林盟主', '2022-04-12T22:51:25+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (93, '1649851939767_598700', '/materialRepoimage/111/', '函数.png', '函数.png', '//materialRepoimage/111//函数.png', NULL, NULL, '4.40KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:12:19+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (94, '1649851942334_151810', '/materialRepoimage/111/', '圣经.png', '圣经.png', '//materialRepoimage/111//圣经.png', NULL, NULL, '4.05KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:12:22+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (95, '1649851946627_518082', '/materialRepoimage/111/', '数据库.png', '数据库.png', '//materialRepoimage/111//数据库.png', NULL, NULL, '5.11KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:12:26+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (96, '1649851986470_459773', '/materialRepo/image/', '函数.png', '函数.png', '//materialRepo/image//函数.png', NULL, NULL, '4.40KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:13:06+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (97, '1649851988545_277211', '/materialRepo/image/', '圣经.png', '圣经.png', '//materialRepo/image//圣经.png', NULL, NULL, '4.05KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:13:08+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (98, '1649851991072_112341', '/materialRepo/image/', '数据库.png', '数据库.png', '//materialRepo/image//数据库.png', NULL, NULL, '5.11KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:13:11+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (99, '1649851994437_621403', '/materialRepo/image/', '学校.png', '学校.png', '//materialRepo/image//学校.png', NULL, NULL, '5.40KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:13:14+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (100, '1649851997077_332966', '/materialRepo/image/', 'avatar.png', 'avatar.png', '//materialRepo/image//avatar.png', NULL, NULL, '6.19KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:13:17+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (101, '1649852758594_521845', '/materialRepo/video/', '0003.mp4', '0003.mp4', '//materialRepo/video//0003.mp4', NULL, NULL, '1.39MB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:25:58+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (102, '1649852763489_395133', '/materialRepo/video/', '0004.mp4', '0004.mp4', '//materialRepo/video//0004.mp4', NULL, NULL, '3.40MB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:26:03+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (103, '1649853116647_837772', '/materialRepovideo/', '1004.png', '1004.png', '//materialRepovideo//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:31:56+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (104, '1649853205827_993690', '/materialRepovideo/', '1004.png', '1004.png', '//materialRepovideo//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:33:25+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (105, '1649853244109_961239', '/materialRepovideo/', '1005.png', '1005.png', '//materialRepovideo//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:34:04+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (106, '1649853536791_537197', '/materialRepo/video/', '1006.png', '1006.png', '//materialRepo/video//1006.png', NULL, NULL, '649.76KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:38:56+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (107, '1649853556344_762958', '/materialRepo/video/222/', '0003.mp4', '0003.mp4', '//materialRepo/video/222//0003.mp4', NULL, NULL, '1.39MB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:39:16+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (108, '1649854106156_142650', '/materialRepo/image/', '1003.png', '1003.png', '//materialRepo/image//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:48:26+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (109, '1649854109677_121353', '/materialRepo/image/', '1004.png', '1004.png', '//materialRepo/image//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T20:48:29+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (110, '1649855617351_753664', '/materialRepo/', '0002.mp3', '0002.mp3', '//materialRepo//0002.mp3', NULL, NULL, '15.44MB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T21:13:37+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (111, '1649855634892_252718', '/materialRepo/video/', '0002.mp3', '0002.mp3', '//materialRepo/video//0002.mp3', NULL, NULL, '15.44MB', 'jhInsert', 'm3611F', '刘计', '2022-04-13T21:13:54+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (112, '1649909572589_955601', '/materialRepoimage/', '1002.png', '1002.png', '//materialRepoimage//1002.png', NULL, NULL, '56.01KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T12:12:52+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (113, '1649909574500_601979', '/materialRepoimage/', '1003.png', '1003.png', '//materialRepoimage//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T12:12:54+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (114, '1649909576431_878053', '/materialRepoimage/', '1004.png', '1004.png', '//materialRepoimage//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T12:12:56+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (115, '1649909578332_640964', '/materialRepoimage/', '1005.png', '1005.png', '//materialRepoimage//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T12:12:58+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (116, '1649932210038_686336', '/materialRepo/image/', 'biblestudy-Gen.png', 'biblestudy-Gen.png', '//materialRepo/image//biblestudy-Gen.png', NULL, NULL, '288.71KB', 'jhInsert', 'admin', '武林盟主', '2022-04-14T18:30:10+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (117, '1649945978798_735957', '/materialRepo/image/', '1003.png', '1003.png', '//materialRepo/image//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T22:19:38+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (118, '1649945983449_947888', '/materialRepo/image/', '1004.png', '1004.png', '//materialRepo/image//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T22:19:43+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (119, '1649945987661_359094', '/materialRepo/image/', '1005.png', '1005.png', '//materialRepo/image//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T22:19:47+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (120, '1649945992601_175371', '/materialRepo/image/', '1006.png', '1006.png', '//materialRepo/image//1006.png', NULL, NULL, '649.76KB', 'jhInsert', 'm3611F', '刘计', '2022-04-14T22:19:52+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (121, '1650168317971_553000', '/materialRepo/image/sermon/', 'sermon-2022-04-17.png', 'sermon-2022-04-17.png', '//materialRepo/image/sermon//sermon-2022-04-17.png', NULL, NULL, '614.78KB', 'jhInsert', '100002D', '王番JH', '2022-04-17T12:05:17+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (122, '1650168361271_424021', '/materialRepo/audio/Chinese/sermon/', '2022-04-17-2.mp3', '2022-04-17-2.mp3', '//materialRepo/audio/Chinese/sermon//2022-04-17-2.mp3', NULL, NULL, '24.09MB', 'jhInsert', '100002D', '王番JH', '2022-04-17T12:06:01+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (123, '1650212802862_496737', '/materialRepo/audio/Chinese/sermon/', '2022-04-17QA.mp3', '2022-04-17QA.mp3', '//materialRepo/audio/Chinese/sermon//2022-04-17QA.mp3', NULL, NULL, '15.94MB', 'jhInsert', '100002D', '王番JH', '2022-04-18T00:26:42+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (124, '1650413604356_410436', '/materialRepo/image/', '1004.png', '1004.png', '//materialRepo/image//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'm3611F', '刘计', '2022-04-20T08:13:24+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (125, '1650413701085_188597', '/materialRepo/image/', '1003.png', '1003.png', '//materialRepo/image//1003.png', NULL, NULL, '666.11KB', 'jhInsert', 'm3611F', '刘计', '2022-04-20T08:15:01+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (126, '1650413701677_827732', '/materialRepo/image/', '1004.png', '1004.png', '//materialRepo/image//1004.png', NULL, NULL, '381.66KB', 'jhInsert', 'm3611F', '刘计', '2022-04-20T08:15:01+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (127, '1650413702299_789587', '/materialRepo/image/', '1005.png', '1005.png', '//materialRepo/image//1005.png', NULL, NULL, '692.19KB', 'jhInsert', 'm3611F', '刘计', '2022-04-20T08:15:02+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (128, '1650414609273_497626', '/materialRepo/audio/', '0001.mp3', '0001.mp3', '//materialRepo/audio//0001.mp3', NULL, NULL, '4.94MB', 'jhInsert', 'm3611F', '刘计', '2022-04-20T08:30:09+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (129, '1650414610402_563252', '/materialRepo/audio/', '0002.mp3', '0002.mp3', '//materialRepo/audio//0002.mp3', NULL, NULL, '15.44MB', 'jhInsert', 'm3611F', '刘计', '2022-04-20T08:30:10+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (130, '1650415838958_279939', '/materialRepo/video/', '0005.mp4', '0005.mp4', '//materialRepo/video//0005.mp4', NULL, NULL, '76.00MB', 'jhInsert', 'm3611F', '刘计', '2022-04-20T08:50:39+08:00');
INSERT INTO `_file` (`id`, `fileId`, `fileDirectory`, `filename`, `filenameStorage`, `downloadPath`, `fileType`, `fileDesc`, `binarySize`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (131, '1650546233845_632106', '/materialRepo/image/', '1001.png', '1001.png', '//materialRepo/image//1001.png', NULL, NULL, '265.51KB', 'jhInsert', 'm3611F', '刘计', '2022-04-21T21:03:53+08:00');
COMMIT;

-- ----------------------------
-- Table structure for _group
-- ----------------------------
DROP TABLE IF EXISTS `_group`;
CREATE TABLE `_group` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `groupId` varchar(255) NOT NULL COMMENT 'groupId',
  `groupName` varchar(255) DEFAULT NULL COMMENT '群组名',
  `groupDesc` varchar(255) DEFAULT NULL COMMENT '群组描述',
  `groupAvatar` varchar(255) DEFAULT NULL COMMENT '群logo',
  `groupExtend` varchar(1024) DEFAULT '{}' COMMENT '拓展字段; { groupNotice: ''xx'' }',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `groupId_index` (`groupId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='群组表; 软删除未启用;';

-- ----------------------------
-- Records of _group
-- ----------------------------
BEGIN;
INSERT INTO `_group` (`id`, `groupId`, `groupName`, `groupDesc`, `groupAvatar`, `groupExtend`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1, 'adminGroup', '管理组', '管理组', NULL, '{}', 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _page
-- ----------------------------
DROP TABLE IF EXISTS `_page`;
CREATE TABLE `_page` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pageId` varchar(255) DEFAULT NULL COMMENT 'pageId',
  `pageName` varchar(255) DEFAULT NULL COMMENT 'page name',
  `pageType` varchar(255) DEFAULT NULL COMMENT '页面类型; showInMenu, dynamicInMenu',
  `sort` varchar(255) DEFAULT NULL,
  `pageHook` text COMMENT '{\n  "beforeHook":[\n  {"field": "doc", "service": "doc", "serviceFunc": "getDoc"}\n  ]\n}',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8mb4 COMMENT='页面表; 软删除未启用;';

-- ----------------------------
-- Records of _page
-- ----------------------------
BEGIN;
INSERT INTO `_page` (`id`, `pageId`, `pageName`, `pageType`, `sort`, `pageHook`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (2, 'help', '帮助', 'dynamicInMenu', '11', NULL, 'insert', NULL, NULL, NULL);
INSERT INTO `_page` (`id`, `pageId`, `pageName`, `pageType`, `sort`, `pageHook`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (3, 'login', '登录', '', '', '{\n  \"beforeHook\":[\r\n    {\"field\": \"constantUiMap\", \"service\": \"constantUi\", \"serviceFunc\": \"getConstantUiMap\"}\n  ]\n}', 'insert', NULL, NULL, NULL);
INSERT INTO `_page` (`id`, `pageId`, `pageName`, `pageType`, `sort`, `pageHook`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (6, 'manual', '操作手册', 'showInMenu', '0', NULL, 'insert', NULL, NULL, NULL);
INSERT INTO `_page` (`id`, `pageId`, `pageName`, `pageType`, `sort`, `pageHook`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (13, 'home', '首页', 'seo', '', '{\n  \"beforeHook\":[\r\n    {\"field\": \"constantUiMap\", \"service\": \"constantUi\", \"serviceFunc\": \"getConstantUiMap\"},\n		{\"field\": \"userInfo\", \"service\": \"user\", \"serviceFunc\": \"userInfo\"},\r\n    {\"field\": \"njk\", \"service\": \"njk\", \"serviceFunc\": \"test\"},\n		{\"field\": \"categoryList\", \"service\": \"article\", \"serviceFunc\": \"getCategoryListAndArticleList\"}\n  ]\n}', 'insert', NULL, NULL, NULL);
INSERT INTO `_page` (`id`, `pageId`, `pageName`, `pageType`, `sort`, `pageHook`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (14, 'article', '文章预览', 'seo', NULL, '{\n  \"beforeHook\":[\n    {\"field\": \"article\", \"service\": \"article\", \"serviceFunc\": \"getArticleAndFillArticles\"}\n  ]\n}', 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _record_history
-- ----------------------------
DROP TABLE IF EXISTS `_record_history`;
CREATE TABLE `_record_history` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `table` varchar(255) DEFAULT NULL COMMENT '表',
  `recordId` int(11) DEFAULT NULL COMMENT '数据在table中的主键id; recordContent.id',
  `recordContent` longtext COMMENT '数据JSON',
  `packageContent` longtext COMMENT '当时请求的 package JSON',
  `operation` varchar(255) DEFAULT NULL COMMENT '操作; jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId; recordContent.operationByUserId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名; recordContent.operationByUser',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; recordContent.operationAt; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `index_record_id` (`recordId`) USING BTREE,
  KEY `index_table_action` (`table`,`operation`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=2960 DEFAULT CHARSET=utf8mb4 COMMENT='数据历史表';

-- ----------------------------
-- Records of _record_history
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for _resource
-- ----------------------------
DROP TABLE IF EXISTS `_resource`;
CREATE TABLE `_resource` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `accessControlTable` varchar(255) DEFAULT NULL COMMENT '数据规则控制表',
  `resourceHook` text COMMENT '{ "before": [{"service": "xx", "serviceFunction": "xxx"}], "after": [] }',
  `pageId` varchar(255) DEFAULT NULL COMMENT 'page id; E.g: index',
  `actionId` varchar(255) DEFAULT NULL COMMENT 'action id; E.g: selectXXXByXXX',
  `desc` varchar(255) DEFAULT NULL COMMENT '描述',
  `resourceType` varchar(255) DEFAULT NULL COMMENT 'resource 类型; E.g: auth service sql',
  `appDataSchema` text COMMENT 'appData 参数校验',
  `resourceData` text COMMENT 'resource 数据; { "service": "auth", "serviceFunction": "passwordLogin" } or  { "table": "${tableName}", "action": "select", "whereCondition": ".where(function() {this.whereNot( { recordStatus: \\"active\\" })})" }',
  `requestDemo` text COMMENT '请求Demo',
  `responseDemo` text COMMENT '响应Demo',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=462 DEFAULT CHARSET=utf8mb4 COMMENT='请求资源表; 软删除未启用; resourceId=`${appId}.${pageId}.${actionId}`';

-- ----------------------------
-- Records of _resource
-- ----------------------------
BEGIN;
INSERT INTO `_resource` (`id`, `accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `requestDemo`, `responseDemo`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (231, NULL, NULL, 'login', 'passwordLogin', '✅登陆', 'service', '{}', '{ \"service\": \"user\", \"serviceFunction\": \"passwordLogin\" }', '', '', 'insert', NULL, NULL, NULL);
INSERT INTO `_resource` (`id`, `accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `requestDemo`, `responseDemo`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (251, NULL, NULL, 'allPage', 'logout', '✅登出', 'service', '{}', '{ \"service\": \"user\", \"serviceFunction\": \"logout\" }', '', '', 'insert', NULL, NULL, NULL);
INSERT INTO `_resource` (`id`, `accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `requestDemo`, `responseDemo`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (253, NULL, NULL, 'allPage', 'userInfo', '✅获取用户信息', 'service', '{}', '{ \"service\": \"user\", \"serviceFunction\": \"userInfo\" }', '', '', 'insert', NULL, NULL, NULL);
INSERT INTO `_resource` (`id`, `accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `requestDemo`, `responseDemo`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (254, NULL, NULL, 'allPage', 'resetPassword', '✅修改用户密码', 'service', '{}', '{ \"service\": \"user\", \"serviceFunction\": \"resetPassword\" }', '', '', 'insert', NULL, NULL, NULL);
INSERT INTO `_resource` (`id`, `accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `requestDemo`, `responseDemo`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (258, NULL, NULL, 'allPage', 'getConstantList', '✅查询常量', 'sql', '{}', '{ \"table\": \"_constant\", \"operation\": \"select\" }', '', '', 'insert', NULL, NULL, NULL);
INSERT INTO `_resource` (`id`, `accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `requestDemo`, `responseDemo`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (461, NULL, NULL, 'article', 'addComment', '✅文章页面', 'sql', '{}', '{ \"table\": \"comment\", \"operation\": \"jhInsert\" }', '', '', 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _resource_request_log
-- ----------------------------
DROP TABLE IF EXISTS `_resource_request_log`;
CREATE TABLE `_resource_request_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `resourceId` varchar(255) DEFAULT NULL COMMENT 'resource id;',
  `packageId` varchar(255) DEFAULT NULL COMMENT 'resource package id',
  `userIp` varchar(255) DEFAULT NULL COMMENT '用户ip;',
  `userAgent` varchar(255) DEFAULT NULL COMMENT '设备信息',
  `userId` varchar(255) DEFAULT NULL COMMENT '用户ID',
  `deviceId` varchar(255) DEFAULT NULL COMMENT '设备id',
  `userIpRegion` varchar(255) DEFAULT NULL COMMENT '用户Ip区域',
  `executeSql` varchar(255) DEFAULT NULL COMMENT '执行的sql',
  `requestBody` mediumtext COMMENT '请求body',
  `responseBody` mediumtext COMMENT '响应body',
  `responseStatus` varchar(255) DEFAULT NULL COMMENT '执行的结果;  success, fail',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `resourceId_index` (`resourceId`) USING BTREE,
  KEY `packageId_index` (`packageId`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='文件表; 软删除未启用;';

-- ----------------------------
-- Records of _resource_request_log
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for _role
-- ----------------------------
DROP TABLE IF EXISTS `_role`;
CREATE TABLE `_role` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `roleId` varchar(255) DEFAULT NULL COMMENT 'roleId',
  `roleName` varchar(255) DEFAULT NULL COMMENT 'role name',
  `roleDesc` varchar(255) DEFAULT NULL COMMENT 'role desc',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COMMENT='角色表; 软删除未启用;';

-- ----------------------------
-- Records of _role
-- ----------------------------
BEGIN;
INSERT INTO `_role` (`id`, `roleId`, `roleName`, `roleDesc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (3, 'appAdmin', '系统管理员', '', 'insert', NULL, NULL, NULL);
INSERT INTO `_role` (`id`, `roleId`, `roleName`, `roleDesc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (8, 'editor', '可编辑', NULL, 'insert', NULL, NULL, NULL);
INSERT INTO `_role` (`id`, `roleId`, `roleName`, `roleDesc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (9, 'viewer', '可查看', NULL, 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _test_case
-- ----------------------------
DROP TABLE IF EXISTS `_test_case`;
CREATE TABLE `_test_case` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pageId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '页面Id',
  `testId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '测试用例Id; 10000 ++',
  `testName` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '测试用例名',
  `uiActionIdList` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT 'uiAction列表; 一个测试用例对应多个uiActionId',
  `testOpeartion` text COLLATE utf8mb4_bin COMMENT '测试用例步骤;',
  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '操作; jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '操作者userId; recordContent.operationByUserId',
  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '操作者用户名; recordContent.operationByUser',
  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '操作时间; recordContent.operationAt; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='测试用例表';

-- ----------------------------
-- Records of _test_case
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for _ui
-- ----------------------------
DROP TABLE IF EXISTS `_ui`;
CREATE TABLE `_ui` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pageId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT 'page id; E.g: index',
  `uiActionType` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT 'ui 动作类型，如：fetchData, postData, changeUi',
  `uiActionId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT 'action id; E.g: selectXXXByXXX',
  `desc` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '描述',
  `uiActionConfig` text COLLATE utf8mb4_bin COMMENT 'ui 动作数据',
  `appDataSchema` text COLLATE utf8mb4_bin COMMENT 'ui 校验数据',
  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='ui 施工方案';

-- ----------------------------
-- Records of _ui
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for _user
-- ----------------------------
DROP TABLE IF EXISTS `_user`;
CREATE TABLE `_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idSequence` varchar(255) DEFAULT NULL,
  `userId` varchar(255) DEFAULT NULL COMMENT '用户id',
  `username` varchar(255) DEFAULT NULL COMMENT '用户名',
  `userAvatar` varchar(255) DEFAULT NULL COMMENT '用户头像',
  `contactNumber` varchar(255) DEFAULT NULL COMMENT '联系方式',
  `gender` varchar(255) DEFAULT 'male' COMMENT '性别; male, female',
  `birthday` varchar(255) DEFAULT NULL COMMENT '生日E.g: 2021-05-28T10:24:54+08:00 ',
  `signature` varchar(255) DEFAULT NULL COMMENT '签名',
  `email` varchar(255) DEFAULT NULL COMMENT '邮箱',
  `clearTextPassword` varchar(255) DEFAULT NULL COMMENT '初始明文密码',
  `password` varchar(255) DEFAULT NULL COMMENT 'password',
  `md5Salt` varchar(255) DEFAULT NULL COMMENT 'md5Salt',
  `userType` varchar(255) DEFAULT 'common' COMMENT '用户类型; common, xiaochengxu',
  `userStatus` varchar(255) DEFAULT 'active' COMMENT '用户类型; active, banned',
  `config` mediumtext COMMENT '置顶信息',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `userId_unique` (`userId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=179 DEFAULT CHARSET=utf8mb4 COMMENT='用户表;';

-- ----------------------------
-- Records of _user
-- ----------------------------
BEGIN;
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1, NULL, 'admin', '武林盟主', '/userAvatar/2022/4/4//1649055579149_130916_1.gif', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9525292c00d70aed4d9caf09bd6fad16', 'HsH0S8V-F-xX', 'common', 'active', NULL, 'jhUpdate', 'admin', '武林盟主', '2022-07-05T10:42:21+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (5, NULL, '100004Q', '伽勒', '/userAvatar/2022/4/8//1649422517016_792036_11.jpeg', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'jhUpdate', 'admin', '武林盟主', '2022-04-08T20:55:17+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (6, NULL, 'm3995Q', '雪园', '/userAvatar/2022/4/8//1649422517016_792036_11.jpeg', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'jhUpdate', 'admin', '武林盟主', '2022-04-08T20:55:17+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (7, NULL, 'm3862G', 'louis', '/userAvatar/2022/4/8//1649422517016_792036_11.jpeg', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'jhUpdate', 'm3862G', 'louis', '2022-05-05T19:47:16+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (9, NULL, 'm3662X', '张超', '/userAvatar/2022/4/8//1649422517016_792036_11.jpeg', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'jhUpdate', 'admin', '武林盟主', '2022-04-08T20:55:17+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (10, NULL, 'm3659N', '汗蒸', '/userAvatar/2022/4/8//1649422517016_792036_11.jpeg', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'jhUpdate', 'admin', '武林盟主', '2022-04-08T20:55:17+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (11, NULL, 'm3658K', '本善', '/userAvatar/2022/4/8//1649422517016_792036_11.jpeg', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'jhUpdate', 'admin', '武林盟主', '2022-04-08T20:55:17+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (12, NULL, 'm3611F', 'Colin', '/userAvatar/2022/4/8//1649422517016_792036_11.jpeg', '17177777001', 'male', '2022-04-15T00:00:00.000Z', 'FX啊水电费', '电饭锅回电话', '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'jhUpdate', 'm3611F', 'Colin', '2022-05-05T15:50:16+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (173, '26260000', '100005W', '安宁', NULL, NULL, 'male', NULL, NULL, NULL, '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'insert', 'admin', '武林盟主', '2022-04-28T17:03:01+08:00');
INSERT INTO `_user` (`id`, `idSequence`, `userId`, `username`, `userAvatar`, `contactNumber`, `gender`, `birthday`, `signature`, `email`, `clearTextPassword`, `password`, `md5Salt`, `userType`, `userStatus`, `config`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (174, '26260001', 'meilisearchW', 'meilisearch', NULL, NULL, 'male', NULL, NULL, NULL, '123456', '9d868aad4af212de6a26e39efbdd86ee', '4ThJGJbAPe5m', 'common', 'active', NULL, 'insert', 'm3611F', 'Colin', '2022-06-07T20:37:53+08:00');
COMMIT;

-- ----------------------------
-- Table structure for _user_group_role
-- ----------------------------
DROP TABLE IF EXISTS `_user_group_role`;
CREATE TABLE `_user_group_role` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userId` varchar(255) NOT NULL COMMENT '用户id',
  `groupId` varchar(255) NOT NULL COMMENT '群组Id',
  `roleId` varchar(255) DEFAULT NULL COMMENT '角色Id',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `groupId_index` (`groupId`) USING BTREE,
  KEY `userId_index` (`userId`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户群组角色关联表; 软删除未启用;';

-- ----------------------------
-- Records of _user_group_role
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for _user_group_role_page
-- ----------------------------
DROP TABLE IF EXISTS `_user_group_role_page`;
CREATE TABLE `_user_group_role_page` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user` varchar(255) DEFAULT NULL COMMENT 'userId 或者 通配符; 通配符: *',
  `group` varchar(255) DEFAULT NULL COMMENT 'groupId 或者 通配符; 通配符: *',
  `role` varchar(255) DEFAULT NULL COMMENT 'roleId 或者 通配符; 通配符: *',
  `page` varchar(255) DEFAULT NULL COMMENT 'pageId id',
  `allowOrDeny` varchar(255) DEFAULT NULL COMMENT '用户群组角色 匹配后 执行动作; allow、deny',
  `desc` varchar(255) DEFAULT NULL COMMENT '映射描述',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=61 DEFAULT CHARSET=utf8mb4 COMMENT='用户群组角色 - 页面 映射表; 软删除未启用;';

-- ----------------------------
-- Records of _user_group_role_page
-- ----------------------------
BEGIN;
INSERT INTO `_user_group_role_page` (`id`, `user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (53, '*', 'public', '*', 'help', 'allow', ' ', 'insert', NULL, NULL, NULL);
INSERT INTO `_user_group_role_page` (`id`, `user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (56, '*', 'public', '*', 'login', 'allow', ' ', 'insert', NULL, NULL, NULL);
INSERT INTO `_user_group_role_page` (`id`, `user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (57, '*', 'public', '*', 'home', 'allow', ' ', 'insert', NULL, NULL, NULL);
INSERT INTO `_user_group_role_page` (`id`, `user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (58, '*', 'public', '*', 'article', 'allow', ' ', 'insert', NULL, NULL, NULL);
INSERT INTO `_user_group_role_page` (`id`, `user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (59, '*', 'public', '*', 'manual', 'allow', ' ', 'insert', NULL, NULL, NULL);
INSERT INTO `_user_group_role_page` (`id`, `user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (60, 'admin,10000Q,m3995Q,m3862G,m3666K,m3662X,m3659N,m3658K,m3611F,100005W', '*', '*', '*', 'allow', '管理用户, 开放所有页面权限', 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _user_group_role_resource
-- ----------------------------
DROP TABLE IF EXISTS `_user_group_role_resource`;
CREATE TABLE `_user_group_role_resource` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user` varchar(255) DEFAULT NULL COMMENT 'userId 或者 通配符; 通配符: *',
  `group` varchar(255) DEFAULT NULL COMMENT 'groupId 或者 通配符; 通配符: *',
  `role` varchar(255) DEFAULT NULL COMMENT 'roleId 或者 通配符; 通配符: *',
  `resource` varchar(255) DEFAULT NULL COMMENT 'resourceId 或者 通配符; 通配符: *, !resourceId',
  `allowOrDeny` varchar(255) DEFAULT NULL COMMENT '用户群组角色 匹配后 执行动作; allow、deny',
  `desc` varchar(255) DEFAULT NULL COMMENT '映射描述',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=56 DEFAULT CHARSET=utf8mb4 COMMENT='用户群组角色 - 请求资源 映射表; 软删除未启用;';

-- ----------------------------
-- Records of _user_group_role_resource
-- ----------------------------
BEGIN;
INSERT INTO `_user_group_role_resource` (`id`, `user`, `group`, `role`, `resource`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (51, '*', 'public', '*', 'login.passwordLogin', 'allow', '登录resouce, 赋予给所有用户', 'insert', NULL, NULL, NULL);
INSERT INTO `_user_group_role_resource` (`id`, `user`, `group`, `role`, `resource`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (52, '*', 'login', '*', 'allPage.*', 'allow', 'allPage 相关接口, 赋予给所有登录用户', 'insert', NULL, NULL, NULL);
INSERT INTO `_user_group_role_resource` (`id`, `user`, `group`, `role`, `resource`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (55, 'admin,10000Q,m3995Q,m3862G,m3666K,m3662X,m3659N,m3658K,m3611F,100005W', '*', '*', '*', 'allow', '所有resource权限, 赋予给所有用户', 'insert', NULL, NULL, NULL);
COMMIT;

-- ----------------------------
-- Table structure for _user_session
-- ----------------------------
DROP TABLE IF EXISTS `_user_session`;
CREATE TABLE `_user_session` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userId` varchar(255) DEFAULT NULL COMMENT '用户id',
  `userIp` varchar(255) DEFAULT NULL COMMENT '用户ip',
  `userAgent` varchar(255) DEFAULT NULL COMMENT '请求的 agent',
  `deviceId` varchar(255) DEFAULT NULL COMMENT '设备id',
  `deviceType` varchar(255) DEFAULT NULL COMMENT '设备类型',
  `userIpRegion` varchar(255) DEFAULT NULL,
  `socketStatus` varchar(255) NOT NULL DEFAULT 'offline' COMMENT 'socket状态',
  `authToken` varchar(2048) DEFAULT NULL COMMENT 'auth token',
  `refreshToken` varchar(2048) DEFAULT NULL COMMENT 'refresh token',
  `operation` varchar(255) DEFAULT 'insert' COMMENT '操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) DEFAULT NULL COMMENT '操作者userId',
  `operationByUser` varchar(255) DEFAULT NULL COMMENT '操作者用户名',
  `operationAt` varchar(255) DEFAULT NULL COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00 ',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `userId_index` (`userId`) USING BTREE,
  KEY `userId_deviceId_unique` (`userId`,`deviceId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=97 DEFAULT CHARSET=utf8mb4 COMMENT='用户session表; deviceId 维度;软删除未启用;';

-- ----------------------------
-- Records of _user_session
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for article
-- ----------------------------
DROP TABLE IF EXISTS `article`;
CREATE TABLE `article` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `articleId` bigint(20) DEFAULT NULL COMMENT '文章id, 10000 ++',
  `categoryId` varchar(255) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '分类id',
  `articleGroupName` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '文章所属分组名',
  `articleTagList` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci COMMENT '标签; 用, 拼接',
  `articlePublishStatus` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '文章类型(状态)：public, login, draft, deleted',
  `articlePublishTime` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT '文章发布时间',
  `articleTitle` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT '标题',
  `articleCoverImage` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT '封面',
  `articleContent` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci COMMENT '编辑的内容',
  `articleContentForSeo` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci COMMENT 'HTML 用于渲染',
  `articleAssignmentList` text COMMENT '文章作业 [{ }]',
  `articleAssignmentListWithAnswer` text COMMENT '文章作业答案 [{ }]',
  `articleAudioUrl` varchar(1023) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT '默认音频URL唯一的',
  `articleVideoUrl` varchar(1023) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '默认视频URL',
  `articleCreateTime` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT '创建时间',
  `articleCreateUserId` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '创建者用户ID',
  `articleCreateUsername` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '创建者用户名',
  `articleUpdateTime` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '更新时间',
  `articleUpdateUserId` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '更新者用户ID',
  `articleUpdateUsername` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '更新者用户名',
  `operation` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '操作: insert, update, jhInsert, jhUpdate, jhDelete jhRestore',
  `operationByUserId` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '操作者userId',
  `operationByUser` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '操作者用户名',
  `operationAt` varchar(255) CHARACTER SET utf8mb4 DEFAULT '' COMMENT '操作时间; E.g: 2021-05-28T10:24:54+08:00',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `article_unique` (`articleId`) USING BTREE,
  KEY `categoryId_index` (`categoryId`) USING BTREE,
  KEY `articlePublishTime` (`articlePublishTime`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=1572 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of article
-- ----------------------------
BEGIN;
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1414, 10000, '10000', '测试组', '测试分类', 'public', '2022-04-20T00:00:00+08:00', '快速入门', NULL, '## 江湖JS的愿景？\n\n> 小白也容易学习的企业级的框架\n\n## 帮助小白，系统学习企业应用开发的整体框架\n\n* 先从整体框架入手，便于小白学习\n* 先入门，基本概念清楚了，需要其他的工具就可以自行探索了\n\n## 构建能够开发系统的最短学习路径\n\n* 用到的学，不用的先放一放\n* 学制要缩短，教育要革命\n\n## 应用协议统一，不同通讯通道无缝切换\n\n* 长连接，短连接\n* http, websocket, ftp, ...\n* 自主可扩展\n\n## 适合企业的登录与权限模型\n\n* 用户，组织，角色，符合企业实际尝试的三种维度，在权限配置灵活使用\n\n## 数据库配置驱动程序，接口自动生成\n\n## 江湖代码生成器，页面自动生成\n\n## 接口与页面权限，通过数据库配置，快速实现\n\n## 数据访问权限，通过数据库配置，快速实现\n\n## 数据历史，每条数据的每一个版本进行存档\n\n## 应用间物理级的隔离与解耦\n\n## 基于江湖JS的生态体系，开箱即用的江湖应用\n\n', '<h2 id=\"h2-u6C5Fu6E56jsu7684u613Fu666FuFF1F\"><a class=\"reference-link\" name=\"江湖JS的愿景？\"></a><span class=\"header-link octicon octicon-link\"></span>江湖JS的愿景？</h2><blockquote class=\"default\">\n<p>小白也容易学习的企业级的框架</p>\n</blockquote>\n<h2 id=\"h2-u5E2Eu52A9u5C0Fu767DuFF0Cu7CFBu7EDFu5B66u4E60u4F01u4E1Au5E94u7528u5F00u53D1u7684u6574u4F53u6846u67B6\"><a class=\"reference-link\" name=\"帮助小白，系统学习企业应用开发的整体框架\"></a><span class=\"header-link octicon octicon-link\"></span>帮助小白，系统学习企业应用开发的整体框架</h2><ul>\n<li>先从整体框架入手，便于小白学习</li><li>先入门，基本概念清楚了，需要其他的工具就可以自行探索了</li></ul>\n<h2 id=\"h2-u6784u5EFAu80FDu591Fu5F00u53D1u7CFBu7EDFu7684u6700u77EDu5B66u4E60u8DEFu5F84\"><a class=\"reference-link\" name=\"构建能够开发系统的最短学习路径\"></a><span class=\"header-link octicon octicon-link\"></span>构建能够开发系统的最短学习路径</h2><ul>\n<li>用到的学，不用的先放一放</li><li>学制要缩短，教育要革命</li></ul>\n<h2 id=\"h2-u5E94u7528u534Fu8BAEu7EDFu4E00uFF0Cu4E0Du540Cu901Au8BAFu901Au9053u65E0u7F1Du5207u6362\"><a class=\"reference-link\" name=\"应用协议统一，不同通讯通道无缝切换\"></a><span class=\"header-link octicon octicon-link\"></span>应用协议统一，不同通讯通道无缝切换</h2><ul>\n<li>长连接，短连接</li><li>http, websocket, ftp, …</li><li>自主可扩展</li></ul>\n<h2 id=\"h2-u9002u5408u4F01u4E1Au7684u767Bu5F55u4E0Eu6743u9650u6A21u578B\"><a class=\"reference-link\" name=\"适合企业的登录与权限模型\"></a><span class=\"header-link octicon octicon-link\"></span>适合企业的登录与权限模型</h2><ul>\n<li>用户，组织，角色，符合企业实际尝试的三种维度，在权限配置灵活使用</li></ul>\n<h2 id=\"h2-u6570u636Eu5E93u914Du7F6Eu9A71u52A8u7A0Bu5E8FuFF0Cu63A5u53E3u81EAu52A8u751Fu6210\"><a class=\"reference-link\" name=\"数据库配置驱动程序，接口自动生成\"></a><span class=\"header-link octicon octicon-link\"></span>数据库配置驱动程序，接口自动生成</h2><h2 id=\"h2-u6C5Fu6E56u4EE3u7801u751Fu6210u5668uFF0Cu9875u9762u81EAu52A8u751Fu6210\"><a class=\"reference-link\" name=\"江湖代码生成器，页面自动生成\"></a><span class=\"header-link octicon octicon-link\"></span>江湖代码生成器，页面自动生成</h2><h2 id=\"h2-u63A5u53E3u4E0Eu9875u9762u6743u9650uFF0Cu901Au8FC7u6570u636Eu5E93u914Du7F6EuFF0Cu5FEBu901Fu5B9Eu73B0\"><a class=\"reference-link\" name=\"接口与页面权限，通过数据库配置，快速实现\"></a><span class=\"header-link octicon octicon-link\"></span>接口与页面权限，通过数据库配置，快速实现</h2><h2 id=\"h2-u6570u636Eu8BBFu95EEu6743u9650uFF0Cu901Au8FC7u6570u636Eu5E93u914Du7F6EuFF0Cu5FEBu901Fu5B9Eu73B0\"><a class=\"reference-link\" name=\"数据访问权限，通过数据库配置，快速实现\"></a><span class=\"header-link octicon octicon-link\"></span>数据访问权限，通过数据库配置，快速实现</h2><h2 id=\"h2-u6570u636Eu5386u53F2uFF0Cu6BCFu6761u6570u636Eu7684u6BCFu4E00u4E2Au7248u672Cu8FDBu884Cu5B58u6863\"><a class=\"reference-link\" name=\"数据历史，每条数据的每一个版本进行存档\"></a><span class=\"header-link octicon octicon-link\"></span>数据历史，每条数据的每一个版本进行存档</h2><h2 id=\"h2-u5E94u7528u95F4u7269u7406u7EA7u7684u9694u79BBu4E0Eu89E3u8026\"><a class=\"reference-link\" name=\"应用间物理级的隔离与解耦\"></a><span class=\"header-link octicon octicon-link\"></span>应用间物理级的隔离与解耦</h2><h2 id=\"h2-u57FAu4E8Eu6C5Fu6E56jsu7684u751Fu6001u4F53u7CFBuFF0Cu5F00u7BB1u5373u7528u7684u6C5Fu6E56u5E94u7528\"><a class=\"reference-link\" name=\"基于江湖JS的生态体系，开箱即用的江湖应用\"></a><span class=\"header-link octicon octicon-link\"></span>基于江湖JS的生态体系，开箱即用的江湖应用</h2>', NULL, NULL, NULL, '', '2022-04-21T21:03:42+08:00', 'm3611F', '刘计', '2022-04-23T13:35:07+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-23T13:35:07+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1415, 10001, '10000', '测试组', '测试分类', 'public', '2022-04-20T00:00:00+08:00', '测试分类01-文章02', NULL, '## 1\n\n## 2\n\n## 3\n\n> 1111', '<h2 id=\"h2-1\"><a class=\"reference-link\" name=\"1\"></a><span class=\"header-link octicon octicon-link\"></span>1</h2><h2 id=\"h2-2\"><a class=\"reference-link\" name=\"2\"></a><span class=\"header-link octicon octicon-link\"></span>2</h2><h2 id=\"h2-3\"><a class=\"reference-link\" name=\"3\"></a><span class=\"header-link octicon octicon-link\"></span>3</h2><blockquote class=\"default\">\n<p>1111</p>\n</blockquote>\n', NULL, NULL, NULL, '', '2022-04-21T21:03:42+08:00', 'm3611F', '刘计', '2022-04-21T21:05:55+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-21T21:05:55+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1416, 10002, '10000', '', '测试分类', 'public', '2022-04-20T00:00:00+08:00', '测试分类01-文章03', NULL, '## 1\n\n## 2\n\n## 3\n\n> 1111', '<h2 id=\"h2-1\"><a class=\"reference-link\" name=\"1\"></a><span class=\"header-link octicon octicon-link\"></span>1</h2><h2 id=\"h2-2\"><a class=\"reference-link\" name=\"2\"></a><span class=\"header-link octicon octicon-link\"></span>2</h2><h2 id=\"h2-3\"><a class=\"reference-link\" name=\"3\"></a><span class=\"header-link octicon octicon-link\"></span>3</h2><blockquote class=\"default\">\n<p>1111</p>\n</blockquote>\n', NULL, NULL, NULL, '', '2022-04-21T21:03:42+08:00', 'm3611F', '刘计', '2022-04-21T21:05:55+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-21T21:05:55+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1417, 10003, '10000', '', '分类测试01-文章04', 'public', '2022-04-22T14:00:05+08:00', '江湖JS白皮书', NULL, '江湖JS的愿景？\n--------\n \n> 小白也容易学习的企业级的框架\n \n帮助小白，系统学习企业应用开发的整体框架\n--------------------\n \n*   先从整体框架入手，便于小白学习\n    \n*   先入门，基本概念清楚了，需要其他的工具就可以自行探索了\n    \n \n构建能够开发系统的最短学习路径\n---------------\n \n*   用到的学，不用的先放一放\n    \n*   学制要缩短，教育要革命\n    \n \n应用协议统一，不同通讯通道无缝切换\n-----------------\n \n*   长连接，短连接\n    \n*   http, websocket, ftp, …\n    \n*   自主可扩展\n    \n \n适合企业的登录与权限模型\n------------\n \n*   用户，组织，角色，符合企业实际尝试的三种维度，在权限配置灵活使用\n    \n \n数据库配置驱动程序，接口自动生成\n----------------\n \n江湖代码生成器，页面自动生成\n--------------\n \n接口与页面权限，通过数据库配置，快速实现\n--------------------\n \n数据访问权限，通过数据库配置，快速实现\n-------------------\n \n数据历史，每条数据的每一个版本进行存档\n-------------------\n \n应用间物理级的隔离与解耦\n------------\n \n基于江湖JS的生态体系，开箱即用的江湖应用\n---------------------\n', '<h2 id=\"h2-u6C5Fu6E56jsu7684u613Fu666FuFF1F\"><a class=\"reference-link\" name=\"江湖JS的愿景？\"></a><span class=\"header-link octicon octicon-link\"></span>江湖JS的愿景？</h2><blockquote class=\"default\">\n<p>小白也容易学习的企业级的框架</p>\n</blockquote>\n<h2 id=\"h2-u5E2Eu52A9u5C0Fu767DuFF0Cu7CFBu7EDFu5B66u4E60u4F01u4E1Au5E94u7528u5F00u53D1u7684u6574u4F53u6846u67B6\"><a class=\"reference-link\" name=\"帮助小白，系统学习企业应用开发的整体框架\"></a><span class=\"header-link octicon octicon-link\"></span>帮助小白，系统学习企业应用开发的整体框架</h2><ul>\n<li>先从整体框架入手，便于小白学习</li><li>  先入门，基本概念清楚了，需要其他的工具就可以自行探索了</li></ul>\n<h2 id=\"h2-u6784u5EFAu80FDu591Fu5F00u53D1u7CFBu7EDFu7684u6700u77EDu5B66u4E60u8DEFu5F84\"><a class=\"reference-link\" name=\"构建能够开发系统的最短学习路径\"></a><span class=\"header-link octicon octicon-link\"></span>构建能够开发系统的最短学习路径</h2><ul>\n<li>用到的学，不用的先放一放</li><li>  学制要缩短，教育要革命</li></ul>\n<h2 id=\"h2-u5E94u7528u534Fu8BAEu7EDFu4E00uFF0Cu4E0Du540Cu901Au8BAFu901Au9053u65E0u7F1Du5207u6362\"><a class=\"reference-link\" name=\"应用协议统一，不同通讯通道无缝切换\"></a><span class=\"header-link octicon octicon-link\"></span>应用协议统一，不同通讯通道无缝切换</h2><ul>\n<li>长连接，短连接</li><li>http, websocket, ftp, …</li><li>  自主可扩展</li></ul>\n<h2 id=\"h2-u9002u5408u4F01u4E1Au7684u767Bu5F55u4E0Eu6743u9650u6A21u578B\"><a class=\"reference-link\" name=\"适合企业的登录与权限模型\"></a><span class=\"header-link octicon octicon-link\"></span>适合企业的登录与权限模型</h2><ul>\n<li>  用户，组织，角色，符合企业实际尝试的三种维度，在权限配置灵活使用</li></ul>\n<h2 id=\"h2-u6570u636Eu5E93u914Du7F6Eu9A71u52A8u7A0Bu5E8FuFF0Cu63A5u53E3u81EAu52A8u751Fu6210\"><a class=\"reference-link\" name=\"数据库配置驱动程序，接口自动生成\"></a><span class=\"header-link octicon octicon-link\"></span>数据库配置驱动程序，接口自动生成</h2><h2 id=\"h2-u6C5Fu6E56u4EE3u7801u751Fu6210u5668uFF0Cu9875u9762u81EAu52A8u751Fu6210\"><a class=\"reference-link\" name=\"江湖代码生成器，页面自动生成\"></a><span class=\"header-link octicon octicon-link\"></span>江湖代码生成器，页面自动生成</h2><h2 id=\"h2-u63A5u53E3u4E0Eu9875u9762u6743u9650uFF0Cu901Au8FC7u6570u636Eu5E93u914Du7F6EuFF0Cu5FEBu901Fu5B9Eu73B0\"><a class=\"reference-link\" name=\"接口与页面权限，通过数据库配置，快速实现\"></a><span class=\"header-link octicon octicon-link\"></span>接口与页面权限，通过数据库配置，快速实现</h2><h2 id=\"h2-u6570u636Eu8BBFu95EEu6743u9650uFF0Cu901Au8FC7u6570u636Eu5E93u914Du7F6EuFF0Cu5FEBu901Fu5B9Eu73B0\"><a class=\"reference-link\" name=\"数据访问权限，通过数据库配置，快速实现\"></a><span class=\"header-link octicon octicon-link\"></span>数据访问权限，通过数据库配置，快速实现</h2><h2 id=\"h2-u6570u636Eu5386u53F2uFF0Cu6BCFu6761u6570u636Eu7684u6BCFu4E00u4E2Au7248u672Cu8FDBu884Cu5B58u6863\"><a class=\"reference-link\" name=\"数据历史，每条数据的每一个版本进行存档\"></a><span class=\"header-link octicon octicon-link\"></span>数据历史，每条数据的每一个版本进行存档</h2><h2 id=\"h2-u5E94u7528u95F4u7269u7406u7EA7u7684u9694u79BBu4E0Eu89E3u8026\"><a class=\"reference-link\" name=\"应用间物理级的隔离与解耦\"></a><span class=\"header-link octicon octicon-link\"></span>应用间物理级的隔离与解耦</h2><h2 id=\"h2-u57FAu4E8Eu6C5Fu6E56jsu7684u751Fu6001u4F53u7CFBuFF0Cu5F00u7BB1u5373u7528u7684u6C5Fu6E56u5E94u7528\"><a class=\"reference-link\" name=\"基于江湖JS的生态体系，开箱即用的江湖应用\"></a><span class=\"header-link octicon octicon-link\"></span>基于江湖JS的生态体系，开箱即用的江湖应用</h2>', NULL, NULL, NULL, '', '2022-04-22T14:00:05+08:00', 'm3611F', '刘计', '2022-04-22T22:36:19+08:00', 'W00001', '张三丰', 'jhUpdate', 'W00001', '张三丰', '2022-04-22T22:36:19+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1418, 10004, '10004', '01新手指南', '', 'public', '2022-04-23T13:39:26+08:00', '江湖JS白皮书', NULL, '## 江湖JS的愿景？\n\n> 小白也容易学习的企业级的框架\n> 框架界的五菱宏光\n\n## 帮助小白，系统学习企业应用开发的整体框架\n\n* 先从整体框架入手，便于小白学习\n* 先入门，基本概念清楚了，需要其他的工具就可以自行探索了\n\n## 构建能够开发系统的最短学习路径\n\n* 用到的学，不用的先放一放\n* 学制要缩短，教育要革命\n\n## 应用协议统一，不同通讯通道无缝切换\n\n* 长连接，短连接\n* http, websocket, ftp, ...\n* 自主可扩展\n\n## 适合企业的登录与权限模型\n\n* 用户，组织，角色，符合企业实际尝试的三种维度，在权限配置灵活使用\n\n## 数据库配置驱动程序，接口自动生成\n\n## 江湖代码生成器，页面自动生成\n\n## 接口与页面权限，通过数据库配置，快速实现\n\n## 数据访问权限，通过数据库配置，快速实现\n\n## 数据历史，每条数据的每一个版本进行存档\n\n## 应用间物理级的隔离与解耦\n\n## 基于江湖JS的生态体系，开箱即用的江湖应用\n\n', '<h2 id=\"h2-u6C5Fu6E56jsu7684u613Fu666FuFF1F\"><a class=\"reference-link\" name=\"江湖JS的愿景？\"></a><span class=\"header-link octicon octicon-link\"></span>江湖JS的愿景？</h2><blockquote class=\"default\">\n<p>小白也容易学习的企业级的框架<br>框架界的五菱宏光</p>\n</blockquote>\n<h2 id=\"h2-u5E2Eu52A9u5C0Fu767DuFF0Cu7CFBu7EDFu5B66u4E60u4F01u4E1Au5E94u7528u5F00u53D1u7684u6574u4F53u6846u67B6\"><a class=\"reference-link\" name=\"帮助小白，系统学习企业应用开发的整体框架\"></a><span class=\"header-link octicon octicon-link\"></span>帮助小白，系统学习企业应用开发的整体框架</h2><ul>\n<li>先从整体框架入手，便于小白学习</li><li>先入门，基本概念清楚了，需要其他的工具就可以自行探索了</li></ul>\n<h2 id=\"h2-u6784u5EFAu80FDu591Fu5F00u53D1u7CFBu7EDFu7684u6700u77EDu5B66u4E60u8DEFu5F84\"><a class=\"reference-link\" name=\"构建能够开发系统的最短学习路径\"></a><span class=\"header-link octicon octicon-link\"></span>构建能够开发系统的最短学习路径</h2><ul>\n<li>用到的学，不用的先放一放</li><li>学制要缩短，教育要革命</li></ul>\n<h2 id=\"h2-u5E94u7528u534Fu8BAEu7EDFu4E00uFF0Cu4E0Du540Cu901Au8BAFu901Au9053u65E0u7F1Du5207u6362\"><a class=\"reference-link\" name=\"应用协议统一，不同通讯通道无缝切换\"></a><span class=\"header-link octicon octicon-link\"></span>应用协议统一，不同通讯通道无缝切换</h2><ul>\n<li>长连接，短连接</li><li>http, websocket, ftp, …</li><li>自主可扩展</li></ul>\n<h2 id=\"h2-u9002u5408u4F01u4E1Au7684u767Bu5F55u4E0Eu6743u9650u6A21u578B\"><a class=\"reference-link\" name=\"适合企业的登录与权限模型\"></a><span class=\"header-link octicon octicon-link\"></span>适合企业的登录与权限模型</h2><ul>\n<li>用户，组织，角色，符合企业实际尝试的三种维度，在权限配置灵活使用</li></ul>\n<h2 id=\"h2-u6570u636Eu5E93u914Du7F6Eu9A71u52A8u7A0Bu5E8FuFF0Cu63A5u53E3u81EAu52A8u751Fu6210\"><a class=\"reference-link\" name=\"数据库配置驱动程序，接口自动生成\"></a><span class=\"header-link octicon octicon-link\"></span>数据库配置驱动程序，接口自动生成</h2><h2 id=\"h2-u6C5Fu6E56u4EE3u7801u751Fu6210u5668uFF0Cu9875u9762u81EAu52A8u751Fu6210\"><a class=\"reference-link\" name=\"江湖代码生成器，页面自动生成\"></a><span class=\"header-link octicon octicon-link\"></span>江湖代码生成器，页面自动生成</h2><h2 id=\"h2-u63A5u53E3u4E0Eu9875u9762u6743u9650uFF0Cu901Au8FC7u6570u636Eu5E93u914Du7F6EuFF0Cu5FEBu901Fu5B9Eu73B0\"><a class=\"reference-link\" name=\"接口与页面权限，通过数据库配置，快速实现\"></a><span class=\"header-link octicon octicon-link\"></span>接口与页面权限，通过数据库配置，快速实现</h2><h2 id=\"h2-u6570u636Eu8BBFu95EEu6743u9650uFF0Cu901Au8FC7u6570u636Eu5E93u914Du7F6EuFF0Cu5FEBu901Fu5B9Eu73B0\"><a class=\"reference-link\" name=\"数据访问权限，通过数据库配置，快速实现\"></a><span class=\"header-link octicon octicon-link\"></span>数据访问权限，通过数据库配置，快速实现</h2><h2 id=\"h2-u6570u636Eu5386u53F2uFF0Cu6BCFu6761u6570u636Eu7684u6BCFu4E00u4E2Au7248u672Cu8FDBu884Cu5B58u6863\"><a class=\"reference-link\" name=\"数据历史，每条数据的每一个版本进行存档\"></a><span class=\"header-link octicon octicon-link\"></span>数据历史，每条数据的每一个版本进行存档</h2><h2 id=\"h2-u5E94u7528u95F4u7269u7406u7EA7u7684u9694u79BBu4E0Eu89E3u8026\"><a class=\"reference-link\" name=\"应用间物理级的隔离与解耦\"></a><span class=\"header-link octicon octicon-link\"></span>应用间物理级的隔离与解耦</h2><h2 id=\"h2-u57FAu4E8Eu6C5Fu6E56jsu7684u751Fu6001u4F53u7CFBuFF0Cu5F00u7BB1u5373u7528u7684u6C5Fu6E56u5E94u7528\"><a class=\"reference-link\" name=\"基于江湖JS的生态体系，开箱即用的江湖应用\"></a><span class=\"header-link octicon octicon-link\"></span>基于江湖JS的生态体系，开箱即用的江湖应用</h2>', NULL, NULL, NULL, '', '2022-04-23T13:39:26+08:00', 'm3611F', '刘计', '2022-06-12T15:11:54+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T15:11:55+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1419, 10005, '10004', '01新手指南', '', 'public', '2022-04-23T13:44:14+08:00', '快速入门', NULL, '> **本文将带大家使用`jianghu-init`**\n> * 创建江湖JS项目\n> * 生成CRUD页面\n> * 生成 3-table-CRUD页面\n\n## 基础环境\n\n* 操作系统：Windows/macOS/Linux\n* 运行环境：Node.js v16.x\n* 数据库环境：Mysql5.7+\n\n## 开发工具\n\n* 开发工具: Vscode\n* 数据库开发工具：navicat\n* jianghu-init\n	```shell\n	# 安装最新版本 jianghu-init\n	$ npm install -g jianghu-init@latest\n	# 查看版本\n	$ npm list jianghu-init -g\n	```\n\n## 江湖JS项目-目录结构\n\n```yml\n├── config                                                # egg config\n│   ├── config.default.js                            # default config                    \n│   ├── config.local.js                               # npm run dev 时使用的 config\n│   ├── config.prod.js                               # npm run start 时使用的 config\n│   ├── config.unittest.js                           # npm run test 时使用的 config\n│   └── plugin.js                                      # egg插件配置\n├── app \n│   ├── common                                       # 项目的常用工具、静态方法等    \n│   ├── constant                                       # 常量   \n│   │   ├── constant.js\n│   │   └── error.js\n│   ├── controller                                     # 对外暴露接口 \n│   ├── public                                          # 静态资源目录 \n│   ├── schedule                                      # 定时任务; 参考https://www.eggjs.org/zh-CN/basics/schedule\n│   ├── service                                         # 应用协议service目录\n│   └── view                                            # 页面存放目录\n├── app.js                                                # 自定义启动时的初始化工作\n├── jsconfig.json\n├── package.json\n├── sql                                                    # sql文件\n│   └── init.sql\n└── upload                                              # 文件的保存路径(文件上传业务)\n```\n\n## 示例一：创建一个独立应用项目(单应用)\n\n**创建项目**\n```shell\n$ jianghu-init project --type=xiaoapp my-jh-project\n	? 数据库IP： 127.0.0.1\n	? 数据库端口： 3306\n	? 数据库账号： root\n	? 数据库密码：123456\n	✔ 目录切换 my-jh-project\n		 [mysql importer] 94.39% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ usage:\n		  - cd /xxx/my-jh-project\n		  - npm install\n		  - npm start / npm run dev\n	✔ jianghu init project is success\n```\n**启动项目**\n```shell\n$ cd my-jh-project\n$ npm install\n$ npm run dev\n	[egg-ts-helper] create typings/config/index.d.ts (9ms)\n	[egg-ts-helper] create typings/config/plugin.d.ts (1ms)\n	[egg-ts-helper] create typings/app/service/index.d.ts (1ms)\n	[egg-ts-helper] create typings/app/index.d.ts (0ms)\n	2022-04-25 22:12:21,076 INFO 30774 [master] node version v16.13.0\n	2022-04-25 22:12:21,077 INFO 30774 [master] egg-jianghu version 1.1.91\n	Debugger attached.\n	2022-04-25 22:12:22,168 INFO 30774 [master] agent_worker#1:30785 started (1090ms)\n	Debugger attached.\n	2022-04-25 22:12:23,375 INFO 30789 [socket.io] 启动成功 { pid: 30789, path: \'/socket.io\' }\n	2022-04-25 22:12:23,382 INFO 30774 [master] egg-jianghu started on http://127.0.0.1:7001 (2305ms)\n```\n浏览器打开访问**http://127.0.0.1:7001**, 用户名`admin` 密码`123456`\n\n## 示例二：创建一个多应用项目\n\n**创建项目**\n```shell\n$ jianghu-init project  --type=multi my-jh-project-mutil\n	? 数据库IP： 127.0.0.1\n	? 数据库端口： 3306\n	? 数据库账号： root\n	? 数据库密码：123456\n	✔ 目录切换 data_repository\n		 [mysql importer] 59.61% Completed\n		 [mysql importer] 93.26% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ 目录切换 user_app_management\n		 [mysql importer] 95.47% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ 目录切换 directory\n		 [mysql importer] 93.95% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ usage:\n		  - cd /xxx/my-jh-project-mutil\n		  - ls\n		  - cd your_app\n		  - npm install\n		  - npm start / npm run dev\n	✔ jianghu init project is success\n```\n**启动项目**\n```sehll\n$ cd my-jh-project-mutil\n\n$ npm --prefix=data_repository install\n$ npm --prefix=data_repository run dev\n\n$ npm --prefix=user_app_management install\n$ npm --prefix=user_app_management run dev\n\n$ npm --prefix=directory install\n$ npm --prefix=directory  run dev\n```\n浏览器打开访问**http://127.0.0.1:prot**, 用户名`admin` 密码`123456`\n> 注意: data_repository是一个数据库工具类项目, 严格来说不属于多应用中的项目。\n\n## 示例三：在一个多应用下创建一个新应用\n\n**创建项目**\n```shell\n# 进入已有的多应用项目\n$ cd my-jh-project-mutil\n# 创建新应用\n$ jianghu-init project --type=xiaoapp-in-multi demo_xiaoapp\n	✔ 目录切换 demo_xiaoapp\n		 [mysql importer] 94.45% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ usage:\n		  - cd /xxx/my-jh-project-mutil/demo_xiaoapp\n		  - npm install\n		  - npm start / npm run dev\n	✔ jianghu init project is success\n...\n```\n**启动项目**\n```shell\n$ cd my-jh-project-mutil/demo_xiaoapp\n$ npm install\n$ npm run dev\n```\n浏览器打开访问**http://127.0.0.1:prot**, 用户名`admin` 密码`123456`\n\n## 示例四：在项目中生成中生成CRUD页面\n\n**首先先在 数据库 内 创建一个测试表 `crud_test_table`**\n```sql\ncreate table article (\n    id                int auto_increment primary key,\n    title             varchar(255)                  null comment \'标题\',\n    content       varchar(255)                   not null comment \'内容\',\n    operation     varchar(255) default \'insert\' null comment \'操作: insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n    operationByUserId varchar(255)   null comment \'操作者userId\',\n    operationByUser   varchar(255)    null comment \'操作者用户名\',\n    operationAt       varchar(255)       null comment \'操作时间; E.g: 2021-05-28T10:24:54+08:00\'\n);\n```\n**生成CRUD页面**\n```shell\n$ cd my-jh-project\n$ jianghu-init crud\n	? 请选择你要生成 crud 的表\n	❯◉ crud_test_table\n	 ◯ student_basic\n	 ✔ 生成 crud_test_table 的 vue 文件完成\n	ℹ 开始生成 crud_test_table 的相关数据\n	ℹ 正在执行 -- 创建 page\n	ℹ 正在执行 -- 创建 resource\n	✔ 生成 crud_test_table 的相关数据完成\n	✔ init crud is success\n```\n\n## 示例五：在项目中生成 3 table 的 CRUD 页面\n\n**首先先在 数据库 内 创建3张表 `class`、`student`、`student_class`**\n```sql\n-- 班级表\nCREATE TABLE `class` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `classId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'班级ID\',\n  `remarks` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'备注\',\n  `classStatus` varchar(255) COLLATE utf8mb4_bin DEFAULT \'active\' COMMENT \'班级状态\',\n  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT \'insert\' COMMENT \'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者userId\',\n  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者用户名\',\n  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作时间; E.g: 2021-05-28T10:24:54+08:00 \',\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=124 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\n\n-- 学生表\nCREATE TABLE `student` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `studentId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生ID\',\n  `name` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生名字\',\n  `gender` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'性别\',\n  `dateOfBirth` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'出生日期\',\n  `bodyHeight` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'身高\',\n  `studentStatus` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生状态\',\n  `remarks` mediumtext COLLATE utf8mb4_bin COMMENT \'备注\',\n  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT \'insert\' COMMENT \'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者userId\',\n  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者用户名\',\n  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作时间; E.g: 2021-05-28T10:24:54+08:00 \',\n  PRIMARY KEY (`id`) USING BTREE,\n  KEY `studentId` (`studentId`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=93 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\n\n-- 学生、班级关联表\nCREATE TABLE `student_class` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `studentId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生ID\',\n  `classId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'班级ID\',\n  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT \'insert\' COMMENT \'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者userId\',\n  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者用户名\',\n  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作时间; E.g: 2021-05-28T10:24:54+08:00 \',\n  PRIMARY KEY (`id`) USING BTREE,\n  KEY `studentId` (`studentId`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=94 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\n```\n> 注意: 我们的规范是每张数据表需要有一个业务id，比如上面的 classId 和 studentId，然后中间关联表也需要是用这两个字段进行关联的\n\n**创建3-table的CRUD页面**\n```\n$ cd my-jh-project\n$ jianghu-init\n	? Please select a init type crud 3 table - Generate crud page from a db table.\n	✔ 初始化数据库连接成功\n	ℹ 开始生成 CRUD\n	? 请选择你要生成 crud 的表（A表） class\n	? 请输入 class 的名字，如\"文章\" 班级\n	? 请输入 class 表的业务字段 classId\n	? 请选择你要生成 crud 的表（B表） student\n	? 请输入 student 的名字，如\"标签\" 学生\n	? 请输入 student 表的业务字段 studentId\n	? 请输入两表的第三张关联表 student_class\n	ℹ 开始生成 class 的 CRUD\n	✔ 生成 class 的 vue 文件完成\n	✔ 生成 student 的 vue 文件完成\n	✔ 生成 student_class 的 vue 文件完成\n	✔ 生成 student_class 的 vue 文件完成\n	✔ init crud is success\n```\n重启项目, 浏览器打开访问**http://127.0.0.1:prot**, 即可看到新增加的页面。\n\n\n', '<blockquote class=\"default\">\n<p><strong>本文将带大家使用<code>jianghu-init</code></strong></p>\n<ul>\n<li>创建江湖JS项目</li><li>生成CRUD页面</li><li>生成 3-table-CRUD页面</li></ul>\n</blockquote>\n<h2 id=\"h2-u57FAu7840u73AFu5883\"><a class=\"reference-link\" name=\"基础环境\"></a><span class=\"header-link octicon octicon-link\"></span>基础环境</h2><ul>\n<li>操作系统：Windows/macOS/Linux</li><li>运行环境：Node.js v16.x</li><li>数据库环境：Mysql5.7+</li></ul>\n<h2 id=\"h2-u5F00u53D1u5DE5u5177\"><a class=\"reference-link\" name=\"开发工具\"></a><span class=\"header-link octicon octicon-link\"></span>开发工具</h2><ul>\n<li>开发工具: Vscode</li><li>数据库开发工具：navicat</li><li>jianghu-init<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"com\"># 安装最新版本 jianghu-init</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ npm install </span><span class=\"pun\">-</span><span class=\"pln\">g jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init@latest</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"com\"># 查看版本</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">$ npm list jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init </span><span class=\"pun\">-</span><span class=\"pln\">g</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u6C5Fu6E56jsu9879u76EE-u76EEu5F55u7ED3u6784\"><a class=\"reference-link\" name=\"江湖JS项目-目录结构\"></a><span class=\"header-link octicon octicon-link\"></span>江湖JS项目-目录结构</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> config                                                </span><span class=\"com\"># egg config</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"kwd\">default</span><span class=\"pun\">.</span><span class=\"pln\">js                            </span><span class=\"com\"># default config                    </span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"kwd\">local</span><span class=\"pun\">.</span><span class=\"pln\">js                               </span><span class=\"com\"># npm run dev 时使用的 config</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"pln\">prod</span><span class=\"pun\">.</span><span class=\"pln\">js                               </span><span class=\"com\"># npm run start 时使用的 config</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"pln\">unittest</span><span class=\"pun\">.</span><span class=\"pln\">js                           </span><span class=\"com\"># npm run test 时使用的 config</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> plugin</span><span class=\"pun\">.</span><span class=\"pln\">js                                      </span><span class=\"com\"># egg插件配置</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> app </span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> common                                       </span><span class=\"com\"># 项目的常用工具、静态方法等    </span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> constant                                       </span><span class=\"com\"># 常量   </span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> constant</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> error</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> controller                                     </span><span class=\"com\"># 对外暴露接口 </span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> </span><span class=\"kwd\">public</span><span class=\"pln\">                                          </span><span class=\"com\"># 静态资源目录 </span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> schedule                                      </span><span class=\"com\"># 定时任务; 参考https://www.eggjs.org/zh-CN/basics/schedule</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> service                                         </span><span class=\"com\"># 应用协议service目录</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> view                                            </span><span class=\"com\"># 页面存放目录</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> app</span><span class=\"pun\">.</span><span class=\"pln\">js                                                </span><span class=\"com\"># 自定义启动时的初始化工作</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> jsconfig</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> </span><span class=\"kwd\">package</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> sql                                                    </span><span class=\"com\"># sql文件</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> init</span><span class=\"pun\">.</span><span class=\"pln\">sql</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">└──</span><span class=\"pln\"> upload                                              </span><span class=\"com\"># 文件的保存路径(文件上传业务)</span></code></li></ol></pre>\n<h2 id=\"h2-u793Au4F8Bu4E00uFF1Au521Bu5EFAu4E00u4E2Au72ECu7ACBu5E94u7528u9879u76EE28u5355u5E94u752829\"><a class=\"reference-link\" name=\"示例一：创建一个独立应用项目(单应用)\"></a><span class=\"header-link octicon octicon-link\"></span>示例一：创建一个独立应用项目(单应用)</h2><p><strong>创建项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init project </span><span class=\"pun\">--</span><span class=\"pln\">type</span><span class=\"pun\">=</span><span class=\"pln\">xiaoapp </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库</span><span class=\"pln\">IP</span><span class=\"pun\">：</span><span class=\"pln\"> </span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库端口：</span><span class=\"pln\"> </span><span class=\"lit\">3306</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库账号：</span><span class=\"pln\"> root</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库密码：</span><span class=\"lit\">123456</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">94.39</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> usage</span><span class=\"pun\">:</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd </span><span class=\"pun\">/</span><span class=\"pln\">xxx</span><span class=\"pun\">/</span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm install</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm start </span><span class=\"pun\">/</span><span class=\"pln\"> npm run dev</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> jianghu init project </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<p><strong>启动项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ npm install</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">$ npm run dev</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">index</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">9ms</span><span class=\"pun\">)</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">plugin</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">1ms</span><span class=\"pun\">)</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">/</span><span class=\"pln\">service</span><span class=\"pun\">/</span><span class=\"pln\">index</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">1ms</span><span class=\"pun\">)</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">/</span><span class=\"pln\">index</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">0ms</span><span class=\"pun\">)</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">21</span><span class=\"pun\">,</span><span class=\"lit\">076</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> node version v16</span><span class=\"pun\">.</span><span class=\"lit\">13.0</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">21</span><span class=\"pun\">,</span><span class=\"lit\">077</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> egg</span><span class=\"pun\">-</span><span class=\"pln\">jianghu version </span><span class=\"lit\">1.1</span><span class=\"pun\">.</span><span class=\"lit\">91</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"typ\">Debugger</span><span class=\"pln\"> attached</span><span class=\"pun\">.</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">22</span><span class=\"pun\">,</span><span class=\"lit\">168</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> agent_worker</span><span class=\"com\">#1:30785 started (1090ms)</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"typ\">Debugger</span><span class=\"pln\"> attached</span><span class=\"pun\">.</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">23</span><span class=\"pun\">,</span><span class=\"lit\">375</span><span class=\"pln\"> INFO </span><span class=\"lit\">30789</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">socket</span><span class=\"pun\">.</span><span class=\"pln\">io</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">启动成功</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> pid</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">30789</span><span class=\"pun\">,</span><span class=\"pln\"> path</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'/socket.io\'</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">23</span><span class=\"pun\">,</span><span class=\"lit\">382</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> egg</span><span class=\"pun\">-</span><span class=\"pln\">jianghu started on http</span><span class=\"pun\">:</span><span class=\"com\">//127.0.0.1:7001 (2305ms)</span></code></li></ol></pre>\n<p>浏览器打开访问<strong><a href=\"http://127.0.0.1:7001\">http://127.0.0.1:7001</a></strong>, 用户名<code>admin</code> 密码<code>123456</code></p>\n<h2 id=\"h2-u793Au4F8Bu4E8CuFF1Au521Bu5EFAu4E00u4E2Au591Au5E94u7528u9879u76EE\"><a class=\"reference-link\" name=\"示例二：创建一个多应用项目\"></a><span class=\"header-link octicon octicon-link\"></span>示例二：创建一个多应用项目</h2><p><strong>创建项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init project  </span><span class=\"pun\">--</span><span class=\"pln\">type</span><span class=\"pun\">=</span><span class=\"pln\">multi </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库</span><span class=\"pln\">IP</span><span class=\"pun\">：</span><span class=\"pln\"> </span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库端口：</span><span class=\"pln\"> </span><span class=\"lit\">3306</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库账号：</span><span class=\"pln\"> root</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库密码：</span><span class=\"lit\">123456</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> data_repository</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">59.61</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">93.26</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> user_app_management</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">95.47</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> directory</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">93.95</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> usage</span><span class=\"pun\">:</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd </span><span class=\"pun\">/</span><span class=\"pln\">xxx</span><span class=\"pun\">/</span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> ls</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd your_app</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm install</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm start </span><span class=\"pun\">/</span><span class=\"pln\"> npm run dev</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> jianghu init project </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<p><strong>启动项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sehll\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L1\"><code class=\"language-sehll\"></code></li><li class=\"L2\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">data_repository install</span></code></li><li class=\"L3\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">data_repository run dev</span></code></li><li class=\"L4\"><code class=\"language-sehll\"></code></li><li class=\"L5\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">user_app_management install</span></code></li><li class=\"L6\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">user_app_management run dev</span></code></li><li class=\"L7\"><code class=\"language-sehll\"></code></li><li class=\"L8\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">directory install</span></code></li><li class=\"L9\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">directory  run dev</span></code></li></ol></pre>\n<p>浏览器打开访问<strong><a href=\"http://127.0.0.1:prot\">http://127.0.0.1:prot</a></strong>, 用户名<code>admin</code> 密码<code>123456</code></p>\n<blockquote class=\"default\">\n<p>注意: data_repository是一个数据库工具类项目, 严格来说不属于多应用中的项目。</p>\n</blockquote>\n<h2 id=\"h2-u793Au4F8Bu4E09uFF1Au5728u4E00u4E2Au591Au5E94u7528u4E0Bu521Bu5EFAu4E00u4E2Au65B0u5E94u7528\"><a class=\"reference-link\" name=\"示例三：在一个多应用下创建一个新应用\"></a><span class=\"header-link octicon octicon-link\"></span>示例三：在一个多应用下创建一个新应用</h2><p><strong>创建项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"com\"># 进入已有的多应用项目</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"com\"># 创建新应用</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init project </span><span class=\"pun\">--</span><span class=\"pln\">type</span><span class=\"pun\">=</span><span class=\"pln\">xiaoapp</span><span class=\"pun\">-</span><span class=\"kwd\">in</span><span class=\"pun\">-</span><span class=\"pln\">multi demo_xiaoapp</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> demo_xiaoapp</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">94.45</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> usage</span><span class=\"pun\">:</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd </span><span class=\"pun\">/</span><span class=\"pln\">xxx</span><span class=\"pun\">/</span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span><span class=\"pun\">/</span><span class=\"pln\">demo_xiaoapp</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm install</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm start </span><span class=\"pun\">/</span><span class=\"pln\"> npm run dev</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> jianghu init project </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pun\">...</span></code></li></ol></pre>\n<p><strong>启动项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span><span class=\"pun\">/</span><span class=\"pln\">demo_xiaoapp</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ npm install</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">$ npm run dev</span></code></li></ol></pre>\n<p>浏览器打开访问<strong><a href=\"http://127.0.0.1:prot\">http://127.0.0.1:prot</a></strong>, 用户名<code>admin</code> 密码<code>123456</code></p>\n<h2 id=\"h2-u793Au4F8Bu56DBuFF1Au5728u9879u76EEu4E2Du751Fu6210u4E2Du751Fu6210crudu9875u9762\"><a class=\"reference-link\" name=\"示例四：在项目中生成中生成CRUD页面\"></a><span class=\"header-link octicon octicon-link\"></span>示例四：在项目中生成中生成CRUD页面</h2><p><strong>首先先在 数据库 内 创建一个测试表 <code>crud_test_table</code></strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">create table article </span><span class=\"pun\">(</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">    id                </span><span class=\"kwd\">int</span><span class=\"pln\"> auto_increment primary key</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">    title             varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">                  </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'标题\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">    content       varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">                   </span><span class=\"kwd\">not</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'内容\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">    operation     varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"kwd\">default</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作: insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">    operationByUserId varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">   </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">    operationByUser   varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">    </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">    operationAt       varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">       </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00\'</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pun\">);</span></code></li></ol></pre>\n<p><strong>生成CRUD页面</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init crud</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请选择你要生成</span><span class=\"pln\"> crud </span><span class=\"pun\">的表</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">❯◉</span><span class=\"pln\"> crud_test_table</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">     </span><span class=\"pun\">◯</span><span class=\"pln\"> student_basic</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">     </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> crud_test_table </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">开始生成</span><span class=\"pln\"> crud_test_table </span><span class=\"pun\">的相关数据</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">正在执行</span><span class=\"pln\"> </span><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">创建</span><span class=\"pln\"> page</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">正在执行</span><span class=\"pln\"> </span><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">创建</span><span class=\"pln\"> resource</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> crud_test_table </span><span class=\"pun\">的相关数据完成</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> init crud </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<h2 id=\"h2-u793Au4F8Bu4E94uFF1Au5728u9879u76EEu4E2Du751Fu6210320table20u768420crud20u9875u9762\"><a class=\"reference-link\" name=\"示例五：在项目中生成 3 table 的 CRUD 页面\"></a><span class=\"header-link octicon octicon-link\"></span>示例五：在项目中生成 3 table 的 CRUD 页面</h2><p><strong>首先先在 数据库 内 创建3张表 <code>class</code>、<code>student</code>、<code>student_class</code></strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">班级表</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">CREATE TABLE </span><span class=\"str\">`class`</span><span class=\"pln\"> </span><span class=\"pun\">(</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`classId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'班级ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`remarks`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'备注\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`classStatus`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'active\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'班级状态\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">  PRIMARY KEY </span><span class=\"pun\">(</span><span class=\"str\">`id`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">)</span><span class=\"pln\"> ENGINE</span><span class=\"pun\">=</span><span class=\"typ\">InnoDB</span><span class=\"pln\"> AUTO_INCREMENT</span><span class=\"pun\">=</span><span class=\"lit\">124</span><span class=\"pln\"> DEFAULT CHARSET</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4 COLLATE</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-sql\"></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">学生表</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">CREATE TABLE </span><span class=\"str\">`student`</span><span class=\"pln\"> </span><span class=\"pun\">(</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`studentId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`name`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生名字\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`gender`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'性别\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`dateOfBirth`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'出生日期\'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`bodyHeight`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'身高\'</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`studentStatus`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生状态\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`remarks`</span><span class=\"pln\"> mediumtext COLLATE utf8mb4_bin COMMENT </span><span class=\"str\">\'备注\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  PRIMARY KEY </span><span class=\"pun\">(</span><span class=\"str\">`id`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  KEY </span><span class=\"str\">`studentId`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`studentId`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pun\">)</span><span class=\"pln\"> ENGINE</span><span class=\"pun\">=</span><span class=\"typ\">InnoDB</span><span class=\"pln\"> AUTO_INCREMENT</span><span class=\"pun\">=</span><span class=\"lit\">93</span><span class=\"pln\"> DEFAULT CHARSET</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4 COLLATE</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-sql\"></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">学生、班级关联表</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">CREATE TABLE </span><span class=\"str\">`student_class`</span><span class=\"pln\"> </span><span class=\"pun\">(</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`studentId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`classId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'班级ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">  PRIMARY KEY </span><span class=\"pun\">(</span><span class=\"str\">`id`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">  KEY </span><span class=\"str\">`studentId`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`studentId`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pun\">)</span><span class=\"pln\"> ENGINE</span><span class=\"pun\">=</span><span class=\"typ\">InnoDB</span><span class=\"pln\"> AUTO_INCREMENT</span><span class=\"pun\">=</span><span class=\"lit\">94</span><span class=\"pln\"> DEFAULT CHARSET</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4 COLLATE</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4_bin</span><span class=\"pun\">;</span></code></li></ol></pre>\n<blockquote class=\"default\">\n<p>注意: 我们的规范是每张数据表需要有一个业务id，比如上面的 classId 和 studentId，然后中间关联表也需要是用这两个字段进行关联的</p>\n</blockquote>\n<p><strong>创建3-table的CRUD页面</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"typ\">Please</span><span class=\"pln\"> </span><span class=\"kwd\">select</span><span class=\"pln\"> a init type crud </span><span class=\"lit\">3</span><span class=\"pln\"> table </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"typ\">Generate</span><span class=\"pln\"> crud page </span><span class=\"kwd\">from</span><span class=\"pln\"> a db table</span><span class=\"pun\">.</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化数据库连接成功</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">开始生成</span><span class=\"pln\"> CRUD</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请选择你要生成</span><span class=\"pln\"> crud </span><span class=\"pun\">的表（</span><span class=\"pln\">A</span><span class=\"pun\">表）</span><span class=\"pln\"> </span><span class=\"kwd\">class</span></code></li><li class=\"L6\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">的名字，如</span><span class=\"str\">\"文章\"</span><span class=\"pln\"> </span><span class=\"pun\">班级</span></code></li><li class=\"L7\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">表的业务字段</span><span class=\"pln\"> classId</span></code></li><li class=\"L8\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请选择你要生成</span><span class=\"pln\"> crud </span><span class=\"pun\">的表（</span><span class=\"pln\">B</span><span class=\"pun\">表）</span><span class=\"pln\"> student</span></code></li><li class=\"L9\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> student </span><span class=\"pun\">的名字，如</span><span class=\"str\">\"标签\"</span><span class=\"pln\"> </span><span class=\"pun\">学生</span></code></li><li class=\"L0\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> student </span><span class=\"pun\">表的业务字段</span><span class=\"pln\"> studentId</span></code></li><li class=\"L1\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入两表的第三张关联表</span><span class=\"pln\"> student_class</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">开始生成</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">的</span><span class=\"pln\"> CRUD</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> student </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> student_class </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L6\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> student_class </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L7\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> init crud </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<p>重启项目, 浏览器打开访问<strong><a href=\"http://127.0.0.1:prot\">http://127.0.0.1:prot</a></strong>, 即可看到新增加的页面。</p>\n', NULL, NULL, NULL, '', '2022-04-23T13:44:15+08:00', 'm3611F', '刘计', '2022-04-30T12:45:36+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T12:45:36+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1420, 10006, '10004', '01新手指南', '', 'public', '2022-04-23T13:45:07+08:00', '江湖JS演示项目', NULL, '## [江湖演示-初级项目](https://github.com/openJianghu/jianghujs_demo_basic)\n\n**页面列表**:\n1. 操作手册\n1. 应用协议\n1. 前端对接-学习\n1. 前端规范\n1. 前端规范-组件通信\n1. 前端对接-生产\n1. 前端对接-业务ID\n1. 服务端搜索\n1. 数据权限\n\n## [江湖演示-3table项目](https://github.com/openJianghu/jianghujs_demo_basic_3table)\n\n**页面列表**:\n1. 班级页面\n1. 学生页面\n1. 班级的学生管理\n1. 学生的班级管理\n\n## [江湖演示-进阶项目](https://github.com/openJianghu/jianghujs_demo_advanced)\n\n**页面列表**:\n1. 文件管理\n2. 页面、接口\n3. 用户管理\n4. 权限规则管理\n5. 用户、组织、角色\n6. 数据历史\n7. min: 10,修改密码\n\n## [江湖演示-企业级项目](https://github.com/openJianghu/jianghujs_demo_enterprise)\n\n> 企业级项目使用`多应用`模式开发\n\n**应用列表**:\n1. 数据仓库应用\n1. 账号权限管理应用\n1. APP目录应用\n1. 模版应用\n\n\n', '<h2 id=\"h2-u6C5Fu6E56u6F14u793A-u521Du7EA7u9879u76EE\"><a class=\"reference-link\" name=\"江湖演示-初级项目\"></a><span class=\"header-link octicon octicon-link\"></span><a href=\"https://github.com/openJianghu/jianghujs_demo_basic\">江湖演示-初级项目</a></h2><p><strong>页面列表</strong>:</p>\n<ol>\n<li>操作手册</li><li>应用协议</li><li>前端对接-学习</li><li>前端规范</li><li>前端规范-组件通信</li><li>前端对接-生产</li><li>前端对接-业务ID</li><li>服务端搜索</li><li>数据权限</li></ol>\n<h2 id=\"h2-u6C5Fu6E56u6F14u793A-3tableu9879u76EE\"><a class=\"reference-link\" name=\"江湖演示-3table项目\"></a><span class=\"header-link octicon octicon-link\"></span><a href=\"https://github.com/openJianghu/jianghujs_demo_basic_3table\">江湖演示-3table项目</a></h2><p><strong>页面列表</strong>:</p>\n<ol>\n<li>班级页面</li><li>学生页面</li><li>班级的学生管理</li><li>学生的班级管理</li></ol>\n<h2 id=\"h2-u6C5Fu6E56u6F14u793A-u8FDBu9636u9879u76EE\"><a class=\"reference-link\" name=\"江湖演示-进阶项目\"></a><span class=\"header-link octicon octicon-link\"></span><a href=\"https://github.com/openJianghu/jianghujs_demo_advanced\">江湖演示-进阶项目</a></h2><p><strong>页面列表</strong>:</p>\n<ol>\n<li>文件管理</li><li>页面、接口</li><li>用户管理</li><li>权限规则管理</li><li>用户、组织、角色</li><li>数据历史</li><li>min: 10,修改密码</li></ol>\n<h2 id=\"h2-u6C5Fu6E56u6F14u793A-u4F01u4E1Au7EA7u9879u76EE\"><a class=\"reference-link\" name=\"江湖演示-企业级项目\"></a><span class=\"header-link octicon octicon-link\"></span><a href=\"https://github.com/openJianghu/jianghujs_demo_enterprise\">江湖演示-企业级项目</a></h2><blockquote class=\"default\">\n<p>企业级项目使用<code>多应用</code>模式开发</p>\n</blockquote>\n<p><strong>应用列表</strong>:</p>\n<ol>\n<li>数据仓库应用</li><li>账号权限管理应用</li><li>APP目录应用</li><li>模版应用</li></ol>\n', NULL, NULL, NULL, '', '2022-04-23T13:45:08+08:00', 'm3611F', '刘计', '2022-04-26T22:55:34+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-26T22:55:34+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1421, 10007, '10004', '02应用协议', '', 'public', '2022-04-23T13:46:22+08:00', '协议数据结构', NULL, '## 应用协议\n\n\n* 不同端之间所传递的数据，江湖JS所做的规范与设计\n* 应用协议的设计上，进行了统一和简化\n* 能够做到在不同通讯通道间无缝切换\n\n##  应用协议 之 Resource请求\n\n**在江湖JS里一个HTTP请求/Socket请求** 对应 数据库`_resource`表 中的一行数据.\n\n**我们把请求resource 分成两类:**\n- sql resource: 后端根据请求组装出sql, 然后执行 并 将结果返回给前端\n- service resource: 后端根据请求找出`/app/service`下对应的service, 然后执行对应的方法 并 将结果返回给前端\n\n## Resource请求 & Resource响应\n\n- 请求: `/${appId}/resource`\n- 请求方式: `POST`\n- 请求头:\n    - \'Content-Type\': \'application/json\'\n    - \'Accept\': \'application/json\'\n- 请求body\n  >  where offset limit参数只有在 sql resource场景有用\n  | 协议字段 | 类型 |  描述 |\n  | --- | --- | --- |\n  | packageId| String | 必填✅ 协议包的唯一id; 可以使用时间戳 + 随机数生成; 比如: 1622720431076_3905352 |\n  | packageType | String |  必填✅ 协议包类型; 比如：\'httpRequest\', \'socketForward\', \'socketRequest\'|\n  | appData | Object |  必填✅ 协议包数据 |\n  | --appId | String | 必填✅ 应用ID; 比如: demo_xiaoapp |\n  | --pageId | String | 必填✅ 页面ID; 比如: demoPage |\n  | --actionId | String | 必填✅ 操作ID; 比如: selectStudentList |\n  | --authToken | String | 必填✅ 用户令牌 |\n  | --userAgent | String | 选填 客户端浏览器信息; 通过`window.navigator.userAgent` 获取 |\n  | --where | Object | 选填 where条件; 比如: { name: \'张三丰\', classId: \'2021-01级-02班\' } |\n  | --whereIn | Object | 选填 where in查询条件; 比如: { name: [\'张三丰\', \'张无忌\'] } |\n  | --whereLike | Object | 选填 where 模糊查询条件; 比如: { name: \'张\' } |\n  | --whereOptions | Array | 选填 where条件 ; 比如: [[\'name\', \'=\', \'zhangshan\'],[\'level\', \'>\', 3],[\'name\', \'like\', \'%zhang%\']]|\n  | --whereOrOptions | Array | 选填 where or 条件; 比如: [[\'name\', \'=\', \'zhangshan\'],[\'level\', \'>\', 3],[\'a\', 100]]|\n  | --offset | Number | 选填 查询起始位置; 比如: 0 |\n  | --limit | Number | 选填 查询条数，默认查所有; 比如: 10 |\n  | --orderBy | Array | 选填 排序; 比如: [{ column: \'age\', order: \'desc\' }] |\n  | --actionData | Object | 选填 操作数据，比如：要保存或更新的数据... { name: \'张三丰\', level: \'03\' } |\n- 响应body\n  > | 字段  | 类型 | 描述   |\n  | ----    | ----  | ----  |\n  | packageId | String | 必返回✅,请求唯一标识。 |\n  | packageType | String     | 必返回✅,标识数据包类型; httpResponse, socketResponse|\n  | status | String     | 必返回✅,标识业务状态; success: 成功, fail: 失败 |\n  | timestamp  | String     | 必返回✅,响应时间, E.g: 2021-05-24 17:56:59,408\" |\n  | appData | Object     | 必返回✅, `sql resource` or `service resource` 执行后的结果 |\n  | --appId | String | 必返回✅ 应用ID; 比如: demo_xiaoapp |\n  | --pageId | String | 必返回✅ 页面ID; 比如: demoPage |\n  | --actionId | String | 必返回✅ 操作ID; 比如: selectStudentList |\n  | --errorCode | String     | 错误码, 当status===\'fail\'时返回, E.g: token_expired, request_body_invalid |\n  | --errorReason | String     | 错误码说明, 当status===\'fail\'时返回, E.g: token失效, params字段字段却失 |\n  | --errorReasonSupplement| String | 错误码说明 补充, E.g: \"id must not be null\" |\n  | --resultData | Object       |必返回✅  resource请求的响应数据 |\n\n### 参考用例\n\n```javascript\nconst  package = {\n  packageId: \'123456\',\n  packageType: \'httpRequest\',\n  appData: {\n    appId: `${window.appInfo.appId}`,\n    pageId: \'protocolDemo\',\n    actionId: \'insertItem\',\n    userAgent: \'demo_userAgent\',\n    authToken: localStorage.getItem(`${window.appInfo.appId}_authToken`),\n    actionData: {\n      studentId: \'G00003\',\n      classId: \'2021-01级-02班\',\n      gender: \'male\',\n      level: \'02\',\n      name: \'小虾米\',\n    },\n    where: { 字段A: \'A\', 字段B: \'B\' },\n    whereIn: (\'id\', [1, 2, 3]),\n    whereLike: { 字段A: \'A\', 字段B: \'B\' },\n    whereOptions: [[\'name\', \'=\', \'zhangshan\'],[\'level\', \'>\', 3]],\n    whereOrOptions: [[\'name\', \'=\', \'zhangshan\'],[\'level\', \'>\', 3]],\n    offset: 10,\n    limit: 20,\n    orderBy: [{ column: \'email\' }, { column: \'age\', order: \'desc\' }],\n  }\n};\nconst result = await axios(package);\nconst rows = result.data.appData.resultData.rows;\nconsole.log(\'rows\', rows);\n```\n\n### 参考用例之jianghuAxios\n\n```html\n{% include \'common/jianghuAxios.html\' %}\n\n<script>\nconst result = await window.jianghuAxios({\n  data: {\n    appData: {\n      pageId: \'protocolDemo\',\n      actionId: \'insertItem\',\n      actionData: {\n        studentId: \'G00003\',\n        classId: \'2021-01级-02班\',\n        gender: \'male\',\n        level: \'02\',\n        name: \'小虾米\',\n      }\n    }\n  }\n});\nconst result = await axios(package);\nconst rows = result.data.appData.resultData.rows;\nconsole.log(\'rows\', rows);\n</script>\n```\n', '<h2 id=\"h2-u5E94u7528u534Fu8BAE\"><a class=\"reference-link\" name=\"应用协议\"></a><span class=\"header-link octicon octicon-link\"></span>应用协议</h2><ul>\n<li>不同端之间所传递的数据，江湖JS所做的规范与设计</li><li>应用协议的设计上，进行了统一和简化</li><li>能够做到在不同通讯通道间无缝切换</li></ul>\n<h2 id=\"h2-u5E94u7528u534Fu8BAEu4E4B20resourceu8BF7u6C42\"><a class=\"reference-link\" name=\"应用协议 之 Resource请求\"></a><span class=\"header-link octicon octicon-link\"></span>应用协议 之 Resource请求</h2><p><strong>在江湖JS里一个HTTP请求/Socket请求</strong> 对应 数据库<code>_resource</code>表 中的一行数据.</p>\n<p><strong>我们把请求resource 分成两类:</strong></p>\n<ul>\n<li>sql resource: 后端根据请求组装出sql, 然后执行 并 将结果返回给前端</li><li>service resource: 后端根据请求找出<code>/app/service</code>下对应的service, 然后执行对应的方法 并 将结果返回给前端</li></ul>\n<h2 id=\"h2-resourceu8BF7u6C4226amp3B20resourceu54CDu5E94\"><a class=\"reference-link\" name=\"Resource请求 &amp; Resource响应\"></a><span class=\"header-link octicon octicon-link\"></span>Resource请求 &amp; Resource响应</h2><ul>\n<li>请求: <code>/${appId}/resource</code></li><li>请求方式: <code>POST</code></li><li>请求头:<ul>\n<li>\'Content-Type\': \'application/json\'</li><li>\'Accept\': \'application/json\'</li></ul>\n</li><li>请求body<blockquote class=\"default\">\n<p> where offset limit参数只有在 sql resource场景有用</p>\n<table>\n<thead>\n<tr>\n<th>协议字段</th>\n<th>类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>packageId</td>\n<td>String</td>\n<td>必填✅ 协议包的唯一id; 可以使用时间戳 + 随机数生成; 比如: 1622720431076_3905352</td>\n</tr>\n<tr>\n<td>packageType</td>\n<td>String</td>\n<td>必填✅ 协议包类型; 比如：\'httpRequest\', \'socketForward\', \'socketRequest\'</td>\n</tr>\n<tr>\n<td>appData</td>\n<td>Object</td>\n<td>必填✅ 协议包数据</td>\n</tr>\n<tr>\n<td>--appId</td>\n<td>String</td>\n<td>必填✅ 应用ID; 比如: demo_xiaoapp</td>\n</tr>\n<tr>\n<td>--pageId</td>\n<td>String</td>\n<td>必填✅ 页面ID; 比如: demoPage</td>\n</tr>\n<tr>\n<td>--actionId</td>\n<td>String</td>\n<td>必填✅ 操作ID; 比如: selectStudentList</td>\n</tr>\n<tr>\n<td>--authToken</td>\n<td>String</td>\n<td>必填✅ 用户令牌</td>\n</tr>\n<tr>\n<td>--userAgent</td>\n<td>String</td>\n<td>选填 客户端浏览器信息; 通过<code>window.navigator.userAgent</code> 获取</td>\n</tr>\n<tr>\n<td>--where</td>\n<td>Object</td>\n<td>选填 where条件; 比如: { name: \'张三丰\', classId: \'2021-01级-02班\' }</td>\n</tr>\n<tr>\n<td>--whereIn</td>\n<td>Object</td>\n<td>选填 where in查询条件; 比如: { name: [\'张三丰\', \'张无忌\'] }</td>\n</tr>\n<tr>\n<td>--whereLike</td>\n<td>Object</td>\n<td>选填 where 模糊查询条件; 比如: { name: \'张\' }</td>\n</tr>\n<tr>\n<td>--whereOptions</td>\n<td>Array</td>\n<td>选填 where条件 ; 比如: [[\'name\', \'=\', \'zhangshan\'],[\'level\', \'&gt;\', 3],[\'name\', \'like\', \'%zhang%\']]</td>\n</tr>\n<tr>\n<td>--whereOrOptions</td>\n<td>Array</td>\n<td>选填 where or 条件; 比如: [[\'name\', \'=\', \'zhangshan\'],[\'level\', \'&gt;\', 3],[\'a\', 100]]</td>\n</tr>\n<tr>\n<td>--offset</td>\n<td>Number</td>\n<td>选填 查询起始位置; 比如: 0</td>\n</tr>\n<tr>\n<td>--limit</td>\n<td>Number</td>\n<td>选填 查询条数，默认查所有; 比如: 10</td>\n</tr>\n<tr>\n<td>--orderBy</td>\n<td>Array</td>\n<td>选填 排序; 比如: [{ column: \'age\', order: \'desc\' }]</td>\n</tr>\n<tr>\n<td>--actionData</td>\n<td>Object</td>\n<td>选填 操作数据，比如：要保存或更新的数据... { name: \'张三丰\', level: \'03\' }</td>\n</tr>\n</tbody></table>\n</blockquote>\n</li><li>响应body<blockquote class=\"default\">\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>packageId</td>\n<td>String</td>\n<td>必返回✅,请求唯一标识。</td>\n</tr>\n<tr>\n<td>packageType</td>\n<td>String</td>\n<td>必返回✅,标识数据包类型; httpResponse, socketResponse</td>\n</tr>\n<tr>\n<td>status</td>\n<td>String</td>\n<td>必返回✅,标识业务状态; success: 成功, fail: 失败</td>\n</tr>\n<tr>\n<td>timestamp</td>\n<td>String</td>\n<td>必返回✅,响应时间, E.g: 2021-05-24 17:56:59,408\"</td>\n</tr>\n<tr>\n<td>appData</td>\n<td>Object</td>\n<td>必返回✅, <code>sql resource</code> or <code>service resource</code> 执行后的结果</td>\n</tr>\n<tr>\n<td>--appId</td>\n<td>String</td>\n<td>必返回✅ 应用ID; 比如: demo_xiaoapp</td>\n</tr>\n<tr>\n<td>--pageId</td>\n<td>String</td>\n<td>必返回✅ 页面ID; 比如: demoPage</td>\n</tr>\n<tr>\n<td>--actionId</td>\n<td>String</td>\n<td>必返回✅ 操作ID; 比如: selectStudentList</td>\n</tr>\n<tr>\n<td>--errorCode</td>\n<td>String</td>\n<td>错误码, 当status===\'fail\'时返回, E.g: token_expired, request_body_invalid</td>\n</tr>\n<tr>\n<td>--errorReason</td>\n<td>String</td>\n<td>错误码说明, 当status===\'fail\'时返回, E.g: token失效, params字段字段却失</td>\n</tr>\n<tr>\n<td>--errorReasonSupplement</td>\n<td>String</td>\n<td>错误码说明 补充, E.g: \"id must not be null\"</td>\n</tr>\n<tr>\n<td>--resultData</td>\n<td>Object</td>\n<td>必返回✅  resource请求的响应数据</td>\n</tr>\n</tbody></table>\n</blockquote>\n</li></ul>\n<h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\">  package </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  packageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'123456\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">  packageType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'httpRequest\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">  appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    appId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}`,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'protocolDemo\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'insertItem\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    userAgent</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'demo_userAgent\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    authToken</span><span class=\"pun\">:</span><span class=\"pln\"> localStorage</span><span class=\"pun\">.</span><span class=\"pln\">getItem</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}</span><span class=\"pln\">_authToken</span><span class=\"pun\">`),</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">      studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'G00003\'</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">      classId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'2021-01级-02班\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">      gender</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'male\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">      level</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'02\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">      name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'小虾米\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    where</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"pun\">字段</span><span class=\"pln\">A</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'A\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">字段</span><span class=\"pln\">B</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'B\'</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    whereIn</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">\'id\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"lit\">2</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"lit\">3</span><span class=\"pun\">]),</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    whereLike</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"pun\">字段</span><span class=\"pln\">A</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'A\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">字段</span><span class=\"pln\">B</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'B\'</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    whereOptions</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[[</span><span class=\"str\">\'name\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'=\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'zhangshan\'</span><span class=\"pun\">],[</span><span class=\"str\">\'level\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'&gt;\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"lit\">3</span><span class=\"pun\">]],</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    whereOrOptions</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[[</span><span class=\"str\">\'name\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'=\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'zhangshan\'</span><span class=\"pun\">],[</span><span class=\"str\">\'level\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'&gt;\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"lit\">3</span><span class=\"pun\">]],</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    offset</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">10</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    limit</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">20</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    orderBy</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"pln\"> column</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'email\'</span><span class=\"pln\"> </span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> column</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'age\'</span><span class=\"pun\">,</span><span class=\"pln\"> order</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'desc\'</span><span class=\"pln\"> </span><span class=\"pun\">}],</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pun\">};</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await axios</span><span class=\"pun\">(</span><span class=\"pln\">package</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> rows </span><span class=\"pun\">=</span><span class=\"pln\"> result</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">resultData</span><span class=\"pun\">.</span><span class=\"pln\">rows</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">\'rows\'</span><span class=\"pun\">,</span><span class=\"pln\"> rows</span><span class=\"pun\">);</span></code></li></ol></pre>\n<h3 id=\"h3-u53C2u8003u7528u4F8Bu4E4Bjianghuaxios\"><a class=\"reference-link\" name=\"参考用例之jianghuAxios\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例之jianghuAxios</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">{% include \'common/jianghuAxios.html\' %}</span></code></li><li class=\"L1\"><code class=\"language-html\"></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"tag\">&lt;script&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">  data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">    appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">      pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'protocolDemo\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">      actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'insertItem\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">      actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">        studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'G00003\'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">        classId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'2021-01级-02班\'</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">        gender</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'male\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">        level</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'02\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">        name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'小虾米\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pun\">});</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await axios</span><span class=\"pun\">(</span><span class=\"pln\">package</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"kwd\">const</span><span class=\"pln\"> rows </span><span class=\"pun\">=</span><span class=\"pln\"> result</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">resultData</span><span class=\"pun\">.</span><span class=\"pln\">rows</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">\'rows\'</span><span class=\"pun\">,</span><span class=\"pln\"> rows</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"tag\">&lt;/script&gt;</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-04-23T13:46:22+08:00', 'm3611F', '刘计', '2022-06-07T20:44:37+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-07T20:44:37+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1422, 10008, '10004', '02应用协议', '', 'public', '2022-04-23T13:46:56+08:00', '应用协议配置', NULL, '## Resource协议说明\n\n- Resource协议的原理是根据 请求body里的 `pageId`& `actionId`去匹配`_resource`表中的数据, 然后执行对应的 sql操作 或者 service方法.\n  - sql resource: 后端根据请求组装出sql, 然后执行 并 将结果返回给前端\n  - service resource: 后端根据请求找出/app/service下对应的service, 然后执行对应的方法 并 将结果返回给前端\n- 具体可以查看[前端接口调用](https://openjianghu.org/doc/page/article/10015)、[协议数据结构](https://openjianghu.org/doc/page/article/10007)\n\n\n## Resource协议配置\n\n* Resource协议的配置方式，默认是通过手动修改数据库操作的\n* 开发者可以自行创建`_resource`表的`crud`页面，便于管理，但是要控制好权限\n\n## _resource表数据结构\n\n| 字段 | 说明 |\n|  --- | ----        |\n| accessControlTable|数据规则控制表|\n| resourceHook|协议的前置和后置操作方法\'](#hook)|\n| pageId| 接口的一级名称|\n| actionId| 接口的二级名称，结合一级名称可以快速定位接口|\n| desc| 协议的描述说明|\n| resourceType| 协议类型; sql: 处理简单的`crud`操作; service:手动创建相关service处理复杂的逻辑;|\n| appDataSchema| appData 参数数据结构的校验|\n| resourceData | 协议的具体实现配置|\n| requestDemo| Demo仅供开发者参考使用|\n| responseDemo| Demo仅供开发者参考使用|\n| operation| 操作; softInsert softUpdate softDelete select|\n\n### 数据参考用例\n\n| id | accessControlTable | resourceHook | pageId | actionId | desc | resourceType | appDataSchema | resourceData | requestDemo | responseDemo |\n|  --- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n|  1 | access_control_student_basic | { \"before\": [{ \"service\": \"student\", \"serviceFunction\": \"studentSomeFunction\" }], \"after\": [] } | frontendDemo01 | selectItemList | 查询列表 | sql |  | { \"table\": \"student_basic\", \"operation\": \"select\" } |\n|  2 |  | | allPage | userInfo | 获取用户信息 | service |  | {\"service\": \"user\", \"serviceFunction\": \"userInfo\"} |\n\n## 数据规则控制表(accessControlTable)\n\n用户维度配置数据规则\n\n### 参考用例\n\n> 1. 字段`_resource`.accessControlTable内容为表名字 `access_control_student`\n> 1. 创建表 `access_control_student`\n> 1. 针对特定用户添加 数据规则\n| id | userId | username | resourceData |\n|  --- | ---- | ---- | ---- |\n|  1 | G00001 | 洪七公 | { \"where\":{\"level\": \"02\"} } |\n\n## appData参数校验(appDataSchema)\n\n- 协议请求参数数据结构的校验\n\n### 参考用例\n\n>  additionalProperties 默认就是true, true: 只能传`properties`包含的参数，比较常用的场景是。`resourceType`为`sql`的协议时 对请求参数进行校验\n```javascript\n{\n    \"type\": \"object\",\n    \"additionalProperties\": true,\n    \"required\": [ \"aaa\" ],\n    \"properties\": {\n      \"aaa\": { \"type\": \"string\" },\n      \"bbb\": { \"anyOf\": [{ \"type\": \"string\" }, { \"type\": \"null\" }] },\n    },\n  }\n```\n\n### resourceType & resourceData\n\n -`sql`: 后端根据请求组装出sql, 然后执行 并 将结果返回给前端\n -`service`: 后端根据请求找出/app/service下对应的service, 然后执行对应的方法 并 将结果返回给前端\n> 简单的数据增删改查，建议适用sql\n> 复杂的数据操作，需要编写`service`方法，对数据或者多个表进行处理\n\n### 参考用例\n\n| resourceType | resourceData |\n|  --- | ---- |\n|  sql | { \"table\": \"${tableName}\", \"operation\": \"select\" } |\n|  sql | { \"table\": \"${tableName}\", \"operation\": \"jhInsert\" } |\n|  sql | { \"table\": \"${tableName}\", \"operation\": \"jhDelete\" } |\n|  sql | { \"table\": \"${tableName}\", \"operation\": \"jhUpdate\" } |\n|  service |{ \"service\": \"service文件名\", \"serviceFunction\": \"service方法名\" }  |\n\n### operation\n\n- `insert`、`delete`、`update`、`select`、`jhInsert`、`jhUpdate`、`jhDelete`；\n    - `insert`、`update`、`delete`、`select` 就是默认的`sql`操作类型；\n    - `jhInsert`、`jhUpdate`、`jhDelete` 【插入】数据的同时会将数据记录到`_record_history`表 ===>为数据的插入操作保留轨迹；\n\n## 动态数据查询\n\n- 动态数据`sql`查询方式，支持在`resourceData`中配置`where、whereLike、whereIn、whereOptions、whereOrOptions`条件来实现`动态数据`查询，\n\n\n### 参考用例\n\n- > 在`_resource`表中配置`resourceData` { \"table\": \"_view01_cgg_member_app_directory\", \"action\": \"select\", \"where\": { \"loginId\": \"ctx.userInfo.user.userId\" } }\n- > `where`的`key`为要查询的判断的字段名字，`ctx.userInfo.user.userId`为一段可被`eval`执行的`js`语句字符串;\n	如果需要纯字符串，可以把内容加单引号`\"\'string\'\"`；\n\n \n- ### 实现逻辑\n- 中间件 `httpResourceHook.js`；读取`resourceData`的`where`条件进行相关操作。\n```shell\n//支持在 resourceData 中配置 where、whereLike、whereIn、whereOr 的动态数据\nasync function buildWhereConditionFromResourceData(resourceData, ctx, userInfo) {\n	  if (!resourceData) {\n		return \'\';\n	  }\n\n	  const backendAppData = {};\n	  //如：{ \"where\": { \"field1\": \"ctx.someData\" } }\n	  [ \'where\', \'whereLike\', \'whereIn\' ].forEach(appDataKey => {\n		const expressionObject = resourceData[appDataKey];\n		if (!expressionObject) {\n		  return;\n		}\n		const valueObject = {};\n		_.forEach(expressionObject, (value, key) => {\n		  valueObject[key] = eval(value);\n		});\n		backendAppData[appDataKey] = valueObject;\n	  });\n\n	  //如：{ \"whereOptions\": \"ctx.someList\" }\n	  [ \'whereOptions\', \'whereOrOptions\' ].forEach(appDataKey => {\n		const expression = resourceData[appDataKey];\n		if (!expression) {\n		  return;\n		}\n		backendAppData[appDataKey] = eval(expression);\n	  });\n\n	  return buildWhereConditionFromAppData(backendAppData);\n}\n```\n\n## resourceHook\n\n- 协议的前置和后置`service`方法\n\n### 参考用例\n\n- > { \"before\": [{ \"service\": \"service文件名\", \"serviceFunction\": \"service方法名\" }], \"after\": [{ \"service\": \"service文件名\", \"serviceFunction\": \"service方法名\" }] }\n- `before`: 在`sql`执行之前，框架中间件`httpResourceHook.js`，读取并运行`service方法`\n- `after`: 在`sql`执行之后，框架中间件`httpResourceHook.js`，读取并运行`service方法`\n\n### 实现逻辑\n\n```javascript\nif (beforeHooks) {\n	  for (const beforeHook of beforeHooks) {\n		const { service, serviceFunction } = beforeHook;\n		checkServiceFunction(service, serviceFunction);\n		await ctx.service[service][serviceFunction](ctx.request.body.appData.actionData, ctx);\n	  }\n}\nif (afterHooks) {\n	  for (const afterHook of afterHooks) {\n		const { service, serviceFunction } = afterHook;\n		checkServiceFunction(service, serviceFunction);\n		await ctx.service[service][serviceFunction](ctx.request.body.appData.actionData, ctx);\n	  }\n}\n```\n\n## service\n\n> service方法目录：/app/service/**\n\n### 参考用例\n```shell\n\'use strict\';\n// 文件位置：	   /app/service/student.js\n// resourceData： { \"service\": \"student\", \"serviceFunction\": \"appendStudentInfoToUserInfo\" }\nconst Service = require(\'egg\').Service;\n// 文件名+\'Service\' = StudentService\nclass StudentService extends Service {\n	  async appendStudentInfoToUserInfo() {\n		const studentInfo = await this.app.jianghuKnex(\'student_basic\').where({studentId: this.ctx.userInfo.user.userId}).first();\n		this.ctx.userInfo.studentInfo = studentInfo || { classId: null };\n	  }\n}\nmodule.exports = StudentService;\n```\n\n### 代码逻辑\n\n```shell\n//resourceData 存放的数据\n{ \"service\": \"文件名.js\", \"serviceFunction\": \"serviceFunction\" } \n//接口请求 -> route -> ResourceController.httpRequest 方法\n//根据 resourceType == \'service\' 调用 `serviceResource`\n...\ncase resourceTypeEnum.service:\n  resultData = await serviceResource({ ctx, body });\n  ctx.body = httpResponse.success({ packageId, appData: resultData });\n  break;\n...\nasync function serviceResource({ ctx, body }) {\n	  ...\n	  //注意: 这里必须 \'ctx.service[serviceName][methodName]\' 这样 写; 否则service无法获取egg 相关属性\n	  //ctx.service `service` 提前挂载在上下文中了，可以直接调用\n	  const resultData = await ctx.service[service][serviceFunction](actionData, ctx);\n	  //返回结果给前端调用\n	  return resultData;\n}\n```\n\n### ctx\n\n- 框架的全局上下文，在相关`service`、`controller`、`middleware`中可以使用`this.ctx`调用。\n- 上下文中，包含`app`、`request`、`response`等，更多详细信息，开发者可自行断点查看。\n- ### 参考用例\n```shell\nconst { allowPageList } = this.ctx.userInfo;\nconst userAgent = this.ctx.request.body.appData.userAgent || \'\';\nconst { authToken } = this.ctx.request.body.appData;\n```\n\n### app\n\n- `app`上下文中，默认包含`service方法、middleware方法、knex、jianghuKnex、config、logger、_cache`。\n- 用户可以自己添加数据到`app`中，方便全局使用\n\n## jianghuKnex\n\n- `jianghuKnex`是对`knex`库的常用方法的封装；\n- 如下方的`jhInsert`方法，会自动添加框架数据规范的一些通用属性`operation`、`operationByUserId`、`operationByUser`、`operationAt`等信息；\n\n### 代码逻辑\n\n```shell\n...\njhInsert: async params => {\n	  const operation = \'jhInsert\';\n	  if (Array.isArray(params)) {\n		params = params.map(item => {\n		  return { ...item, operation, operationByUserId, operationByUser, operationAt };\n		});\n	  } else {\n		params = { ...params, operation, operationByUserId, operationByUser, operationAt };\n	  }\n	  //插入数据产生的新idList\n	  const ids = await target.insert(params);\n	  //保留操作历史\n	  await backupNewDataListToRecordHistory({ ids, table, knex, operation, requestBody, operationByUserId, operationByUser, operationAt });\n	  return ids;\n},\n...\n```\n\n### 参考用例：\n\n```shell\njianghuKnex(${tableName}).insert({ 字段：xxx, 字段：xxx });\njianghuKnex(${tableName}).where({ 字段：xxx, 字段：xxx }).update({ 字段: 内容, 字段: 内容 });\njianghuKnex(${tableName}).where({ 字段：xxx, 字段：xxx }).select();\njianghuKnex(${tableName}).where({ 字段：xxx, 字段：xxx }).softDelete();\njianghuKnex(${tableName}).where({ 字段：xxx, 字段：xxx }).softUpdate({ 字段: 内容, 字段: 内容 });\n```\n\n## requestDemo & responseDemo\n\n请求Demo 和 响应Demo\n当 `jiangHuConfig`.`updateRequestDemoAndResponseDemo` 设置为true时 框架会自动保存最新一条协议请求的 请求&响应 作为Demo\n\n### requestDemo\n\n```shell\n{\n    \"appData\":{\n        \"pageId\":\"allPage\",\n        \"actionId\":\"userInfo\",\n        \"actionData\":{\n\n        },\n        \"appId\":\"jianghujs_demo_basic\",\n        \"userAgent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36\"\n    },\n    \"packageId\":\"1644935324054_6592543\",\n    \"packageType\":\"httpRequest\"\n}\n```\n\n### responseDemo\n\n框架会自动保存最新一条协议返回作为demo保存\n```shell\n{\n    \"packageId\":\"1644935324054_6592543\",\n    \"packageType\":\"httpResponse\",\n    \"status\":\"success\",\n    \"timestamp\":\"2022-02-15T22:28:45+08:00\"\n}\n```', '<h2 id=\"h2-resourceu534Fu8BAEu8BF4u660E\"><a class=\"reference-link\" name=\"Resource协议说明\"></a><span class=\"header-link octicon octicon-link\"></span>Resource协议说明</h2><ul>\n<li>Resource协议的原理是根据 请求body里的 <code>pageId</code>&amp; <code>actionId</code>去匹配<code>_resource</code>表中的数据, 然后执行对应的 sql操作 或者 service方法.<ul>\n<li>sql resource: 后端根据请求组装出sql, 然后执行 并 将结果返回给前端</li><li>service resource: 后端根据请求找出/app/service下对应的service, 然后执行对应的方法 并 将结果返回给前端</li></ul>\n</li><li>具体可以查看<a href=\"https://openjianghu.org/doc/page/article/10015\">前端接口调用</a>、<a href=\"https://openjianghu.org/doc/page/article/10007\">协议数据结构</a></li></ul>\n<h2 id=\"h2-resourceu534Fu8BAEu914Du7F6E\"><a class=\"reference-link\" name=\"Resource协议配置\"></a><span class=\"header-link octicon octicon-link\"></span>Resource协议配置</h2><ul>\n<li>Resource协议的配置方式，默认是通过手动修改数据库操作的</li><li>开发者可以自行创建<code>_resource</code>表的<code>crud</code>页面，便于管理，但是要控制好权限</li></ul>\n<h2 id=\"h2-_resourceu8868u6570u636Eu7ED3u6784\"><a class=\"reference-link\" name=\"_resource表数据结构\"></a><span class=\"header-link octicon octicon-link\"></span>_resource表数据结构</h2><table>\n<thead>\n<tr>\n<th>字段</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>accessControlTable</td>\n<td>数据规则控制表</td>\n</tr>\n<tr>\n<td>resourceHook</td>\n<td>协议的前置和后置操作方法’](#hook)</td>\n</tr>\n<tr>\n<td>pageId</td>\n<td>接口的一级名称</td>\n</tr>\n<tr>\n<td>actionId</td>\n<td>接口的二级名称，结合一级名称可以快速定位接口</td>\n</tr>\n<tr>\n<td>desc</td>\n<td>协议的描述说明</td>\n</tr>\n<tr>\n<td>resourceType</td>\n<td>协议类型; sql: 处理简单的<code>crud</code>操作; service:手动创建相关service处理复杂的逻辑;</td>\n</tr>\n<tr>\n<td>appDataSchema</td>\n<td>appData 参数数据结构的校验</td>\n</tr>\n<tr>\n<td>resourceData</td>\n<td>协议的具体实现配置</td>\n</tr>\n<tr>\n<td>requestDemo</td>\n<td>Demo仅供开发者参考使用</td>\n</tr>\n<tr>\n<td>responseDemo</td>\n<td>Demo仅供开发者参考使用</td>\n</tr>\n<tr>\n<td>operation</td>\n<td>操作; softInsert softUpdate softDelete select</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-u6570u636Eu53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"数据参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>数据参考用例</h3><table>\n<thead>\n<tr>\n<th>id</th>\n<th>accessControlTable</th>\n<th>resourceHook</th>\n<th>pageId</th>\n<th>actionId</th>\n<th>desc</th>\n<th>resourceType</th>\n<th>appDataSchema</th>\n<th>resourceData</th>\n<th>requestDemo</th>\n<th>responseDemo</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>access_control_student_basic</td>\n<td>{ “before”: [{ “service”: “student”, “serviceFunction”: “studentSomeFunction” }], “after”: [] }</td>\n<td>frontendDemo01</td>\n<td>selectItemList</td>\n<td>查询列表</td>\n<td>sql</td>\n<td></td>\n<td>{ “table”: “student_basic”, “operation”: “select” }</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td></td>\n<td></td>\n<td>allPage</td>\n<td>userInfo</td>\n<td>获取用户信息</td>\n<td>service</td>\n<td></td>\n<td>{“service”: “user”, “serviceFunction”: “userInfo”}</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"h2-u6570u636Eu89C4u5219u63A7u5236u886828accesscontroltable29\"><a class=\"reference-link\" name=\"数据规则控制表(accessControlTable)\"></a><span class=\"header-link octicon octicon-link\"></span>数据规则控制表(accessControlTable)</h2><p>用户维度配置数据规则</p>\n<h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><blockquote class=\"default\">\n<ol>\n<li>字段<code>_resource</code>.accessControlTable内容为表名字 <code>access_control_student</code></li><li>创建表 <code>access_control_student</code></li><li>针对特定用户添加 数据规则<table>\n<thead>\n<tr>\n<th>id</th>\n<th>userId</th>\n<th>username</th>\n<th>resourceData</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>G00001</td>\n<td>洪七公</td>\n<td>{ “where”:{“level”: “02”} }</td>\n</tr>\n</tbody></table>\n</li></ol>\n</blockquote>\n<h2 id=\"h2-appdatau53C2u6570u6821u9A8C28appdataschema29\"><a class=\"reference-link\" name=\"appData参数校验(appDataSchema)\"></a><span class=\"header-link octicon octicon-link\"></span>appData参数校验(appDataSchema)</h2><ul>\n<li>协议请求参数数据结构的校验</li></ul>\n<h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><blockquote class=\"default\">\n<p> additionalProperties 默认就是true, true: 只能传<code>properties</code>包含的参数，比较常用的场景是。<code>resourceType</code>为<code>sql</code>的协议时 对请求参数进行校验</p>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"str\">\"type\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"object\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"str\">\"additionalProperties\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"str\">\"required\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"str\">\"aaa\"</span><span class=\"pln\"> </span><span class=\"pun\">],</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"str\">\"properties\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"str\">\"aaa\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"str\">\"type\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"string\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"str\">\"bbb\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"str\">\"anyOf\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"pln\"> </span><span class=\"str\">\"type\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"string\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"str\">\"type\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"null\"</span><span class=\"pln\"> </span><span class=\"pun\">}]</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li></ol></pre>\n<h3 id=\"h3-resourcetype26amp3B20resourcedata\"><a class=\"reference-link\" name=\"resourceType &amp; resourceData\"></a><span class=\"header-link octicon octicon-link\"></span>resourceType &amp; resourceData</h3><p> -<code>sql</code>: 后端根据请求组装出sql, 然后执行 并 将结果返回给前端<br> -<code>service</code>: 后端根据请求找出/app/service下对应的service, 然后执行对应的方法 并 将结果返回给前端</p>\n<blockquote class=\"default\">\n<p>简单的数据增删改查，建议适用sql<br>复杂的数据操作，需要编写<code>service</code>方法，对数据或者多个表进行处理</p>\n</blockquote>\n<h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><table>\n<thead>\n<tr>\n<th>resourceType</th>\n<th>resourceData</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>sql</td>\n<td>{ “table”: “${tableName}”, “operation”: “select” }</td>\n</tr>\n<tr>\n<td>sql</td>\n<td>{ “table”: “${tableName}”, “operation”: “jhInsert” }</td>\n</tr>\n<tr>\n<td>sql</td>\n<td>{ “table”: “${tableName}”, “operation”: “jhDelete” }</td>\n</tr>\n<tr>\n<td>sql</td>\n<td>{ “table”: “${tableName}”, “operation”: “jhUpdate” }</td>\n</tr>\n<tr>\n<td>service</td>\n<td>{ “service”: “service文件名”, “serviceFunction”: “service方法名” }</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-operation\"><a class=\"reference-link\" name=\"operation\"></a><span class=\"header-link octicon octicon-link\"></span>operation</h3><ul>\n<li><code>insert</code>、<code>delete</code>、<code>update</code>、<code>select</code>、<code>jhInsert</code>、<code>jhUpdate</code>、<code>jhDelete</code>；<ul>\n<li><code>insert</code>、<code>update</code>、<code>delete</code>、<code>select</code> 就是默认的<code>sql</code>操作类型；</li><li><code>jhInsert</code>、<code>jhUpdate</code>、<code>jhDelete</code> 【插入】数据的同时会将数据记录到<code>_record_history</code>表 ===&gt;为数据的插入操作保留轨迹；</li></ul>\n</li></ul>\n<h2 id=\"h2-u52A8u6001u6570u636Eu67E5u8BE2\"><a class=\"reference-link\" name=\"动态数据查询\"></a><span class=\"header-link octicon octicon-link\"></span>动态数据查询</h2><ul>\n<li>动态数据<code>sql</code>查询方式，支持在<code>resourceData</code>中配置<code>where、whereLike、whereIn、whereOptions、whereOrOptions</code>条件来实现<code>动态数据</code>查询，</li></ul>\n<h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><ul>\n<li><blockquote class=\"default\">\n<p>在<code>_resource</code>表中配置<code>resourceData</code> { “table”: “_view01_cgg_member_app_directory”, “action”: “select”, “where”: { “loginId”: “ctx.userInfo.user.userId” } }</p>\n</blockquote>\n</li><li><blockquote class=\"default\">\n<p><code>where</code>的<code>key</code>为要查询的判断的字段名字，<code>ctx.userInfo.user.userId</code>为一段可被<code>eval</code>执行的<code>js</code>语句字符串;<br>  如果需要纯字符串，可以把内容加单引号<code>\"\'string\'\"</code>；</p>\n</blockquote>\n</li><li><h3 id=\"h3-u5B9Eu73B0u903Bu8F91\"><a class=\"reference-link\" name=\"实现逻辑\"></a><span class=\"header-link octicon octicon-link\"></span>实现逻辑</h3></li><li><p>中间件 <code>httpResourceHook.js</code>；读取<code>resourceData</code>的<code>where</code>条件进行相关操作。</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"com\">//支持在 resourceData 中配置 where、whereLike、whereIn、whereOr 的动态数据</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">async </span><span class=\"kwd\">function</span><span class=\"pln\"> buildWhereConditionFromResourceData</span><span class=\"pun\">(</span><span class=\"pln\">resourceData</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">,</span><span class=\"pln\"> userInfo</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">resourceData</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-shell\"></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> backendAppData </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{};</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"com\">//如：{ \"where\": { \"field1\": \"ctx.someData\" } }</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"str\">\'where\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'whereLike\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'whereIn\'</span><span class=\"pln\"> </span><span class=\"pun\">].</span><span class=\"pln\">forEach</span><span class=\"pun\">(</span><span class=\"pln\">appDataKey </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> expressionObject </span><span class=\"pun\">=</span><span class=\"pln\"> resourceData</span><span class=\"pun\">[</span><span class=\"pln\">appDataKey</span><span class=\"pun\">];</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">expressionObject</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> valueObject </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{};</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">      _</span><span class=\"pun\">.</span><span class=\"pln\">forEach</span><span class=\"pun\">(</span><span class=\"pln\">expressionObject</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">value</span><span class=\"pun\">,</span><span class=\"pln\"> key</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">        valueObject</span><span class=\"pun\">[</span><span class=\"pln\">key</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">eval</span><span class=\"pun\">(</span><span class=\"pln\">value</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"pun\">});</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">      backendAppData</span><span class=\"pun\">[</span><span class=\"pln\">appDataKey</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> valueObject</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">});</span></code></li><li class=\"L9\"><code class=\"language-shell\"></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"com\">//如：{ \"whereOptions\": \"ctx.someList\" }</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"str\">\'whereOptions\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'whereOrOptions\'</span><span class=\"pln\"> </span><span class=\"pun\">].</span><span class=\"pln\">forEach</span><span class=\"pun\">(</span><span class=\"pln\">appDataKey </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> expression </span><span class=\"pun\">=</span><span class=\"pln\"> resourceData</span><span class=\"pun\">[</span><span class=\"pln\">appDataKey</span><span class=\"pun\">];</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">expression</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">      backendAppData</span><span class=\"pun\">[</span><span class=\"pln\">appDataKey</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">eval</span><span class=\"pun\">(</span><span class=\"pln\">expression</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">});</span></code></li><li class=\"L8\"><code class=\"language-shell\"></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> buildWhereConditionFromAppData</span><span class=\"pun\">(</span><span class=\"pln\">backendAppData</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-resourcehook\"><a class=\"reference-link\" name=\"resourceHook\"></a><span class=\"header-link octicon octicon-link\"></span>resourceHook</h2><ul>\n<li>协议的前置和后置<code>service</code>方法</li></ul>\n<h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><ul>\n<li><blockquote class=\"default\">\n<p>{ “before”: [{ “service”: “service文件名”, “serviceFunction”: “service方法名” }], “after”: [{ “service”: “service文件名”, “serviceFunction”: “service方法名” }] }</p>\n</blockquote>\n</li><li><code>before</code>: 在<code>sql</code>执行之前，框架中间件<code>httpResourceHook.js</code>，读取并运行<code>service方法</code></li><li><code>after</code>: 在<code>sql</code>执行之后，框架中间件<code>httpResourceHook.js</code>，读取并运行<code>service方法</code></li></ul>\n<h3 id=\"h3-u5B9Eu73B0u903Bu8F91\"><a class=\"reference-link\" name=\"实现逻辑\"></a><span class=\"header-link octicon octicon-link\"></span>实现逻辑</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">beforeHooks</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"kwd\">for</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">const</span><span class=\"pln\"> beforeHook of beforeHooks</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> service</span><span class=\"pun\">,</span><span class=\"pln\"> serviceFunction </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> beforeHook</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">        checkServiceFunction</span><span class=\"pun\">(</span><span class=\"pln\">service</span><span class=\"pun\">,</span><span class=\"pln\"> serviceFunction</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">        await ctx</span><span class=\"pun\">.</span><span class=\"pln\">service</span><span class=\"pun\">[</span><span class=\"pln\">service</span><span class=\"pun\">][</span><span class=\"pln\">serviceFunction</span><span class=\"pun\">](</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">body</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">actionData</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">afterHooks</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"kwd\">for</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">const</span><span class=\"pln\"> afterHook of afterHooks</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> service</span><span class=\"pun\">,</span><span class=\"pln\"> serviceFunction </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> afterHook</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">        checkServiceFunction</span><span class=\"pun\">(</span><span class=\"pln\">service</span><span class=\"pun\">,</span><span class=\"pln\"> serviceFunction</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">        await ctx</span><span class=\"pun\">.</span><span class=\"pln\">service</span><span class=\"pun\">[</span><span class=\"pln\">service</span><span class=\"pun\">][</span><span class=\"pln\">serviceFunction</span><span class=\"pun\">](</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">body</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">actionData</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pun\">}</span></code></li></ol></pre>\n<h2 id=\"h2-service\"><a class=\"reference-link\" name=\"service\"></a><span class=\"header-link octicon octicon-link\"></span>service</h2><blockquote class=\"default\">\n<p>service方法目录：/app/service/**</p>\n</blockquote>\n<h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"str\">\'use strict\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"com\">// 文件位置：       /app/service/student.js</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"com\">// resourceData： { \"service\": \"student\", \"serviceFunction\": \"appendStudentInfoToUserInfo\" }</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">require</span><span class=\"pun\">(</span><span class=\"str\">\'egg\'</span><span class=\"pun\">).</span><span class=\"typ\">Service</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"com\">// 文件名+\'Service\' = StudentService</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"typ\">StudentService</span><span class=\"pln\"> </span><span class=\"kwd\">extends</span><span class=\"pln\"> </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">      async appendStudentInfoToUserInfo</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> studentInfo </span><span class=\"pun\">=</span><span class=\"pln\"> await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"kwd\">where</span><span class=\"pun\">({</span><span class=\"pln\">studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">userInfo</span><span class=\"pun\">.</span><span class=\"pln\">user</span><span class=\"pun\">.</span><span class=\"pln\">userId</span><span class=\"pun\">}).</span><span class=\"pln\">first</span><span class=\"pun\">();</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">userInfo</span><span class=\"pun\">.</span><span class=\"pln\">studentInfo </span><span class=\"pun\">=</span><span class=\"pln\"> studentInfo </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> classId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">};</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"kwd\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">StudentService</span><span class=\"pun\">;</span></code></li></ol></pre>\n<h3 id=\"h3-u4EE3u7801u903Bu8F91\"><a class=\"reference-link\" name=\"代码逻辑\"></a><span class=\"header-link octicon octicon-link\"></span>代码逻辑</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"com\">//resourceData 存放的数据</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"str\">\"service\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"文件名.js\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"serviceFunction\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"serviceFunction\"</span><span class=\"pln\"> </span><span class=\"pun\">}</span><span class=\"pln\"> </span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"com\">//接口请求 -&gt; route -&gt; ResourceController.httpRequest 方法</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"com\">//根据 resourceType == \'service\' 调用 `serviceResource`</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pun\">...</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"kwd\">case</span><span class=\"pln\"> resourceTypeEnum</span><span class=\"pun\">.</span><span class=\"pln\">service</span><span class=\"pun\">:</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">  resultData </span><span class=\"pun\">=</span><span class=\"pln\"> await serviceResource</span><span class=\"pun\">({</span><span class=\"pln\"> ctx</span><span class=\"pun\">,</span><span class=\"pln\"> body </span><span class=\"pun\">});</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">  ctx</span><span class=\"pun\">.</span><span class=\"pln\">body </span><span class=\"pun\">=</span><span class=\"pln\"> httpResponse</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">({</span><span class=\"pln\"> packageId</span><span class=\"pun\">,</span><span class=\"pln\"> appData</span><span class=\"pun\">:</span><span class=\"pln\"> resultData </span><span class=\"pun\">});</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pun\">...</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">async </span><span class=\"kwd\">function</span><span class=\"pln\"> serviceResource</span><span class=\"pun\">({</span><span class=\"pln\"> ctx</span><span class=\"pun\">,</span><span class=\"pln\"> body </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"pun\">...</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"com\">//注意: 这里必须 \'ctx.service[serviceName][methodName]\' 这样 写; 否则service无法获取egg 相关属性</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"com\">//ctx.service `service` 提前挂载在上下文中了，可以直接调用</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> resultData </span><span class=\"pun\">=</span><span class=\"pln\"> await ctx</span><span class=\"pun\">.</span><span class=\"pln\">service</span><span class=\"pun\">[</span><span class=\"pln\">service</span><span class=\"pun\">][</span><span class=\"pln\">serviceFunction</span><span class=\"pun\">](</span><span class=\"pln\">actionData</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"com\">//返回结果给前端调用</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> resultData</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li></ol></pre>\n<h3 id=\"h3-ctx\"><a class=\"reference-link\" name=\"ctx\"></a><span class=\"header-link octicon octicon-link\"></span>ctx</h3><ul>\n<li>框架的全局上下文，在相关<code>service</code>、<code>controller</code>、<code>middleware</code>中可以使用<code>this.ctx</code>调用。</li><li>上下文中，包含<code>app</code>、<code>request</code>、<code>response</code>等，更多详细信息，开发者可自行断点查看。</li><li><h3 id=\"h3-u53C2u8003u7528u4F8B\"><a class=\"reference-link\" name=\"参考用例\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> allowPageList </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">userInfo</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> userAgent </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">body</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">userAgent </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> authToken </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">body</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li></ul>\n<h3 id=\"h3-app\"><a class=\"reference-link\" name=\"app\"></a><span class=\"header-link octicon octicon-link\"></span>app</h3><ul>\n<li><code>app</code>上下文中，默认包含<code>service方法、middleware方法、knex、jianghuKnex、config、logger、_cache</code>。</li><li>用户可以自己添加数据到<code>app</code>中，方便全局使用</li></ul>\n<h2 id=\"h2-jianghuknex\"><a class=\"reference-link\" name=\"jianghuKnex\"></a><span class=\"header-link octicon octicon-link\"></span>jianghuKnex</h2><ul>\n<li><code>jianghuKnex</code>是对<code>knex</code>库的常用方法的封装；</li><li>如下方的<code>jhInsert</code>方法，会自动添加框架数据规范的一些通用属性<code>operation</code>、<code>operationByUserId</code>、<code>operationByUser</code>、<code>operationAt</code>等信息；</li></ul>\n<h3 id=\"h3-u4EE3u7801u903Bu8F91\"><a class=\"reference-link\" name=\"代码逻辑\"></a><span class=\"header-link octicon octicon-link\"></span>代码逻辑</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pun\">...</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">jhInsert</span><span class=\"pun\">:</span><span class=\"pln\"> async </span><span class=\"kwd\">params</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> operation </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'jhInsert\'</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"typ\">Array</span><span class=\"pun\">.</span><span class=\"pln\">isArray</span><span class=\"pun\">(</span><span class=\"kwd\">params</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">params</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">params</span><span class=\"pun\">.</span><span class=\"pln\">map</span><span class=\"pun\">(</span><span class=\"pln\">item </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"pun\">...</span><span class=\"pln\">item</span><span class=\"pun\">,</span><span class=\"pln\"> operation</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> operationAt </span><span class=\"pun\">};</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"pun\">});</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">params</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"pun\">...</span><span class=\"kwd\">params</span><span class=\"pun\">,</span><span class=\"pln\"> operation</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> operationAt </span><span class=\"pun\">};</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"com\">//插入数据产生的新idList</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> ids </span><span class=\"pun\">=</span><span class=\"pln\"> await target</span><span class=\"pun\">.</span><span class=\"pln\">insert</span><span class=\"pun\">(</span><span class=\"kwd\">params</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"com\">//保留操作历史</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">      await backupNewDataListToRecordHistory</span><span class=\"pun\">({</span><span class=\"pln\"> ids</span><span class=\"pun\">,</span><span class=\"pln\"> table</span><span class=\"pun\">,</span><span class=\"pln\"> knex</span><span class=\"pun\">,</span><span class=\"pln\"> operation</span><span class=\"pun\">,</span><span class=\"pln\"> requestBody</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> operationAt </span><span class=\"pun\">});</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> ids</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pun\">...</span></code></li></ol></pre>\n<h3 id=\"h3-u53C2u8003u7528u4F8BuFF1A\"><a class=\"reference-link\" name=\"参考用例：\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例：</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">tableName</span><span class=\"pun\">}).</span><span class=\"pln\">insert</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx </span><span class=\"pun\">});</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">tableName</span><span class=\"pun\">}).</span><span class=\"kwd\">where</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx </span><span class=\"pun\">}).</span><span class=\"pln\">update</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"pun\">字段:</span><span class=\"pln\"> </span><span class=\"pun\">内容,</span><span class=\"pln\"> </span><span class=\"pun\">字段:</span><span class=\"pln\"> </span><span class=\"pun\">内容</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">tableName</span><span class=\"pun\">}).</span><span class=\"kwd\">where</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx </span><span class=\"pun\">}).</span><span class=\"kwd\">select</span><span class=\"pun\">();</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">tableName</span><span class=\"pun\">}).</span><span class=\"kwd\">where</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx </span><span class=\"pun\">}).</span><span class=\"pln\">softDelete</span><span class=\"pun\">();</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">tableName</span><span class=\"pun\">}).</span><span class=\"kwd\">where</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">字段：</span><span class=\"pln\">xxx </span><span class=\"pun\">}).</span><span class=\"pln\">softUpdate</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"pun\">字段:</span><span class=\"pln\"> </span><span class=\"pun\">内容,</span><span class=\"pln\"> </span><span class=\"pun\">字段:</span><span class=\"pln\"> </span><span class=\"pun\">内容</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li></ol></pre>\n<h2 id=\"h2-requestdemo26amp3B20responsedemo\"><a class=\"reference-link\" name=\"requestDemo &amp; responseDemo\"></a><span class=\"header-link octicon octicon-link\"></span>requestDemo &amp; responseDemo</h2><p>请求Demo 和 响应Demo<br>当 <code>jiangHuConfig</code>.<code>updateRequestDemoAndResponseDemo</code> 设置为true时 框架会自动保存最新一条协议请求的 请求&amp;响应 作为Demo</p>\n<h3 id=\"h3-requestdemo\"><a class=\"reference-link\" name=\"requestDemo\"></a><span class=\"header-link octicon octicon-link\"></span>requestDemo</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"str\">\"appData\"</span><span class=\"pun\">:{</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"str\">\"pageId\"</span><span class=\"pun\">:</span><span class=\"str\">\"allPage\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"str\">\"actionId\"</span><span class=\"pun\">:</span><span class=\"str\">\"userInfo\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"str\">\"actionData\"</span><span class=\"pun\">:{</span></code></li><li class=\"L5\"><code class=\"language-shell\"></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"str\">\"appId\"</span><span class=\"pun\">:</span><span class=\"str\">\"jianghujs_demo_basic\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"str\">\"userAgent\"</span><span class=\"pun\">:</span><span class=\"str\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36\"</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"str\">\"packageId\"</span><span class=\"pun\">:</span><span class=\"str\">\"1644935324054_6592543\"</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"str\">\"packageType\"</span><span class=\"pun\">:</span><span class=\"str\">\"httpRequest\"</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li></ol></pre>\n<h3 id=\"h3-responsedemo\"><a class=\"reference-link\" name=\"responseDemo\"></a><span class=\"header-link octicon octicon-link\"></span>responseDemo</h3><p>框架会自动保存最新一条协议返回作为demo保存</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"str\">\"packageId\"</span><span class=\"pun\">:</span><span class=\"str\">\"1644935324054_6592543\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"str\">\"packageType\"</span><span class=\"pun\">:</span><span class=\"str\">\"httpResponse\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"str\">\"status\"</span><span class=\"pun\">:</span><span class=\"str\">\"success\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"str\">\"timestamp\"</span><span class=\"pun\">:</span><span class=\"str\">\"2022-02-15T22:28:45+08:00\"</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-04-23T13:46:57+08:00', 'm3611F', '刘计', '2022-04-30T14:11:04+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T14:11:04+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1423, 10009, '10004', '04登录与权限', '', 'public', '2022-04-23T13:47:28+08:00', '数据访问权限', NULL, '## 数据权限阐述\n\n用户只能 查看/操作 特定部分的数据 , 代码层面对应的 就是 数据隔离/数据过滤 的逻辑。\n\n## 江湖框架中使用数据权限 的几种方式\n\n1. `resource sql`请求中 添加where过滤数据\n	```javascript\n	// 只查询登录用户相关的数据\n	await window.jianghuAxios({\n	  data: {\n		appData: {\n		  pageId: \'backendSearchDemo\',\n		  actionId: \'selectItemList\',\n		  where: { userId: \"G00001\" }\n		}\n	  }\n	})\n	```\n2. `resource sql`场景下, 通过配置 _resource表中 resourceData.where过滤数据\n    > 支持 where whereIn whereLike whereOptions whereOrOptions\n	```json\n	{ \n	   \"table\": \"student_basic\", \n	   \"operation\": \"select\", \n	   \"whereOrOptions\": [[\"classId\", \"like\",\"%2021-01级-02班%\"],[\"bodyHeight\", \">\", 172]]\n	 }\n	```\n3. `resource sql`场景下, 通过配置_resource表中的 resourceHook 实现 sql where 条件追加\n4. `resource sql`场景下, 通过配置_resource表中的 accessControlTable 实现 用户维度的resourceData覆盖\n	> `_resource表`\n	> | id | accessControlTable | resourceHook | pageId | actionId | desc | resourceType | appDataSchema | resourceData | requestDemo | responseDemo |\n	|  --- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n	|  1 | access_control_student_basic |  | backendSearchDemo | selectItemList | 查询列表 | sql |  | { \"table\": \"student_basic\", \"operation\": \"select\" } |\n	\n	> `access_control_student_basic表`\n	> | id | userId | username | resourceData |\n	|  --- | ---- | ---- | ---- |\n	|  1 | userId | 洪七公 | { \"table\": \"student_basic\", \"operation\": \"select\", \"whereOrOptions\": [[\"classId\", \"like\", \"%2021-01级-02班%\"],[\"bodyHeight\", \">\", 172]]} |\n4. `resource servcie`场景下 自定义代码逻辑 实现数据过滤\n    ```json\n	const { actionData } = this.ctx.request.body.appData;\n	const { classId } = actionData;\n	await this.app.jianghuKnex(\'student_basic\').where({classId}).select()\n	```\n5. `resource servcie`场景下 通过配置 _resource表中的 resourceHook 实现数据过滤, 然后service 中直接使用 resourceHook查询出来的数据\n    ```json\n	\'use strict\';\n\n	const Service = require(\'egg\').Service;\n\n	class StudentService extends Service {\n\n		async beforHook() {\n			const studentInfo = await this.app.jianghuKnex(\'student_basic\').where({studentId: this.ctx.userInfo.userId}).first();\n			const studentList = await this.app.jianghuKnex(\'student_basic\').where({classId: studentInfo.classId}).select();\n			this.ctx.beforHookData = { studentList }\n		}\n\n		async selectStudentList() {\n			const { studentList } = this.ctx.beforHookData;\n			return {\n				rows: studentList\n			};\n		}\n	}\n\n	module.exports = StudentService;\n	\n	// _resource表中的 resourceHook 配置如下\n	// { \"before\": [{ \"service\": \"student\", \"serviceFunction\": \"beforHook\" }], \"after\": [] }\n	```\n', '<h2 id=\"h2-u6570u636Eu6743u9650u9610u8FF0\"><a class=\"reference-link\" name=\"数据权限阐述\"></a><span class=\"header-link octicon octicon-link\"></span>数据权限阐述</h2><p>用户只能 查看/操作 特定部分的数据 , 代码层面对应的 就是 数据隔离/数据过滤 的逻辑。</p>\n<h2 id=\"h2-u6C5Fu6E56u6846u67B6u4E2Du4F7Fu7528u6570u636Eu6743u9650u7684u51E0u79CDu65B9u5F0F\"><a class=\"reference-link\" name=\"江湖框架中使用数据权限 的几种方式\"></a><span class=\"header-link octicon octicon-link\"></span>江湖框架中使用数据权限 的几种方式</h2><ol>\n<li><p><code>resource sql</code>请求中 添加where过滤数据</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"com\">// 只查询登录用户相关的数据</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">  data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">      pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'backendSearchDemo\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">      actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'selectItemList\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">      where</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> userId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"G00001\"</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pun\">})</span></code></li></ol></pre>\n</li><li><p><code>resource sql</code>场景下, 通过配置 _resource表中 resourceData.where过滤数据</p>\n<blockquote class=\"default\">\n<p>支持 where whereIn whereLike whereOptions whereOrOptions</p>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-json\"><span class=\"pun\">{</span><span class=\"pln\"> </span></code></li><li class=\"L1\"><code class=\"language-json\"><span class=\"pln\">   </span><span class=\"str\">\"table\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"student_basic\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">   </span><span class=\"str\">\"operation\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"select\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span></code></li><li class=\"L3\"><code class=\"language-json\"><span class=\"pln\">   </span><span class=\"str\">\"whereOrOptions\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[[</span><span class=\"str\">\"classId\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"like\"</span><span class=\"pun\">,</span><span class=\"str\">\"%2021-01级-02班%\"</span><span class=\"pun\">],[</span><span class=\"str\">\"bodyHeight\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"&gt;\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"lit\">172</span><span class=\"pun\">]]</span></code></li><li class=\"L4\"><code class=\"language-json\"><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li><li><p><code>resource sql</code>场景下, 通过配置_resource表中的 resourceHook 实现 sql where 条件追加</p>\n</li><li><p><code>resource sql</code>场景下, 通过配置_resource表中的 accessControlTable 实现 用户维度的resourceData覆盖</p>\n<blockquote class=\"default\">\n<p><code>_resource表</code></p>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>accessControlTable</th>\n<th>resourceHook</th>\n<th>pageId</th>\n<th>actionId</th>\n<th>desc</th>\n<th>resourceType</th>\n<th>appDataSchema</th>\n<th>resourceData</th>\n<th>requestDemo</th>\n<th>responseDemo</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>access_control_student_basic</td>\n<td></td>\n<td>backendSearchDemo</td>\n<td>selectItemList</td>\n<td>查询列表</td>\n<td>sql</td>\n<td></td>\n<td>{ “table”: “student_basic”, “operation”: “select” }</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n</blockquote>\n<blockquote class=\"default\">\n<p><code>access_control_student_basic表</code></p>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>userId</th>\n<th>username</th>\n<th>resourceData</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>userId</td>\n<td>洪七公</td>\n<td>{ “table”: “student_basic”, “operation”: “select”, “whereOrOptions”: [[“classId”, “like”, “%2021-01级-02班%”],[“bodyHeight”, “&gt;”, 172]]}</td>\n</tr>\n</tbody></table>\n</blockquote>\n</li><li><p><code>resource servcie</code>场景下 自定义代码逻辑 实现数据过滤</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-json\"><span class=\"pln\">const </span><span class=\"pun\">{</span><span class=\"pln\"> actionData </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">body</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-json\"><span class=\"pln\">const </span><span class=\"pun\">{</span><span class=\"pln\"> classId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> actionData</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">await this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\">classId</span><span class=\"pun\">}).</span><span class=\"pln\">select</span><span class=\"pun\">()</span></code></li></ol></pre>\n</li><li><p><code>resource servcie</code>场景下 通过配置 _resource表中的 resourceHook 实现数据过滤, 然后service 中直接使用 resourceHook查询出来的数据</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-json\"><span class=\"str\">\'use strict\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-json\"></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">const </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'egg\'</span><span class=\"pun\">).</span><span class=\"typ\">Service</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-json\"></code></li><li class=\"L4\"><code class=\"language-json\"><span class=\"pln\">class </span><span class=\"typ\">StudentService</span><span class=\"pln\"> extends </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-json\"></code></li><li class=\"L6\"><code class=\"language-json\"><span class=\"pln\">    async beforHook</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-json\"><span class=\"pln\">        const studentInfo </span><span class=\"pun\">=</span><span class=\"pln\"> await this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\">studentId</span><span class=\"pun\">:</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">userInfo</span><span class=\"pun\">.</span><span class=\"pln\">userId</span><span class=\"pun\">}).</span><span class=\"pln\">first</span><span class=\"pun\">();</span></code></li><li class=\"L8\"><code class=\"language-json\"><span class=\"pln\">        const studentList </span><span class=\"pun\">=</span><span class=\"pln\"> await this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\">classId</span><span class=\"pun\">:</span><span class=\"pln\"> studentInfo</span><span class=\"pun\">.</span><span class=\"pln\">classId</span><span class=\"pun\">}).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li><li class=\"L9\"><code class=\"language-json\"><span class=\"pln\">        this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">beforHookData </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> studentList </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-json\"></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">    async selectStudentList</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-json\"><span class=\"pln\">        const </span><span class=\"pun\">{</span><span class=\"pln\"> studentList </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">beforHookData</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-json\"><span class=\"pln\">        return </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-json\"><span class=\"pln\">            rows</span><span class=\"pun\">:</span><span class=\"pln\"> studentList</span></code></li><li class=\"L6\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">};</span></code></li><li class=\"L7\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-json\"><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-json\"></code></li><li class=\"L0\"><code class=\"language-json\"><span class=\"pln\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">StudentService</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-json\"></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pun\">//</span><span class=\"pln\"> _resource</span><span class=\"pun\">表中的</span><span class=\"pln\"> resourceHook </span><span class=\"pun\">配置如下</span></code></li><li class=\"L3\"><code class=\"language-json\"><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"str\">\"before\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"pln\"> </span><span class=\"str\">\"service\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"student\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"serviceFunction\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"beforHook\"</span><span class=\"pln\"> </span><span class=\"pun\">}],</span><span class=\"pln\"> </span><span class=\"str\">\"after\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[]</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ol>\n', NULL, NULL, NULL, '', '2022-04-23T13:47:29+08:00', 'm3611F', '刘计', '2022-04-29T23:55:59+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-29T23:55:59+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1424, 10010, '10004', '02应用协议', '', 'public', '2022-04-23T13:47:59+08:00', '文件上传下载', NULL, '## 文件分片上传resource\n\n1. `allPage.httpUploadByStream`、`allPage.socketUploadByBase64` 上传分片\n1. `allPage.uploadFileDone`将分片合并成文件\n- 上传的文件会保存在项目目录下的`/upload/${fileDirectory}/`目录中，\n- 上传的文件路径保存在项目的`_file`表中\n| 字段 | 描述 |\n|---|---|\n| fileId | \'文件ID\', |\n| fileDirectory | \'文件保存路径;\', |\n| filename | \'文件名;\', |\n| filenameStorage | \'文件保存名\', |\n| downloadPath | \'文件下载路径\', |\n| fileType | \'文件类型;(预留字段)\', |\n| fileDesc | \'文件描述\', |\n| binarySize | \'文件二进制大小\', |\n> 分片大小\n> - 0M--100M: 3M/片\n> - 100M--500M: 5M/片\n> - 500M以上: 8M/片\n\n## 文件stream流下载: 文件url GET下载\n\n```javascript\n        const downloadPath = \"/testFile/xxxx.xx\";\n		const filename = \"1.png\";\n        window.vtoast.loading(`${filename} 下载进度: 0%`);\n        const buffer = await window.jianghuAxios.httpDownloadByStream({\n          downloadPath,\n          filename,\n          onProgress: (total, loaded) => {\n            const progress = Number((loaded * 100 / total).toFixed(2));\n            window.vtoast.loading(`${filename} 下载进度: ${progress}%`);\n            if (total === loaded) {\n              window.vtoast.success(\"下载完成\");\n            }\n          }\n        })\n        window.jianghuAxios.downloadBufferToChrome({ buffer, filename });\n```\n\n## 文件分片下载resource\n\n1. `allPage.getChunkInfo` 获取分片信息\n1. `allPage.socketDownloadByBase64` resource下载分片\n1. 前端将分片合并成文件\n\n\n## 使用window.jianghuAxios进行文件上传\n\n- window.jianghuAxios对上面的**文件分片上传resource**进行了封装, 方便开发者使用\n\n### window.jianghuAxios.httpUploadByStream\n```javascript\n          const file = this.file;\n		  const fileDesc = \"测试\";\n          window.vtoast.loading(`${file.name} 上传进度: 0.00%`);\n          await window.jianghuAxios.httpUploadByStream({\n            fileDesc,\n            file,\n            fileDirectory: \'testFile\',\n            onProgress: (total, loaded) => {\n              const progress = Number((loaded * 100 / total).toFixed(2));\n              window.vtoast.loading(`${file.name} 上传进度: ${progress}%`);\n              if (loaded === total) {\n                window.vtoast.success(`${file.name} 上传进度: 100%`);\n              }\n            }\n          })\n```\n\n### window.jianghuAxios.socketUploadByBase64\n```javascript\n          const file = this.file;\n		  const fileDesc = \"测试\";\n          window.vtoast.loading(`${file.name} 上传进度: 0.00%`);\n          await window.jianghuAxios.socketUploadByBase64({\n            fileDesc,\n            file,\n            fileDirectory: \'testFile\',\n            onProgress: (total, loaded) => {\n              const progress = Number((loaded * 100 / total).toFixed(2));\n              window.vtoast.loading(`${file.name} 上传进度: ${progress}%`);\n              if (loaded === total) {\n                window.vtoast.success(`${file.name} 上传进度: 100%`);\n              }\n            }\n          })\n```\n\n## 使用window.jianghuAxios进行文件下载\n\n- window.jianghuAxios对上面的**文件分片下载resource**进行了封装, 方便开发者使用\n\n### window.jianghuAxios.socketDownloadByBase64\n```javascript\n        const downloadPath = \"/testFile/xxxx.xx\";\n		const filename = \"1.png\";\n        window.vtoast.loading(`${filename} 下载进度: 0%`);\n        const base64 = await window.jianghuAxios.socketDownloadByBase64({\n          downloadPath,\n          filename,\n          onProgress: (total, loaded) => {\n            const progress = Number((loaded * 100 / total).toFixed(2));\n            window.vtoast.loading(`${filename} 下载进度: ${progress}%`);\n            if (total === loaded) {\n              window.vtoast.success(\"下载完成\");\n            }\n          }\n        })\n        await window.jianghuAxios.downloadBase64ToChrome({\n          base64,\n          filename: \'base64Download\'\n        })\n```', '<h2 id=\"h2-u6587u4EF6u5206u7247u4E0Au4F20resource\"><a class=\"reference-link\" name=\"文件分片上传resource\"></a><span class=\"header-link octicon octicon-link\"></span>文件分片上传resource</h2><ol>\n<li><code>allPage.httpUploadByStream</code>、<code>allPage.socketUploadByBase64</code> 上传分片</li><li><code>allPage.uploadFileDone</code>将分片合并成文件</li></ol>\n<ul>\n<li>上传的文件会保存在项目目录下的<code>/upload/${fileDirectory}/</code>目录中，</li><li>上传的文件路径保存在项目的<code>_file</code>表中<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>fileId</td>\n<td>‘文件ID’,</td>\n</tr>\n<tr>\n<td>fileDirectory</td>\n<td>‘文件保存路径;’,</td>\n</tr>\n<tr>\n<td>filename</td>\n<td>‘文件名;’,</td>\n</tr>\n<tr>\n<td>filenameStorage</td>\n<td>‘文件保存名’,</td>\n</tr>\n<tr>\n<td>downloadPath</td>\n<td>‘文件下载路径’,</td>\n</tr>\n<tr>\n<td>fileType</td>\n<td>‘文件类型;(预留字段)’,</td>\n</tr>\n<tr>\n<td>fileDesc</td>\n<td>‘文件描述’,</td>\n</tr>\n<tr>\n<td>binarySize</td>\n<td>‘文件二进制大小’,</td>\n</tr>\n</tbody></table>\n<blockquote class=\"default\">\n<p>分片大小</p>\n<ul>\n<li>0M–100M: 3M/片</li><li>100M–500M: 5M/片</li><li>500M以上: 8M/片</li></ul>\n</blockquote>\n</li></ul>\n<h2 id=\"h2-u6587u4EF6streamu6D41u4E0Bu8F7D3Au6587u4EF6url20getu4E0Bu8F7D\"><a class=\"reference-link\" name=\"文件stream流下载: 文件url GET下载\"></a><span class=\"header-link octicon octicon-link\"></span>文件stream流下载: 文件url GET下载</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> downloadPath </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"/testFile/xxxx.xx\"</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> filename </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"1.png\"</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">        window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">filename</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">下载进度:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">%`);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> buffer </span><span class=\"pun\">=</span><span class=\"pln\"> await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">httpDownloadByStream</span><span class=\"pun\">({</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">          downloadPath</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">          filename</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">          onProgress</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">total</span><span class=\"pun\">,</span><span class=\"pln\"> loaded</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"kwd\">const</span><span class=\"pln\"> progress </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Number</span><span class=\"pun\">((</span><span class=\"pln\">loaded </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\"> total</span><span class=\"pun\">).</span><span class=\"pln\">toFixed</span><span class=\"pun\">(</span><span class=\"lit\">2</span><span class=\"pun\">));</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">            window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">filename</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">下载进度:</span><span class=\"pln\"> $</span><span class=\"pun\">{</span><span class=\"pln\">progress</span><span class=\"pun\">}%`);</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">total </span><span class=\"pun\">===</span><span class=\"pln\"> loaded</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">              window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\"下载完成\"</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"pun\">})</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">        window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">downloadBufferToChrome</span><span class=\"pun\">({</span><span class=\"pln\"> buffer</span><span class=\"pun\">,</span><span class=\"pln\"> filename </span><span class=\"pun\">});</span></code></li></ol></pre>\n<h2 id=\"h2-u6587u4EF6u5206u7247u4E0Bu8F7Dresource\"><a class=\"reference-link\" name=\"文件分片下载resource\"></a><span class=\"header-link octicon octicon-link\"></span>文件分片下载resource</h2><ol>\n<li><code>allPage.getChunkInfo</code> 获取分片信息</li><li><code>allPage.socketDownloadByBase64</code> resource下载分片</li><li>前端将分片合并成文件</li></ol>\n<h2 id=\"h2-u4F7Fu7528window.jianghuaxiosu8FDBu884Cu6587u4EF6u4E0Au4F20\"><a class=\"reference-link\" name=\"使用window.jianghuAxios进行文件上传\"></a><span class=\"header-link octicon octicon-link\"></span>使用window.jianghuAxios进行文件上传</h2><ul>\n<li>window.jianghuAxios对上面的<strong>文件分片上传resource</strong>进行了封装, 方便开发者使用</li></ul>\n<h3 id=\"h3-window.jianghuaxios.httpuploadbystream\"><a class=\"reference-link\" name=\"window.jianghuAxios.httpUploadByStream\"></a><span class=\"header-link octicon octicon-link\"></span>window.jianghuAxios.httpUploadByStream</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"kwd\">const</span><span class=\"pln\"> file </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">file</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"kwd\">const</span><span class=\"pln\"> fileDesc </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"测试\"</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">          window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">name</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">上传进度:</span><span class=\"pln\"> </span><span class=\"lit\">0.00</span><span class=\"pun\">%`);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">          await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">httpUploadByStream</span><span class=\"pun\">({</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">            fileDesc</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">            file</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">            fileDirectory</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'testFile\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">            onProgress</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">total</span><span class=\"pun\">,</span><span class=\"pln\"> loaded</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">              </span><span class=\"kwd\">const</span><span class=\"pln\"> progress </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Number</span><span class=\"pun\">((</span><span class=\"pln\">loaded </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\"> total</span><span class=\"pun\">).</span><span class=\"pln\">toFixed</span><span class=\"pun\">(</span><span class=\"lit\">2</span><span class=\"pun\">));</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">              window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">name</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">上传进度:</span><span class=\"pln\"> $</span><span class=\"pun\">{</span><span class=\"pln\">progress</span><span class=\"pun\">}%`);</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">              </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">loaded </span><span class=\"pun\">===</span><span class=\"pln\"> total</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">                window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">name</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">上传进度:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pun\">%`);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">              </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"pun\">})</span></code></li></ol></pre>\n<h3 id=\"h3-window.jianghuaxios.socketuploadbybase64\"><a class=\"reference-link\" name=\"window.jianghuAxios.socketUploadByBase64\"></a><span class=\"header-link octicon octicon-link\"></span>window.jianghuAxios.socketUploadByBase64</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"kwd\">const</span><span class=\"pln\"> file </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">file</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"kwd\">const</span><span class=\"pln\"> fileDesc </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"测试\"</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">          window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">name</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">上传进度:</span><span class=\"pln\"> </span><span class=\"lit\">0.00</span><span class=\"pun\">%`);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">          await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">socketUploadByBase64</span><span class=\"pun\">({</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">            fileDesc</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">            file</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">            fileDirectory</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'testFile\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">            onProgress</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">total</span><span class=\"pun\">,</span><span class=\"pln\"> loaded</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">              </span><span class=\"kwd\">const</span><span class=\"pln\"> progress </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Number</span><span class=\"pun\">((</span><span class=\"pln\">loaded </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\"> total</span><span class=\"pun\">).</span><span class=\"pln\">toFixed</span><span class=\"pun\">(</span><span class=\"lit\">2</span><span class=\"pun\">));</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">              window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">name</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">上传进度:</span><span class=\"pln\"> $</span><span class=\"pun\">{</span><span class=\"pln\">progress</span><span class=\"pun\">}%`);</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">              </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">loaded </span><span class=\"pun\">===</span><span class=\"pln\"> total</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">                window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">name</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">上传进度:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pun\">%`);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">              </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"pun\">})</span></code></li></ol></pre>\n<h2 id=\"h2-u4F7Fu7528window.jianghuaxiosu8FDBu884Cu6587u4EF6u4E0Bu8F7D\"><a class=\"reference-link\" name=\"使用window.jianghuAxios进行文件下载\"></a><span class=\"header-link octicon octicon-link\"></span>使用window.jianghuAxios进行文件下载</h2><ul>\n<li>window.jianghuAxios对上面的<strong>文件分片下载resource</strong>进行了封装, 方便开发者使用</li></ul>\n<h3 id=\"h3-window.jianghuaxios.socketdownloadbybase64\"><a class=\"reference-link\" name=\"window.jianghuAxios.socketDownloadByBase64\"></a><span class=\"header-link octicon octicon-link\"></span>window.jianghuAxios.socketDownloadByBase64</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> downloadPath </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"/testFile/xxxx.xx\"</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> filename </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"1.png\"</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">        window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">filename</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">下载进度:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">%`);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> base64 </span><span class=\"pun\">=</span><span class=\"pln\"> await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">socketDownloadByBase64</span><span class=\"pun\">({</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">          downloadPath</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">          filename</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">          onProgress</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">total</span><span class=\"pun\">,</span><span class=\"pln\"> loaded</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"kwd\">const</span><span class=\"pln\"> progress </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Number</span><span class=\"pun\">((</span><span class=\"pln\">loaded </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\"> total</span><span class=\"pun\">).</span><span class=\"pln\">toFixed</span><span class=\"pun\">(</span><span class=\"lit\">2</span><span class=\"pun\">));</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">            window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">filename</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">下载进度:</span><span class=\"pln\"> $</span><span class=\"pun\">{</span><span class=\"pln\">progress</span><span class=\"pun\">}%`);</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">total </span><span class=\"pun\">===</span><span class=\"pln\"> loaded</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">              window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\"下载完成\"</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">          </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"pun\">})</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">        await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">downloadBase64ToChrome</span><span class=\"pun\">({</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">          base64</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">          filename</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'base64Download\'</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"pun\">})</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-04-23T13:47:59+08:00', 'm3611F', '刘计', '2022-05-04T16:12:24+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-04T16:12:24+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1425, 10011, '10004', '02应用协议', '', 'public', '2022-04-23T13:53:19+08:00', '中间件开发', NULL, '## 配置\n\n- 配置文件：`/config/middlewareConfig.js`\n- `middlewareConfig`中的配置，会自动合并到`config`配置中，框架会自动按照一下数组顺序执行相应的中间件方法；\n\n## 执行顺序\n- ```shell\nmodule.exports.middleware = [\n// cache\n\'prepareCache\',\n// /upload/*\n\'downloadUserInfo\',\n// /page/*\n\'pagePackage\', \'pageUserInfo\', \'pageAuthorization\',\n// /pageDoc/*\n\'pageDocPackage\', \'pageDocUserInfo\', \'pageDocAuthorization\',\n// /resource/*\n\'httpPackage\', \'httpUserInfo\', \'httpAuthorization\', \'httpResourceHook\' ];\n```\n\n## 执行条件\n- `middlewareMatch` 按照条件判断是否执行该中间件，不添加在`Match`的中间件会默认执行；\n	```shell\nmodule.exports.middlewareMatch = {\n	  pagePackage: {\n		match(ctx) {\n		  // url 格式符合 /appId/page/pageId\n		  return ctx.request.method === \'GET\'\n			&& ctx.request.path.startsWith(`/${ctx.app.config.appId}/page/`);\n		},\n	  },\n	  ...\n}\n```\n\n## 创建中间件\n- `/app/middleware` 目录下，每一个js就是一个中间件，文件名与上方`middleware`配置同名；\n```yml\n├── middlewareUtil\n│   ├── packageUtil.js\n│   └── userInfoUtil.js\n├── downloadUserInfo.js\n├── httpAuthorization.js\n├── httpPackage.js\n├── httpResourceHook.js\n├── httpUserInfo.js\n├── pageAuthorization.js\n├── pageDocAuthorization.js\n├── pageDocPackage.js\n├── pageDocUserInfo.js\n├── pageHook.js\n├── pagePackage.js\n├── pageUserInfo.js\n├── socketAuthorization.js\n├── socketPackage.js\n├── socketPackageRecord.js\n├── socketResourceAfterHook.js\n├── socketResourceBeforeHook.js\n├── socketUserInfo.js\n├── xiaochengxuAuthorization.js\n├── xiaochengxuPackage.js\n├── xiaochengxuPackageRecord.js\n├── xiaochengxuPageAuthorization.js\n├── xiaochengxuPagePackage.js\n├── xiaochengxuResourceAfterHook.js\n├── xiaochengxuResourceBeforeHook.js\n└── xiaochengxuUserInfo.js\n```\n', '<h2 id=\"h2-u914Du7F6E\"><a class=\"reference-link\" name=\"配置\"></a><span class=\"header-link octicon octicon-link\"></span>配置</h2><ul>\n<li>配置文件：<code>/config/middlewareConfig.js</code></li><li><code>middlewareConfig</code>中的配置，会自动合并到<code>config</code>配置中，框架会自动按照一下数组顺序执行相应的中间件方法；</li></ul>\n<h2 id=\"h2-u6267u884Cu987Au5E8F\"><a class=\"reference-link\" name=\"执行顺序\"></a><span class=\"header-link octicon octicon-link\"></span>执行顺序</h2><ul>\n<li><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"kwd\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports</span><span class=\"pun\">.</span><span class=\"pln\">middleware </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"com\">// cache</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"str\">\'prepareCache\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"com\">// /upload/*</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"str\">\'downloadUserInfo\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"com\">// /page/*</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"str\">\'pagePackage\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'pageUserInfo\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'pageAuthorization\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"com\">// /pageDoc/*</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"str\">\'pageDocPackage\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'pageDocUserInfo\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'pageDocAuthorization\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"com\">// /resource/*</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"str\">\'httpPackage\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'httpUserInfo\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'httpAuthorization\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'httpResourceHook\'</span><span class=\"pln\"> </span><span class=\"pun\">];</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u6267u884Cu6761u4EF6\"><a class=\"reference-link\" name=\"执行条件\"></a><span class=\"header-link octicon octicon-link\"></span>执行条件</h2><ul>\n<li><code>middlewareMatch</code> 按照条件判断是否执行该中间件，不添加在<code>Match</code>的中间件会默认执行；<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"kwd\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports</span><span class=\"pun\">.</span><span class=\"pln\">middlewareMatch </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">  pagePackage</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    match</span><span class=\"pun\">(</span><span class=\"pln\">ctx</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"com\">// url 格式符合 /appId/page/pageId</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">method </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'GET\'</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">startsWith</span><span class=\"pun\">(</span><span class=\"str\">`/${ctx.app.config.appId}/page/`</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">...</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u521Bu5EFAu4E2Du95F4u4EF6\"><a class=\"reference-link\" name=\"创建中间件\"></a><span class=\"header-link octicon octicon-link\"></span>创建中间件</h2><ul>\n<li><code>/app/middleware</code> 目录下，每一个js就是一个中间件，文件名与上方<code>middleware</code>配置同名；<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> middlewareUtil</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> packageUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> userInfoUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> downloadUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> httpAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> httpPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> httpResourceHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> httpUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pageAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pageDocAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pageDocPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pageDocUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pageHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pagePackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pageUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> socketAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> socketPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> socketPackageRecord</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> socketResourceAfterHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> socketResourceBeforeHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> socketUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPackageRecord</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPageAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPagePackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuResourceAfterHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuResourceBeforeHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">└──</span><span class=\"pln\"> xiaochengxuUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li></ol></pre>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T13:53:20+08:00', 'm3611F', '刘计', '2022-04-28T20:53:25+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-28T20:53:25+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1426, 10012, '10004', '02应用协议', '', 'public', '2022-04-23T13:53:47+08:00', '日志', NULL, '## 请求日志(_resource_request_log)\n\n- 协议请求 `ResourceController` 会执行中间件`httpPackage.js`；\n- 调用`packageUtil.js`的`recordResourceRequestLog`方法；\n- 通过`app.jianghuKnex`，保存`请求日志`到`resource_request_log`表中。\n\n	```shell\n  async recordResourceRequestLog(ctx) {\n    const { app, body: responseBody, request, packageResource, userInfo } = ctx;\n    const { ignoreListOfResourceRequestLog=[] }= app.config.jiangHuConfig;\n    const { resourceId } = packageResource;\n    if (ignoreListOfResourceRequestLog.indexOf(resourceId) > -1) {\n      return;\n    }\n\n    const requestBody = Object.assign({}, request.body);\n    const { deviceId } = userInfo;\n    const userIp = ctx.header[\'x-real-ip\'] || ctx.request.ip || \'\';\n    const { jianghuKnex } = app;\n    const { packageId } = requestBody;\n    const { status: responseStatus } = responseBody;\n    const responseBodyString = JSON.stringify(responseBody);\n    const userAgent = requestBody.appData.userAgent || \'\';\n    const geo = geoip.lookup(userIp);\n    let userIpRegion = \'\';\n    if (geo) { userIpRegion = `${geo.country}|${geo.region}|${geo.timezone}|${geo.city}|${geo.ll}|${geo.range}`; }\n    const requestBodyString = JSON.stringify(requestBody);\n\n    await jianghuKnex(tableEnum._resource_request_log)\n      .insert({\n        packageId, resourceId, deviceId,\n        userIp, userAgent, userIpRegion,\n        requestBody: requestBodyString,\n        responseBody: responseBodyString,\n        responseStatus,\n      });\n  },\n```\n> 注意: 如果使用nginx代理域名, 需要在nginx 添加 `X-Real-IP`配置\n```yml\nlocation / {\n	...\n	proxy_set_header X-Real-IP $remote_addr;\n	...\n}\n```\n\n## 代码日志(app.logger)\n\n- `config.default.js`中配置`logger`\n	```shell\nlogger: {\n	  outputJSON: true,\n	  level: \'INFO\',\n	  dir: path.join(appInfo.baseDir, \'logs\'),\n	  contextFormatter(meta) {\n		return `[${meta.date}] [${meta.level}] [${meta.ctx.method} ${meta.ctx.url}] ${meta.message}`;\n	  },\n},\n```\n- 使用\n```shell\nconst { logger } = ctx.app;\nlogger.error(\'[recordResourceActivity error]\', err);\n```\n', '<h2 id=\"h2-u8BF7u6C42u65E5u5FD728_resource_request_log29\"><a class=\"reference-link\" name=\"请求日志(_resource_request_log)\"></a><span class=\"header-link octicon octicon-link\"></span>请求日志(_resource_request_log)</h2><ul>\n<li><p>协议请求 <code>ResourceController</code> 会执行中间件<code>httpPackage.js</code>；</p>\n</li><li><p>调用<code>packageUtil.js</code>的<code>recordResourceRequestLog</code>方法；</p>\n</li><li><p>通过<code>app.jianghuKnex</code>，保存<code>请求日志</code>到<code>resource_request_log</code>表中。</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">async recordResourceRequestLog</span><span class=\"pun\">(</span><span class=\"pln\">ctx</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> app</span><span class=\"pun\">,</span><span class=\"pln\"> body</span><span class=\"pun\">:</span><span class=\"pln\"> responseBody</span><span class=\"pun\">,</span><span class=\"pln\"> request</span><span class=\"pun\">,</span><span class=\"pln\"> packageResource</span><span class=\"pun\">,</span><span class=\"pln\"> userInfo </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> ctx</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> ignoreListOfResourceRequestLog</span><span class=\"pun\">=[]</span><span class=\"pln\"> </span><span class=\"pun\">}=</span><span class=\"pln\"> app</span><span class=\"pun\">.</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"pln\">jiangHuConfig</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> resourceId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> packageResource</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">ignoreListOfResourceRequestLog</span><span class=\"pun\">.</span><span class=\"pln\">indexOf</span><span class=\"pun\">(</span><span class=\"pln\">resourceId</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">&gt;</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"lit\">1</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"kwd\">return</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-shell\"></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> requestBody </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Object</span><span class=\"pun\">.</span><span class=\"pln\">assign</span><span class=\"pun\">({},</span><span class=\"pln\"> request</span><span class=\"pun\">.</span><span class=\"pln\">body</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> deviceId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> userInfo</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> userIp </span><span class=\"pun\">=</span><span class=\"pln\"> ctx</span><span class=\"pun\">.</span><span class=\"pln\">header</span><span class=\"pun\">[</span><span class=\"str\">\'x-real-ip\'</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">ip </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> app</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> packageId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> requestBody</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> status</span><span class=\"pun\">:</span><span class=\"pln\"> responseStatus </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> responseBody</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> responseBodyString </span><span class=\"pun\">=</span><span class=\"pln\"> JSON</span><span class=\"pun\">.</span><span class=\"pln\">stringify</span><span class=\"pun\">(</span><span class=\"pln\">responseBody</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> userAgent </span><span class=\"pun\">=</span><span class=\"pln\"> requestBody</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">userAgent </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> geo </span><span class=\"pun\">=</span><span class=\"pln\"> geoip</span><span class=\"pun\">.</span><span class=\"pln\">lookup</span><span class=\"pun\">(</span><span class=\"pln\">userIp</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"kwd\">let</span><span class=\"pln\"> userIpRegion </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">geo</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> userIpRegion </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`${geo.country}|${geo.region}|${geo.timezone}|${geo.city}|${geo.ll}|${geo.range}`</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> requestBodyString </span><span class=\"pun\">=</span><span class=\"pln\"> JSON</span><span class=\"pun\">.</span><span class=\"pln\">stringify</span><span class=\"pun\">(</span><span class=\"pln\">requestBody</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-shell\"></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">await jianghuKnex</span><span class=\"pun\">(</span><span class=\"pln\">tableEnum</span><span class=\"pun\">.</span><span class=\"pln\">_resource_request_log</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">.</span><span class=\"pln\">insert</span><span class=\"pun\">({</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    packageId</span><span class=\"pun\">,</span><span class=\"pln\"> resourceId</span><span class=\"pun\">,</span><span class=\"pln\"> deviceId</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    userIp</span><span class=\"pun\">,</span><span class=\"pln\"> userAgent</span><span class=\"pun\">,</span><span class=\"pln\"> userIpRegion</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    requestBody</span><span class=\"pun\">:</span><span class=\"pln\"> requestBodyString</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    responseBody</span><span class=\"pun\">:</span><span class=\"pln\"> responseBodyString</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    responseStatus</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">});</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pun\">},</span></code></li></ol></pre>\n<blockquote class=\"default\">\n<p>注意: 如果使用nginx代理域名, 需要在nginx 添加 <code>X-Real-IP</code>配置</p>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">location </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">  </span><span class=\"pun\">...</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">  proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Real</span><span class=\"pun\">-</span><span class=\"pln\">IP $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">  </span><span class=\"pun\">...</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u4EE3u7801u65E5u5FD728app.logger29\"><a class=\"reference-link\" name=\"代码日志(app.logger)\"></a><span class=\"header-link octicon octicon-link\"></span>代码日志(app.logger)</h2><ul>\n<li><code>config.default.js</code>中配置<code>logger</code><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">logger</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">  outputJSON</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">  level</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'INFO\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">  dir</span><span class=\"pun\">:</span><span class=\"pln\"> path</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">baseDir</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'logs\'</span><span class=\"pun\">),</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">  contextFormatter</span><span class=\"pun\">(</span><span class=\"pln\">meta</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">`[${meta.date}] [${meta.level}] [${meta.ctx.method} ${meta.ctx.url}] ${meta.message}`</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li>使用<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> logger </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> ctx</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">logger</span><span class=\"pun\">.</span><span class=\"pln\">error</span><span class=\"pun\">(</span><span class=\"str\">\'[recordResourceActivity error]\'</span><span class=\"pun\">,</span><span class=\"pln\"> err</span><span class=\"pun\">);</span></code></li></ol></pre>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T13:53:48+08:00', 'm3611F', '刘计', '2022-04-28T21:00:28+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-28T21:00:28+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1427, 10013, '10004', '03前端开发参考', '', 'public', '2022-04-23T13:54:23+08:00', '页面开发', NULL, '## 页面简介\n\n使用[nunjucks](https://nunjucks.bootcss.com/getting-started.html)模板引擎, 在nunjucks语法中我们使用include来复用代码/引入组件\n**页面目录**:\n```yml\n├── common                                          # 工具类\n│   ├── jianghuAxios.html\n│   ├── resetTableMaxHeight.html\n│   └──uiAction.html\n├── component                                      # 组件\n│   ├── jhConfirmDialog.html\n│   └──jhToast.html\n├── layout                                              # 布局\n│   └── jhLayout.html\n├── page                                                # 页面\n│   ├── help.html\n│   ├── login.html\n│   └── manual.html\n├── pageDoc                                          # 文档\n│   └── index.html\n└── template                                       # 模板\n    └── jhTemplate.html\n```\n\n## 页面&菜单\n\n- 每个页面 都需要记录在`_page`表, 否则无法访问\n- `_page`.`pageType`\n	- showInMenu: 展示在菜单上\n	- dynamicInMenu: 只有访问时才展示在菜单上\n	- seo: [ \"/page/article/10013\", \"/page/article/10014\"] 映射到 `/page/article.html`\n\n### 使用jhLayout菜单\n\n**/app/view/page/test.html**\n```xml\n{% extends \'template/jhTemplate.html\'%}\n\n<!-- vue template 代码块 -->\n{% block vue_template %}\n\n<jh-layout>\n  <iframe :src=\"`/${appInfo.appId}/pageDoc`\" width=\"100%\" height=\"100%\"></iframe>\n</jh-layout>\n\n{% endblock %}\n\n{% block vue_body %}\n\n{% include \'layout/jhLayout.html\' %}\n```\n\n### 使用自定义的 Layout菜单\n\n- 请手动从`allPage.userInfo` resource 中读取`allowPageList`并自行配置如何展示。\n\n## 全局变量\n\n- appInfo\n```javascript\n window.appInfo = {\n      appId: \'<$ ctx.app.config.appId $>\',\n      upload: \'/<$ ctx.app.config.appId $>/upload\',\n      public: \'/<$ ctx.app.config.appId $>/public\',\n      userAgent: navigator.userAgent || \'\',\n    }\n```\n\n## 浏览器数据持久化\n\n- 直接把全局的数据放入到`localStorage`\n- 对于框架层面的系统变量，框架通过`nunjucks`的编译模式绑定在`window`全局变量中使用；\n\n## 页面的编写\n\n以下是框架的`help.html`页面代码，请参考此模式编写其他您自己的页面即可；\n\n- ### 参考用例：\n\n```html\n{% extends \'index.html\'%} <!-- 必填，请不要改动，框架的入口页面，必须引入 -->\n{% block vue_template %} <!-- 必填，请不要改动，框架的入口页面的模板位置 开始，必须引入 -->\n<jh-layout><!-- 非必填，可以更改为自己的布局组件名称，默认布局文件标签 start -->\n	<!-- 页面模板代码开始 -->\n  <div v-if=\"error.errorCode\">\n    <h2>{{ error.errorCode }} : {{ error.errorReason }}</h2>\n    <hr/>\n    <h2>{{ error.errorReasonSupplement }}</h2>\n  </div>\n  <div v-else>\n    <h2>亲，你似乎迷路了？</h2>\n  </div>\n  <!-- 页面模板代码结束 -->\n</jh-layout><!-- 非必填，默认布局文件标签 end -->\n{% endblock %} <!-- 框架的入口页面的模板位置 标签闭合，必须引入 -->\n{% block vue_body %} <!-- 框架的入口页面的vue代码位置 开始，必须引入 -->\n{% include \'layout/jhLayout.html\' %} <!-- 框架的layout默认布局页面，非必须，也可已引入您自己的layout布局文件 -->\n\n<!-- vuejs，浏览器引入的方式使用 -->\n<script type=\"module\">\nnew Vue({\n  el: \'#app\', // 必填，请不要改动\n  template: \'#app-template\', // 必填，请不要改动\n  vuetify: new Vuetify(), // 必填，请不要改动\n  data: () => ({\n    error: {\n      errorCode: null, // 系统错误码\n      errorReason: null, // 系统错误说明\n      errorReasonSupplement: null, // 系统错误补充说明\n    }\n  }),\n  async created() {\n    const urlParams = new URLSearchParams(location.search);\n    if (urlParams.get(\'errorCode\')) {\n      this.error.errorCode = urlParams.get(\'errorCode\');\n    }\n    if (urlParams.get(\'errorReason\')) {\n      this.error.errorReason = urlParams.get(\'errorReason\');\n    }\n    if (urlParams.get(\'errorReasonSupplement\')) {\n      this.error.errorReasonSupplement = urlParams.get(\'errorReasonSupplement\');\n    }\n  },\n  methods: {}\n})\n</script>\n<style scoped>\n</style>\n{% endblock %}  <!-- 框架的入口页面的vue代码位置 标签闭合，必须引入 -->\n```\n\n## 页面 之 pageHook\n\npageHook 可以用做 鉴权 or 往页面上下文追加数据\n\n`_page表`\n\n | id | pageId | pageName | pageType | pageHook |\n|  --- | ---- | ---- | ---- | ---- |\n|  1 | test | 测试页面 | showInMenu | {\"beforeHook\":[{\"field\": \"testData\", \"service\": \"test\", \"serviceFunc\": \"getTestData\"}]} |\n\n`/service/test.js`\n\n```javascript\nconst Service = require(\'egg\').Service;\n\nclass TestService extends Service {\n\n  async getTestData() {\n   return { content: \"这是测试数据\" };\n  }\n}\nmodule.exports = TestService;\n```\n\n`test.html`内使用数据\n\n<$ testData.content $>\n\n## 页面 之 常量国际化\n\n> [i18n 的语言环境列表](https://github.com/ladjs/i18n-locales)\n背景: 页面需要支持不同语言, 例如：中文、英文\n实现方案: 将页面上的 常量(按钮，文本) 提取到`_constant_ui` 这张表中 对应 语言中配置\n\n例如: test.html 中 有三个按钮 新增、修改、删除\n\n**app/service/constantUiMap.js**\n\n```javascript\n\'use strict\';\n\nconst Service = require(\'egg\').Service;\nconst { tableEnum } = require(\'../constant/constant\');\n\nclass ConstantUiService extends Service {\n\n  async getConstantUiMap() {\n    const { jianghuKnex } = this.app;\n    const { pageId } = this.ctx.packagePage;\n    const { language } = this.app.config;\n    const constantUiList = await jianghuKnex(tableEnum._constant_ui).whereIn(\'pageId\', [\'all\', pageId]).select();\n    const constantUiMap = Object.fromEntries(\n      constantUiList.map(obj => [obj.constantKey, JSON.parse(obj[language] || \'{}\')])\n    );\n    return constantUiMap;\n  }\n}\n\nmodule.exports = ConstantUiService;\n```\n\n**_constant_ui**表数据\n\n | id | pageId | constantKey | constantType | zh | en |\n|  --- | ---- | ---- | ---- | ---- | ---- |\n|  1 | test | btn | object | {\"insert\": \"新增按钮\",\"update\": \"修改按钮\",\"delete\": \"删除按钮\" } | |\n\n**test.html**\n\n```html\n<h1>\n{% extends \'index.html\'%}\n{% block vue_template %}\n<jh-layout>\n  <div>\n     <v-btn depressed color=\"primary\"><$ constantUiMap.btn.insert $></v-btn>\n     <v-btn depressed color=\"primary\"><$ constantUiMap.btn.update $></v-btn>\n     <v-btn depressed color=\"primary\"><$ constantUiMap.btn.delete $></v-btn>\n  </div>\n</jh-layout>\n{% endblock %}\n{% block vue_body %}\n{% include \'layout/jhLayout.html\' %}\n<style scoped>\n</style>\n{% endblock %}\n</h1>\n```\n\n\n## 页面 之 缓存更新\n\n背景: 线上环境, eggjs(`config.prod.js`)对静态文件(`/app/public`)设置缓存,如果修改了css/js, 如何触发用户浏览器更新\n实现方案: href 链接上添加`s?v=1.0.1`, 然后每一次修改文件则 版本号++\n```html\n<link rel=\"stylesheet\" href=\"<$ static $>/jianghu.md/css/editormd.css?v=1.0.1\" />\n```\n', '<h2 id=\"h2-u9875u9762u7B80u4ECB\"><a class=\"reference-link\" name=\"页面简介\"></a><span class=\"header-link octicon octicon-link\"></span>页面简介</h2><p>使用<a href=\"https://nunjucks.bootcss.com/getting-started.html\">nunjucks</a>模板引擎, 在nunjucks语法中我们使用include来复用代码/引入组件<br><strong>页面目录</strong>:</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> common                                          </span><span class=\"com\"># 工具类</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> resetTableMaxHeight</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\">uiAction</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> component                                      </span><span class=\"com\"># 组件</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> jhConfirmDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\">jhToast</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> layout                                              </span><span class=\"com\"># 布局</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> jhLayout</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> page                                                </span><span class=\"com\"># 页面</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> help</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> login</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> manual</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> pageDoc                                          </span><span class=\"com\"># 文档</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> index</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">└──</span><span class=\"pln\"> </span><span class=\"kwd\">template</span><span class=\"pln\">                                       </span><span class=\"com\"># 模板</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">    </span><span class=\"pun\">└──</span><span class=\"pln\"> jhTemplate</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li></ol></pre>\n<h2 id=\"h2-u9875u976226amp3Bu83DCu5355\"><a class=\"reference-link\" name=\"页面&amp;菜单\"></a><span class=\"header-link octicon octicon-link\"></span>页面&amp;菜单</h2><ul>\n<li>每个页面 都需要记录在<code>_page</code>表, 否则无法访问</li><li><code>_page</code>.<code>pageType</code><ul>\n<li>showInMenu: 展示在菜单上</li><li>dynamicInMenu: 只有访问时才展示在菜单上</li><li>seo: [ \"/page/article/10013\", \"/page/article/10014\"] 映射到 <code>/page/article.html</code></li></ul>\n</li></ul>\n<h3 id=\"h3-u4F7Fu7528jhlayoutu83DCu5355\"><a class=\"reference-link\" name=\"使用jhLayout菜单\"></a><span class=\"header-link octicon octicon-link\"></span>使用jhLayout菜单</h3><p><strong>/app/view/page/test.html</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-xml\"><span class=\"pln\">{% extends \'template/jhTemplate.html\'%}</span></code></li><li class=\"L1\"><code class=\"language-xml\"></code></li><li class=\"L2\"><code class=\"language-xml\"><span class=\"com\">&lt;!-- vue template 代码块 --&gt;</span></code></li><li class=\"L3\"><code class=\"language-xml\"><span class=\"pln\">{% block vue_template %}</span></code></li><li class=\"L4\"><code class=\"language-xml\"></code></li><li class=\"L5\"><code class=\"language-xml\"><span class=\"tag\">&lt;jh-layout&gt;</span></code></li><li class=\"L6\"><code class=\"language-xml\"><span class=\"pln\">  </span><span class=\"tag\">&lt;iframe</span><span class=\"pln\"> :</span><span class=\"atn\">src</span><span class=\"pun\">=</span><span class=\"atv\">\"`/${appInfo.appId}/pageDoc`\"</span><span class=\"pln\"> </span><span class=\"atn\">width</span><span class=\"pun\">=</span><span class=\"atv\">\"100%\"</span><span class=\"pln\"> </span><span class=\"atn\">height</span><span class=\"pun\">=</span><span class=\"atv\">\"100%\"</span><span class=\"tag\">&gt;&lt;/iframe&gt;</span></code></li><li class=\"L7\"><code class=\"language-xml\"><span class=\"tag\">&lt;/jh-layout&gt;</span></code></li><li class=\"L8\"><code class=\"language-xml\"></code></li><li class=\"L9\"><code class=\"language-xml\"><span class=\"pln\">{% endblock %}</span></code></li><li class=\"L0\"><code class=\"language-xml\"></code></li><li class=\"L1\"><code class=\"language-xml\"><span class=\"pln\">{% block vue_body %}</span></code></li><li class=\"L2\"><code class=\"language-xml\"></code></li><li class=\"L3\"><code class=\"language-xml\"><span class=\"pln\">{% include \'layout/jhLayout.html\' %}</span></code></li></ol></pre>\n<h3 id=\"h3-u4F7Fu7528u81EAu5B9Au4E49u7684layoutu83DCu5355\"><a class=\"reference-link\" name=\"使用自定义的 Layout菜单\"></a><span class=\"header-link octicon octicon-link\"></span>使用自定义的 Layout菜单</h3><ul>\n<li>请手动从<code>allPage.userInfo</code> resource 中读取<code>allowPageList</code>并自行配置如何展示。</li></ul>\n<h2 id=\"h2-u5168u5C40u53D8u91CF\"><a class=\"reference-link\" name=\"全局变量\"></a><span class=\"header-link octicon octicon-link\"></span>全局变量</h2><ul>\n<li>appInfo<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    appId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'&lt;$ ctx.app.config.appId $&gt;\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    upload</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'/&lt;$ ctx.app.config.appId $&gt;/upload\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">public</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'/&lt;$ ctx.app.config.appId $&gt;/public\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    userAgent</span><span class=\"pun\">:</span><span class=\"pln\"> navigator</span><span class=\"pun\">.</span><span class=\"pln\">userAgent </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u6D4Fu89C8u5668u6570u636Eu6301u4E45u5316\"><a class=\"reference-link\" name=\"浏览器数据持久化\"></a><span class=\"header-link octicon octicon-link\"></span>浏览器数据持久化</h2><ul>\n<li>直接把全局的数据放入到<code>localStorage</code></li><li>对于框架层面的系统变量，框架通过<code>nunjucks</code>的编译模式绑定在<code>window</code>全局变量中使用；</li></ul>\n<h2 id=\"h2-u9875u9762u7684u7F16u5199\"><a class=\"reference-link\" name=\"页面的编写\"></a><span class=\"header-link octicon octicon-link\"></span>页面的编写</h2><p>以下是框架的<code>help.html</code>页面代码，请参考此模式编写其他您自己的页面即可；</p>\n<ul>\n<li><h3 id=\"h3-u53C2u8003u7528u4F8BuFF1A\"><a class=\"reference-link\" name=\"参考用例：\"></a><span class=\"header-link octicon octicon-link\"></span>参考用例：</h3></li></ul>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">{% extends \'index.html\'%} </span><span class=\"com\">&lt;!-- 必填，请不要改动，框架的入口页面，必须引入 --&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">{% block vue_template %} </span><span class=\"com\">&lt;!-- 必填，请不要改动，框架的入口页面的模板位置 开始，必须引入 --&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"tag\">&lt;jh-layout&gt;</span><span class=\"com\">&lt;!-- 非必填，可以更改为自己的布局组件名称，默认布局文件标签 start --&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"com\">&lt;!-- 页面模板代码开始 --&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"tag\">&lt;div</span><span class=\"pln\"> </span><span class=\"atn\">v-if</span><span class=\"pun\">=</span><span class=\"atv\">\"error.errorCode\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"tag\">&lt;h2&gt;</span><span class=\"pln\">{{ error.errorCode }} : {{ error.errorReason }}</span><span class=\"tag\">&lt;/h2&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"tag\">&lt;hr/&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"tag\">&lt;h2&gt;</span><span class=\"pln\">{{ error.errorReasonSupplement }}</span><span class=\"tag\">&lt;/h2&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"tag\">&lt;/div&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"tag\">&lt;div</span><span class=\"pln\"> </span><span class=\"atn\">v-else</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"tag\">&lt;h2&gt;</span><span class=\"pln\">亲，你似乎迷路了？</span><span class=\"tag\">&lt;/h2&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"tag\">&lt;/div&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"com\">&lt;!-- 页面模板代码结束 --&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"tag\">&lt;/jh-layout&gt;</span><span class=\"com\">&lt;!-- 非必填，默认布局文件标签 end --&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">{% endblock %} </span><span class=\"com\">&lt;!-- 框架的入口页面的模板位置 标签闭合，必须引入 --&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">{% block vue_body %} </span><span class=\"com\">&lt;!-- 框架的入口页面的vue代码位置 开始，必须引入 --&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">{% include \'layout/jhLayout.html\' %} </span><span class=\"com\">&lt;!-- 框架的layout默认布局页面，非必须，也可已引入您自己的layout布局文件 --&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"com\">&lt;!-- vuejs，浏览器引入的方式使用 --&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">type</span><span class=\"pun\">=</span><span class=\"atv\">\"module\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vue</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">  el</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'#app\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 必填，请不要改动</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">  template</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'#app-template\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 必填，请不要改动</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">  vuetify</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vuetify</span><span class=\"pun\">(),</span><span class=\"pln\"> </span><span class=\"com\">// 必填，请不要改动</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">  data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">({</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">    error</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">      errorCode</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 系统错误码</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">      errorReason</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 系统错误说明</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">      errorReasonSupplement</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 系统错误补充说明</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"pun\">}),</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">  async created</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> urlParams </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">URLSearchParams</span><span class=\"pun\">(</span><span class=\"pln\">location</span><span class=\"pun\">.</span><span class=\"pln\">search</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">urlParams</span><span class=\"pun\">.</span><span class=\"kwd\">get</span><span class=\"pun\">(</span><span class=\"str\">\'errorCode\'</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">      </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">error</span><span class=\"pun\">.</span><span class=\"pln\">errorCode </span><span class=\"pun\">=</span><span class=\"pln\"> urlParams</span><span class=\"pun\">.</span><span class=\"kwd\">get</span><span class=\"pun\">(</span><span class=\"str\">\'errorCode\'</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">urlParams</span><span class=\"pun\">.</span><span class=\"kwd\">get</span><span class=\"pun\">(</span><span class=\"str\">\'errorReason\'</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">      </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">error</span><span class=\"pun\">.</span><span class=\"pln\">errorReason </span><span class=\"pun\">=</span><span class=\"pln\"> urlParams</span><span class=\"pun\">.</span><span class=\"kwd\">get</span><span class=\"pun\">(</span><span class=\"str\">\'errorReason\'</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">urlParams</span><span class=\"pun\">.</span><span class=\"kwd\">get</span><span class=\"pun\">(</span><span class=\"str\">\'errorReasonSupplement\'</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">      </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">error</span><span class=\"pun\">.</span><span class=\"pln\">errorReasonSupplement </span><span class=\"pun\">=</span><span class=\"pln\"> urlParams</span><span class=\"pun\">.</span><span class=\"kwd\">get</span><span class=\"pun\">(</span><span class=\"str\">\'errorReasonSupplement\'</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">  methods</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{}</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pun\">})</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"tag\">&lt;/script&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"tag\">&lt;style</span><span class=\"pln\"> </span><span class=\"atn\">scoped</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"tag\">&lt;/style&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">{% endblock %}  </span><span class=\"com\">&lt;!-- 框架的入口页面的vue代码位置 标签闭合，必须引入 --&gt;</span></code></li></ol></pre>\n<h2 id=\"h2-u9875u9762u4E4B20pagehook\"><a class=\"reference-link\" name=\"页面 之 pageHook\"></a><span class=\"header-link octicon octicon-link\"></span>页面 之 pageHook</h2><p>pageHook 可以用做 鉴权 or 往页面上下文追加数据</p>\n<p><code>_page表</code></p>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>pageId</th>\n<th>pageName</th>\n<th>pageType</th>\n<th>pageHook</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>test</td>\n<td>测试页面</td>\n<td>showInMenu</td>\n<td>{\"beforeHook\":[{\"field\": \"testData\", \"service\": \"test\", \"serviceFunc\": \"getTestData\"}]}</td>\n</tr>\n</tbody></table>\n<p><code>/service/test.js</code></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'egg\'</span><span class=\"pun\">).</span><span class=\"typ\">Service</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"typ\">TestService</span><span class=\"pln\"> extends </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">  async getTestData</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">   </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> content</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"这是测试数据\"</span><span class=\"pln\"> </span><span class=\"pun\">};</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">TestService</span><span class=\"pun\">;</span></code></li></ol></pre>\n<p><code>test.html</code>内使用数据</p>\n<p>&lt;$ testData.content $&gt;</p>\n<h2 id=\"h2-u9875u9762u4E4B20u5E38u91CFu56FDu9645u5316\"><a class=\"reference-link\" name=\"页面 之 常量国际化\"></a><span class=\"header-link octicon octicon-link\"></span>页面 之 常量国际化</h2><blockquote class=\"default\">\n<p><a href=\"https://github.com/ladjs/i18n-locales\">i18n 的语言环境列表</a><br>背景: 页面需要支持不同语言, 例如：中文、英文<br>实现方案: 将页面上的 常量(按钮，文本) 提取到<code>_constant_ui</code> 这张表中 对应 语言中配置</p>\n</blockquote>\n<p>例如: test.html 中 有三个按钮 新增、修改、删除</p>\n<p><strong>app/service/constantUiMap.js</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"str\">\'use strict\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'egg\'</span><span class=\"pun\">).</span><span class=\"typ\">Service</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> tableEnum </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'../constant/constant\'</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"typ\">ConstantUiService</span><span class=\"pln\"> extends </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-javascript\"></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  async getConstantUiMap</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> pageId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">packagePage</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> language </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">config</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> constantUiList </span><span class=\"pun\">=</span><span class=\"pln\"> await jianghuKnex</span><span class=\"pun\">(</span><span class=\"pln\">tableEnum</span><span class=\"pun\">.</span><span class=\"pln\">_constant_ui</span><span class=\"pun\">).</span><span class=\"pln\">whereIn</span><span class=\"pun\">(</span><span class=\"str\">\'pageId\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"str\">\'all\'</span><span class=\"pun\">,</span><span class=\"pln\"> pageId</span><span class=\"pun\">]).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> constantUiMap </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Object</span><span class=\"pun\">.</span><span class=\"pln\">fromEntries</span><span class=\"pun\">(</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">      constantUiList</span><span class=\"pun\">.</span><span class=\"pln\">map</span><span class=\"pun\">(</span><span class=\"pln\">obj </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">obj</span><span class=\"pun\">.</span><span class=\"pln\">constantKey</span><span class=\"pun\">,</span><span class=\"pln\"> JSON</span><span class=\"pun\">.</span><span class=\"pln\">parse</span><span class=\"pun\">(</span><span class=\"pln\">obj</span><span class=\"pun\">[</span><span class=\"pln\">language</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">)])</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> constantUiMap</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">ConstantUiService</span><span class=\"pun\">;</span></code></li></ol></pre>\n<p><strong>_constant_ui</strong>表数据</p>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>pageId</th>\n<th>constantKey</th>\n<th>constantType</th>\n<th>zh</th>\n<th>en</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>test</td>\n<td>btn</td>\n<td>object</td>\n<td>{\"insert\": \"新增按钮\",\"update\": \"修改按钮\",\"delete\": \"删除按钮\" }</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><strong>test.html</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-html\"><span class=\"tag\">&lt;h1&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">{% extends \'index.html\'%}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">{% block vue_template %}</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"tag\">&lt;jh-layout&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"tag\">&lt;div&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">depressed</span><span class=\"pln\"> </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"primary\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">&lt;$ constantUiMap.btn.insert $&gt;</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">depressed</span><span class=\"pln\"> </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"primary\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">&lt;$ constantUiMap.btn.update $&gt;</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">depressed</span><span class=\"pln\"> </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"primary\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">&lt;$ constantUiMap.btn.delete $&gt;</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">  </span><span class=\"tag\">&lt;/div&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"tag\">&lt;/jh-layout&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">{% endblock %}</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">{% block vue_body %}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">{% include \'layout/jhLayout.html\' %}</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"tag\">&lt;style</span><span class=\"pln\"> </span><span class=\"atn\">scoped</span><span class=\"tag\">&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"tag\">&lt;/style&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">{% endblock %}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"tag\">&lt;/h1&gt;</span></code></li></ol></pre>\n<h2 id=\"h2-u9875u9762u4E4B20u7F13u5B58u66F4u65B0\"><a class=\"reference-link\" name=\"页面 之 缓存更新\"></a><span class=\"header-link octicon octicon-link\"></span>页面 之 缓存更新</h2><p>背景: 线上环境, eggjs(<code>config.prod.js</code>)对静态文件(<code>/app/public</code>)设置缓存,如果修改了css/js, 如何触发用户浏览器更新<br>实现方案: href 链接上添加<code>s?v=1.0.1</code>, 然后每一次修改文件则 版本号++</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">&lt;link rel=\"stylesheet\" href=\"&lt;$ static $&gt;/jianghu.md/css/editormd.css?v=1.0.1\" /&gt;</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-04-23T13:54:24+08:00', 'm3611F', '刘计', '2022-05-28T21:25:05+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-28T21:25:05+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1428, 10014, '10004', '03前端开发参考', '', 'public', '2022-04-23T13:55:04+08:00', '常用组件', NULL, '## 弹窗\n> view/component/jhToast.html\n- 本组件已经挂载到`window`中\n```javascript\nwindow.vtoast.fail(\"数据异常\");\nwindow.vtoast.loading(\"删除中\");\nwindow.vtoast.success(\"删除成功\")\n```\n\n## 确认框\n\n> view/component/jhConfirmDialog.html\n- 本组件已经挂载到`window`中\n```javascript\nif (await window.confirmDialog({ title: \'确定要删除吗？\' })) {\n     window.vtoast.loading(\"删除中\");\n     await this.deleteItem();\n	 window.vtoast.success(\"删除成功\");\n}\n```\n\n## table高度自适应(resetTableMaxHeight)\n> view/common/resetTableMaxHeight.html\n- 在使用了`vuetify` 的 `datatable`组件的页面中，在页面中引入组件，会自动保证表格的高度自适应 浏览器窗口高度，保证中间部分滚动。\n```shell\n{% include \'common/resetTableMaxHeight.html\' %}\n```\n\n## 时间处理(dayjs)\n- 时间格式处理工具\n- 需要在method中做下映射\n> 文档[dayjs](https://dayjs.fenxianglu.cn/)\n```shell\nmethods: {\n	dayjs: dayjs\n}\n```\n\n## 数据处理(loadash)\n\n> 文档地址[lodashjs](https://www.lodashjs.com/)\n- 数据处理相关工具\n- 包含了javascript的所有常用数据方法，如：`Array.map、Array.filter、Object.keys`等等\n### 案例\n> 此处使用lodashjs进行数据的过滤并且返回所有男性的学生\n```\n_.filter(this.studentList, [\'gender\', male])\n```\n', '<h2 id=\"h2-u5F39u7A97\"><a class=\"reference-link\" name=\"弹窗\"></a><span class=\"header-link octicon octicon-link\"></span>弹窗</h2><blockquote class=\"default\">\n<p>view/component/jhToast.html</p>\n</blockquote>\n<ul>\n<li>本组件已经挂载到<code>window</code>中<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">fail</span><span class=\"pun\">(</span><span class=\"str\">\"数据异常\"</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(</span><span class=\"str\">\"删除中\"</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\"删除成功\"</span><span class=\"pun\">)</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u786Eu8BA4u6846\"><a class=\"reference-link\" name=\"确认框\"></a><span class=\"header-link octicon octicon-link\"></span>确认框</h2><blockquote class=\"default\">\n<p>view/component/jhConfirmDialog.html</p>\n</blockquote>\n<ul>\n<li>本组件已经挂载到<code>window</code>中<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">await window</span><span class=\"pun\">.</span><span class=\"pln\">confirmDialog</span><span class=\"pun\">({</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'确定要删除吗？\'</span><span class=\"pln\"> </span><span class=\"pun\">}))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">   window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(</span><span class=\"str\">\"删除中\"</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">   await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">deleteItem</span><span class=\"pun\">();</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">   window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\"删除成功\"</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-tableu9AD8u5EA6u81EAu9002u5E9428resettablemaxheight29\"><a class=\"reference-link\" name=\"table高度自适应(resetTableMaxHeight)\"></a><span class=\"header-link octicon octicon-link\"></span>table高度自适应(resetTableMaxHeight)</h2><blockquote class=\"default\">\n<p>view/common/resetTableMaxHeight.html</p>\n</blockquote>\n<ul>\n<li>在使用了<code>vuetify</code> 的 <code>datatable</code>组件的页面中，在页面中引入组件，会自动保证表格的高度自适应 浏览器窗口高度，保证中间部分滚动。<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pun\">{%</span><span class=\"pln\"> include </span><span class=\"str\">\'common/resetTableMaxHeight.html\'</span><span class=\"pln\"> </span><span class=\"pun\">%}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u65F6u95F4u5904u740628dayjs29\"><a class=\"reference-link\" name=\"时间处理(dayjs)\"></a><span class=\"header-link octicon octicon-link\"></span>时间处理(dayjs)</h2><ul>\n<li>时间格式处理工具</li><li>需要在method中做下映射<blockquote class=\"default\">\n<p>文档<a href=\"https://dayjs.fenxianglu.cn/\">dayjs</a></p>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">methods</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">  dayjs</span><span class=\"pun\">:</span><span class=\"pln\"> dayjs</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u6570u636Eu5904u740628loadash29\"><a class=\"reference-link\" name=\"数据处理(loadash)\"></a><span class=\"header-link octicon octicon-link\"></span>数据处理(loadash)</h2><blockquote class=\"default\">\n<p>文档地址<a href=\"https://www.lodashjs.com/\">lodashjs</a></p>\n</blockquote>\n<ul>\n<li>数据处理相关工具</li><li>包含了javascript的所有常用数据方法，如：<code>Array.map、Array.filter、Object.keys</code>等等<h3 id=\"h3-u6848u4F8B\"><a class=\"reference-link\" name=\"案例\"></a><span class=\"header-link octicon octicon-link\"></span>案例</h3><blockquote class=\"default\">\n<p>此处使用lodashjs进行数据的过滤并且返回所有男性的学生</p>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">_</span><span class=\"pun\">.</span><span class=\"pln\">filter</span><span class=\"pun\">(</span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">studentList</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"str\">\'gender\'</span><span class=\"pun\">,</span><span class=\"pln\"> male</span><span class=\"pun\">])</span></code></li></ol></pre>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T13:55:05+08:00', 'm3611F', '刘计', '2022-04-28T21:37:21+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-28T21:37:21+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1429, 10015, '10004', '03前端开发参考', '', 'public', '2022-04-23T13:55:43+08:00', '接口调用', NULL, '## jianghuAxios简介\n> egg-jianghu/app/view/common/jianghuAxios.html\n- 框架为开发者进行了简单的`axios`封装，无需配置过多的信息，工具会自动补全\n\n## jianghuAxios使用\n```javascript\nconst data = await jianghuAxios({\n  data: {\n    appData: {\n      pageId: \'login\',\n      actionId: \'passwordLogin\',\n      actionData: { userId, password, deviceId }, // 操作的相关表字段\n    }\n  }\n});\n```\n\n##  jianghuAxios请求拦截器\n- 请求拦截器会为开发者自动生成一些框架需要的动态字段。如：`appId、authToken、userAgent、packageId、resourceId、packageType`；\n- 上述几个字段是应用统一的数据，不需要用户每次都手动传入，如果使用`axios`，则上述数据必须手动传入的。\n```javascript\n  /**\n   * desc: 请求拦截器 ==> 数据填充\n   * [axios文档](https://axios-http.com/zh/docs/interceptors)\n   */\n  window.jianghuAxios.interceptors.request.use(async config => {\n    const data = config.data;\n    if (!data.appData) { data.appData = {}; }\n    const { pageId, actionId } = data.appData;\n    const resourceId = `${pageId}.${actionId}`;\n    // config.data 的 优先级更高\n    const packageId = `${Date.now()}_${_.random(1000000, 9999999)}`;\n    if (!data.packageId) { data.packageId = packageId; }\n    const packageType = \'httpRequest\';\n    if (!data.packageType) { data.packageType = packageType; }\n    const { appId, userAgent } = window.appInfo;\n    if (!data.appData.appId) { data.appData.appId = appId; }\n    if (!data.appData.userAgent) { data.appData.userAgent = userAgent; }\n    const authToken = localStorage.getItem(`${window.appInfo.appId}_authToken`);\n    if (!data.appData.authToken) { data.appData.authToken = authToken; }\n    const baseURL = `/${appId}/resource?resourceId=${resourceId}`;\n    const method = \'post\';\n    return { ...config, baseURL, method, data };\n  }, err => {\n    return Promise.reject(err);\n  });\n```\n\n##  jianghuAxios响应拦截器\n- 响应拦截器会自动处理一些框架级别的错误。`request_token_invalid（无效token）、request_user_not_exist（用户不存在）、request_token_expired（token过期）、user_banned（用户被禁用）`\n- 用户自定义的错误信息。则需要抛出到`catch`有用户自己去处理。\n```javascript\n  /**\n   * desc: 响应拦截器 ==> 异常处理\n   * [axios文档](https://axios-http.com/zh/docs/interceptors)\n   */\n  window.jianghuAxios.interceptors.response.use(async response => {\n    const data = response.data || {};\n    const responseData = data.appData || {};\n    const {errorCode, errorReason} = responseData;\n    if (errorCode === \'request_token_invalid\' || errorCode === \'request_user_not_exist\' ||\n        errorCode === \'request_token_expired\' || errorCode === \'user_banned\') {\n      localStorage.removeItem(`${window.appInfo.appId}_authToken`);\n      window.vtoast.fail(`${errorReason}`);\n      if (location.pathname === `/${window.appInfo.appId}/page/login`) {\n        throw new BizError({\n          errorCode,\n          errorReason,\n          response\n        });\n      }\n      location.href = `/${window.appInfo.appId}/page/login`;\n      return response;\n    }\n    // 需要把 errorCode 转成异常抛出来\n    if (errorCode) {\n      window.vtoast.fail(`${errorReason}`);\n      throw new BizError({\n        errorCode,\n        errorReason,\n        response\n      });\n    }\n    return response;\n  }, err => {\n    const {code, message, response} = err;\n    let {errorCode, errorReason} = err;\n    if (!errorCode && code) {\n      errorCode = code;\n    }\n    if (!errorReason && message) {\n      errorReason = message;\n    }\n    window.vtoast.fail(`${errorReason}`);\n    // logResource(appId, pageId, actionId, actionData, where, err, false, startTime);\n    return Promise.reject(new BizError({errorCode, errorReason, response}));\n  });\n```\n', '<h2 id=\"h2-jianghuaxiosu7B80u4ECB\"><a class=\"reference-link\" name=\"jianghuAxios简介\"></a><span class=\"header-link octicon octicon-link\"></span>jianghuAxios简介</h2><blockquote class=\"default\">\n<p>egg-jianghu/app/view/common/jianghuAxios.html</p>\n</blockquote>\n<ul>\n<li>框架为开发者进行了简单的<code>axios</code>封装，无需配置过多的信息，工具会自动补全</li></ul>\n<h2 id=\"h2-jianghuaxiosu4F7Fu7528\"><a class=\"reference-link\" name=\"jianghuAxios使用\"></a><span class=\"header-link octicon octicon-link\"></span>jianghuAxios使用</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> data </span><span class=\"pun\">=</span><span class=\"pln\"> await jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">      pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'login\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">      actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'passwordLogin\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">      actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> userId</span><span class=\"pun\">,</span><span class=\"pln\"> password</span><span class=\"pun\">,</span><span class=\"pln\"> deviceId </span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"com\">// 操作的相关表字段</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pun\">});</span></code></li></ol></pre>\n<h2 id=\"h2-jianghuaxiosu8BF7u6C42u62E6u622Au5668\"><a class=\"reference-link\" name=\"jianghuAxios请求拦截器\"></a><span class=\"header-link octicon octicon-link\"></span>jianghuAxios请求拦截器</h2><ul>\n<li>请求拦截器会为开发者自动生成一些框架需要的动态字段。如：<code>appId、authToken、userAgent、packageId、resourceId、packageType</code>；</li><li>上述几个字段是应用统一的数据，不需要用户每次都手动传入，如果使用<code>axios</code>，则上述数据必须手动传入的。<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"com\">/**</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"com\"> * desc: 请求拦截器 ==&gt; 数据填充</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"com\"> * [axios文档](https://axios-http.com/zh/docs/interceptors)</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"com\"> */</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">interceptors</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">use</span><span class=\"pun\">(</span><span class=\"pln\">async config </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> data </span><span class=\"pun\">=</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">appData </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{};</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> pageId</span><span class=\"pun\">,</span><span class=\"pln\"> actionId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> resourceId </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">pageId</span><span class=\"pun\">}.</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">actionId</span><span class=\"pun\">}`;</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"com\">// config.data 的 优先级更高</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> packageId </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"typ\">Date</span><span class=\"pun\">.</span><span class=\"pln\">now</span><span class=\"pun\">()}</span><span class=\"pln\">_$</span><span class=\"pun\">{</span><span class=\"pln\">_</span><span class=\"pun\">.</span><span class=\"pln\">random</span><span class=\"pun\">(</span><span class=\"lit\">1000000</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"lit\">9999999</span><span class=\"pun\">)}`;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">packageId</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">packageId </span><span class=\"pun\">=</span><span class=\"pln\"> packageId</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> packageType </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'httpRequest\'</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">packageType</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">packageType </span><span class=\"pun\">=</span><span class=\"pln\"> packageType</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> appId</span><span class=\"pun\">,</span><span class=\"pln\"> userAgent </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">appId </span><span class=\"pun\">=</span><span class=\"pln\"> appId</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">userAgent</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">userAgent </span><span class=\"pun\">=</span><span class=\"pln\"> userAgent</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> authToken </span><span class=\"pun\">=</span><span class=\"pln\"> localStorage</span><span class=\"pun\">.</span><span class=\"pln\">getItem</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}</span><span class=\"pln\">_authToken</span><span class=\"pun\">`);</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">authToken</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">authToken </span><span class=\"pun\">=</span><span class=\"pln\"> authToken</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> baseURL </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">`/</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">appId</span><span class=\"pun\">}/</span><span class=\"pln\">resource</span><span class=\"pun\">?</span><span class=\"pln\">resourceId</span><span class=\"pun\">=</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">resourceId</span><span class=\"pun\">}`;</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> method </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'post\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"pun\">...</span><span class=\"pln\">config</span><span class=\"pun\">,</span><span class=\"pln\"> baseURL</span><span class=\"pun\">,</span><span class=\"pln\"> method</span><span class=\"pun\">,</span><span class=\"pln\"> data </span><span class=\"pun\">};</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pun\">},</span><span class=\"pln\"> err </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"typ\">Promise</span><span class=\"pun\">.</span><span class=\"pln\">reject</span><span class=\"pun\">(</span><span class=\"pln\">err</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pun\">});</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-jianghuaxiosu54CDu5E94u62E6u622Au5668\"><a class=\"reference-link\" name=\"jianghuAxios响应拦截器\"></a><span class=\"header-link octicon octicon-link\"></span>jianghuAxios响应拦截器</h2><ul>\n<li>响应拦截器会自动处理一些框架级别的错误。<code>request_token_invalid（无效token）、request_user_not_exist（用户不存在）、request_token_expired（token过期）、user_banned（用户被禁用）</code></li><li>用户自定义的错误信息。则需要抛出到<code>catch</code>有用户自己去处理。<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"com\">/**</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"com\"> * desc: 响应拦截器 ==&gt; 异常处理</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"com\"> * [axios文档](https://axios-http.com/zh/docs/interceptors)</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"com\"> */</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">interceptors</span><span class=\"pun\">.</span><span class=\"pln\">response</span><span class=\"pun\">.</span><span class=\"pln\">use</span><span class=\"pun\">(</span><span class=\"pln\">async response </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> data </span><span class=\"pun\">=</span><span class=\"pln\"> response</span><span class=\"pun\">.</span><span class=\"pln\">data </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"pun\">{};</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> responseData </span><span class=\"pun\">=</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">appData </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"pun\">{};</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">errorCode</span><span class=\"pun\">,</span><span class=\"pln\"> errorReason</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> responseData</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">errorCode </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'request_token_invalid\'</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> errorCode </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'request_user_not_exist\'</span><span class=\"pln\"> </span><span class=\"pun\">||</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">      errorCode </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'request_token_expired\'</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> errorCode </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'user_banned\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    localStorage</span><span class=\"pun\">.</span><span class=\"pln\">removeItem</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}</span><span class=\"pln\">_authToken</span><span class=\"pun\">`);</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">fail</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">errorReason</span><span class=\"pun\">}`);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">location</span><span class=\"pun\">.</span><span class=\"pln\">pathname </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"pun\">`/</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}/</span><span class=\"pln\">page</span><span class=\"pun\">/</span><span class=\"pln\">login</span><span class=\"pun\">`)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"kwd\">throw</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">BizError</span><span class=\"pun\">({</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">        errorCode</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">        errorReason</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">        response</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"pun\">});</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    location</span><span class=\"pun\">.</span><span class=\"pln\">href </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">`/</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}/</span><span class=\"pln\">page</span><span class=\"pun\">/</span><span class=\"pln\">login</span><span class=\"pun\">`;</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> response</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"com\">// 需要把 errorCode 转成异常抛出来</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">errorCode</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">fail</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">errorReason</span><span class=\"pun\">}`);</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">throw</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">BizError</span><span class=\"pun\">({</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">      errorCode</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">      errorReason</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">      response</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">});</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">return</span><span class=\"pln\"> response</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pun\">},</span><span class=\"pln\"> err </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">code</span><span class=\"pun\">,</span><span class=\"pln\"> message</span><span class=\"pun\">,</span><span class=\"pln\"> response</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> err</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">  let </span><span class=\"pun\">{</span><span class=\"pln\">errorCode</span><span class=\"pun\">,</span><span class=\"pln\"> errorReason</span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> err</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">errorCode </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> code</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    errorCode </span><span class=\"pun\">=</span><span class=\"pln\"> code</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">errorReason </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> message</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    errorReason </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">fail</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">errorReason</span><span class=\"pun\">}`);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"com\">// logResource(appId, pageId, actionId, actionData, where, err, false, startTime);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"typ\">Promise</span><span class=\"pun\">.</span><span class=\"pln\">reject</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">BizError</span><span class=\"pun\">({</span><span class=\"pln\">errorCode</span><span class=\"pun\">,</span><span class=\"pln\"> errorReason</span><span class=\"pun\">,</span><span class=\"pln\"> response</span><span class=\"pun\">}));</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pun\">});</span></code></li></ol></pre>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T13:55:44+08:00', 'm3611F', '刘计', '2022-04-28T21:53:07+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-28T21:53:07+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1446, 10032, '10004', '03前端开发参考', '', 'public', '2022-04-23T21:12:24+08:00', '前端规范(uiAction)', NULL, '## uiAction简介\n\n基于`_ui`表统一管理前端动作(ui变更、数据请求、等等), 前端页面启用uiAction后，就可以通过`doUiAction(\"uiActionId\", uiActionParamObj)` 来执行 `_ui`表中`uiActionConfig`中的所有方法(`function`)。\n\n## _ui表结构\n\n| 字段 | 描述 |\n|---|---|\n| pageId | \'页面ID\' |\n| uiActionId | \'动作ID\' |\n| uiActionConfig | \'动作数据\' `{ \"before\": [ ], \"main\": [ ], \"after\": [ ] }`|\n| desc | \'描述\' |\n\n## uiActionConfig结构\n\n```json\n{\n	\"before\": [\n		{\"vueComponent\": \"jhToast\", \"function\": \"show\", \"functionParamObj\": {\"message\": \"uiAction before 的消息。\"}}\n	],\n	\"main\": [\n		{\"vueComponent\": \"page\", \"function\": \"test\"}\n	],\n	\"after\": [\n		{\"vueComponent\": \"jhConfirmDialog\", \"function\": \"confirmDialog\", \"functionParamObj\": { \"title\": \"提示\", \"content\": \"uiAction after 的对话框。\" }}\n	]\n}\n```\n- `vueComponent`: 执行`function`时指定 特定的vue组件,默认值为当前组件;\n	- jhToast: 框架组件, 无需引入\n	- jhConfirmDialog: 框架组件, 无需引入\n	- page: `/app/view/page`下的页面\n	- 其他组件需要 手动引入\n- `function入参`: { ...functionParamObj, ...uiActionParamObj }\n- `中断function`: 在当前方法 `return false;`\n- 代码逻辑请参考`egg-jianghu/app/view/common/uiAction.html`\n\n## uiAction使用案例\n\n> [参考页面](https://github.com/openJianghu/jianghujs_demo_basic_uiAction/blob/main/app/view/page/uiAction.html)\n\n**_ui表数据**\n\n| 字段 | 值 |\n|---|---|\n| pageId | test |\n| uiActionType | ui |\n| uiActionId | refreshTableData |\n| desc | \'描述\' |\n| uiActionConfig |{\"before\": [{\"vueComponent\": \"jhToast\", \"function\": \"show\", \"functionParamObj\": {\"message\": \"uiAction before 的消息。\"}}], \"main\": [{\"vueComponent\": \"page\", \"function\": \"test\"}],\"after\": [{\"vueComponent\": \"jhConfirmDialog\", \"function\": \"confirmDialog\", \"functionParamObj\": { \"title\": \"提示\", \"content\": \"uiAction after 的对话框。\" }}]}|\n\n**/view/page/test.html**\n```\n{% extends \'template/jhTemplate.html\' %}\n\n{% block vue_template %}\n	<div>\n	    <v-btn small @click=\"test({ title: \'来自点击事件\' })\">测试按钮</v-btn>\n	</div>\n{% endblock %}\n\n {% block vue_body %}\n<script type=\"module\">\n   new Vue({\n    el: \"#app\",\n    template: \"#app-template\",\n    vuetify: new Vuetify(),\n    // vueComponent: \'page\',\n    mixins: [ window.jianghuUiActionMixins ],\n    data: () => ({\n	}),\n    computed: {},\n    watch: {},\n    async created() {},\n    mounted() {\n      this.doUiAction(\"test\", { title: \"测试标题\" });\n    },\n	methods: {\n      async test({ title }) {\n        console.log(\">>>>>>>>>>>>>test>>>>>>>>>>>>>>>>\", title);\n      }\n	}\n  )};\n{% endblock %}\n```\n\n## uiAction多组件开启 vueData 共享\n\n> [参考页面](https://github.com/openJianghu/jianghujs_demo_basic_uiAction/blob/main/app/view/page/uiActionComponent.html)\n\n1. 将页面&组件 的 vue data数据 都维护在`page`文件里, 统一管理 vue data\n1. 使用 `window.registerData({ ... })` 将data数据 挂载到 `window.vueData`上\n3. 页面&组件内 使用`data: window.vueData` 将数据绑定到当前vue实例上\n4. 最后 当我们在 页面/组件内 修改 data数据时 就会自动同步到 其他的组件/页面\n> 注意: `window.registerData`需要写在 {% include \'common/xxx.html\' %} 之前\n\n### 开启vueData案例\n\n**_ui表数据**\n\n| 字段 | 值 |\n|---|---|\n| pageId | test |\n| uiActionType | ui |\n| uiActionId | refreshTableData |\n| desc | \'描述\' |\n| uiActionHook |{\"before\": [{\"vueComponent\": \"jhToast\", \"function\": \"show\", \"functionParamObj\": {\"message\": \"uiAction before 的消息。\"}}], \"main\": [{\"vueComponent\": \"page\", \"function\": \"test\"}],\"after\": [{\"vueComponent\": \"jhConfirmDialog\", \"function\": \"confirmDialog\", \"functionParamObj\": { \"title\": \"提示\", \"content\": \"uiAction after 的对话框。\" }}]}|\n\n**/view/page/test.html**\n```\n{% extends \'template/jhTemplate.html\' %}\n\n{% block vue_template %} \n	<div>\n		<h1>{{ pageTitle }}</h1>\n	    <classSelectDialog />\n	</div>\n{% endblock %}\n\n {% block vue_body %}\n <script>\n  window.registerData({\n    // 组件的 data数据\n    classSelectDialog_shown: false,\n    classSelectDialog_title: \"班级\",\n    classSelectDialog_selected: null,\n    classSelectDialog_filterText: null,\n    classSelectDialog_dataList: [\n        { value: \"2021-01级-01班\", text: \"2021-01级-01班\" },\n        { value: \"2021-01级-02班\", text: \"2021-01级-02班\" },\n        { value: \"2021-02级-01班\", text: \"2021-02级-01班\" },\n        { value: \"2021-02级-02班\", text: \"2021-02级-02班\" },\n        { value: \"2021-03级-01班\", text: \"2021-03级-01班\" },\n        { value: \"2021-03级-02班\", text: \"2021-03级-02班\" },\n    ],\n	// 页面的 data数据\n	pageTitle: \"测试页面\"\n });\n {% include \'component/classSelectDialog.html\' %}\n<script type=\"module\">\n   new Vue({\n    el: \"#app\",\n    template: \"#app-template\",\n    vuetify: new Vuetify(),\n    mixins: [ window.jianghuUiActionMixins ],\n    data: window.vueData,\n    computed: {},\n    watch: {},\n    async created() {},\n    mounted() {\n      this.doUiAction(\"test\", { title: \"测试标题\" });\n    },\n	methods: {\n      async test({ title }) {\n        console.log(\">>>>>>>>>>>>>test>>>>>>>>>>>>>>>>\", title);\n      }\n	}\n  )};\n{% endblock %}\n```\n\n**/view/component/classSelectDialog.html**\n```\n<script type=\"text/x-template\" id=\"classSelectDialog\">\n  <span>\n    <v-select class=\"mr-4\" @mouseup=\"classSelectDialog_shown = true\" v-model=\"classSelectDialog_selected\"\n      :items=\"classSelectDialog_dataList\" readonly :label=\"classSelectDialog_title\" hide-details dense\n      outlined hide-no-data hide-selected />\n    <v-dialog v-model=\"classSelectDialog_shown\" scrollable max-width=\"500px\">\n      <v-card>\n        <v-card-title>\n          <span>{{ classSelectDialog_title }}</span>\n          <v-text-field\n            label=\"搜索\"\n            clearable\n            dense\n            v-model=\"classSelectDialog_filterText\"\n            hide-details\n            prepend-inner-icon=\"mdi-text-search\"\n            class=\"ma-2 pa-0\"\n            outlined\n          ></v-text-field>\n        </v-card-title>\n        <v-divider />\n        <div class=\"list\">\n          <v-list rounded>\n            <v-list-item-group color=\"primary\" active-class>\n              <v-list-item v-for=\"(item, index) in classSelectDialog_dataList_filter\" :key=\"item.value\" @click=\"selectItem({ item })\">\n                <template #default=\"{ active }\">\n                  <v-list-item-content>\n                    <v-list-item-title v-text=\"item.text\" />\n                  </v-list-item-content>\n                </template>\n              </v-list-item>\n            </v-list-item-group>\n          </v-list>\n        </div>\n        <v-divider />\n        <v-card-actions>\n          <v-spacer />\n          <v-btn color=\"primary\" text @click=\"classSelectDialog_shown = false\">取消</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>    \n  </span>\n</script>\n\n<script>\n  Vue.component(\"classSelectDialog\", {\n    template: \"#classSelectDialog\",\n    vueComponent: \'classSelectDialog\',\n    mixins: [ window.jianghuUiActionMixins ],\n    data: () => (window.vueData),\n    computed: {\n      classSelectDialog_dataList_filter() {\n        const classSelectDialog_filterText = (this.classSelectDialog_filterText || \'\').toLowerCase();\n        let list = this.classSelectDialog_dataList.slice();\n        list = list.filter((item) =>\n            item.text && \n            ( item.text.toLowerCase().includes(classSelectDialog_filterText) ||\n              item.text.includes(classSelectDialog_filterText)\n            )\n        )\n        return list;\n      },\n    },\n    methods: {\n      selectItem({ item }) {\n        this.classSelectDialog_selected = item.value;\n        this.classSelectDialog_shown = false;\n      },\n    },\n  });\n</script>\n<style>\n  .list {\n    max-height: 700px;\n    overflow-y: scroll;\n  }\n</style>\n```\n\n\n\n\n', '<h2 id=\"h2-uiactionu7B80u4ECB\"><a class=\"reference-link\" name=\"uiAction简介\"></a><span class=\"header-link octicon octicon-link\"></span>uiAction简介</h2><p>基于<code>_ui</code>表统一管理前端动作(ui变更、数据请求、等等), 前端页面启用uiAction后，就可以通过<code>doUiAction(\"uiActionId\", uiActionParamObj)</code> 来执行 <code>_ui</code>表中<code>uiActionConfig</code>中的所有方法(<code>function</code>)。</p>\n<h2 id=\"h2-_uiu8868u7ED3u6784\"><a class=\"reference-link\" name=\"_ui表结构\"></a><span class=\"header-link octicon octicon-link\"></span>_ui表结构</h2><table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>pageId</td>\n<td>\'页面ID\'</td>\n</tr>\n<tr>\n<td>uiActionId</td>\n<td>\'动作ID\'</td>\n</tr>\n<tr>\n<td>uiActionConfig</td>\n<td>\'动作数据\' <code>{ \"before\": [ ], \"main\": [ ], \"after\": [ ] }</code></td>\n</tr>\n<tr>\n<td>desc</td>\n<td>\'描述\'</td>\n</tr>\n</tbody></table>\n<h2 id=\"h2-uiactionconfigu7ED3u6784\"><a class=\"reference-link\" name=\"uiActionConfig结构\"></a><span class=\"header-link octicon octicon-link\"></span>uiActionConfig结构</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-json\"><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"str\">\"before\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"str\">\"vueComponent\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"jhToast\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"function\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"show\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"functionParamObj\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"message\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"uiAction before 的消息。\"</span><span class=\"pun\">}}</span></code></li><li class=\"L3\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"pun\">],</span></code></li><li class=\"L4\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"str\">\"main\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L5\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"str\">\"vueComponent\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"page\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"function\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"test\"</span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"pun\">],</span></code></li><li class=\"L7\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"str\">\"after\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L8\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"str\">\"vueComponent\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"jhConfirmDialog\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"function\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"confirmDialog\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"functionParamObj\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"str\">\"title\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"提示\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"content\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"uiAction after 的对话框。\"</span><span class=\"pln\"> </span><span class=\"pun\">}}</span></code></li><li class=\"L9\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"pun\">]</span></code></li><li class=\"L0\"><code class=\"language-json\"><span class=\"pun\">}</span></code></li></ol></pre>\n<ul>\n<li><code>vueComponent</code>: 执行<code>function</code>时指定 特定的vue组件,默认值为当前组件;<ul>\n<li>jhToast: 框架组件, 无需引入</li><li>jhConfirmDialog: 框架组件, 无需引入</li><li>page: <code>/app/view/page</code>下的页面</li><li>其他组件需要 手动引入</li></ul>\n</li><li><code>function入参</code>: { ...functionParamObj, ...uiActionParamObj }</li><li><code>中断function</code>: 在当前方法 <code>return false;</code></li><li>代码逻辑请参考<code>egg-jianghu/app/view/common/uiAction.html</code></li></ul>\n<h2 id=\"h2-uiactionu4F7Fu7528u6848u4F8B\"><a class=\"reference-link\" name=\"uiAction使用案例\"></a><span class=\"header-link octicon octicon-link\"></span>uiAction使用案例</h2><blockquote class=\"default\">\n<p><a href=\"https://github.com/openJianghu/jianghujs_demo_basic_uiAction/blob/main/app/view/page/uiAction.html\">参考页面</a></p>\n</blockquote>\n<p><strong>_ui表数据</strong></p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>pageId</td>\n<td>test</td>\n</tr>\n<tr>\n<td>uiActionType</td>\n<td>ui</td>\n</tr>\n<tr>\n<td>uiActionId</td>\n<td>refreshTableData</td>\n</tr>\n<tr>\n<td>desc</td>\n<td>\'描述\'</td>\n</tr>\n<tr>\n<td>uiActionConfig</td>\n<td>{\"before\": [{\"vueComponent\": \"jhToast\", \"function\": \"show\", \"functionParamObj\": {\"message\": \"uiAction before 的消息。\"}}], \"main\": [{\"vueComponent\": \"page\", \"function\": \"test\"}],\"after\": [{\"vueComponent\": \"jhConfirmDialog\", \"function\": \"confirmDialog\", \"functionParamObj\": { \"title\": \"提示\", \"content\": \"uiAction after 的对话框。\" }}]}</td>\n</tr>\n</tbody></table>\n<p><strong>/view/page/test.html</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pun\">{%</span><span class=\"pln\"> </span><span class=\"kwd\">extends</span><span class=\"pln\"> </span><span class=\"str\">\'template/jhTemplate.html\'</span><span class=\"pln\"> </span><span class=\"pun\">%}</span></code></li><li class=\"L1\"><code></code></li><li class=\"L2\"><code><span class=\"pun\">{%</span><span class=\"pln\"> block vue_template </span><span class=\"pun\">%}</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"str\">&lt;div&gt;</span></code></li><li class=\"L4\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">btn small </span><span class=\"lit\">@click</span><span class=\"pun\">=</span><span class=\"str\">\"test({ title: \'来自点击事件\' })\"</span><span class=\"pun\">&gt;测试按钮&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">btn</span><span class=\"pun\">&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">&lt;/</span><span class=\"pln\">div</span><span class=\"pun\">&gt;</span></code></li><li class=\"L6\"><code><span class=\"pun\">{%</span><span class=\"pln\"> endblock </span><span class=\"pun\">%}</span></code></li><li class=\"L7\"><code></code></li><li class=\"L8\"><code><span class=\"pln\"> </span><span class=\"pun\">{%</span><span class=\"pln\"> block vue_body </span><span class=\"pun\">%}</span></code></li><li class=\"L9\"><code><span class=\"pun\">&lt;</span><span class=\"pln\">script type</span><span class=\"pun\">=</span><span class=\"str\">\"module\"</span><span class=\"pun\">&gt;</span></code></li><li class=\"L0\"><code><span class=\"pln\">   </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vue</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code><span class=\"pln\">    el</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"#app\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"kwd\">template</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"#app-template\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code><span class=\"pln\">    vuetify</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vuetify</span><span class=\"pun\">(),</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span><span class=\"com\">// vueComponent: \'page\',</span></code></li><li class=\"L5\"><code><span class=\"pln\">    mixins</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuUiActionMixins </span><span class=\"pun\">],</span></code></li><li class=\"L6\"><code><span class=\"pln\">    data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">({</span></code></li><li class=\"L7\"><code><span class=\"pln\">    </span><span class=\"pun\">}),</span></code></li><li class=\"L8\"><code><span class=\"pln\">    computed</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L9\"><code><span class=\"pln\">    watch</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L0\"><code><span class=\"pln\">    async created</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L1\"><code><span class=\"pln\">    mounted</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">      </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">doUiAction</span><span class=\"pun\">(</span><span class=\"str\">\"test\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"测试标题\"</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code><span class=\"pln\">    methods</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code><span class=\"pln\">      async test</span><span class=\"pun\">({</span><span class=\"pln\"> title </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code><span class=\"pln\">        console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;test&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\"</span><span class=\"pun\">,</span><span class=\"pln\"> title</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code><span class=\"pln\">  </span><span class=\"pun\">)};</span></code></li><li class=\"L0\"><code><span class=\"pun\">{%</span><span class=\"pln\"> endblock </span><span class=\"pun\">%}</span></code></li></ol></pre>\n<h2 id=\"h2-uiactionu591Au7EC4u4EF6u5F00u542Fvuedata20u5171u4EAB\"><a class=\"reference-link\" name=\"uiAction多组件开启 vueData 共享\"></a><span class=\"header-link octicon octicon-link\"></span>uiAction多组件开启 vueData 共享</h2><blockquote class=\"default\">\n<p><a href=\"https://github.com/openJianghu/jianghujs_demo_basic_uiAction/blob/main/app/view/page/uiActionComponent.html\">参考页面</a></p>\n</blockquote>\n<ol>\n<li>将页面&amp;组件 的 vue data数据 都维护在<code>page</code>文件里, 统一管理 vue data</li><li>使用 <code>window.registerData({ ... })</code> 将data数据 挂载到 <code>window.vueData</code>上</li><li>页面&amp;组件内 使用<code>data: window.vueData</code> 将数据绑定到当前vue实例上</li><li>最后 当我们在 页面/组件内 修改 data数据时 就会自动同步到 其他的组件/页面<blockquote class=\"default\">\n<p>注意: <code>window.registerData</code>需要写在 {% include \'common/xxx.html\' %} 之前</p>\n</blockquote>\n</li></ol>\n<h3 id=\"h3-u5F00u542Fvuedatau6848u4F8B\"><a class=\"reference-link\" name=\"开启vueData案例\"></a><span class=\"header-link octicon octicon-link\"></span>开启vueData案例</h3><p><strong>_ui表数据</strong></p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>pageId</td>\n<td>test</td>\n</tr>\n<tr>\n<td>uiActionType</td>\n<td>ui</td>\n</tr>\n<tr>\n<td>uiActionId</td>\n<td>refreshTableData</td>\n</tr>\n<tr>\n<td>desc</td>\n<td>\'描述\'</td>\n</tr>\n<tr>\n<td>uiActionHook</td>\n<td>{\"before\": [{\"vueComponent\": \"jhToast\", \"function\": \"show\", \"functionParamObj\": {\"message\": \"uiAction before 的消息。\"}}], \"main\": [{\"vueComponent\": \"page\", \"function\": \"test\"}],\"after\": [{\"vueComponent\": \"jhConfirmDialog\", \"function\": \"confirmDialog\", \"functionParamObj\": { \"title\": \"提示\", \"content\": \"uiAction after 的对话框。\" }}]}</td>\n</tr>\n</tbody></table>\n<p><strong>/view/page/test.html</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pun\">{%</span><span class=\"pln\"> </span><span class=\"kwd\">extends</span><span class=\"pln\"> </span><span class=\"str\">\'template/jhTemplate.html\'</span><span class=\"pln\"> </span><span class=\"pun\">%}</span></code></li><li class=\"L1\"><code></code></li><li class=\"L2\"><code><span class=\"pun\">{%</span><span class=\"pln\"> block vue_template </span><span class=\"pun\">%}</span><span class=\"pln\"> </span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"str\">&lt;div&gt;</span></code></li><li class=\"L4\"><code><span class=\"pln\">        </span><span class=\"str\">&lt;h1&gt;</span><span class=\"pun\">{{</span><span class=\"pln\"> pageTitle </span><span class=\"pun\">}}&lt;/</span><span class=\"pln\">h1</span><span class=\"pun\">&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;</span><span class=\"pln\">classSelectDialog </span><span class=\"pun\">/&gt;</span></code></li><li class=\"L6\"><code><span class=\"pln\">    </span><span class=\"pun\">&lt;/</span><span class=\"pln\">div</span><span class=\"pun\">&gt;</span></code></li><li class=\"L7\"><code><span class=\"pun\">{%</span><span class=\"pln\"> endblock </span><span class=\"pun\">%}</span></code></li><li class=\"L8\"><code></code></li><li class=\"L9\"><code><span class=\"pln\"> </span><span class=\"pun\">{%</span><span class=\"pln\"> block vue_body </span><span class=\"pun\">%}</span></code></li><li class=\"L0\"><code><span class=\"pln\"> </span><span class=\"str\">&lt;script&gt;</span></code></li><li class=\"L1\"><code><span class=\"pln\">  window</span><span class=\"pun\">.</span><span class=\"pln\">registerData</span><span class=\"pun\">({</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"com\">// 组件的 data数据</span></code></li><li class=\"L3\"><code><span class=\"pln\">    classSelectDialog_shown</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code><span class=\"pln\">    classSelectDialog_title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"班级\"</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code><span class=\"pln\">    classSelectDialog_selected</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code><span class=\"pln\">    classSelectDialog_filterText</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code><span class=\"pln\">    classSelectDialog_dataList</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L8\"><code><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-01班\"</span><span class=\"pun\">,</span><span class=\"pln\"> text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-01班\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-02班\"</span><span class=\"pun\">,</span><span class=\"pln\"> text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-02班\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L0\"><code><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-01班\"</span><span class=\"pun\">,</span><span class=\"pln\"> text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-01班\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-02班\"</span><span class=\"pun\">,</span><span class=\"pln\"> text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-02班\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-01班\"</span><span class=\"pun\">,</span><span class=\"pln\"> text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-01班\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code><span class=\"pln\">        </span><span class=\"pun\">{</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-02班\"</span><span class=\"pun\">,</span><span class=\"pln\"> text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-02班\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span><span class=\"pun\">],</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"com\">// 页面的 data数据</span></code></li><li class=\"L6\"><code><span class=\"pln\">    pageTitle</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"测试页面\"</span></code></li><li class=\"L7\"><code><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L8\"><code><span class=\"pln\"> </span><span class=\"pun\">{%</span><span class=\"pln\"> include </span><span class=\"str\">\'component/classSelectDialog.html\'</span><span class=\"pln\"> </span><span class=\"pun\">%}</span></code></li><li class=\"L9\"><code><span class=\"pun\">&lt;</span><span class=\"pln\">script type</span><span class=\"pun\">=</span><span class=\"str\">\"module\"</span><span class=\"pun\">&gt;</span></code></li><li class=\"L0\"><code><span class=\"pln\">   </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vue</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code><span class=\"pln\">    el</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"#app\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"kwd\">template</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"#app-template\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code><span class=\"pln\">    vuetify</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vuetify</span><span class=\"pun\">(),</span></code></li><li class=\"L4\"><code><span class=\"pln\">    mixins</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuUiActionMixins </span><span class=\"pun\">],</span></code></li><li class=\"L5\"><code><span class=\"pln\">    data</span><span class=\"pun\">:</span><span class=\"pln\"> window</span><span class=\"pun\">.</span><span class=\"pln\">vueData</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code><span class=\"pln\">    computed</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L7\"><code><span class=\"pln\">    watch</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L8\"><code><span class=\"pln\">    async created</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L9\"><code><span class=\"pln\">    mounted</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">      </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">doUiAction</span><span class=\"pun\">(</span><span class=\"str\">\"test\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"测试标题\"</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L1\"><code><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code><span class=\"pln\">    methods</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">      async test</span><span class=\"pun\">({</span><span class=\"pln\"> title </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">        console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;test&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\"</span><span class=\"pun\">,</span><span class=\"pln\"> title</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code><span class=\"pln\">  </span><span class=\"pun\">)};</span></code></li><li class=\"L8\"><code><span class=\"pun\">{%</span><span class=\"pln\"> endblock </span><span class=\"pun\">%}</span></code></li></ol></pre>\n<p><strong>/view/component/classSelectDialog.html</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">type</span><span class=\"pun\">=</span><span class=\"atv\">\"text/x-template\"</span><span class=\"pln\"> </span><span class=\"atn\">id</span><span class=\"pun\">=</span><span class=\"atv\">\"classSelectDialog\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code><span class=\"pln\">  </span><span class=\"pun\">&lt;</span><span class=\"pln\">span</span><span class=\"pun\">&gt;</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">select </span><span class=\"kwd\">class</span><span class=\"pun\">=</span><span class=\"str\">\"mr-4\"</span><span class=\"pln\"> </span><span class=\"lit\">@mouseup</span><span class=\"pun\">=</span><span class=\"str\">\"classSelectDialog_shown = true\"</span><span class=\"pln\"> v</span><span class=\"pun\">-</span><span class=\"pln\">model</span><span class=\"pun\">=</span><span class=\"str\">\"classSelectDialog_selected\"</span></code></li><li class=\"L3\"><code><span class=\"pln\">      </span><span class=\"pun\">:</span><span class=\"pln\">items</span><span class=\"pun\">=</span><span class=\"str\">\"classSelectDialog_dataList\"</span><span class=\"pln\"> readonly </span><span class=\"pun\">:</span><span class=\"pln\">label</span><span class=\"pun\">=</span><span class=\"str\">\"classSelectDialog_title\"</span><span class=\"pln\"> hide</span><span class=\"pun\">-</span><span class=\"pln\">details dense</span></code></li><li class=\"L4\"><code><span class=\"pln\">      outlined hide</span><span class=\"pun\">-</span><span class=\"pln\">no</span><span class=\"pun\">-</span><span class=\"pln\">data hide</span><span class=\"pun\">-</span><span class=\"pln\">selected </span><span class=\"pun\">/&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">dialog v</span><span class=\"pun\">-</span><span class=\"pln\">model</span><span class=\"pun\">=</span><span class=\"str\">\"classSelectDialog_shown\"</span><span class=\"pln\"> scrollable max</span><span class=\"pun\">-</span><span class=\"pln\">width</span><span class=\"pun\">=</span><span class=\"str\">\"500px\"</span><span class=\"pun\">&gt;</span></code></li><li class=\"L6\"><code><span class=\"pln\">      </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">card</span><span class=\"pun\">&gt;</span></code></li><li class=\"L7\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">card</span><span class=\"pun\">-</span><span class=\"pln\">title</span><span class=\"pun\">&gt;</span></code></li><li class=\"L8\"><code><span class=\"pln\">          </span><span class=\"pun\">&lt;</span><span class=\"pln\">span</span><span class=\"pun\">&gt;{{</span><span class=\"pln\"> classSelectDialog_title </span><span class=\"pun\">}}&lt;/</span><span class=\"pln\">span</span><span class=\"pun\">&gt;</span></code></li><li class=\"L9\"><code><span class=\"pln\">          </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">text</span><span class=\"pun\">-</span><span class=\"pln\">field</span></code></li><li class=\"L0\"><code><span class=\"pln\">            label</span><span class=\"pun\">=</span><span class=\"str\">\"搜索\"</span></code></li><li class=\"L1\"><code><span class=\"pln\">            clearable</span></code></li><li class=\"L2\"><code><span class=\"pln\">            dense</span></code></li><li class=\"L3\"><code><span class=\"pln\">            v</span><span class=\"pun\">-</span><span class=\"pln\">model</span><span class=\"pun\">=</span><span class=\"str\">\"classSelectDialog_filterText\"</span></code></li><li class=\"L4\"><code><span class=\"pln\">            hide</span><span class=\"pun\">-</span><span class=\"pln\">details</span></code></li><li class=\"L5\"><code><span class=\"pln\">            prepend</span><span class=\"pun\">-</span><span class=\"pln\">inner</span><span class=\"pun\">-</span><span class=\"pln\">icon</span><span class=\"pun\">=</span><span class=\"str\">\"mdi-text-search\"</span></code></li><li class=\"L6\"><code><span class=\"pln\">            </span><span class=\"kwd\">class</span><span class=\"pun\">=</span><span class=\"str\">\"ma-2 pa-0\"</span></code></li><li class=\"L7\"><code><span class=\"pln\">            outlined</span></code></li><li class=\"L8\"><code><span class=\"pln\">          </span><span class=\"pun\">&gt;&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">text</span><span class=\"pun\">-</span><span class=\"pln\">field</span><span class=\"pun\">&gt;</span></code></li><li class=\"L9\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">card</span><span class=\"pun\">-</span><span class=\"pln\">title</span><span class=\"pun\">&gt;</span></code></li><li class=\"L0\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">divider </span><span class=\"pun\">/&gt;</span></code></li><li class=\"L1\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;</span><span class=\"pln\">div </span><span class=\"kwd\">class</span><span class=\"pun\">=</span><span class=\"str\">\"list\"</span><span class=\"pun\">&gt;</span></code></li><li class=\"L2\"><code><span class=\"pln\">          </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list rounded</span><span class=\"pun\">&gt;</span></code></li><li class=\"L3\"><code><span class=\"pln\">            </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">-</span><span class=\"pln\">item</span><span class=\"pun\">-</span><span class=\"pln\">group color</span><span class=\"pun\">=</span><span class=\"str\">\"primary\"</span><span class=\"pln\"> active</span><span class=\"pun\">-</span><span class=\"kwd\">class</span><span class=\"pun\">&gt;</span></code></li><li class=\"L4\"><code><span class=\"pln\">              </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">-</span><span class=\"pln\">item v</span><span class=\"pun\">-</span><span class=\"kwd\">for</span><span class=\"pun\">=</span><span class=\"str\">\"(item, index) in classSelectDialog_dataList_filter\"</span><span class=\"pln\"> </span><span class=\"pun\">:</span><span class=\"pln\">key</span><span class=\"pun\">=</span><span class=\"str\">\"item.value\"</span><span class=\"pln\"> </span><span class=\"lit\">@click</span><span class=\"pun\">=</span><span class=\"str\">\"selectItem({ item })\"</span><span class=\"pun\">&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">                </span><span class=\"pun\">&lt;</span><span class=\"pln\">template </span><span class=\"pun\">#</span><span class=\"kwd\">default</span><span class=\"pun\">=</span><span class=\"str\">\"{ active }\"</span><span class=\"pun\">&gt;</span></code></li><li class=\"L6\"><code><span class=\"pln\">                  </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">-</span><span class=\"pln\">item</span><span class=\"pun\">-</span><span class=\"pln\">content</span><span class=\"pun\">&gt;</span></code></li><li class=\"L7\"><code><span class=\"pln\">                    </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">-</span><span class=\"pln\">item</span><span class=\"pun\">-</span><span class=\"pln\">title v</span><span class=\"pun\">-</span><span class=\"pln\">text</span><span class=\"pun\">=</span><span class=\"str\">\"item.text\"</span><span class=\"pln\"> </span><span class=\"pun\">/&gt;</span></code></li><li class=\"L8\"><code><span class=\"pln\">                  </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">-</span><span class=\"pln\">item</span><span class=\"pun\">-</span><span class=\"pln\">content</span><span class=\"pun\">&gt;</span></code></li><li class=\"L9\"><code><span class=\"pln\">                </span><span class=\"pun\">&lt;/</span><span class=\"pln\">template</span><span class=\"pun\">&gt;</span></code></li><li class=\"L0\"><code><span class=\"pln\">              </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">-</span><span class=\"pln\">item</span><span class=\"pun\">&gt;</span></code></li><li class=\"L1\"><code><span class=\"pln\">            </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">-</span><span class=\"pln\">item</span><span class=\"pun\">-</span><span class=\"pln\">group</span><span class=\"pun\">&gt;</span></code></li><li class=\"L2\"><code><span class=\"pln\">          </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">list</span><span class=\"pun\">&gt;</span></code></li><li class=\"L3\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;/</span><span class=\"pln\">div</span><span class=\"pun\">&gt;</span></code></li><li class=\"L4\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">divider </span><span class=\"pun\">/&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">card</span><span class=\"pun\">-</span><span class=\"pln\">actions</span><span class=\"pun\">&gt;</span></code></li><li class=\"L6\"><code><span class=\"pln\">          </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">spacer </span><span class=\"pun\">/&gt;</span></code></li><li class=\"L7\"><code><span class=\"pln\">          </span><span class=\"pun\">&lt;</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">btn color</span><span class=\"pun\">=</span><span class=\"str\">\"primary\"</span><span class=\"pln\"> text </span><span class=\"lit\">@click</span><span class=\"pun\">=</span><span class=\"str\">\"classSelectDialog_shown = false\"</span><span class=\"pun\">&gt;取消&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">btn</span><span class=\"pun\">&gt;</span></code></li><li class=\"L8\"><code><span class=\"pln\">        </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">card</span><span class=\"pun\">-</span><span class=\"pln\">actions</span><span class=\"pun\">&gt;</span></code></li><li class=\"L9\"><code><span class=\"pln\">      </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">card</span><span class=\"pun\">&gt;</span></code></li><li class=\"L0\"><code><span class=\"pln\">    </span><span class=\"pun\">&lt;/</span><span class=\"pln\">v</span><span class=\"pun\">-</span><span class=\"pln\">dialog</span><span class=\"pun\">&gt;</span><span class=\"pln\">    </span></code></li><li class=\"L1\"><code><span class=\"pln\">  </span><span class=\"pun\">&lt;/</span><span class=\"pln\">span</span><span class=\"pun\">&gt;</span></code></li><li class=\"L2\"><code><span class=\"tag\">&lt;/script&gt;</span></code></li><li class=\"L3\"><code></code></li><li class=\"L4\"><code><span class=\"tag\">&lt;script&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">  </span><span class=\"typ\">Vue</span><span class=\"pun\">.</span><span class=\"pln\">component</span><span class=\"pun\">(</span><span class=\"str\">\"classSelectDialog\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code><span class=\"pln\">    template</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"#classSelectDialog\"</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code><span class=\"pln\">    vueComponent</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'classSelectDialog\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code><span class=\"pln\">    mixins</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuUiActionMixins </span><span class=\"pun\">],</span></code></li><li class=\"L9\"><code><span class=\"pln\">    data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">vueData</span><span class=\"pun\">),</span></code></li><li class=\"L0\"><code><span class=\"pln\">    computed</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">      classSelectDialog_dataList_filter</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">        </span><span class=\"kwd\">const</span><span class=\"pln\"> classSelectDialog_filterText </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">classSelectDialog_filterText </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">).</span><span class=\"pln\">toLowerCase</span><span class=\"pun\">();</span></code></li><li class=\"L3\"><code><span class=\"pln\">        let list </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">classSelectDialog_dataList</span><span class=\"pun\">.</span><span class=\"pln\">slice</span><span class=\"pun\">();</span></code></li><li class=\"L4\"><code><span class=\"pln\">        list </span><span class=\"pun\">=</span><span class=\"pln\"> list</span><span class=\"pun\">.</span><span class=\"pln\">filter</span><span class=\"pun\">((</span><span class=\"pln\">item</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">            item</span><span class=\"pun\">.</span><span class=\"pln\">text </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> </span></code></li><li class=\"L6\"><code><span class=\"pln\">            </span><span class=\"pun\">(</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">text</span><span class=\"pun\">.</span><span class=\"pln\">toLowerCase</span><span class=\"pun\">().</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"pln\">classSelectDialog_filterText</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">||</span></code></li><li class=\"L7\"><code><span class=\"pln\">              item</span><span class=\"pun\">.</span><span class=\"pln\">text</span><span class=\"pun\">.</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"pln\">classSelectDialog_filterText</span><span class=\"pun\">)</span></code></li><li class=\"L8\"><code><span class=\"pln\">            </span><span class=\"pun\">)</span></code></li><li class=\"L9\"><code><span class=\"pln\">        </span><span class=\"pun\">)</span></code></li><li class=\"L0\"><code><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pln\"> list</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">      </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code><span class=\"pln\">    methods</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">      selectItem</span><span class=\"pun\">({</span><span class=\"pln\"> item </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code><span class=\"pln\">        </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">classSelectDialog_selected </span><span class=\"pun\">=</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">value</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">        </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">classSelectDialog_shown </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code><span class=\"pln\">      </span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code><span class=\"pln\">  </span><span class=\"pun\">});</span></code></li><li class=\"L0\"><code><span class=\"tag\">&lt;/script&gt;</span></code></li><li class=\"L1\"><code><span class=\"tag\">&lt;style&gt;</span></code></li><li class=\"L2\"><code><span class=\"pln\">  </span><span class=\"pun\">.</span><span class=\"pln\">list </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">    max</span><span class=\"pun\">-</span><span class=\"pln\">height</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">700px</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">    overflow</span><span class=\"pun\">-</span><span class=\"pln\">y</span><span class=\"pun\">:</span><span class=\"pln\"> scroll</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code><span class=\"tag\">&lt;/style&gt;</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-04-23T21:12:24+08:00', 'W00001', '张三丰', '2022-06-07T03:27:38+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-07T03:27:38+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1447, 10033, '10004', '03前端开发参考', '', 'public', '2022-04-23T21:13:01+08:00', '文档页面开发', NULL, '## 应用文档\n- 应用文档目录`view/pageDoc/`\n- `manual.md`文件为首页文档，会自动覆盖框架的默认首页\n- 参照`view/page/`中的文件，在文档目录创建同名的`md`文件，即可编写对应页面的文档说明了。\n\n## docsify\n- 文档使用`docsify`来自动编译`md`文档文件到前端页面中展示。\n- 文档地址[docsify](https://docsify.js.org/#/)', '<h2 id=\"h2-u5E94u7528u6587u6863\"><a class=\"reference-link\" name=\"应用文档\"></a><span class=\"header-link octicon octicon-link\"></span>应用文档</h2><ul>\n<li>应用文档目录<code>view/pageDoc/</code></li><li><code>manual.md</code>文件为首页文档，会自动覆盖框架的默认首页</li><li>参照<code>view/page/</code>中的文件，在文档目录创建同名的<code>md</code>文件，即可编写对应页面的文档说明了。</li></ul>\n<h2 id=\"h2-docsify\"><a class=\"reference-link\" name=\"docsify\"></a><span class=\"header-link octicon octicon-link\"></span>docsify</h2><ul>\n<li>文档使用<code>docsify</code>来自动编译<code>md</code>文档文件到前端页面中展示。</li><li>文档地址<a href=\"https://docsify.js.org/#/\">docsify</a></li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:13:01+08:00', 'W00001', '张三丰', '2022-04-23T21:13:01+08:00', 'W00001', '张三丰', 'jhInsert', 'W00001', '张三丰', '2022-04-23T21:13:01+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1448, 10034, '10004', '03前端开发参考', '', 'public', '2022-04-23T21:13:31+08:00', '框架默认页面', NULL, '## 框架默认页面\n\n- 框架默认页面有 help.html，login.html\n	- `/egg-jianghu/app/view/page/help.html`: 异常页面\n	- `/egg-jianghu/app/view/page/login.html`: 登录页面\n	- `/egg-jianghu/app/view/page/manual.html`: 操作手册\n\n## 框架默认页面的覆盖\n\n在项目目录下创建 同名文件即可, 例如 `/app/view/page/help.html`\n', '<h2 id=\"h2-u6846u67B6u9ED8u8BA4u9875u9762\"><a class=\"reference-link\" name=\"框架默认页面\"></a><span class=\"header-link octicon octicon-link\"></span>框架默认页面</h2><ul>\n<li>框架默认页面有 help.html，login.html<ul>\n<li><code>/egg-jianghu/app/view/page/help.html</code>: 异常页面</li><li><code>/egg-jianghu/app/view/page/login.html</code>: 登录页面</li><li><code>/egg-jianghu/app/view/page/manual.html</code>: 操作手册</li></ul>\n</li></ul>\n<h2 id=\"h2-u6846u67B6u9ED8u8BA4u9875u9762u7684u8986u76D6\"><a class=\"reference-link\" name=\"框架默认页面的覆盖\"></a><span class=\"header-link octicon octicon-link\"></span>框架默认页面的覆盖</h2><p>在项目目录下创建 同名文件即可, 例如 <code>/app/view/page/help.html</code></p>\n', NULL, NULL, NULL, '', '2022-04-23T21:13:31+08:00', 'W00001', '张三丰', '2022-04-30T00:10:25+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T00:10:25+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1449, 10035, '10004', '04登录与权限', '', 'public', '2022-04-23T21:15:00+08:00', '登录', NULL, '## 登录与鉴权\n\n1. 用户登录成功(`login.passwordLogin`)后, 返回一个用户维度的`authToken` 并给页面生成cookie\n1. 用户访问页面时 会 根据cookie 查询用户信息，然后判断用户是否有当前页面的访问权限\n1. 前端每一次请求都需要 传`authToken`, 后端根据`authToken`查询用户信息，然后判断当前用户是否有 此resouce的访问权限\n> 鉴权通过后 会将 用户信息挂载到当前请求的上下文上 ===> `this.ctx.userInfo`\n\n## 登录请求\n\n> 以下代码出自`/egg-jianghu/app/view/page/login.html`\n\nlogin.html页面是框架预设页面, 开发者可以在应用下创建`/app/view/page/login.html`进行覆盖\n\n```javascript\nconst result = await jianghuAxios({\n  data: {\n    appData: {\n      pageId: \'login\',\n      actionId: \'passwordLogin\',\n      actionData: { userId, password, deviceId: \"设备ID\", deviceType: \'web\' },\n    }\n  }\n});\nif (result.data.appData.resultData.authToken) {\n  localStorage.setItem(`${window.appInfo.appId}_authToken`, data.data.appData.authToken);\n  localStorage.setItem(`${window.appInfo.appId}_userId`, data.data.appData.userId);\n  localStorage.setItem(`${window.appInfo.appId}_deviceId`, deviceId);\n  vtoast.success(\'登陆成功\');\n  let redirectTo = `/${window.appInfo.appId}`;\n  if (redirectUrl) {\n    redirectTo = decodeURIComponent(redirectUrl);\n  }\n  location.href = redirectTo;\n}\n```\n\n\n\n', '<h2 id=\"h2-u767Bu5F55u4E0Eu9274u6743\"><a class=\"reference-link\" name=\"登录与鉴权\"></a><span class=\"header-link octicon octicon-link\"></span>登录与鉴权</h2><ol>\n<li>用户登录成功(<code>login.passwordLogin</code>)后, 返回一个用户维度的<code>authToken</code> 并给页面生成cookie</li><li>用户访问页面时 会 根据cookie 查询用户信息，然后判断用户是否有当前页面的访问权限</li><li>前端每一次请求都需要 传<code>authToken</code>, 后端根据<code>authToken</code>查询用户信息，然后判断当前用户是否有 此resouce的访问权限<blockquote class=\"default\">\n<p>鉴权通过后 会将 用户信息挂载到当前请求的上下文上 ===&gt; <code>this.ctx.userInfo</code></p>\n</blockquote>\n</li></ol>\n<h2 id=\"h2-u767Bu5F55u8BF7u6C42\"><a class=\"reference-link\" name=\"登录请求\"></a><span class=\"header-link octicon octicon-link\"></span>登录请求</h2><blockquote class=\"default\">\n<p>以下代码出自<code>/egg-jianghu/app/view/page/login.html</code></p>\n</blockquote>\n<p>login.html页面是框架预设页面, 开发者可以在应用下创建<code>/app/view/page/login.html</code>进行覆盖</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">      pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'login\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">      actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'passwordLogin\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">      actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> userId</span><span class=\"pun\">,</span><span class=\"pln\"> password</span><span class=\"pun\">,</span><span class=\"pln\"> deviceId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"设备ID\"</span><span class=\"pun\">,</span><span class=\"pln\"> deviceType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'web\'</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pun\">});</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">result</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">resultData</span><span class=\"pun\">.</span><span class=\"pln\">authToken</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">  localStorage</span><span class=\"pun\">.</span><span class=\"pln\">setItem</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}</span><span class=\"pln\">_authToken</span><span class=\"pun\">`,</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">authToken</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">  localStorage</span><span class=\"pun\">.</span><span class=\"pln\">setItem</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}</span><span class=\"pln\">_userId</span><span class=\"pun\">`,</span><span class=\"pln\"> data</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">userId</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">  localStorage</span><span class=\"pun\">.</span><span class=\"pln\">setItem</span><span class=\"pun\">(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}</span><span class=\"pln\">_deviceId</span><span class=\"pun\">`,</span><span class=\"pln\"> deviceId</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">  vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\'登陆成功\'</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">  let redirectTo </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">`/</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">window</span><span class=\"pun\">.</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">}`;</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">redirectUrl</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    redirectTo </span><span class=\"pun\">=</span><span class=\"pln\"> decodeURIComponent</span><span class=\"pun\">(</span><span class=\"pln\">redirectUrl</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">  location</span><span class=\"pun\">.</span><span class=\"pln\">href </span><span class=\"pun\">=</span><span class=\"pln\"> redirectTo</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pun\">}</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-04-23T21:15:01+08:00', 'W00001', '张三丰', '2022-04-29T21:57:56+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-29T21:57:56+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1450, 10036, '10004', '04登录与权限', '', 'public', '2022-04-23T21:15:34+08:00', '用户、群组、角色', NULL, '## 用户、群组、角色说明\n\n### 用户、群组、角色表\n\n`_user_group_role`表: 定义用户的群组列表, 以及用户在这个群组下的角色。\n\n| 字段 | 描述 |\n|---|---|\n| userId | \'userId\' |\n| groupId | \'groupId\' |\n| roleId | \'roleId\' |\n\n### 用户、群组、角色作用\n\n`用户、群组、角色` 在 江湖JS 框架层面主要为 `页面`鉴权 & `接口`鉴权 提供配置规则 \n', '<h2 id=\"h2-u7528u6237u3001u7FA4u7EC4u3001u89D2u8272u8BF4u660E\"><a class=\"reference-link\" name=\"用户、群组、角色说明\"></a><span class=\"header-link octicon octicon-link\"></span>用户、群组、角色说明</h2><h3 id=\"h3-u7528u6237u3001u7FA4u7EC4u3001u89D2u8272u8868\"><a class=\"reference-link\" name=\"用户、群组、角色表\"></a><span class=\"header-link octicon octicon-link\"></span>用户、群组、角色表</h3><p><code>_user_group_role</code>表: 定义用户的群组列表, 以及用户在这个群组下的角色。</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>userId</td>\n<td>‘userId’</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td>‘groupId’</td>\n</tr>\n<tr>\n<td>roleId</td>\n<td>‘roleId’</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-u7528u6237u3001u7FA4u7EC4u3001u89D2u8272u4F5Cu7528\"><a class=\"reference-link\" name=\"用户、群组、角色作用\"></a><span class=\"header-link octicon octicon-link\"></span>用户、群组、角色作用</h3><p><code>用户、群组、角色</code> 在 江湖JS 框架层面主要为 <code>页面</code>鉴权 &amp; <code>接口</code>鉴权 提供配置规则 </p>\n', NULL, NULL, NULL, '', '2022-04-23T21:15:35+08:00', 'W00001', '张三丰', '2022-04-29T23:55:03+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-29T23:55:03+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1451, 10037, '10004', '04登录与权限', '', 'public', '2022-04-23T21:16:08+08:00', '页面权限', NULL, '## 页面权限说明\n\n### 页面权限表\n\n**page**表: 定义页面\n\n| 字段 | 描述 |\n|---|---|\n| pageId | \'页面ID\' |\n| pageName | \'页面名\' |\n| pageType | \'页面类型\'  showInMenu: 展示在菜单上, dynamicInMenu: 只有访问页面时才展示在菜单上, seo: 文章类的seo页面 |\n| sort | \'排序\' |\n| pageHook | \'页面渲染Hook, 主要用于页面render之前的数据挂载\'  {  \"beforeHook\":[{\"field\": \"doc\", \"service\": \"xxx\", \"serviceFunc\": \"xxx\"}] }|\n\n**user_group_role_page**表: 定义用户有哪些页面的权限\n\n| 字段 | 描述 |\n|---|---|\n| user | \'userId 或者 通配符; 通配符: * \' |\n| group | \'groupId 或者 通配符; 通配符: * \' |\n| role | \'roleId 或者 通配符; 通配符: * \' |\n| page | \'页面ID\' |\n| allowOrDeny | \'权限策略, allow: 允许、deny: 拒绝; deny的执行逻辑高于allow\'\' |\n\n### 页面权限逻辑\n\n1. 每一次page请求 到达后端，后端首先根据cookie 获取用户信息\n1. 从用户信息 中 获取 `userId` & `userGroupRoleList`\n1. 使用上面**user_group_role_page** 和**page** 计算出 用户能访问的页面列表(`allowPageList`)\n1. 判断当前page请求 是否在 `allowPageList`内\n> 补充: 两个隐式group  `login`&`public`\n>  - `login` group 登录后用户就在此group内\n>  - `public` group 所有的用户都有此group\n\n## 页面权限配置演示\n\n### **login**页面配置为所有人可访问\n\n**user_group_role_page**表:\n\n| user | group | role | page | allowOrDeny |\n|---|---|---|---|---|\n|  * | public  | * | login | allow |\n\n### **manual**页面配置为登录后可访问\n\n**user_group_role_page**表数据:\n\n| user | group | role | page | allowOrDeny |\n|---|---|---|---|---|\n|  * | login  | * | manual | allow |\n\n### **test**页面配置为指定用户可访问\n\n**user_group_role_page**表数据:\n\n| user | group | role | page | allowOrDeny |\n|---|---|---|---|---|\n|  W00001,W00002,W00002 | *  | * | test | allow |\n\n### **test**页面配置为指定群组可访问\n\n**user_group_role_page**表数据:\n\n| user | group | role | page | allowOrDeny |\n|---|---|---|---|---|\n|  * | adminGroup | * | test | allow |\n\n### **test**页面配置为指定群组的指定角色可访问\n\n**user_group_role_page**表数据:\n\n| user | group | role | page | allowOrDeny |\n|---|---|---|---|---|\n|  * | adminGroup | appAdmin | test | allow |', '<h2 id=\"h2-u9875u9762u6743u9650u8BF4u660E\"><a class=\"reference-link\" name=\"页面权限说明\"></a><span class=\"header-link octicon octicon-link\"></span>页面权限说明</h2><h3 id=\"h3-u9875u9762u6743u9650u8868\"><a class=\"reference-link\" name=\"页面权限表\"></a><span class=\"header-link octicon octicon-link\"></span>页面权限表</h3><p><strong>page</strong>表: 定义页面</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>pageId</td>\n<td>‘页面ID’</td>\n</tr>\n<tr>\n<td>pageName</td>\n<td>‘页面名’</td>\n</tr>\n<tr>\n<td>pageType</td>\n<td>‘页面类型’  showInMenu: 展示在菜单上, dynamicInMenu: 只有访问页面时才展示在菜单上, seo: 文章类的seo页面</td>\n</tr>\n<tr>\n<td>sort</td>\n<td>‘排序’</td>\n</tr>\n<tr>\n<td>pageHook</td>\n<td>‘页面渲染Hook, 主要用于页面render之前的数据挂载’  {  “beforeHook”:[{“field”: “doc”, “service”: “xxx”, “serviceFunc”: “xxx”}] }</td>\n</tr>\n</tbody></table>\n<p><strong>user_group_role_page</strong>表: 定义用户有哪些页面的权限</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>user</td>\n<td>‘userId 或者 通配符; 通配符: * ‘</td>\n</tr>\n<tr>\n<td>group</td>\n<td>‘groupId 或者 通配符; 通配符: * ‘</td>\n</tr>\n<tr>\n<td>role</td>\n<td>‘roleId 或者 通配符; 通配符: * ‘</td>\n</tr>\n<tr>\n<td>page</td>\n<td>‘页面ID’</td>\n</tr>\n<tr>\n<td>allowOrDeny</td>\n<td>‘权限策略, allow: 允许、deny: 拒绝; deny的执行逻辑高于allow’’</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-u9875u9762u6743u9650u903Bu8F91\"><a class=\"reference-link\" name=\"页面权限逻辑\"></a><span class=\"header-link octicon octicon-link\"></span>页面权限逻辑</h3><ol>\n<li>每一次page请求 到达后端，后端首先根据cookie 获取用户信息</li><li>从用户信息 中 获取 <code>userId</code> &amp; <code>userGroupRoleList</code></li><li>使用上面<strong>user_group_role_page</strong> 和<strong>page</strong> 计算出 用户能访问的页面列表(<code>allowPageList</code>)</li><li>判断当前page请求 是否在 <code>allowPageList</code>内<blockquote class=\"default\">\n<p>补充: 两个隐式group  <code>login</code>&amp;<code>public</code></p>\n<ul>\n<li><code>login</code> group 登录后用户就在此group内</li><li><code>public</code> group 所有的用户都有此group</li></ul>\n</blockquote>\n</li></ol>\n<h2 id=\"h2-u9875u9762u6743u9650u914Du7F6Eu6F14u793A\"><a class=\"reference-link\" name=\"页面权限配置演示\"></a><span class=\"header-link octicon octicon-link\"></span>页面权限配置演示</h2><h3 id=\"h3-3Cstrong3Elogin3C/strong3Eu9875u9762u914Du7F6Eu4E3Au6240u6709u4EBAu53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"login页面配置为所有人可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>login</strong>页面配置为所有人可访问</h3><p><strong>user_group_role_page</strong>表:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>page</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>public</td>\n<td>*</td>\n<td>login</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Emanual3C/strong3Eu9875u9762u914Du7F6Eu4E3Au767Bu5F55u540Eu53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"manual页面配置为登录后可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>manual</strong>页面配置为登录后可访问</h3><p><strong>user_group_role_page</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>page</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>login</td>\n<td>*</td>\n<td>manual</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Etest3C/strong3Eu9875u9762u914Du7F6Eu4E3Au6307u5B9Au7528u6237u53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"test页面配置为指定用户可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>test</strong>页面配置为指定用户可访问</h3><p><strong>user_group_role_page</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>page</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>W00001,W00002,W00002</td>\n<td>*</td>\n<td>*</td>\n<td>test</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Etest3C/strong3Eu9875u9762u914Du7F6Eu4E3Au6307u5B9Au7FA4u7EC4u53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"test页面配置为指定群组可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>test</strong>页面配置为指定群组可访问</h3><p><strong>user_group_role_page</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>page</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>adminGroup</td>\n<td>*</td>\n<td>test</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Etest3C/strong3Eu9875u9762u914Du7F6Eu4E3Au6307u5B9Au7FA4u7EC4u7684u6307u5B9Au89D2u8272u53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"test页面配置为指定群组的指定角色可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>test</strong>页面配置为指定群组的指定角色可访问</h3><p><strong>user_group_role_page</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>page</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>adminGroup</td>\n<td>appAdmin</td>\n<td>test</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n', NULL, NULL, NULL, '', '2022-04-23T21:16:08+08:00', 'W00001', '张三丰', '2022-04-29T23:50:17+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-29T23:50:17+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1452, 10038, '10004', '04登录与权限', '', 'public', '2022-04-23T21:16:41+08:00', '接口权限', NULL, '## 接口权限说明\n\n### 接口权限表\n\n**resource**表: 定义接口\n\n| 字段 | 描述 |\n|---|---|\n| pageId | \'接口ID\' |\n| actionId | \'接口ID\' |\n| .... |  |\n\n> resourceId(接口Id) =`pageId.actionId`\n\n**user_group_role_resource**表: 定义用户有哪些接口的权限\n\n| 字段 | 描述 |\n|---|---|\n| user | \'userId 或者 通配符; 通配符: * \' |\n| group | \'groupId 或者 通配符; 通配符: * \' |\n| role | \'roleId 或者 通配符; 通配符: * \' |\n| resource | \'resourceId\' |\n| allowOrDeny | \'权限策略, allow: 允许、deny: 拒绝; deny的执行逻辑高于allow\'\' |\n\n### 接口权限逻辑\n\n1. 每一次接口请求 到达后端，后端首先根据authoken 获取用户信息\n1. 从用户信息 中 获取 `userId` & `userGroupRoleList`\n1. 使用上面**user_group_role_page** 和**resource** 计算出 用户能访问的接口列表(`allowResourceList`)\n1. 判断当前page请求 是否在 `allowResourceList`内\n> 补充: 两个隐式group  `login`&`public`\n>  - `login` group 登录后用户就在此group内\n>  - `public` group 所有的用户都有此group\n\n## 接口权限配置演示\n\n### **login.passwordLogin**接口配置为所有人可访问\n\n**user_group_role_resource**表:\n\n| user | group | role | resource | allowOrDeny |\n|---|---|---|---|---|\n|  * | public  | * | login.passwordLogin | allow |\n\n### **frontendDemo01.selectItemList**接口配置为登录后可访问\n\n**user_group_role_resource**表数据:\n\n| user | group | role | resource | allowOrDeny |\n|---|---|---|---|---|\n|  * | login  | * | frontendDemo01.selectItemList | allow |\n\n### **frontendDemo01.selectItemList**接口配置为指定用户可访问\n\n**user_group_role_resource**表数据:\n\n| user | group | role | resource | allowOrDeny |\n|---|---|---|---|---|\n|  W00001,W00002,W00002 | *  | * | frontendDemo01.selectItemList | allow |\n\n### **frontendDemo01.selectItemList**接口配置为指定群组可访问\n\n**user_group_role_resource**表数据:\n\n| user | group | role | resource | allowOrDeny |\n|---|---|---|---|---|\n|  * | adminGroup | * | frontendDemo01.selectItemList | allow |\n\n### **frontendDemo01.selectItemList**接口配置为指定群组的指定角色可访问\n\n**user_group_role_resource**表数据:\n\n| user | group | role | resource | allowOrDeny |\n|---|---|---|---|---|\n|  * | adminGroup | appAdmin | frontendDemo01.selectItemList | allow |', '<h2 id=\"h2-u63A5u53E3u6743u9650u8BF4u660E\"><a class=\"reference-link\" name=\"接口权限说明\"></a><span class=\"header-link octicon octicon-link\"></span>接口权限说明</h2><h3 id=\"h3-u63A5u53E3u6743u9650u8868\"><a class=\"reference-link\" name=\"接口权限表\"></a><span class=\"header-link octicon octicon-link\"></span>接口权限表</h3><p><strong>resource</strong>表: 定义接口</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>pageId</td>\n<td>‘接口ID’</td>\n</tr>\n<tr>\n<td>actionId</td>\n<td>‘接口ID’</td>\n</tr>\n<tr>\n<td>….</td>\n<td></td>\n</tr>\n</tbody></table>\n<blockquote class=\"default\">\n<p>resourceId(接口Id) =<code>pageId.actionId</code></p>\n</blockquote>\n<p><strong>user_group_role_resource</strong>表: 定义用户有哪些接口的权限</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>user</td>\n<td>‘userId 或者 通配符; 通配符: * ‘</td>\n</tr>\n<tr>\n<td>group</td>\n<td>‘groupId 或者 通配符; 通配符: * ‘</td>\n</tr>\n<tr>\n<td>role</td>\n<td>‘roleId 或者 通配符; 通配符: * ‘</td>\n</tr>\n<tr>\n<td>resource</td>\n<td>‘resourceId’</td>\n</tr>\n<tr>\n<td>allowOrDeny</td>\n<td>‘权限策略, allow: 允许、deny: 拒绝; deny的执行逻辑高于allow’’</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-u63A5u53E3u6743u9650u903Bu8F91\"><a class=\"reference-link\" name=\"接口权限逻辑\"></a><span class=\"header-link octicon octicon-link\"></span>接口权限逻辑</h3><ol>\n<li>每一次接口请求 到达后端，后端首先根据authoken 获取用户信息</li><li>从用户信息 中 获取 <code>userId</code> &amp; <code>userGroupRoleList</code></li><li>使用上面<strong>user_group_role_page</strong> 和<strong>resource</strong> 计算出 用户能访问的接口列表(<code>allowResourceList</code>)</li><li>判断当前page请求 是否在 <code>allowResourceList</code>内<blockquote class=\"default\">\n<p>补充: 两个隐式group  <code>login</code>&amp;<code>public</code></p>\n<ul>\n<li><code>login</code> group 登录后用户就在此group内</li><li><code>public</code> group 所有的用户都有此group</li></ul>\n</blockquote>\n</li></ol>\n<h2 id=\"h2-u63A5u53E3u6743u9650u914Du7F6Eu6F14u793A\"><a class=\"reference-link\" name=\"接口权限配置演示\"></a><span class=\"header-link octicon octicon-link\"></span>接口权限配置演示</h2><h3 id=\"h3-3Cstrong3Elogin.passwordlogin3C/strong3Eu63A5u53E3u914Du7F6Eu4E3Au6240u6709u4EBAu53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"login.passwordLogin接口配置为所有人可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>login.passwordLogin</strong>接口配置为所有人可访问</h3><p><strong>user_group_role_resource</strong>表:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>resource</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>public</td>\n<td>*</td>\n<td>login.passwordLogin</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Efrontenddemo01.selectitemlist3C/strong3Eu63A5u53E3u914Du7F6Eu4E3Au767Bu5F55u540Eu53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"frontendDemo01.selectItemList接口配置为登录后可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>frontendDemo01.selectItemList</strong>接口配置为登录后可访问</h3><p><strong>user_group_role_resource</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>resource</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>login</td>\n<td>*</td>\n<td>frontendDemo01.selectItemList</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Efrontenddemo01.selectitemlist3C/strong3Eu63A5u53E3u914Du7F6Eu4E3Au6307u5B9Au7528u6237u53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"frontendDemo01.selectItemList接口配置为指定用户可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>frontendDemo01.selectItemList</strong>接口配置为指定用户可访问</h3><p><strong>user_group_role_resource</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>resource</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>W00001,W00002,W00002</td>\n<td>*</td>\n<td>*</td>\n<td>frontendDemo01.selectItemList</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Efrontenddemo01.selectitemlist3C/strong3Eu63A5u53E3u914Du7F6Eu4E3Au6307u5B9Au7FA4u7EC4u53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"frontendDemo01.selectItemList接口配置为指定群组可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>frontendDemo01.selectItemList</strong>接口配置为指定群组可访问</h3><p><strong>user_group_role_resource</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>resource</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>adminGroup</td>\n<td>*</td>\n<td>frontendDemo01.selectItemList</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n<h3 id=\"h3-3Cstrong3Efrontenddemo01.selectitemlist3C/strong3Eu63A5u53E3u914Du7F6Eu4E3Au6307u5B9Au7FA4u7EC4u7684u6307u5B9Au89D2u8272u53EFu8BBFu95EE\"><a class=\"reference-link\" name=\"frontendDemo01.selectItemList接口配置为指定群组的指定角色可访问\"></a><span class=\"header-link octicon octicon-link\"></span><strong>frontendDemo01.selectItemList</strong>接口配置为指定群组的指定角色可访问</h3><p><strong>user_group_role_resource</strong>表数据:</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>group</th>\n<th>role</th>\n<th>resource</th>\n<th>allowOrDeny</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>*</td>\n<td>adminGroup</td>\n<td>appAdmin</td>\n<td>frontendDemo01.selectItemList</td>\n<td>allow</td>\n</tr>\n</tbody></table>\n', NULL, NULL, NULL, '', '2022-04-23T21:16:41+08:00', 'W00001', '张三丰', '2022-06-12T16:08:51+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:08:51+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1453, 10039, '10004', '04登录与权限', '', 'public', '2022-04-23T21:18:40+08:00', '高并发下的缓存开启', NULL, '## 缓存开启\n\n1. 在`jiangHuConfig`中配置`enableUserInfoCache`为true\n1. `/egg-jianghu/app/schedule/syncDataToCache.js` 则会定时 同步用户信息到`_cache`表\n1. 每一次resource请求都会 直接从`_cache`查询  `userInfo`', '<h2 id=\"h2-u7F13u5B58u5F00u542F\"><a class=\"reference-link\" name=\"缓存开启\"></a><span class=\"header-link octicon octicon-link\"></span>缓存开启</h2><ol>\n<li>在<code>jiangHuConfig</code>中配置<code>enableUserInfoCache</code>为true</li><li><code>/egg-jianghu/app/schedule/syncDataToCache.js</code> 则会定时 同步用户信息到<code>_cache</code>表</li><li>每一次resource请求都会 直接从<code>_cache</code>查询  <code>userInfo</code></li></ol>\n', NULL, NULL, NULL, '', '2022-04-23T21:18:41+08:00', 'W00001', '张三丰', '2022-04-30T13:49:40+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T13:49:40+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1454, 10040, '10004', '05数据库', '', 'public', '2022-04-23T21:19:50+08:00', '开发规范', NULL, '## 数据库初始化\n\n```sql\ncreate database `${数据库名}\'` default character set utf8mb4 collate utf8mb4_bin;\nuse ${数据库名}\';\n运行`/sql`目录下的\".sql\"文件\n```\n\n## 数据库配置\n\n> 使用knex库操作mysql  [kenx-github](https://github.com/knex/knex)   [kenx-doc](https://knexjs.org/)\n\n在项目`config`下复制`config.local.example`为`config.local.js`，\n修配置中的数据库连接信息\n```config\n    knex: {\n      client: {\n        dialect: \'mysql\',\n        connection: {\n          host: \'127.0.0.1\',\n          port: 3306,\n          user: \'root\',\n          password: \'123456\',\n          database: \'${数据库名}\',\n        },\n        pool: { min: 0, max: 100 },\n        acquireConnectionTimeout: 30000,\n      },\n      app: true,\n    },\n```\n\n## 表字段\n\n- 必须字段\n```\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `operation` varchar(255) DEFAULT \'insert\' COMMENT \'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) DEFAULT NULL COMMENT \'操作者userId\',\n  `operationByUser` varchar(255) DEFAULT NULL COMMENT \'操作者用户名\',\n  `operationAt` varchar(255) DEFAULT NULL COMMENT \'操作时间; E.g: 2021-05-28T10:24:54+08:00 \',\n```\n- 业务id自增使用代码逻辑实现\n- `json`格式字段推荐使用 `json DEFAULT NULL`\n\n\n## 基础数据表（系统表）\n\n**工具类表**\n1. `_page`: 页面\n1. `_ui`: 页面内的动作\n1. `_resource`: 页面内的请求\n1. `_user`: 用户\n1. `_role`: 角色\n1. `_group`: 群组\n1. `_user_group_role`: 用户群组\n1. `_user_group_role_page`: 页面权限配置\n1. `_user_group_role_resource`: 请求权限配置\n1. `_file`: 文件\n1. `_user_session`: 用户登录会话\n**工具类表**\n1. `_cache`: 缓存\n1. `_record_history`: 数据历史\n1. `_resource_request_log`: 请求日志\n**多应用 之 应用权限配置**\n1. `_app`: 应用\n1. `_user_app`: 用户应用权限配置\n**数据权限**\n1. access_control_xxxx\n\n## 基础mysql视图（系统视图）\n\n> mysql视图是一种虚拟的表,本身不保存数据,内部封装了一条SELECT语句; 数据来源于查询的一张或多张实际数据的表。\n\n1. _view01_user 此视图用于查询用户信息\n	```sql\n	-- ---------------------\n	-- 单应用; jianghujs_demo_basic, data_repository 都是是单应用\n	-- ---------------------\n	DROP VIEW IF EXISTS `_view01_user`;\n	CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view01_user` AS select * from `_user`;\n	--- --------------------\n	-- 多应用之\"用户APP管理应用(user_app_management)\"\n	-- ---------------------\n	DROP VIEW IF EXISTS `_view01_user`;\n	CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view01_user` AS select * from `_user`;\n	-- ---------------------\n	-- 多应用之其他应用, 除了\"用户APP管理应用(user_app_management)\"以外的其他应用\n	-- ---------------------\n	DROP VIEW IF EXISTS `_view01_user`;\n	CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view01_user` AS select * from `data_repository`.`user_app_management___user`;\n	```\n2. _view02_user_app 此视图用于查询用户APP权限列表; <font color=\"red\">注意: 只有在多应用场景才需要创建_view02_user_app</font>\n	```sql\n	-- ---------------------\n	-- 多应用之\"用户APP管理应用(user_app_management)\"\n	-- ---------------------\n	DROP VIEW IF EXISTS `_view02_user_app`;\n	CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view02_user_app` AS\n	select _user_app.id, _app.appId, _app.appName, _user.userId, _user.username, _user.userStatus, _user.userType,\n		_user_app.operation, _user_app.operationByUserId, _user_app.operationByUser, _user_app.operationAt\n		from _user_app\n			inner join _user on `_user_app`.`userId` = `_user`.`userId`\n			inner join _app on `_user_app`.`appId` = `_app`.`appId`;\n	-- ---------------------\n	-- 多应用之其他应用, 除了\"用户APP管理应用(user_app_management)\"以外的其他应用\n	-- ---------------------\n	DROP VIEW IF EXISTS `_view02_user_app`;\n	CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view02_user_app` AS\n	select _user_app.id, _app.appId, _app.appName, _user.userId, _user.username, _user.userStatus, _user.userType,\n		_user_app.operation, _user_app.operationByUserId, _user_app.operationByUser, _user_app.operationAt\n		from `data_repository`.`user_app_management___user_app` _user_app\n			inner join `data_repository`.`user_app_management___user` _user on `_user_app`.`userId` = `_user`.`userId`\n			inner join `data_repository`.`user_app_management___app` _app on `_user_app`.`appId` = `_app`.`appId`;\n	```\n\n## 数据表&视图 注意事项\n\n- 以上表是系统固定的表，请务必不要随意删除字段和删除表，否则将会导致项目崩溃。\n- 所有下划线开头的都是系统表，请不要随便修改。\n- `id`, `operation`、`operationByUserId`、`operationByUser`、`operationAt` 是基础字段, 每张表都必须要有.\n\n\n', '<h2 id=\"h2-u6570u636Eu5E93u521Du59CBu5316\"><a class=\"reference-link\" name=\"数据库初始化\"></a><span class=\"header-link octicon octicon-link\"></span>数据库初始化</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">create database </span><span class=\"str\">`${数据库名}\'`</span><span class=\"pln\"> </span><span class=\"kwd\">default</span><span class=\"pln\"> character </span><span class=\"kwd\">set</span><span class=\"pln\"> utf8mb4 collate utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"kwd\">use</span><span class=\"pln\"> $</span><span class=\"pun\">{数据库名}</span><span class=\"str\">\';</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"str\">运行`/sql`目录下的\".sql\"文件</span></code></li></ol></pre>\n<h2 id=\"h2-u6570u636Eu5E93u914Du7F6E\"><a class=\"reference-link\" name=\"数据库配置\"></a><span class=\"header-link octicon octicon-link\"></span>数据库配置</h2><blockquote class=\"default\">\n<p>使用knex库操作mysql  <a href=\"https://github.com/knex/knex\">kenx-github</a>   <a href=\"https://knexjs.org/\">kenx-doc</a></p>\n</blockquote>\n<p>在项目<code>config</code>下复制<code>config.local.example</code>为<code>config.local.js</code>，<br>修配置中的数据库连接信息</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-config\"><span class=\"pln\">    knex</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-config\"><span class=\"pln\">      client</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-config\"><span class=\"pln\">        dialect</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'mysql\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-config\"><span class=\"pln\">        connection</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-config\"><span class=\"pln\">          host</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'127.0.0.1\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-config\"><span class=\"pln\">          port</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">3306</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-config\"><span class=\"pln\">          user</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'root\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-config\"><span class=\"pln\">          password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'123456\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-config\"><span class=\"pln\">          database</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'${数据库名}\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-config\"><span class=\"pln\">        </span><span class=\"pun\">},</span></code></li><li class=\"L0\"><code class=\"language-config\"><span class=\"pln\">        pool</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> min</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">,</span><span class=\"pln\"> max</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-config\"><span class=\"pln\">        acquireConnectionTimeout</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">30000</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-config\"><span class=\"pln\">      </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-config\"><span class=\"pln\">      app</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-config\"><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li></ol></pre>\n<h2 id=\"h2-u8868u5B57u6BB5\"><a class=\"reference-link\" name=\"表字段\"></a><span class=\"header-link octicon octicon-link\"></span>表字段</h2><ul>\n<li>必须字段<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> DEFAULT </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li></ol></pre>\n</li><li>业务id自增使用代码逻辑实现</li><li><code>json</code>格式字段推荐使用 <code>json DEFAULT NULL</code></li></ul>\n<h2 id=\"h2-u57FAu7840u6570u636Eu8868uFF08u7CFBu7EDFu8868uFF09\"><a class=\"reference-link\" name=\"基础数据表（系统表）\"></a><span class=\"header-link octicon octicon-link\"></span>基础数据表（系统表）</h2><p><strong>工具类表</strong></p>\n<ol>\n<li><code>_page</code>: 页面</li><li><code>_ui</code>: 页面内的动作</li><li><code>_resource</code>: 页面内的请求</li><li><code>_user</code>: 用户</li><li><code>_role</code>: 角色</li><li><code>_group</code>: 群组</li><li><code>_user_group_role</code>: 用户群组</li><li><code>_user_group_role_page</code>: 页面权限配置</li><li><code>_user_group_role_resource</code>: 请求权限配置</li><li><code>_file</code>: 文件</li><li><code>_user_session</code>: 用户登录会话</li></ol>\n<p><strong>工具类表</strong></p>\n<ol>\n<li><code>_cache</code>: 缓存</li><li><code>_record_history</code>: 数据历史</li><li><code>_resource_request_log</code>: 请求日志</li></ol>\n<p><strong>多应用 之 应用权限配置</strong></p>\n<ol>\n<li><code>_app</code>: 应用</li><li><code>_user_app</code>: 用户应用权限配置</li></ol>\n<p><strong>数据权限</strong></p>\n<ol>\n<li>access_control_xxxx</li></ol>\n<h2 id=\"h2-u57FAu7840mysqlu89C6u56FEuFF08u7CFBu7EDFu89C6u56FEuFF09\"><a class=\"reference-link\" name=\"基础mysql视图（系统视图）\"></a><span class=\"header-link octicon octicon-link\"></span>基础mysql视图（系统视图）</h2><blockquote class=\"default\">\n<p>mysql视图是一种虚拟的表,本身不保存数据,内部封装了一条SELECT语句; 数据来源于查询的一张或多张实际数据的表。</p>\n</blockquote>\n<ol>\n<li>_view01_user 此视图用于查询用户信息<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">单应用;</span><span class=\"pln\"> jianghujs_demo_basic</span><span class=\"pun\">,</span><span class=\"pln\"> data_repository </span><span class=\"pun\">都是是单应用</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">DROP VIEW IF EXISTS </span><span class=\"str\">`_view01_user`</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">CREATE ALGORITHM </span><span class=\"pun\">=</span><span class=\"pln\"> UNDEFINED SQL SECURITY DEFINER VIEW </span><span class=\"str\">`_view01_user`</span><span class=\"pln\"> AS </span><span class=\"kwd\">select</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"kwd\">from</span><span class=\"pln\"> </span><span class=\"str\">`_user`</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pun\">---</span><span class=\"pln\"> </span><span class=\"pun\">--------------------</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">多应用之</span><span class=\"str\">\"用户APP管理应用(user_app_management)\"</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">DROP VIEW IF EXISTS </span><span class=\"str\">`_view01_user`</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">CREATE ALGORITHM </span><span class=\"pun\">=</span><span class=\"pln\"> UNDEFINED SQL SECURITY DEFINER VIEW </span><span class=\"str\">`_view01_user`</span><span class=\"pln\"> AS </span><span class=\"kwd\">select</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"kwd\">from</span><span class=\"pln\"> </span><span class=\"str\">`_user`</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">多应用之其他应用,</span><span class=\"pln\"> </span><span class=\"pun\">除了</span><span class=\"str\">\"用户APP管理应用(user_app_management)\"</span><span class=\"pun\">以外的其他应用</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">DROP VIEW IF EXISTS </span><span class=\"str\">`_view01_user`</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">CREATE ALGORITHM </span><span class=\"pun\">=</span><span class=\"pln\"> UNDEFINED SQL SECURITY DEFINER VIEW </span><span class=\"str\">`_view01_user`</span><span class=\"pln\"> AS </span><span class=\"kwd\">select</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"kwd\">from</span><span class=\"pln\"> </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___user`</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li><li>_view02_user_app 此视图用于查询用户APP权限列表; &lt;font color=\"red\"&gt;注意: 只有在多应用场景才需要创建_view02_user_app&lt;/font&gt;<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">多应用之</span><span class=\"str\">\"用户APP管理应用(user_app_management)\"</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">DROP VIEW IF EXISTS </span><span class=\"str\">`_view02_user_app`</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">CREATE ALGORITHM </span><span class=\"pun\">=</span><span class=\"pln\"> UNDEFINED SQL SECURITY DEFINER VIEW </span><span class=\"str\">`_view02_user_app`</span><span class=\"pln\"> AS</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"kwd\">select</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">,</span><span class=\"pln\"> _app</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">,</span><span class=\"pln\"> _app</span><span class=\"pun\">.</span><span class=\"pln\">appName</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userId</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">username</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userStatus</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userType</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">    _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operation</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationAt</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">    </span><span class=\"kwd\">from</span><span class=\"pln\"> _user_app</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">        inner join _user on </span><span class=\"str\">`_user_app`</span><span class=\"pun\">.</span><span class=\"str\">`userId`</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`_user`</span><span class=\"pun\">.</span><span class=\"str\">`userId`</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">        inner join _app on </span><span class=\"str\">`_user_app`</span><span class=\"pun\">.</span><span class=\"str\">`appId`</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`_app`</span><span class=\"pun\">.</span><span class=\"str\">`appId`</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">多应用之其他应用,</span><span class=\"pln\"> </span><span class=\"pun\">除了</span><span class=\"str\">\"用户APP管理应用(user_app_management)\"</span><span class=\"pun\">以外的其他应用</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">---------------------</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">DROP VIEW IF EXISTS </span><span class=\"str\">`_view02_user_app`</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">CREATE ALGORITHM </span><span class=\"pun\">=</span><span class=\"pln\"> UNDEFINED SQL SECURITY DEFINER VIEW </span><span class=\"str\">`_view02_user_app`</span><span class=\"pln\"> AS</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"kwd\">select</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">,</span><span class=\"pln\"> _app</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">,</span><span class=\"pln\"> _app</span><span class=\"pun\">.</span><span class=\"pln\">appName</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userId</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">username</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userStatus</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userType</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">    _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operation</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationAt</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">    </span><span class=\"kwd\">from</span><span class=\"pln\"> </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___user_app`</span><span class=\"pln\"> _user_app</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">        inner join </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___user`</span><span class=\"pln\"> _user on </span><span class=\"str\">`_user_app`</span><span class=\"pun\">.</span><span class=\"str\">`userId`</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`_user`</span><span class=\"pun\">.</span><span class=\"str\">`userId`</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">        inner join </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___app`</span><span class=\"pln\"> _app on </span><span class=\"str\">`_user_app`</span><span class=\"pun\">.</span><span class=\"str\">`appId`</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`_app`</span><span class=\"pun\">.</span><span class=\"str\">`appId`</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li></ol>\n<h2 id=\"h2-u6570u636Eu886826amp3Bu89C6u56FEu6CE8u610Fu4E8Bu9879\"><a class=\"reference-link\" name=\"数据表&amp;视图 注意事项\"></a><span class=\"header-link octicon octicon-link\"></span>数据表&amp;视图 注意事项</h2><ul>\n<li>以上表是系统固定的表，请务必不要随意删除字段和删除表，否则将会导致项目崩溃。</li><li>所有下划线开头的都是系统表，请不要随便修改。</li><li><code>id</code>, <code>operation</code>、<code>operationByUserId</code>、<code>operationByUser</code>、<code>operationAt</code> 是基础字段, 每张表都必须要有.</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:19:51+08:00', 'W00001', '张三丰', '2022-04-30T00:11:23+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T00:11:23+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1455, 10041, '10004', '05数据库', '', 'public', '2022-04-23T21:22:48+08:00', '数据操作规范', NULL, '## mysql 视图\n\n业务开发中连表查询, 推荐使用mysql视图\n\n## 数据历史、操作历史\n\n- 数据的`crud`使用框架`egg-jianghu`的`jianghuKnex`，主要包括`jhInsert、jhUpdate、jhDelete`；\n	```java\n	const ctx= this.ctx;\n	const { jianghuKnex } = this.app;\n	jianghuKnex(\'test\', ctx).jhInsert({ id: 10, testContent: \'这是测试内容\' });\n	jianghuKnex(\'test\', ctx).where({ id: 10 }).jhUpdate({ testContent: \'这是修改后的内容\' });\n	jianghuKnex(\'test\', ctx).where({ id: 10 }).jhDelete();\n	```\n- 使用`jhInsert、jhUpdate、jhDelete` 操作数据时会调用`backupNewDataListToRecordHistory`对操作保留历史轨迹\n	```\n		builder.jhInsert = async params => {\n		  const operation = \'jhInsert\';\n		  if (Array.isArray(params)) {\n			params = params.map(item => {\n			  return { ...item, operation, operationByUserId, operationByUser, operationAt };\n			});\n		  } else {\n			params = { ...params, operation, operationByUserId, operationByUser, operationAt };\n		  }\n		  const ids = await target.insert(params);\n		  // 根据ids查询最新新数据 并 备份最新数据 到 _record_history\n		  await backupNewDataListToRecordHistory({ ids, table, knex, requestBody, operation });\n		  return ids;\n		};\n	```\n- 操作历史的具体实现方法(`backupNewDataListToRecordHistory`)\n	```\n	async function backupNewDataListToRecordHistory({ ids, table, knex, requestBody, operation, operationByUserId, operationByUser, operationAt }) {\n\n	  if (_.isEmpty(ids)) {\n		return;\n	  }\n	  const packageContent = JSON.stringify(requestBody);\n	  const newDataList = await knex(table).whereIn(\'id\', ids).select();\n	  if (_.isEmpty(newDataList)) {\n		return;\n	  }\n\n	  // 存储数据的字符串和操作信息到`_record_history`表，进行留档\n	  const recordHistoryList = newDataList.map(newData => {\n		if (operation === \'jhDelete\') {\n		  newData.operation = operation;\n		  newData.operationByUserId = operationByUserId;\n		  newData.operationByUser = operationByUser;\n		  newData.operationAt = operationAt;\n		}\n		return {\n		  table, recordId: newData.id, recordContent: JSON.stringify(newData),\n		  packageContent,\n		  operation: newData.operation,\n		  operationByUserId: newData.operationByUserId,\n		  operationByUser: newData.operationByUser,\n		  operationAt: newData.operationAt,\n		};\n	  });\n	  return await knex(tableEnum._record_history).insert(recordHistoryList);\n	}\n	```\n', '<h2 id=\"h2-mysqlu89C6u56FE\"><a class=\"reference-link\" name=\"mysql 视图\"></a><span class=\"header-link octicon octicon-link\"></span>mysql 视图</h2><p>业务开发中连表查询, 推荐使用mysql视图</p>\n<h2 id=\"h2-u6570u636Eu5386u53F2u3001u64CDu4F5Cu5386u53F2\"><a class=\"reference-link\" name=\"数据历史、操作历史\"></a><span class=\"header-link octicon octicon-link\"></span>数据历史、操作历史</h2><ul>\n<li><p>数据的<code>crud</code>使用框架<code>egg-jianghu</code>的<code>jianghuKnex</code>，主要包括<code>jhInsert、jhUpdate、jhDelete</code>；</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-java\"><span class=\"kwd\">const</span><span class=\"pln\"> ctx</span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-java\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-java\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'test\'</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">).</span><span class=\"pln\">jhInsert</span><span class=\"pun\">({</span><span class=\"pln\"> id</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">10</span><span class=\"pun\">,</span><span class=\"pln\"> testContent</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'这是测试内容\'</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L3\"><code class=\"language-java\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'test\'</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\"> id</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">10</span><span class=\"pln\"> </span><span class=\"pun\">}).</span><span class=\"pln\">jhUpdate</span><span class=\"pun\">({</span><span class=\"pln\"> testContent</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'这是修改后的内容\'</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L4\"><code class=\"language-java\"><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'test\'</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\"> id</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">10</span><span class=\"pln\"> </span><span class=\"pun\">}).</span><span class=\"pln\">jhDelete</span><span class=\"pun\">();</span></code></li></ol></pre>\n</li><li><p>使用<code>jhInsert、jhUpdate、jhDelete</code> 操作数据时会调用<code>backupNewDataListToRecordHistory</code>对操作保留历史轨迹</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">    builder</span><span class=\"pun\">.</span><span class=\"pln\">jhInsert </span><span class=\"pun\">=</span><span class=\"pln\"> async </span><span class=\"kwd\">params</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> operation </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'jhInsert\'</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"typ\">Array</span><span class=\"pun\">.</span><span class=\"pln\">isArray</span><span class=\"pun\">(</span><span class=\"kwd\">params</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">        </span><span class=\"kwd\">params</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">params</span><span class=\"pun\">.</span><span class=\"pln\">map</span><span class=\"pun\">(</span><span class=\"pln\">item </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">          </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"pun\">...</span><span class=\"pln\">item</span><span class=\"pun\">,</span><span class=\"pln\"> operation</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> operationAt </span><span class=\"pun\">};</span></code></li><li class=\"L5\"><code><span class=\"pln\">        </span><span class=\"pun\">});</span></code></li><li class=\"L6\"><code><span class=\"pln\">      </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code><span class=\"pln\">        </span><span class=\"kwd\">params</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"pun\">...</span><span class=\"kwd\">params</span><span class=\"pun\">,</span><span class=\"pln\"> operation</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> operationAt </span><span class=\"pun\">};</span></code></li><li class=\"L8\"><code><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> ids </span><span class=\"pun\">=</span><span class=\"pln\"> await target</span><span class=\"pun\">.</span><span class=\"pln\">insert</span><span class=\"pun\">(</span><span class=\"kwd\">params</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code><span class=\"pln\">      </span><span class=\"com\">// 根据ids查询最新新数据 并 备份最新数据 到 _record_history</span></code></li><li class=\"L1\"><code><span class=\"pln\">      await backupNewDataListToRecordHistory</span><span class=\"pun\">({</span><span class=\"pln\"> ids</span><span class=\"pun\">,</span><span class=\"pln\"> table</span><span class=\"pun\">,</span><span class=\"pln\"> knex</span><span class=\"pun\">,</span><span class=\"pln\"> requestBody</span><span class=\"pun\">,</span><span class=\"pln\"> operation </span><span class=\"pun\">});</span></code></li><li class=\"L2\"><code><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> ids</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"pun\">};</span></code></li></ol></pre>\n</li><li><p>操作历史的具体实现方法(<code>backupNewDataListToRecordHistory</code>)</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">async </span><span class=\"kwd\">function</span><span class=\"pln\"> backupNewDataListToRecordHistory</span><span class=\"pun\">({</span><span class=\"pln\"> ids</span><span class=\"pun\">,</span><span class=\"pln\"> table</span><span class=\"pun\">,</span><span class=\"pln\"> knex</span><span class=\"pun\">,</span><span class=\"pln\"> requestBody</span><span class=\"pun\">,</span><span class=\"pln\"> operation</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> operationAt </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code></code></li><li class=\"L2\"><code><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">_</span><span class=\"pun\">.</span><span class=\"pln\">isEmpty</span><span class=\"pun\">(</span><span class=\"pln\">ids</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> packageContent </span><span class=\"pun\">=</span><span class=\"pln\"> JSON</span><span class=\"pun\">.</span><span class=\"pln\">stringify</span><span class=\"pun\">(</span><span class=\"pln\">requestBody</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> newDataList </span><span class=\"pun\">=</span><span class=\"pln\"> await knex</span><span class=\"pun\">(</span><span class=\"pln\">table</span><span class=\"pun\">).</span><span class=\"pln\">whereIn</span><span class=\"pun\">(</span><span class=\"str\">\'id\'</span><span class=\"pun\">,</span><span class=\"pln\"> ids</span><span class=\"pun\">).</span><span class=\"kwd\">select</span><span class=\"pun\">();</span></code></li><li class=\"L7\"><code><span class=\"pln\">  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">_</span><span class=\"pun\">.</span><span class=\"pln\">isEmpty</span><span class=\"pun\">(</span><span class=\"pln\">newDataList</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code></code></li><li class=\"L1\"><code><span class=\"pln\">  </span><span class=\"com\">// 存储数据的字符串和操作信息到`_record_history`表，进行留档</span></code></li><li class=\"L2\"><code><span class=\"pln\">  </span><span class=\"kwd\">const</span><span class=\"pln\"> recordHistoryList </span><span class=\"pun\">=</span><span class=\"pln\"> newDataList</span><span class=\"pun\">.</span><span class=\"pln\">map</span><span class=\"pun\">(</span><span class=\"pln\">newData </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">operation </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'jhDelete\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">      newData</span><span class=\"pun\">.</span><span class=\"pln\">operation </span><span class=\"pun\">=</span><span class=\"pln\"> operation</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">      newData</span><span class=\"pun\">.</span><span class=\"pln\">operationByUserId </span><span class=\"pun\">=</span><span class=\"pln\"> operationByUserId</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">      newData</span><span class=\"pun\">.</span><span class=\"pln\">operationByUser </span><span class=\"pun\">=</span><span class=\"pln\"> operationByUser</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code><span class=\"pln\">      newData</span><span class=\"pun\">.</span><span class=\"pln\">operationAt </span><span class=\"pun\">=</span><span class=\"pln\"> operationAt</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">      table</span><span class=\"pun\">,</span><span class=\"pln\"> recordId</span><span class=\"pun\">:</span><span class=\"pln\"> newData</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">,</span><span class=\"pln\"> recordContent</span><span class=\"pun\">:</span><span class=\"pln\"> JSON</span><span class=\"pun\">.</span><span class=\"pln\">stringify</span><span class=\"pun\">(</span><span class=\"pln\">newData</span><span class=\"pun\">),</span></code></li><li class=\"L1\"><code><span class=\"pln\">      packageContent</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code><span class=\"pln\">      operation</span><span class=\"pun\">:</span><span class=\"pln\"> newData</span><span class=\"pun\">.</span><span class=\"pln\">operation</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code><span class=\"pln\">      operationByUserId</span><span class=\"pun\">:</span><span class=\"pln\"> newData</span><span class=\"pun\">.</span><span class=\"pln\">operationByUserId</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code><span class=\"pln\">      operationByUser</span><span class=\"pun\">:</span><span class=\"pln\"> newData</span><span class=\"pun\">.</span><span class=\"pln\">operationByUser</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code><span class=\"pln\">      operationAt</span><span class=\"pun\">:</span><span class=\"pln\"> newData</span><span class=\"pun\">.</span><span class=\"pln\">operationAt</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code><span class=\"pln\">    </span><span class=\"pun\">};</span></code></li><li class=\"L7\"><code><span class=\"pln\">  </span><span class=\"pun\">});</span></code></li><li class=\"L8\"><code><span class=\"pln\">  </span><span class=\"kwd\">return</span><span class=\"pln\"> await knex</span><span class=\"pun\">(</span><span class=\"pln\">tableEnum</span><span class=\"pun\">.</span><span class=\"pln\">_record_history</span><span class=\"pun\">).</span><span class=\"pln\">insert</span><span class=\"pun\">(</span><span class=\"pln\">recordHistoryList</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:22:49+08:00', 'W00001', '张三丰', '2022-04-25T21:35:50+08:00', 'W00001', '张三丰', 'jhUpdate', 'W00001', '张三丰', '2022-04-25T21:35:50+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1456, 10042, '10004', '05数据库', '', 'public', '2022-04-23T21:23:17+08:00', '数据历史', NULL, '## 数据历史概念\n\n以数据行维度, 记录数据的变更历史, 主要用做数据恢复&数据备份.\n\n## 数据历史表(`_record_history`)\n\n```ddl\nCREATE TABLE `_record_history` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `table` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'表\',\n  `recordId` int(11) DEFAULT NULL COMMENT \'数据在table中的主键id; recordContent.id\',\n  `recordContent` text COLLATE utf8mb4_bin NOT NULL COMMENT \'数据JSON\',\n  `packageContent` text COLLATE utf8mb4_bin NOT NULL COMMENT \'当时请求的 package JSON\',\n  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作; jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者userId; recordContent.operationByUserId\',\n  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者用户名; recordContent.operationByUser\',\n  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作时间; recordContent.operationAt; E.g: 2021-05-28T10:24:54+08:00 \',\n  PRIMARY KEY (`id`),\n  KEY `index_record_id` (`recordId`),\n  KEY `index_table_action` (`table`,`operation`)\n) ENGINE=InnoDB AUTO_INCREMENT=53 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT=\'数据历史表\';\n```\n\n## 数据历史管理页面\n\n> 查看数据的变更记录 和 恢复数据\n>\n>  [参考jianghujs_demo_advanced](https://github.com/fsll-tech/jianghujs_demo_advanced/blob/main/app/view/page/recordHistoryManagement.html)\n\n\n![](/media/202202/2022-02-21_195907_736520.png)', '<h2 id=\"h2-u6570u636Eu5386u53F2u6982u5FF5\"><a class=\"reference-link\" name=\"数据历史概念\"></a><span class=\"header-link octicon octicon-link\"></span>数据历史概念</h2><p>以数据行维度, 记录数据的变更历史, 主要用做数据恢复&amp;数据备份.</p>\n<h2 id=\"h2-u6570u636Eu5386u53F2u8868283Ccode3E_record_history3C/code3E29\"><a class=\"reference-link\" name=\"数据历史表(_record_history)\"></a><span class=\"header-link octicon octicon-link\"></span>数据历史表(<code>_record_history</code>)</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-ddl\"><span class=\"pln\">CREATE TABLE </span><span class=\"str\">`_record_history`</span><span class=\"pln\"> </span><span class=\"pun\">(</span></code></li><li class=\"L1\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`table`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'表\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`recordId`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> DEFAULT NULL COMMENT </span><span class=\"str\">\'数据在table中的主键id; recordContent.id\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`recordContent`</span><span class=\"pln\"> text COLLATE utf8mb4_bin NOT NULL COMMENT </span><span class=\"str\">\'数据JSON\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`packageContent`</span><span class=\"pln\"> text COLLATE utf8mb4_bin NOT NULL COMMENT </span><span class=\"str\">\'当时请求的 package JSON\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作; jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId; recordContent.operationByUserId\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名; recordContent.operationByUser\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-ddl\"><span class=\"pln\">  </span><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; recordContent.operationAt; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-ddl\"><span class=\"pln\">  PRIMARY KEY </span><span class=\"pun\">(</span><span class=\"str\">`id`</span><span class=\"pun\">),</span></code></li><li class=\"L1\"><code class=\"language-ddl\"><span class=\"pln\">  KEY </span><span class=\"str\">`index_record_id`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`recordId`</span><span class=\"pun\">),</span></code></li><li class=\"L2\"><code class=\"language-ddl\"><span class=\"pln\">  KEY </span><span class=\"str\">`index_table_action`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`table`</span><span class=\"pun\">,</span><span class=\"str\">`operation`</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code class=\"language-ddl\"><span class=\"pun\">)</span><span class=\"pln\"> ENGINE</span><span class=\"pun\">=</span><span class=\"typ\">InnoDB</span><span class=\"pln\"> AUTO_INCREMENT</span><span class=\"pun\">=</span><span class=\"lit\">53</span><span class=\"pln\"> DEFAULT CHARSET</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4 COLLATE</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4_bin COMMENT</span><span class=\"pun\">=</span><span class=\"str\">\'数据历史表\'</span><span class=\"pun\">;</span></code></li></ol></pre>\n<h2 id=\"h2-u6570u636Eu5386u53F2u7BA1u7406u9875u9762\"><a class=\"reference-link\" name=\"数据历史管理页面\"></a><span class=\"header-link octicon octicon-link\"></span>数据历史管理页面</h2><blockquote class=\"default\">\n<p>查看数据的变更记录 和 恢复数据</p>\n<p> <a href=\"https://github.com/fsll-tech/jianghujs_demo_advanced/blob/main/app/view/page/recordHistoryManagement.html\">参考jianghujs_demo_advanced</a></p>\n</blockquote>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-21_195907_736520.png\"></p>\n', NULL, NULL, NULL, '', '2022-04-23T21:23:17+08:00', 'W00001', '张三丰', '2022-04-25T21:36:08+08:00', 'W00001', '张三丰', 'jhUpdate', 'W00001', '张三丰', '2022-04-25T21:36:08+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1457, 10043, '10004', '05数据库', '', 'public', '2022-04-23T21:28:06+08:00', '数据仓库', NULL, '## 背景\n\n在一个大型项目中, 业务被分拆成多个单独应用(简称`多应用`), 每个应用都有自己的数据库, 自己的业务表.\n\n有些业务场景, 应用之间 需要 数据通信. 因此我们引入`数据仓库`的概念.\n\n**数据仓库 负责 将`其它的数据库`的表&表数据 收集至`data_repository`数据库**. 以供给其他应用使用.\n\n## 数据仓库 之 多应用Demo\n\n> [多应用Demo](https://github.com/openJianghu/jianghujs_demo_enterprise)\n\n- data_repository: 数据仓库应用, 同步/采集其它库的表\n- user_app_management: 用户APP管理应用\n- directory: APP目录应用, 此应用没有用户和APP数据,所以需要从data_repository创建`_view01_user` 和 `_view02_user_app`\n	- _view01_user 用于用户登陆\n		```sql\n	DROP VIEW IF EXISTS `_view01_user`;\n	CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view01_user` AS select * from `data_repository`.`user_app_management___user`;\n	```\n	- _view02_user_app 用于APP鉴定权\n	```sql\n	DROP VIEW IF EXISTS `_view02_user_app`;\n	CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view02_user_app` AS\n	select _user_app.id, _app.appId, _app.appName, _user.userId, _user.username, _user.userStatus, _user.userType,\n		_user_app.operation, _user_app.operationByUserId, _user_app.operationByUser, _user_app.operationAt\n		from `data_repository`.`user_app_management___user_app` _user_app\n			inner join `data_repository`.`user_app_management___user` _user on `_user_app`.`userId` = `_user`.`userId`\n			inner join `data_repository`.`user_app_management___app` _app on `_user_app`.`appId` = `_app`.`appId`;\n	```\n\n## 数据仓库应用(`data_repository`)\n\n> [data_repository项目链接](https://github.com/openJianghu/jianghujs_demo_enterprise/tree/main/data_repository)\n>\n> 为了保障数据仓库应用稳定运行, 数据仓库应用 以 `单应用`形式运行.\n\n- _table_sync_config: 记录了需要 同步/采集的 表\n- 同步策略: \n   - 使用mysql触发器实现增量同步\n   - 定时检查 表结构和表数据, 然后更新数据 和 mysql触发器\n   ```java\n	module.exports = app => {\n	  return {\n		schedule: {\n		  interval: \'60s\', // 1 分钟间隔; 2m 30s\n		  type: \'worker\', // 只有一个worker执行\n		  disable: app.config.enableDataSync === \'禁用\',\n		},\n		async task(ctx) {\n		  const startTime = new Date().getTime();\n		  const { logger } = app;\n\n		  await ctx.service.tableSync.syncTable({});\n\n		  const endTime = new Date().getTime();\n		  logger.info(\'[syncAppData.js]\', { useTime: `${endTime - startTime}/ms` });\n		},\n	  };\n	};\n   ```\n- 同步逻辑\n	1. 源表检查\n	2. 一致性检查\n	3. 触发器检查\n	4. 清除无用的触发器\n\n\n\n\n', '<h2 id=\"h2-u80CCu666F\"><a class=\"reference-link\" name=\"背景\"></a><span class=\"header-link octicon octicon-link\"></span>背景</h2><p>在一个大型项目中, 业务被分拆成多个单独应用(简称<code>多应用</code>), 每个应用都有自己的数据库, 自己的业务表.</p>\n<p>有些业务场景, 应用之间 需要 数据通信. 因此我们引入<code>数据仓库</code>的概念.</p>\n<p><strong>数据仓库 负责 将<code>其它的数据库</code>的表&amp;表数据 收集至<code>data_repository</code>数据库</strong>. 以供给其他应用使用.</p>\n<h2 id=\"h2-u6570u636Eu4ED3u5E93u4E4B20u591Au5E94u7528demo\"><a class=\"reference-link\" name=\"数据仓库 之 多应用Demo\"></a><span class=\"header-link octicon octicon-link\"></span>数据仓库 之 多应用Demo</h2><blockquote class=\"default\">\n<p><a href=\"https://github.com/openJianghu/jianghujs_demo_enterprise\">多应用Demo</a></p>\n</blockquote>\n<ul>\n<li>data_repository: 数据仓库应用, 同步/采集其它库的表</li><li>user_app_management: 用户APP管理应用</li><li>directory: APP目录应用, 此应用没有用户和APP数据,所以需要从data_repository创建<code>_view01_user</code> 和 <code>_view02_user_app</code><ul>\n<li>_view01_user 用于用户登陆<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">DROP VIEW IF EXISTS </span><span class=\"str\">`_view01_user`</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">CREATE ALGORITHM </span><span class=\"pun\">=</span><span class=\"pln\"> UNDEFINED SQL SECURITY DEFINER VIEW </span><span class=\"str\">`_view01_user`</span><span class=\"pln\"> AS </span><span class=\"kwd\">select</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"kwd\">from</span><span class=\"pln\"> </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___user`</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li><li>_view02_user_app 用于APP鉴定权<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">DROP VIEW IF EXISTS </span><span class=\"str\">`_view02_user_app`</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">CREATE ALGORITHM </span><span class=\"pun\">=</span><span class=\"pln\"> UNDEFINED SQL SECURITY DEFINER VIEW </span><span class=\"str\">`_view02_user_app`</span><span class=\"pln\"> AS</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"kwd\">select</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">,</span><span class=\"pln\"> _app</span><span class=\"pun\">.</span><span class=\"pln\">appId</span><span class=\"pun\">,</span><span class=\"pln\"> _app</span><span class=\"pun\">.</span><span class=\"pln\">appName</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userId</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">username</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userStatus</span><span class=\"pun\">,</span><span class=\"pln\"> _user</span><span class=\"pun\">.</span><span class=\"pln\">userType</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">  _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operation</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationByUserId</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationByUser</span><span class=\"pun\">,</span><span class=\"pln\"> _user_app</span><span class=\"pun\">.</span><span class=\"pln\">operationAt</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"kwd\">from</span><span class=\"pln\"> </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___user_app`</span><span class=\"pln\"> _user_app</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">      inner join </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___user`</span><span class=\"pln\"> _user on </span><span class=\"str\">`_user_app`</span><span class=\"pun\">.</span><span class=\"str\">`userId`</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`_user`</span><span class=\"pun\">.</span><span class=\"str\">`userId`</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">      inner join </span><span class=\"str\">`data_repository`</span><span class=\"pun\">.</span><span class=\"str\">`user_app_management___app`</span><span class=\"pln\"> _app on </span><span class=\"str\">`_user_app`</span><span class=\"pun\">.</span><span class=\"str\">`appId`</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`_app`</span><span class=\"pun\">.</span><span class=\"str\">`appId`</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li></ul>\n</li></ul>\n<h2 id=\"h2-u6570u636Eu4ED3u5E93u5E94u7528283Ccode3Edata_repository3C/code3E29\"><a class=\"reference-link\" name=\"数据仓库应用(data_repository)\"></a><span class=\"header-link octicon octicon-link\"></span>数据仓库应用(<code>data_repository</code>)</h2><blockquote class=\"default\">\n<p><a href=\"https://github.com/openJianghu/jianghujs_demo_enterprise/tree/main/data_repository\">data_repository项目链接</a></p>\n<p>为了保障数据仓库应用稳定运行, 数据仓库应用 以 <code>单应用</code>形式运行.</p>\n</blockquote>\n<ul>\n<li><p>_table_sync_config: 记录了需要 同步/采集的 表</p>\n</li><li><p>同步策略: </p>\n<ul>\n<li><p>使用mysql触发器实现增量同步</p>\n</li><li><p>定时检查 表结构和表数据, 然后更新数据 和 mysql触发器</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-java\"><span class=\"pln\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> app </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-java\"><span class=\"pln\"> </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-java\"><span class=\"pln\">   schedule</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-java\"><span class=\"pln\">     interval</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'60s\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 1 分钟间隔; 2m 30s</span></code></li><li class=\"L4\"><code class=\"language-java\"><span class=\"pln\">     type</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'worker\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 只有一个worker执行</span></code></li><li class=\"L5\"><code class=\"language-java\"><span class=\"pln\">     disable</span><span class=\"pun\">:</span><span class=\"pln\"> app</span><span class=\"pun\">.</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"pln\">enableDataSync </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'禁用\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-java\"><span class=\"pln\">   </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-java\"><span class=\"pln\">   async task</span><span class=\"pun\">(</span><span class=\"pln\">ctx</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-java\"><span class=\"pln\">     </span><span class=\"kwd\">const</span><span class=\"pln\"> startTime </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">getTime</span><span class=\"pun\">();</span></code></li><li class=\"L9\"><code class=\"language-java\"><span class=\"pln\">     </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> logger </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> app</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-java\"></code></li><li class=\"L1\"><code class=\"language-java\"><span class=\"pln\">     await ctx</span><span class=\"pun\">.</span><span class=\"pln\">service</span><span class=\"pun\">.</span><span class=\"pln\">tableSync</span><span class=\"pun\">.</span><span class=\"pln\">syncTable</span><span class=\"pun\">({});</span></code></li><li class=\"L2\"><code class=\"language-java\"></code></li><li class=\"L3\"><code class=\"language-java\"><span class=\"pln\">     </span><span class=\"kwd\">const</span><span class=\"pln\"> endTime </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">getTime</span><span class=\"pun\">();</span></code></li><li class=\"L4\"><code class=\"language-java\"><span class=\"pln\">     logger</span><span class=\"pun\">.</span><span class=\"pln\">info</span><span class=\"pun\">(</span><span class=\"str\">\'[syncAppData.js]\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> useTime</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">endTime </span><span class=\"pun\">-</span><span class=\"pln\"> startTime</span><span class=\"pun\">}/</span><span class=\"pln\">ms</span><span class=\"pun\">`</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L5\"><code class=\"language-java\"><span class=\"pln\">   </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-java\"><span class=\"pln\"> </span><span class=\"pun\">};</span></code></li><li class=\"L7\"><code class=\"language-java\"><span class=\"pun\">};</span></code></li></ol></pre>\n</li></ul>\n</li><li><p>同步逻辑</p>\n<ol>\n<li>源表检查</li><li>一致性检查</li><li>触发器检查</li><li>清除无用的触发器</li></ol>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:28:06+08:00', 'W00001', '张三丰', '2022-04-30T00:14:31+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T00:14:31+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1458, 10044, '10004', '06框架进阶', '', 'public', '2022-04-23T21:29:11+08:00', '配置说明', NULL, '## 配置文件\n\n1. config.default.js：基础配置文件\n1. config.local.js：npm run dev 时 使用\n1. config.prod.js：npm run start 时 使用\n1. config.unittest.js：npm run test 时 使用\n\n## 框架的配置说明\n\n>  /egg-jianghu/config/config.default.js;\n> 补充: 这里所有的配置都可以在项目里面覆盖\n- appId: \'jianghujs_demo_basic\' # 应用ID\n- debug: false # 是否开启debug\n- appTitle: \'江湖演示-初级\' # 应用标题\n- appLogo: \'/jianghujs_demo_basic/public/img/logo.png\', 应用Logo,\n- appType: \'single\' # 应用类型\n- keys: `xxxxx_1638108566009` # cookie加密key\n- appDirectoryLink: \'/\' # 目录项目链接\n- indexPage: \'/jianghujs_demo_basic/page/manual\' # 首页\n- loginPage: \'/jianghujs_demo_basic/page/login\' # 登录页面,\n- helpPage:  \'/jianghujs_demo_basic/page/help\' # 帮助页面,\n- jiangHuConfig: 江湖相关配置 ,\n	- packageIdCheck: false # resource请求 唯一性校验\n    - updateRequestDemoAndResponseDemo: false # 是否更新_resource表中的 `requestDemo` 和 `responseDemo` 建议只在config.local.js中开启\n    - enableUserInfoCache: false # 启动用户信息缓存\n    - userInfoCacheRefreshInterval: \"10s\" # 用户缓存定时任务 周期\n    - enableSocket: false # 开启socket\n    - enableSyncSocketStatus: false # 是否开启socket状态同步\n    - syncSocketStatusRefreshInterval: \"60s\" # socket状态同步 定时任务周期\n    - ignoreListOfResourceRequestLog: [\'allPage.getConstantList\'] # 特定resource关闭日志\n	- ignoreListOfResourceRequestLog: [\'allPage.getConstantList\', \n        \'allPage.httpUploadByStream\', \'allPage.httpUploadByBase64\', \'allPage.httpDownloadByBase64\'] # 不打印日志的resource 列表\n- security: 安全配置,\n- nunjucks: nunjucks配置,\n- knex: knex配置,\n- bodyParser: http body 大小配置,\n- multipart:  文件上传临时目录,\n- cors: 跨域配置,\n- logger:日志配置,\n- customLogger: 定义日志级别,\n- onerror: 异常处理,\n\n```\nnunjucks: {\n    cache: false,\n},\n```\n\n\n```\nstatic: {\n    prefix: \'/static\',\n    dir: [path.join(appInfo.baseDir, \'app/public\'), path.join(appInfo.baseDir, \'backstage/dist\'), \'/home/doraData/uploadFiles/static\'],\n    maxAge: 0,\n    // dynamic: true,\n    buffer: false,\n    preload: false,\n    maxFiles: 0,\n},\n```\n\n- nginx里图片，css，js的cache设置去掉\n', '<h2 id=\"h2-u914Du7F6Eu6587u4EF6\"><a class=\"reference-link\" name=\"配置文件\"></a><span class=\"header-link octicon octicon-link\"></span>配置文件</h2><ol>\n<li>config.default.js：基础配置文件</li><li>config.local.js：npm run dev 时 使用</li><li>config.prod.js：npm run start 时 使用</li><li>config.unittest.js：npm run test 时 使用</li></ol>\n<h2 id=\"h2-u6846u67B6u7684u914Du7F6Eu8BF4u660E\"><a class=\"reference-link\" name=\"框架的配置说明\"></a><span class=\"header-link octicon octicon-link\"></span>框架的配置说明</h2><blockquote class=\"default\">\n<p> /egg-jianghu/config/config.default.js;<br>补充: 这里所有的配置都可以在项目里面覆盖</p>\n</blockquote>\n<ul>\n<li>appId: \'jianghujs_demo_basic\' # 应用ID</li><li>debug: false # 是否开启debug</li><li>appTitle: \'江湖演示-初级\' # 应用标题</li><li>appLogo: \'/jianghujs_demo_basic/public/img/logo.png\', 应用Logo,</li><li>appType: \'single\' # 应用类型</li><li>keys: <code>xxxxx_1638108566009</code> # cookie加密key</li><li>appDirectoryLink: \'/\' # 目录项目链接</li><li>indexPage: \'/jianghujs_demo_basic/page/manual\' # 首页</li><li>loginPage: \'/jianghujs_demo_basic/page/login\' # 登录页面,</li><li>helpPage:  \'/jianghujs_demo_basic/page/help\' # 帮助页面,</li><li>jiangHuConfig: 江湖相关配置 ,<ul>\n<li>packageIdCheck: false # resource请求 唯一性校验</li><li>updateRequestDemoAndResponseDemo: false # 是否更新_resource表中的 <code>requestDemo</code> 和 <code>responseDemo</code> 建议只在config.local.js中开启</li><li>enableUserInfoCache: false # 启动用户信息缓存</li><li>userInfoCacheRefreshInterval: \"10s\" # 用户缓存定时任务 周期</li><li>enableSocket: false # 开启socket</li><li>enableSyncSocketStatus: false # 是否开启socket状态同步</li><li>syncSocketStatusRefreshInterval: \"60s\" # socket状态同步 定时任务周期</li><li>ignoreListOfResourceRequestLog: [\'allPage.getConstantList\'] # 特定resource关闭日志</li><li>ignoreListOfResourceRequestLog: [\'allPage.getConstantList\',<br>  \'allPage.httpUploadByStream\', \'allPage.httpUploadByBase64\', \'allPage.httpDownloadByBase64\'] # 不打印日志的resource 列表</li></ul>\n</li><li>security: 安全配置,</li><li>nunjucks: nunjucks配置,</li><li>knex: knex配置,</li><li>bodyParser: http body 大小配置,</li><li>multipart:  文件上传临时目录,</li><li>cors: 跨域配置,</li><li>logger:日志配置,</li><li>customLogger: 定义日志级别,</li><li>onerror: 异常处理,</li></ul>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">nunjucks</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">    cache</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code><span class=\"pun\">},</span></code></li></ol></pre>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"kwd\">static</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">    prefix</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'/static\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code><span class=\"pln\">    dir</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">baseDir</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'app/public\'</span><span class=\"pun\">),</span><span class=\"pln\"> path</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">baseDir</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'backstage/dist\'</span><span class=\"pun\">),</span><span class=\"pln\"> </span><span class=\"str\">\'/home/doraData/uploadFiles/static\'</span><span class=\"pun\">],</span></code></li><li class=\"L3\"><code><span class=\"pln\">    maxAge</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span><span class=\"com\">// dynamic: true,</span></code></li><li class=\"L5\"><code><span class=\"pln\">    buffer</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code><span class=\"pln\">    preload</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code><span class=\"pln\">    maxFiles</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code><span class=\"pun\">},</span></code></li></ol></pre>\n<ul>\n<li>nginx里图片，css，js的cache设置去掉</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:29:11+08:00', 'W00001', '张三丰', '2022-05-31T14:33:25+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-05-31T14:33:25+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1459, 10045, '10004', '06框架进阶', '', 'public', '2022-04-23T21:29:51+08:00', '工具库的使用', NULL, '## 工具库\n- `axios` ： 前端接口库。\n- `md5-node` ：数据的加密解密工具。\n- `dayjs` ：常用时间格式库。\n- `geoip-lite` ：最全世界Ip库。\n- `lodash` ：数据处理常用工具库。\n- `egg-knex` ：数据库用`mysql`，通过`knex`进行数据和`node`代码的连接。\n- `egg-view-nunjucks` ：前端模板的解释使用`nunjucks`。\n- `vue` ：前端的框架使用`vue`。\n- `vuetify` ：脚手架使用`vuetify`。\n- `socket.io、socket.io-client` ：长连接框架。\n\n## lodash\n\n- 随机数: `_.random(1000000, 9999999)`', '<h2 id=\"h2-u5DE5u5177u5E93\"><a class=\"reference-link\" name=\"工具库\"></a><span class=\"header-link octicon octicon-link\"></span>工具库</h2><ul>\n<li><code>axios</code> ： 前端接口库。</li><li><code>md5-node</code> ：数据的加密解密工具。</li><li><code>dayjs</code> ：常用时间格式库。</li><li><code>geoip-lite</code> ：最全世界Ip库。</li><li><code>lodash</code> ：数据处理常用工具库。</li><li><code>egg-knex</code> ：数据库用<code>mysql</code>，通过<code>knex</code>进行数据和<code>node</code>代码的连接。</li><li><code>egg-view-nunjucks</code> ：前端模板的解释使用<code>nunjucks</code>。</li><li><code>vue</code> ：前端的框架使用<code>vue</code>。</li><li><code>vuetify</code> ：脚手架使用<code>vuetify</code>。</li><li><code>socket.io、socket.io-client</code> ：长连接框架。</li></ul>\n<h2 id=\"h2-lodash\"><a class=\"reference-link\" name=\"lodash\"></a><span class=\"header-link octicon octicon-link\"></span>lodash</h2><ul>\n<li>随机数: <code>_.random(1000000, 9999999)</code></li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:29:52+08:00', 'W00001', '张三丰', '2022-05-12T19:46:36+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-12T19:46:36+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1460, 10046, '10004', '06框架进阶', '', 'public', '2022-04-23T21:30:25+08:00', 'jianghu-init', NULL, '> **本文将带大家使用`jianghu-init`**\n> * 创建江湖JS项目\n> * 生成CRUD页面\n> * 生成 3-table-CRUD页面\n\n## 基础环境\n\n* 操作系统：Windows/macOS/Linux\n* 运行环境：Node.js v16.x\n* 数据库环境：Mysql5.7+\n\n## 开发工具\n\n* 开发工具: Vscode\n* 数据库开发工具：navicat\n* jianghu-init\n	```shell\n	# 安装最新版本 jianghu-init\n	$ npm install -g jianghu-init@latest\n	# 查看版本\n	$ npm list jianghu-init -g\n	```\n\n## 江湖JS项目-目录结构\n\n```yml\n├── config                                                # egg config\n│   ├── config.default.js                            # default config                    \n│   ├── config.local.js                               # npm run dev 时使用的 config\n│   ├── config.prod.js                               # npm run start 时使用的 config\n│   ├── config.unittest.js                           # npm run test 时使用的 config\n│   └── plugin.js                                      # egg插件配置\n├── app \n│   ├── common                                       # 项目的常用工具、静态方法等    \n│   ├── constant                                       # 常量   \n│   │   ├── constant.js\n│   │   └── error.js\n│   ├── controller                                     # 对外暴露接口 \n│   ├── public                                          # 静态资源目录 \n│   ├── schedule                                      # 定时任务; 参考https://www.eggjs.org/zh-CN/basics/schedule\n│   ├── service                                         # 应用协议service目录\n│   └── view                                            # 页面存放目录\n├── app.js                                                # 自定义启动时的初始化工作\n├── jsconfig.json\n├── package.json\n├── sql                                                    # sql文件\n│   └── init.sql\n└── upload                                              # 文件的保存路径(文件上传业务)\n```\n\n## 示例一：创建一个独立应用项目(单应用)\n\n**创建项目**\n```shell\n$ jianghu-init project --type=xiaoapp my-jh-project\n	? 数据库IP： 127.0.0.1\n	? 数据库端口： 3306\n	? 数据库账号： root\n	? 数据库密码：123456\n	✔ 目录切换 my-jh-project\n		 [mysql importer] 94.39% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ usage:\n		  - cd /xxx/my-jh-project\n		  - npm install\n		  - npm start / npm run dev\n	✔ jianghu init project is success\n```\n**启动项目**\n```shell\n$ cd my-jh-project\n$ npm install\n$ npm run dev\n	[egg-ts-helper] create typings/config/index.d.ts (9ms)\n	[egg-ts-helper] create typings/config/plugin.d.ts (1ms)\n	[egg-ts-helper] create typings/app/service/index.d.ts (1ms)\n	[egg-ts-helper] create typings/app/index.d.ts (0ms)\n	2022-04-25 22:12:21,076 INFO 30774 [master] node version v16.13.0\n	2022-04-25 22:12:21,077 INFO 30774 [master] egg-jianghu version 1.1.91\n	Debugger attached.\n	2022-04-25 22:12:22,168 INFO 30774 [master] agent_worker#1:30785 started (1090ms)\n	Debugger attached.\n	2022-04-25 22:12:23,375 INFO 30789 [socket.io] 启动成功 { pid: 30789, path: \'/socket.io\' }\n	2022-04-25 22:12:23,382 INFO 30774 [master] egg-jianghu started on http://127.0.0.1:7001 (2305ms)\n```\n浏览器打开访问**http://127.0.0.1:7001**, 用户名`admin` 密码`123456`\n\n## 示例二：创建一个多应用项目\n\n**创建项目**\n```shell\n$ jianghu-init project  --type=multi my-jh-project-mutil\n	? 数据库IP： 127.0.0.1\n	? 数据库端口： 3306\n	? 数据库账号： root\n	? 数据库密码：123456\n	✔ 目录切换 data_repository\n		 [mysql importer] 59.61% Completed\n		 [mysql importer] 93.26% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ 目录切换 user_app_management\n		 [mysql importer] 95.47% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ 目录切换 directory\n		 [mysql importer] 93.95% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ usage:\n		  - cd /xxx/my-jh-project-mutil\n		  - ls\n		  - cd your_app\n		  - npm install\n		  - npm start / npm run dev\n	✔ jianghu init project is success\n```\n**启动项目**\n```sehll\n$ cd my-jh-project-mutil\n\n$ npm --prefix=data_repository install\n$ npm --prefix=data_repository run dev\n\n$ npm --prefix=user_app_management install\n$ npm --prefix=user_app_management run dev\n\n$ npm --prefix=directory install\n$ npm --prefix=directory  run dev\n```\n浏览器打开访问**http://127.0.0.1:prot**, 用户名`admin` 密码`123456`\n> 注意: data_repository是一个数据库工具类项目, 严格来说不属于多应用中的项目。\n\n## 示例三：在一个多应用下创建一个新应用\n\n**创建项目**\n```shell\n# 进入已有的多应用项目\n$ cd my-jh-project-mutil\n# 创建新应用\n$ jianghu-init project --type=xiaoapp-in-multi demo_xiaoapp\n	✔ 目录切换 demo_xiaoapp\n		 [mysql importer] 94.45% Completed\n	✔ 初始化`数据库基本表和数据`完成\n	✔ usage:\n		  - cd /xxx/my-jh-project-mutil/demo_xiaoapp\n		  - npm install\n		  - npm start / npm run dev\n	✔ jianghu init project is success\n...\n```\n**启动项目**\n```shell\n$ cd my-jh-project-mutil/demo_xiaoapp\n$ npm install\n$ npm run dev\n```\n浏览器打开访问**http://127.0.0.1:prot**, 用户名`admin` 密码`123456`\n\n## 示例四：在项目中生成中生成CRUD页面\n\n**首先先在 数据库 内 创建一个测试表 `crud_test_table`**\n```sql\ncreate table article (\n    id                int auto_increment primary key,\n    title             varchar(255)                  null comment \'标题\',\n    content       varchar(255)                   not null comment \'内容\',\n    operation     varchar(255) default \'insert\' null comment \'操作: insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n    operationByUserId varchar(255)   null comment \'操作者userId\',\n    operationByUser   varchar(255)    null comment \'操作者用户名\',\n    operationAt       varchar(255)       null comment \'操作时间; E.g: 2021-05-28T10:24:54+08:00\'\n);\n```\n**生成CRUD页面**\n```shell\n$ cd my-jh-project\n$ jianghu-init crud\n	? 请选择你要生成 crud 的表\n	❯◉ crud_test_table\n	 ◯ student_basic\n	 ✔ 生成 crud_test_table 的 vue 文件完成\n	ℹ 开始生成 crud_test_table 的相关数据\n	ℹ 正在执行 -- 创建 page\n	ℹ 正在执行 -- 创建 resource\n	✔ 生成 crud_test_table 的相关数据完成\n	✔ init crud is success\n```\n\n## 示例五：在项目中生成 3 table 的 CRUD 页面\n\n**首先先在 数据库 内 创建3张表 `class`、`student`、`student_class`**\n```sql\n-- 班级表\nCREATE TABLE `class` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `classId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'班级ID\',\n  `remarks` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'备注\',\n  `classStatus` varchar(255) COLLATE utf8mb4_bin DEFAULT \'active\' COMMENT \'班级状态\',\n  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT \'insert\' COMMENT \'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者userId\',\n  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者用户名\',\n  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作时间; E.g: 2021-05-28T10:24:54+08:00 \',\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=124 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\n\n-- 学生表\nCREATE TABLE `student` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `studentId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生ID\',\n  `name` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生名字\',\n  `gender` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'性别\',\n  `dateOfBirth` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'出生日期\',\n  `bodyHeight` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'身高\',\n  `studentStatus` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生状态\',\n  `remarks` mediumtext COLLATE utf8mb4_bin COMMENT \'备注\',\n  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT \'insert\' COMMENT \'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者userId\',\n  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者用户名\',\n  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作时间; E.g: 2021-05-28T10:24:54+08:00 \',\n  PRIMARY KEY (`id`) USING BTREE,\n  KEY `studentId` (`studentId`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=93 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\n\n-- 学生、班级关联表\nCREATE TABLE `student_class` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `studentId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'学生ID\',\n  `classId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'班级ID\',\n  `operation` varchar(255) COLLATE utf8mb4_bin DEFAULT \'insert\' COMMENT \'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\',\n  `operationByUserId` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者userId\',\n  `operationByUser` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作者用户名\',\n  `operationAt` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL COMMENT \'操作时间; E.g: 2021-05-28T10:24:54+08:00 \',\n  PRIMARY KEY (`id`) USING BTREE,\n  KEY `studentId` (`studentId`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=94 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\n```\n> 注意: 我们的规范是每张数据表需要有一个业务id，比如上面的 classId 和 studentId，然后中间关联表也需要是用这两个字段进行关联的\n\n**创建3-table的CRUD页面**\n```\n$ cd my-jh-project\n$ jianghu-init\n	? Please select a init type crud 3 table - Generate crud page from a db table.\n	✔ 初始化数据库连接成功\n	ℹ 开始生成 CRUD\n	? 请选择你要生成 crud 的表（A表） class\n	? 请输入 class 的名字，如\"文章\" 班级\n	? 请输入 class 表的业务字段 classId\n	? 请选择你要生成 crud 的表（B表） student\n	? 请输入 student 的名字，如\"标签\" 学生\n	? 请输入 student 表的业务字段 studentId\n	? 请输入两表的第三张关联表 student_class\n	ℹ 开始生成 class 的 CRUD\n	✔ 生成 class 的 vue 文件完成\n	✔ 生成 student 的 vue 文件完成\n	✔ 生成 student_class 的 vue 文件完成\n	✔ 生成 student_class 的 vue 文件完成\n	✔ init crud is success\n```\n重启项目, 浏览器打开访问**http://127.0.0.1:prot**, 即可看到新增加的页面。\n\n\n', '<blockquote class=\"default\">\n<p><strong>本文将带大家使用<code>jianghu-init</code></strong></p>\n<ul>\n<li>创建江湖JS项目</li><li>生成CRUD页面</li><li>生成 3-table-CRUD页面</li></ul>\n</blockquote>\n<h2 id=\"h2-u57FAu7840u73AFu5883\"><a class=\"reference-link\" name=\"基础环境\"></a><span class=\"header-link octicon octicon-link\"></span>基础环境</h2><ul>\n<li>操作系统：Windows/macOS/Linux</li><li>运行环境：Node.js v16.x</li><li>数据库环境：Mysql5.7+</li></ul>\n<h2 id=\"h2-u5F00u53D1u5DE5u5177\"><a class=\"reference-link\" name=\"开发工具\"></a><span class=\"header-link octicon octicon-link\"></span>开发工具</h2><ul>\n<li>开发工具: Vscode</li><li>数据库开发工具：navicat</li><li>jianghu-init<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"com\"># 安装最新版本 jianghu-init</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ npm install </span><span class=\"pun\">-</span><span class=\"pln\">g jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init@latest</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"com\"># 查看版本</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">$ npm list jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init </span><span class=\"pun\">-</span><span class=\"pln\">g</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u6C5Fu6E56jsu9879u76EE-u76EEu5F55u7ED3u6784\"><a class=\"reference-link\" name=\"江湖JS项目-目录结构\"></a><span class=\"header-link octicon octicon-link\"></span>江湖JS项目-目录结构</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> config                                                </span><span class=\"com\"># egg config</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"kwd\">default</span><span class=\"pun\">.</span><span class=\"pln\">js                            </span><span class=\"com\"># default config                    </span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"kwd\">local</span><span class=\"pun\">.</span><span class=\"pln\">js                               </span><span class=\"com\"># npm run dev 时使用的 config</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"pln\">prod</span><span class=\"pun\">.</span><span class=\"pln\">js                               </span><span class=\"com\"># npm run start 时使用的 config</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"pln\">unittest</span><span class=\"pun\">.</span><span class=\"pln\">js                           </span><span class=\"com\"># npm run test 时使用的 config</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> plugin</span><span class=\"pun\">.</span><span class=\"pln\">js                                      </span><span class=\"com\"># egg插件配置</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> app </span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> common                                       </span><span class=\"com\"># 项目的常用工具、静态方法等    </span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> constant                                       </span><span class=\"com\"># 常量   </span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> constant</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> error</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> controller                                     </span><span class=\"com\"># 对外暴露接口 </span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> </span><span class=\"kwd\">public</span><span class=\"pln\">                                          </span><span class=\"com\"># 静态资源目录 </span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> schedule                                      </span><span class=\"com\"># 定时任务; 参考https://www.eggjs.org/zh-CN/basics/schedule</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> service                                         </span><span class=\"com\"># 应用协议service目录</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> view                                            </span><span class=\"com\"># 页面存放目录</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> app</span><span class=\"pun\">.</span><span class=\"pln\">js                                                </span><span class=\"com\"># 自定义启动时的初始化工作</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> jsconfig</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> </span><span class=\"kwd\">package</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> sql                                                    </span><span class=\"com\"># sql文件</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> init</span><span class=\"pun\">.</span><span class=\"pln\">sql</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">└──</span><span class=\"pln\"> upload                                              </span><span class=\"com\"># 文件的保存路径(文件上传业务)</span></code></li></ol></pre>\n<h2 id=\"h2-u793Au4F8Bu4E00uFF1Au521Bu5EFAu4E00u4E2Au72ECu7ACBu5E94u7528u9879u76EE28u5355u5E94u752829\"><a class=\"reference-link\" name=\"示例一：创建一个独立应用项目(单应用)\"></a><span class=\"header-link octicon octicon-link\"></span>示例一：创建一个独立应用项目(单应用)</h2><p><strong>创建项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init project </span><span class=\"pun\">--</span><span class=\"pln\">type</span><span class=\"pun\">=</span><span class=\"pln\">xiaoapp </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库</span><span class=\"pln\">IP</span><span class=\"pun\">：</span><span class=\"pln\"> </span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库端口：</span><span class=\"pln\"> </span><span class=\"lit\">3306</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库账号：</span><span class=\"pln\"> root</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库密码：</span><span class=\"lit\">123456</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">94.39</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> usage</span><span class=\"pun\">:</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd </span><span class=\"pun\">/</span><span class=\"pln\">xxx</span><span class=\"pun\">/</span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm install</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm start </span><span class=\"pun\">/</span><span class=\"pln\"> npm run dev</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> jianghu init project </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<p><strong>启动项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ npm install</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">$ npm run dev</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">index</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">9ms</span><span class=\"pun\">)</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">plugin</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">1ms</span><span class=\"pun\">)</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">/</span><span class=\"pln\">service</span><span class=\"pun\">/</span><span class=\"pln\">index</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">1ms</span><span class=\"pun\">)</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">ts</span><span class=\"pun\">-</span><span class=\"pln\">helper</span><span class=\"pun\">]</span><span class=\"pln\"> create typings</span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">/</span><span class=\"pln\">index</span><span class=\"pun\">.</span><span class=\"pln\">d</span><span class=\"pun\">.</span><span class=\"pln\">ts </span><span class=\"pun\">(</span><span class=\"lit\">0ms</span><span class=\"pun\">)</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">21</span><span class=\"pun\">,</span><span class=\"lit\">076</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> node version v16</span><span class=\"pun\">.</span><span class=\"lit\">13.0</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">21</span><span class=\"pun\">,</span><span class=\"lit\">077</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> egg</span><span class=\"pun\">-</span><span class=\"pln\">jianghu version </span><span class=\"lit\">1.1</span><span class=\"pun\">.</span><span class=\"lit\">91</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"typ\">Debugger</span><span class=\"pln\"> attached</span><span class=\"pun\">.</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">22</span><span class=\"pun\">,</span><span class=\"lit\">168</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> agent_worker</span><span class=\"com\">#1:30785 started (1090ms)</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"typ\">Debugger</span><span class=\"pln\"> attached</span><span class=\"pun\">.</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">23</span><span class=\"pun\">,</span><span class=\"lit\">375</span><span class=\"pln\"> INFO </span><span class=\"lit\">30789</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">socket</span><span class=\"pun\">.</span><span class=\"pln\">io</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">启动成功</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> pid</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">30789</span><span class=\"pun\">,</span><span class=\"pln\"> path</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'/socket.io\'</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">04</span><span class=\"pun\">-</span><span class=\"lit\">25</span><span class=\"pln\"> </span><span class=\"lit\">22</span><span class=\"pun\">:</span><span class=\"lit\">12</span><span class=\"pun\">:</span><span class=\"lit\">23</span><span class=\"pun\">,</span><span class=\"lit\">382</span><span class=\"pln\"> INFO </span><span class=\"lit\">30774</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> egg</span><span class=\"pun\">-</span><span class=\"pln\">jianghu started on http</span><span class=\"pun\">:</span><span class=\"com\">//127.0.0.1:7001 (2305ms)</span></code></li></ol></pre>\n<p>浏览器打开访问<strong><a href=\"http://127.0.0.1:7001\">http://127.0.0.1:7001</a></strong>, 用户名<code>admin</code> 密码<code>123456</code></p>\n<h2 id=\"h2-u793Au4F8Bu4E8CuFF1Au521Bu5EFAu4E00u4E2Au591Au5E94u7528u9879u76EE\"><a class=\"reference-link\" name=\"示例二：创建一个多应用项目\"></a><span class=\"header-link octicon octicon-link\"></span>示例二：创建一个多应用项目</h2><p><strong>创建项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init project  </span><span class=\"pun\">--</span><span class=\"pln\">type</span><span class=\"pun\">=</span><span class=\"pln\">multi </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库</span><span class=\"pln\">IP</span><span class=\"pun\">：</span><span class=\"pln\"> </span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库端口：</span><span class=\"pln\"> </span><span class=\"lit\">3306</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库账号：</span><span class=\"pln\"> root</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">数据库密码：</span><span class=\"lit\">123456</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> data_repository</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">59.61</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">93.26</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> user_app_management</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">95.47</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> directory</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">93.95</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> usage</span><span class=\"pun\">:</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd </span><span class=\"pun\">/</span><span class=\"pln\">xxx</span><span class=\"pun\">/</span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> ls</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd your_app</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm install</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm start </span><span class=\"pun\">/</span><span class=\"pln\"> npm run dev</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> jianghu init project </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<p><strong>启动项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sehll\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L1\"><code class=\"language-sehll\"></code></li><li class=\"L2\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">data_repository install</span></code></li><li class=\"L3\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">data_repository run dev</span></code></li><li class=\"L4\"><code class=\"language-sehll\"></code></li><li class=\"L5\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">user_app_management install</span></code></li><li class=\"L6\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">user_app_management run dev</span></code></li><li class=\"L7\"><code class=\"language-sehll\"></code></li><li class=\"L8\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">directory install</span></code></li><li class=\"L9\"><code class=\"language-sehll\"><span class=\"pln\">$ npm </span><span class=\"pun\">--</span><span class=\"pln\">prefix</span><span class=\"pun\">=</span><span class=\"pln\">directory  run dev</span></code></li></ol></pre>\n<p>浏览器打开访问<strong><a href=\"http://127.0.0.1:prot\">http://127.0.0.1:prot</a></strong>, 用户名<code>admin</code> 密码<code>123456</code></p>\n<blockquote class=\"default\">\n<p>注意: data_repository是一个数据库工具类项目, 严格来说不属于多应用中的项目。</p>\n</blockquote>\n<h2 id=\"h2-u793Au4F8Bu4E09uFF1Au5728u4E00u4E2Au591Au5E94u7528u4E0Bu521Bu5EFAu4E00u4E2Au65B0u5E94u7528\"><a class=\"reference-link\" name=\"示例三：在一个多应用下创建一个新应用\"></a><span class=\"header-link octicon octicon-link\"></span>示例三：在一个多应用下创建一个新应用</h2><p><strong>创建项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"com\"># 进入已有的多应用项目</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"com\"># 创建新应用</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init project </span><span class=\"pun\">--</span><span class=\"pln\">type</span><span class=\"pun\">=</span><span class=\"pln\">xiaoapp</span><span class=\"pun\">-</span><span class=\"kwd\">in</span><span class=\"pun\">-</span><span class=\"pln\">multi demo_xiaoapp</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">目录切换</span><span class=\"pln\"> demo_xiaoapp</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">         </span><span class=\"pun\">[</span><span class=\"pln\">mysql importer</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"lit\">94.45</span><span class=\"pun\">%</span><span class=\"pln\"> </span><span class=\"typ\">Completed</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化</span><span class=\"str\">`数据库基本表和数据`</span><span class=\"pun\">完成</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> usage</span><span class=\"pun\">:</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> cd </span><span class=\"pun\">/</span><span class=\"pln\">xxx</span><span class=\"pun\">/</span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span><span class=\"pun\">/</span><span class=\"pln\">demo_xiaoapp</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm install</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">          </span><span class=\"pun\">-</span><span class=\"pln\"> npm start </span><span class=\"pun\">/</span><span class=\"pln\"> npm run dev</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> jianghu init project </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pun\">...</span></code></li></ol></pre>\n<p><strong>启动项目</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span><span class=\"pun\">-</span><span class=\"pln\">mutil</span><span class=\"pun\">/</span><span class=\"pln\">demo_xiaoapp</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ npm install</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">$ npm run dev</span></code></li></ol></pre>\n<p>浏览器打开访问<strong><a href=\"http://127.0.0.1:prot\">http://127.0.0.1:prot</a></strong>, 用户名<code>admin</code> 密码<code>123456</code></p>\n<h2 id=\"h2-u793Au4F8Bu56DBuFF1Au5728u9879u76EEu4E2Du751Fu6210u4E2Du751Fu6210crudu9875u9762\"><a class=\"reference-link\" name=\"示例四：在项目中生成中生成CRUD页面\"></a><span class=\"header-link octicon octicon-link\"></span>示例四：在项目中生成中生成CRUD页面</h2><p><strong>首先先在 数据库 内 创建一个测试表 <code>crud_test_table</code></strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">create table article </span><span class=\"pun\">(</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">    id                </span><span class=\"kwd\">int</span><span class=\"pln\"> auto_increment primary key</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">    title             varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">                  </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'标题\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">    content       varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">                   </span><span class=\"kwd\">not</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'内容\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">    operation     varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"kwd\">default</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作: insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">    operationByUserId varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">   </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">    operationByUser   varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">    </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">    operationAt       varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\">       </span><span class=\"kwd\">null</span><span class=\"pln\"> comment </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00\'</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pun\">);</span></code></li></ol></pre>\n<p><strong>生成CRUD页面</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init crud</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请选择你要生成</span><span class=\"pln\"> crud </span><span class=\"pun\">的表</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">❯◉</span><span class=\"pln\"> crud_test_table</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">     </span><span class=\"pun\">◯</span><span class=\"pln\"> student_basic</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">     </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> crud_test_table </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">开始生成</span><span class=\"pln\"> crud_test_table </span><span class=\"pun\">的相关数据</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">正在执行</span><span class=\"pln\"> </span><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">创建</span><span class=\"pln\"> page</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">正在执行</span><span class=\"pln\"> </span><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">创建</span><span class=\"pln\"> resource</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> crud_test_table </span><span class=\"pun\">的相关数据完成</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> init crud </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<h2 id=\"h2-u793Au4F8Bu4E94uFF1Au5728u9879u76EEu4E2Du751Fu6210320table20u768420crud20u9875u9762\"><a class=\"reference-link\" name=\"示例五：在项目中生成 3 table 的 CRUD 页面\"></a><span class=\"header-link octicon octicon-link\"></span>示例五：在项目中生成 3 table 的 CRUD 页面</h2><p><strong>首先先在 数据库 内 创建3张表 <code>class</code>、<code>student</code>、<code>student_class</code></strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">班级表</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">CREATE TABLE </span><span class=\"str\">`class`</span><span class=\"pln\"> </span><span class=\"pun\">(</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`classId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'班级ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`remarks`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'备注\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`classStatus`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'active\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'班级状态\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">  PRIMARY KEY </span><span class=\"pun\">(</span><span class=\"str\">`id`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">)</span><span class=\"pln\"> ENGINE</span><span class=\"pun\">=</span><span class=\"typ\">InnoDB</span><span class=\"pln\"> AUTO_INCREMENT</span><span class=\"pun\">=</span><span class=\"lit\">124</span><span class=\"pln\"> DEFAULT CHARSET</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4 COLLATE</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-sql\"></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">学生表</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">CREATE TABLE </span><span class=\"str\">`student`</span><span class=\"pln\"> </span><span class=\"pun\">(</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`studentId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`name`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生名字\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`gender`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'性别\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`dateOfBirth`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'出生日期\'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`bodyHeight`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'身高\'</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`studentStatus`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生状态\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`remarks`</span><span class=\"pln\"> mediumtext COLLATE utf8mb4_bin COMMENT </span><span class=\"str\">\'备注\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  PRIMARY KEY </span><span class=\"pun\">(</span><span class=\"str\">`id`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  KEY </span><span class=\"str\">`studentId`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`studentId`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pun\">)</span><span class=\"pln\"> ENGINE</span><span class=\"pun\">=</span><span class=\"typ\">InnoDB</span><span class=\"pln\"> AUTO_INCREMENT</span><span class=\"pun\">=</span><span class=\"lit\">93</span><span class=\"pln\"> DEFAULT CHARSET</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4 COLLATE</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-sql\"></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pun\">--</span><span class=\"pln\"> </span><span class=\"pun\">学生、班级关联表</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pln\">CREATE TABLE </span><span class=\"str\">`student_class`</span><span class=\"pln\"> </span><span class=\"pun\">(</span></code></li><li class=\"L3\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`id`</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pun\">(</span><span class=\"lit\">11</span><span class=\"pun\">)</span><span class=\"pln\"> NOT NULL AUTO_INCREMENT</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`studentId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'学生ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`classId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'班级ID\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operation`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT </span><span class=\"str\">\'insert\'</span><span class=\"pln\"> COMMENT </span><span class=\"str\">\'操作; insert, update, jhInsert, jhUpdate, jhDelete jhRestore\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUserId`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者userId\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationByUser`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作者用户名\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-sql\"><span class=\"pln\">  </span><span class=\"str\">`operationAt`</span><span class=\"pln\"> varchar</span><span class=\"pun\">(</span><span class=\"lit\">255</span><span class=\"pun\">)</span><span class=\"pln\"> COLLATE utf8mb4_bin DEFAULT NULL COMMENT </span><span class=\"str\">\'操作时间; E.g: 2021-05-28T10:24:54+08:00 \'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-sql\"><span class=\"pln\">  PRIMARY KEY </span><span class=\"pun\">(</span><span class=\"str\">`id`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-sql\"><span class=\"pln\">  KEY </span><span class=\"str\">`studentId`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`studentId`</span><span class=\"pun\">)</span><span class=\"pln\"> USING BTREE</span></code></li><li class=\"L2\"><code class=\"language-sql\"><span class=\"pun\">)</span><span class=\"pln\"> ENGINE</span><span class=\"pun\">=</span><span class=\"typ\">InnoDB</span><span class=\"pln\"> AUTO_INCREMENT</span><span class=\"pun\">=</span><span class=\"lit\">94</span><span class=\"pln\"> DEFAULT CHARSET</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4 COLLATE</span><span class=\"pun\">=</span><span class=\"pln\">utf8mb4_bin</span><span class=\"pun\">;</span></code></li></ol></pre>\n<blockquote class=\"default\">\n<p>注意: 我们的规范是每张数据表需要有一个业务id，比如上面的 classId 和 studentId，然后中间关联表也需要是用这两个字段进行关联的</p>\n</blockquote>\n<p><strong>创建3-table的CRUD页面</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">$ cd </span><span class=\"kwd\">my</span><span class=\"pun\">-</span><span class=\"pln\">jh</span><span class=\"pun\">-</span><span class=\"pln\">project</span></code></li><li class=\"L1\"><code><span class=\"pln\">$ jianghu</span><span class=\"pun\">-</span><span class=\"pln\">init</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"typ\">Please</span><span class=\"pln\"> </span><span class=\"kwd\">select</span><span class=\"pln\"> a init type crud </span><span class=\"lit\">3</span><span class=\"pln\"> table </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"typ\">Generate</span><span class=\"pln\"> crud page </span><span class=\"kwd\">from</span><span class=\"pln\"> a db table</span><span class=\"pun\">.</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">初始化数据库连接成功</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">开始生成</span><span class=\"pln\"> CRUD</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请选择你要生成</span><span class=\"pln\"> crud </span><span class=\"pun\">的表（</span><span class=\"pln\">A</span><span class=\"pun\">表）</span><span class=\"pln\"> </span><span class=\"kwd\">class</span></code></li><li class=\"L6\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">的名字，如</span><span class=\"str\">\"文章\"</span><span class=\"pln\"> </span><span class=\"pun\">班级</span></code></li><li class=\"L7\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">表的业务字段</span><span class=\"pln\"> classId</span></code></li><li class=\"L8\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请选择你要生成</span><span class=\"pln\"> crud </span><span class=\"pun\">的表（</span><span class=\"pln\">B</span><span class=\"pun\">表）</span><span class=\"pln\"> student</span></code></li><li class=\"L9\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> student </span><span class=\"pun\">的名字，如</span><span class=\"str\">\"标签\"</span><span class=\"pln\"> </span><span class=\"pun\">学生</span></code></li><li class=\"L0\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入</span><span class=\"pln\"> student </span><span class=\"pun\">表的业务字段</span><span class=\"pln\"> studentId</span></code></li><li class=\"L1\"><code><span class=\"pln\">    </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"pun\">请输入两表的第三张关联表</span><span class=\"pln\"> student_class</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"pun\">ℹ</span><span class=\"pln\"> </span><span class=\"pun\">开始生成</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">的</span><span class=\"pln\"> CRUD</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> student </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> student_class </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L6\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> </span><span class=\"pun\">生成</span><span class=\"pln\"> student_class </span><span class=\"pun\">的</span><span class=\"pln\"> vue </span><span class=\"pun\">文件完成</span></code></li><li class=\"L7\"><code><span class=\"pln\">    </span><span class=\"pun\">✔</span><span class=\"pln\"> init crud </span><span class=\"kwd\">is</span><span class=\"pln\"> success</span></code></li></ol></pre>\n<p>重启项目, 浏览器打开访问<strong><a href=\"http://127.0.0.1:prot\">http://127.0.0.1:prot</a></strong>, 即可看到新增加的页面。</p>\n', NULL, NULL, NULL, '', '2022-04-23T21:30:25+08:00', 'W00001', '张三丰', '2022-04-30T12:43:42+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T12:43:42+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1461, 10047, '10004', '06框架进阶', '', 'public', '2022-04-23T21:30:51+08:00', 'socketio', NULL, '## socketio 使用', '<h2 id=\"h2-socketiou4F7Fu7528\"><a class=\"reference-link\" name=\"socketio 使用\"></a><span class=\"header-link octicon octicon-link\"></span>socketio 使用</h2>', NULL, NULL, NULL, '', '2022-04-23T21:30:52+08:00', 'W00001', '张三丰', '2022-04-30T13:06:10+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-30T13:06:10+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1462, 10048, '10004', '06框架进阶', '', 'public', '2022-04-23T21:31:28+08:00', 'egg-jianghu', NULL, '[egg-jianghu Github](https://github.com/fsll-tech/egg-jianghu)\n\n- 渐进式开发：应用内代码，path插件，package插件，框架\n- koa中间件：洋葱圈，错误处理-打包解包-鉴权-应用协议\n- Loader：加载的文件，Controller，Service，Schedule 等\n\n## 目录\n\n```yml\n├── README.md\n├── app\n│   ├── common\n│   │   ├── commonUtil.js\n│   │   ├── fileUtil.js\n│   │   ├── idGenerateUtil.js\n│   │   ├── jianghuKnexUtil.js\n│   │   └── validateUtil.js\n│   ├── constant\n│   │   ├── constant.js\n│   │   └── error.js\n│   ├── controller\n│   │   ├── controllerUtil\n│   │   │   └── resourceUtil.js\n│   │   ├── page.js\n│   │   ├── pageDoc.js\n│   │   ├── resource.js\n│   │   └── socketResource.js\n│   ├── middleware\n│   │   ├── downloadUserInfo.js\n│   │   ├── httpAuthorization.js\n│   │   ├── httpPackage.js\n│   │   ├── httpResourceHook.js\n│   │   ├── httpUserInfo.js\n│   │   ├── middlewareUtil\n│   │   │   ├── packageUtil.js\n│   │   │   └── userInfoUtil.js\n│   │   ├── pageAuthorization.js\n│   │   ├── pageDocAuthorization.js\n│   │   ├── pageDocPackage.js\n│   │   ├── pageDocUserInfo.js\n│   │   ├── pageHook.js\n│   │   ├── pagePackage.js\n│   │   ├── pageUserInfo.js\n│   │   ├── socketAuthorization.js\n│   │   ├── socketPackage.js\n│   │   ├── socketPackageRecord.js\n│   │   ├── socketResourceAfterHook.js\n│   │   ├── socketResourceBeforeHook.js\n│   │   ├── socketUserInfo.js\n│   │   ├── xiaochengxuAuthorization.js\n│   │   ├── xiaochengxuPackage.js\n│   │   ├── xiaochengxuPackageRecord.js\n│   │   ├── xiaochengxuPageAuthorization.js\n│   │   ├── xiaochengxuPagePackage.js\n│   │   ├── xiaochengxuResourceAfterHook.js\n│   │   ├── xiaochengxuResourceBeforeHook.js\n│   │   └── xiaochengxuUserInfo.js\n│   ├── public\n│   │   ├── css\n│   │   │   ├── global.css\n│   │   │   ├── materialdesignicons.css\n│   │   │   ├── materialdesignicons.css.map\n│   │   │   ├── materialdesignicons.min.css\n│   │   │   ├── materialdesignicons.min.css.map\n│   │   │   ├── vuetify.custom.css\n│   │   │   └── vuetify.min.css\n│   │   ├── fonts\n│   │   │   ├── materialdesignicons-webfont.eot\n│   │   │   ├── materialdesignicons-webfont.ttf\n│   │   │   ├── materialdesignicons-webfont.woff\n│   │   │   └── materialdesignicons-webfont.woff2\n│   │   ├── img\n│   │   │   └── logo.svg\n│   │   └── js\n│   │       └── lib\n│   │           ├── axios.min.js\n│   │           ├── clipboard.min.js\n│   │           ├── crypto-js.min.js\n│   │           ├── dayjs.min.js\n│   │           ├── jsencrypt.js\n│   │           ├── lodash.min.js\n│   │           ├── recorder.js\n│   │           ├── socket.io.js\n│   │           ├── spark-md5.js\n│   │           ├── vue.js\n│   │           ├── vuetify.js\n│   │           ├── vuetify.js.map\n│   │           └── vuetify.min.js\n│   ├── router.js\n│   ├── schedule\n│   │   ├── README.md\n│   │   ├── syncDataToCache.js\n│   │   └── syncSocketStatus.js\n│   ├── service\n│   │   ├── file.js\n│   │   └── user.js\n│   └── view\n│       ├── common\n│       │   ├── jianghuAxios.html\n│       │   ├── resetTableMaxHeight.html\n│       │   └── uiAction.html\n│       ├── component\n│       │   ├── jhConfirmDialog.html\n│       │   └── jhToast.html\n│       ├── index.html\n│       ├── layout\n│       │   └── jhLayout.html\n│       ├── page\n│       │   ├── help.html\n│       │   ├── login.html\n│       │   └── manual.html\n│       ├── pageDoc\n│       │   └── index.html\n│       └── template\n│           └── jhTemplate.html\n├── app.js\n├── config\n│   ├── config.default.js\n│   ├── middlewareConfig.js\n│   └── plugin.js\n├── index.js\n├── lib\n│   └── framework.js\n├── package.json\n```\n\n\n## middleware解读\n\n### resource解读', '<p><a href=\"https://github.com/fsll-tech/egg-jianghu\">egg-jianghu Github</a></p>\n<ul>\n<li>渐进式开发：应用内代码，path插件，package插件，框架</li><li>koa中间件：洋葱圈，错误处理-打包解包-鉴权-应用协议</li><li>Loader：加载的文件，Controller，Service，Schedule 等</li></ul>\n<h2 id=\"h2-u76EEu5F55\"><a class=\"reference-link\" name=\"目录\"></a><span class=\"header-link octicon octicon-link\"></span>目录</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> README</span><span class=\"pun\">.</span><span class=\"pln\">md</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> app</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> common</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> commonUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> fileUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> idGenerateUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> jianghuKnexUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> validateUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> constant</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> constant</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> error</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> controller</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> controllerUtil</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> resourceUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> page</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pageDoc</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> resource</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> socketResource</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> middleware</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> downloadUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> httpAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> httpPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> httpResourceHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> httpUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> middlewareUtil</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> packageUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> userInfoUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pageAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pageDocAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pageDocPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pageDocUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pageHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pagePackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> pageUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> socketAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> socketPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> socketPackageRecord</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> socketResourceAfterHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> socketResourceBeforeHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> socketUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPackageRecord</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPageAuthorization</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuPagePackage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuResourceAfterHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> xiaochengxuResourceBeforeHook</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> xiaochengxuUserInfo</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> </span><span class=\"kwd\">public</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> css</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> </span><span class=\"kwd\">global</span><span class=\"pun\">.</span><span class=\"pln\">css</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">.</span><span class=\"pln\">css</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">.</span><span class=\"pln\">css</span><span class=\"pun\">.</span><span class=\"pln\">map</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">css</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">css</span><span class=\"pun\">.</span><span class=\"pln\">map</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> vuetify</span><span class=\"pun\">.</span><span class=\"pln\">custom</span><span class=\"pun\">.</span><span class=\"pln\">css</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> vuetify</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">css</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> fonts</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">-</span><span class=\"pln\">webfont</span><span class=\"pun\">.</span><span class=\"pln\">eot</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">-</span><span class=\"pln\">webfont</span><span class=\"pun\">.</span><span class=\"pln\">ttf</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">-</span><span class=\"pln\">webfont</span><span class=\"pun\">.</span><span class=\"pln\">woff</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> materialdesignicons</span><span class=\"pun\">-</span><span class=\"pln\">webfont</span><span class=\"pun\">.</span><span class=\"pln\">woff2</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> img</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> logo</span><span class=\"pun\">.</span><span class=\"pln\">svg</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">└──</span><span class=\"pln\"> lib</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> axios</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> clipboard</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> crypto</span><span class=\"pun\">-</span><span class=\"pln\">js</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> dayjs</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> jsencrypt</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> lodash</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> recorder</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> socket</span><span class=\"pun\">.</span><span class=\"pln\">io</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> spark</span><span class=\"pun\">-</span><span class=\"pln\">md5</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> vue</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> vuetify</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">├──</span><span class=\"pln\"> vuetify</span><span class=\"pun\">.</span><span class=\"pln\">js</span><span class=\"pun\">.</span><span class=\"pln\">map</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">└──</span><span class=\"pln\"> vuetify</span><span class=\"pun\">.</span><span class=\"pln\">min</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> router</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> schedule</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> README</span><span class=\"pun\">.</span><span class=\"pln\">md</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> syncDataToCache</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> syncSocketStatus</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> service</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> user</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> view</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">├──</span><span class=\"pln\"> common</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> jianghuAxios</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> resetTableMaxHeight</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> uiAction</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">├──</span><span class=\"pln\"> component</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> jhConfirmDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> jhToast</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">├──</span><span class=\"pln\"> index</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">├──</span><span class=\"pln\"> layout</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> jhLayout</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">├──</span><span class=\"pln\"> page</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> help</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> login</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> manual</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">├──</span><span class=\"pln\"> pageDoc</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> index</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;     </span><span class=\"pun\">└──</span><span class=\"pln\"> </span><span class=\"kwd\">template</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp;         </span><span class=\"pun\">└──</span><span class=\"pln\"> jhTemplate</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> app</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> config</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span><span class=\"pun\">.</span><span class=\"kwd\">default</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">├──</span><span class=\"pln\"> middlewareConfig</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> plugin</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> index</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> lib</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pun\">│</span><span class=\"pln\">&nbsp;&nbsp; </span><span class=\"pun\">└──</span><span class=\"pln\"> framework</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pun\">├──</span><span class=\"pln\"> </span><span class=\"kwd\">package</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li></ol></pre>\n<h2 id=\"h2-middlewareu89E3u8BFB\"><a class=\"reference-link\" name=\"middleware解读\"></a><span class=\"header-link octicon octicon-link\"></span>middleware解读</h2><h3 id=\"h3-resourceu89E3u8BFB\"><a class=\"reference-link\" name=\"resource解读\"></a><span class=\"header-link octicon octicon-link\"></span>resource解读</h3>', NULL, NULL, NULL, '', '2022-04-23T21:31:28+08:00', 'W00001', '张三丰', '2022-06-12T04:56:11+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-12T04:56:11+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1463, 10049, '10004', '06框架进阶', '', 'public', '2022-04-23T21:32:02+08:00', '客户端集成（flutter，electron）', NULL, '## 消息推送\nApp 端在接受到socket推送的消息后，发送到手机本地通知\n - ### 参考示例\n```\n	channel.on(\'resource\', (message) {\n      String pageId = message[\'data\'][\'pageId\'];\n      String actionId = message[\'data\'][\'actionId\'];\n      if (pageId == \'socket\' && actionId == \'connect\') {\n        onLine = true;\n        NotificationUtils.instance().showNotification({\"title\": \'在线\', \"message\": null}, channelId: \'background_service\');\n      }\n    });\n```\n\n##  文件上传\nflutter端会读取手机的文件。并转为base64发送给页面js端接收后，给页面端使用\n - ### 参考示例\n```\n	// 选择文件\n  Future<void> filePicker(context, result) async {\n    FilePickerResult fileResult = await FilePicker.platform.pickFiles();\n    if (fileResult.files.length > 0) {\n      sendBase64ToWeb(context, \'filePickerResultBack\', actionTime: \"${result[\'actionTime\']}\", file: File(fileResult.files[0].path));\n    }\n  }\n  // 选择图片\n  void imagePicker(BuildContext context, Map result) {\n    CameraOrGallery.showModalBottomSheetOpen(context, (List<File> file) async {\n      if (file.length > 0) {\n        // File newFile = await ImageCompressUtil().imageCompressAndGetFile(file.first);\n        sendBase64ToWeb(context, \'filePickerResultBack\', actionTime: \"${result[\'actionTime\']}\", file: file.first);\n      }\n    });\n  }\n  // 发送文件base64到web端\n  void sendBase64ToWeb(context, jsMethod, {String actionTime, File file, String isBase64}) async {\n    int fileSize = file.lengthSync();\n    var name = file.path.substring(file.path.lastIndexOf(\"/\") + 1, file.path.length);\n    var suffix = file.path.substring(file.path.lastIndexOf(\".\"), file.path.length);\n    MediaType mediaType = DioUtils.getMediaType(suffix);\n    // 大小限制，太大的通过flutter上传\n    if (fileSize < 50 * 1024 * 1024) {\n      String method = \"$jsMethod(\'$actionTime\', \'$name\', \'\', true)\";\n      await controller.runJavascript(method);\n      if (isBase64 == null) {\n        List bytes = await file.readAsBytes();\n        isBase64 = base64Encode(bytes);\n      }\n      method = \"$jsMethod(\'$actionTime\', \'$name\', \'data:${mediaType.type}/${mediaType.subtype};base64,$isBase64\')\";\n      await controller.runJavascript(method);\n    }\n  }\n```\n\n## 下载与打开\n - App和桌面会接管页面的下载请求，并且在界面中有下载进度和下载文件管理列表\n - ### App参考示例\n```\n	await DownloadUtils.downloadFile(context, result: result); // 启动下载\n	downListSetState(() {}); // 下载状态更新\n	static Future<void> downloadFile(BuildContext context, {Map result}) async {\n		String fileUrl = result[\'downloadPath\'];\n		String fileName = result[\'filename\'];\n		String downloadUrl = \'${Constants.hostUrl}/appId/upload$fileUrl\';\n		String path = await AndroidPathProvider.downloadsPath;\n		Directory savePath = Directory(\"$path/appId\");\n		if(!savePath.existsSync()) {\n		  savePath.createSync();\n		}\n		String fullPath = \"${savePath.path}/$fileName\";\n		if(File(fullPath).existsSync()) {\n		  // 下载过的文件。直接打开\n		  OpenFile.open(fullPath);\n		  return;\n		}\n		try {\n		  Response response = await Dio().get(\n			downloadUrl,\n			onReceiveProgress: (int count, int total) {\n			  String method = \"someProgress(\'${result[\'actionTime\']}\', \'${count / total * 100}\')\";\n			  JavascriptUtils.instance().controller.runJavascript(method);\n			  print(\"下载进度${count / total * 100}\");\n			},\n			//Received data with List<int>\n			options: Options(\n				responseType: ResponseType.bytes, // 下载数据流\n				followRedirects: false,\n				validateStatus: (status) {\n				  return status < 500;\n				}),\n		  );\n		  File file = File(fullPath);\n		  // 写入数据流到本地文件\n		  var raf = file.openSync(mode: FileMode.write);\n		  // response.data is List<int> type\n		  raf.writeFromSync(response.data);\n		  await raf.close();\n		  // 打开下载的文件\n		  OpenFile.open(fullPath);\n		} catch (e) {\n		  print(e);\n		}\n	}\n```\n - macos App、exe参考示例\n```\n// renderer.js中下载监听\n    ipcRenderer.on(\'downloadStart\', async(event, message) => {\n        downloadTasks.push(message)\n        renderDownloadUI();\n    })\n	ipcRenderer.on(\'downloadProgress\', async(event, message) => {\n        const nowItemIndex = downloadTasks.findIndex(item => item.timehander === message.timehander)\n        downloadTasks[nowItemIndex].progress = message.progress;\n        renderDownloadUI();\n    })\n    ipcRenderer.on(\'downloadDone\', async(event, message) => {\n        const nowItemIndex = downloadTasks.findIndex(item => item.timehander === message.timehander)\n        downloadTasks[nowItemIndex].progress = message.progress;\n        renderDownloadUI();\n    })\n	// main.js 中接管下载请求\n	mainWindow.webContents.on(\'did-finish-load\', () => {\n        downloadHandle(mainWindow.webContents);\n    })\n	function downloadHandle(webContents) {\n		webContents.session.on(\'will-download\', (event, item, _webContents) => {\n			willDownload = true;\n			//设置文件存放位置，如果用户没有设置保存路径，Electron将使用默认方式来确定保存路径（通常会提示保存对话框）\n			const savePath = `${global.downloadPath}/${item.getFilename()}`;\n			item.setSavePath(savePath)\n			const timehander = new Date().getTime();\n			webContents.send(\"downloadStart\", { downloadPath: global.downloadPath, savePath, timehander, filename: item.getFilename(), progress: 0 });\n			item.on(\'updated\', (event, state) => {\n				if (state === \'interrupted\') {\n					// Download is interrupted but can be resumed\n				} else if (state === \'progressing\') {\n					if (item.isPaused()) {\n						// Download is paused\n					} else {\n						try {\n						// 发送给UI更新下载进度\n							webContents.send(\"downloadProgress\", { downloadPath: global.downloadPath, savePath, timehander, filename: item.getFilename(), progress: item.getReceivedBytes() / item.getTotalBytes() })\n						} catch (err) {}\n					}\n				}\n			})\n			item.on(\'done\', (event, state) => {\n				if (state === \'completed\') {\n					if (willDownload) {\n						willDownload = false;\n						// 下载完成回调UI渲染\n						webContents.send(\"downloadDone\", { downloadPath: global.downloadPath, savePath, timehander, filename: item.getFilename(), progress: 1 })\n					}\n				} else {\n					downloaded = false;\n					console.log(`Download failed: ${state}`)\n					// 回显 调用渲染进程方法\n					_webContents.send(\'downstate\', state)\n				}\n			})\n		})\n	}\n```\n\n## webview互动\n- js可以通过webView发送数据给flutter，进行一些APP端可以运行的操作\n\n- ### 参考示例（web 给 flutter 传数据）\n```\n// flutter端\nreturn WebView(\n	initialUrl: url,\n	onWebViewCreated: (WebViewController webViewController) {\n		JavascriptUtils.instance().controller = webViewController;\n	},\n	javascriptChannels: <JavascriptChannel>{\n		return JavascriptChannel(\n			name: \'DuoxingApp\', // 在web端全局注册此Channels，web端可以直接调用 DuoxingApp.postMessage 给flutter 发送消息了\n			onMessageReceived: (JavascriptMessage message) async {\n				Map result = jsonDecode(message.message);\n				if (result.containsKey(\'action\')) {\n					switch (result[\'action\']) {\n						case \'openLink\':\n							// 接收到连接后，在手机浏览器中打开连接\n							break;\n						case \'downloadFile\':\n							// 可以通过flutter下载文件到手机目录中，\n							// 可以管理下载的文件列表\n							break;\n						case \'startRecord\':\n							// 可以录音，并回传给web端\n							break;\n						case \'imagePicker\':\n							// 可以选择手机上的图片，处理后回传\n							break;\n						case \'imageSaveToAlbum\':\n							// 可以发送图片给flutter保存到手机相册中\n							break;\n						case \'notice\': // 消息通知\n							// 可以发送本地手机通知消息\n							break;\n					}\n				}\n			}\n		)\n	},\n)\n// web端\n// 通过 DuoxingApp.postMessage(`${JSON.stringify(params)}`); 给flutter 发送消息了\nfunction checkIsApp() {\n    try {\n      isApp = !!DuoxingApp; // 判断当前是否子APP中运行的网页\n    } catch (e) {\n      isApp = false;\n    }\n    window.isApp = isApp\n  }\n	// 给APP传递参数和事件的方法\n  function appPostMessage(params) {\n    try {\n      DuoxingApp.postMessage(`${JSON.stringify(params)}`);\n    } catch (e) {\n      if (_try) throw e;\n    }\n  }\n```\n\n- ### 参考示例（flutter 给 web 传数据）\n```\n// web端, 在全局中注册方法\nfunction appMessage(params) {\n	console.log(params) // 打印：123123\n	return \"333333\";\n}\n// flutter端, 在上边示例中。创建webView后，拿到的controller，执行 runJavascript\nJavascriptUtils.instance().controller.runJavascript(\"appMessage(\'123123\')\");\n// controller另一个方法是可以返回结果的 runJavascriptReturningResult\nString result = await JavascriptUtils.instance().controller.runJavascriptReturningResult(\"appMessage(\'123123\')\");\nprint(result) // // 打印：333333\n```\n\n## 动态域名\n- ### 手机APP\n通过读取线上的json配置文件，进行域名的更换\n当有多个线上配置文件时。要保证线上多个配置相同才会更换\n若只有一个线上配置，则读取后自动更换\n- ### 参考示例\n```flutter\nclass Protocol {\n	static String hostName = \'xx.xxx.com\';\n	\n	// 开始动态域名的更换\n	  static Future<void> initResolverList() async {\n		List<String> resolverListEncode = await getConfigFromResolverList();\n		String newEncodedConfig = getMergedConfig(resolverListEncode: resolverListEncode);\n		await replaceConfig(newEncodedConfig: newEncodedConfig);\n	  }\n	  \n	  // 通过Dio获取线上动态域名配置密文\n	  static Future<List<String>> getConfigFromResolverList() async {\n		List<String> resolverEncode = [];\n		const resolverList = [\'https://xxx.oss-cn-hangzhou.aliyuncs.com/xxxx.json\', \'https://xxx.cos.ap-guangzhou.myqcloud.com/xxx.json\'];\n		await Future.forEach(resolverList, (resolver) async {\n		  try {\n			Response response = await Dio().get(\"$resolver?random=${Random().nextInt(9999)}\");\n			resolverEncode.add(response.data[\'attachment\']);\n		  } catch(error) {\n			resolverEncode.add(null);\n		  }\n		});\n		return resolverEncode;\n	  }\n	  \n	  // 判断是否要进行域名更换\n	  static String getMergedConfig({List<String> resolverListEncode}) {\n		if (resolverListEncode[0] != null && resolverListEncode[1] != null && resolverListEncode[0] == resolverListEncode[1]) {\n		  return resolverListEncode[1];\n		}\n		if (resolverListEncode[0] != null && resolverListEncode[1] != null && resolverListEncode[0] != resolverListEncode[1]) {\n		  return null;\n		}\n		if (resolverListEncode[0] != null && resolverListEncode[1] == null) {\n		  return resolverListEncode[0];\n		}\n		if (resolverListEncode[0] == null && resolverListEncode[1] != null) {\n		  return resolverListEncode[1];\n		}\n		if (resolverListEncode[0] == null && resolverListEncode[1] == null) {\n		  return null;\n		}\n		return null;\n	  }\n	  \n	  // 替换现在的默认域名\n	  static Future<void> replaceConfig({String newEncodedConfig, String localEncodedConfig}) async {\n		if(newEncodedConfig != null) {\n		  String newDecodedConfig = decrypt(newEncodedConfig);\n		  Map newDecodedConfigJson = json.decode(newDecodedConfig);\n		  if(hostName != newDecodedConfigJson[\'domain\']) {\n			cleanLoginInfo();\n		  }\n		  hostName = newDecodedConfigJson[\'domain\'];\n		}\n	  }\n	  \n	  // 解密方法\n	  static String decrypt(String enCode) {\n		Codec<String, String> stringToBase64 = utf8.fuse(base64);\n		String encoded = stringToBase64.decode(enCode);\n		encoded = encoded.substring(0, cryptKey.length - 1) + encoded.substring(cryptKey.length - 1 + cryptKey.length);\n		return stringToBase64.decode(encoded);\n	  }\n	  \n	  // 域名变更后，要清理登录态\n	  static Future<void> cleanLoginInfo() async {\n		SharedUtil.instance.saveBoolean(Keys.hasLogged, false);\n	  }\n}\n```\n\n- ### 桌面应用(macos、winexe)\nelectron 渲染进程中执行\n```electron\n// 渲染进程入口\n	async function initPage() {\n		// 域名替换方法\n		await changeResolver()\n		tabGroup.addTab({\n			title: \'多星\',\n			src: webHref,\n			visible: true,\n			active: true,\n			closable: false\n		});\n	}\n	// 通过axios获取线上配置\n	async function getResolver(index) {\n		return new Promise(async resolver => {\n			try {\n				const response = await axios.get((isPackaged ? resolverList[index] : resolverDevList[index]) + \'?random=\' + Math.random())\n				resolver(response.data);\n			} catch (err) {\n				resolver(null)\n			}\n		})\n	}\n	// 解密方法\n	function decrypt(key, encryptedText) {\n		var base64Text = atob(encryptedText);\n		base64Text = base64Text.slice(0, key.length - 1) + base64Text.slice(key.length - 1 + key.length);\n		return atob(base64Text);\n	}\n	// 替换域名\n	async function changeResolver() {\n		let resolver1 = await getResolver(0)\n		let resolver2 = await getResolver(1)\n		return new Promise(resolver => {\n			// 两个都通\n			if (resolver1 != null && resolver2 != null) {\n				try {\n					console.log(\'resolver1=\', resolver1)\n					console.log(\'resolver2=\', resolver2)\n					if (resolver1.serviceLink == resolver2.serviceLink) {\n						const serviceLink = decrypt(\'key\', resolver1.serviceLink);\n						console.log(`attachment  ${serviceLink}`)\n						webHref = `${serviceLink}`\n					}\n				} catch (err) {\n					console.log(`err  ${err}`)\n				}\n			} else if (resolver1 != null || resolver2 != null) {\n				// 只通一个\n				try {\n					resolver = JSON.parse(resolver1 || resolver1)\n					const serviceLink = decrypt(\'key\', resolver.serviceLink);\n					console.log(`attachment  ${serviceLink}`)\n					webHref = `${serviceLink}`\n				} catch (err) {\n					console.log(`err  ${err}`)\n				}\n			}\n			resolver(true)\n		})\n	}\n```', '<h2 id=\"h2-u6D88u606Fu63A8u9001\"><a class=\"reference-link\" name=\"消息推送\"></a><span class=\"header-link octicon octicon-link\"></span>消息推送</h2><p>App 端在接受到socket推送的消息后，发送到手机本地通知</p>\n<ul>\n<li><h3 id=\"h3-u53C2u8003u793Au4F8B\"><a class=\"reference-link\" name=\"参考示例\"></a><span class=\"header-link octicon octicon-link\"></span>参考示例</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\"> channel</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'resource\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">message</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">   </span><span class=\"typ\">String</span><span class=\"pln\"> pageId </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">[</span><span class=\"str\">\'data\'</span><span class=\"pun\">][</span><span class=\"str\">\'pageId\'</span><span class=\"pun\">];</span></code></li><li class=\"L2\"><code><span class=\"pln\">   </span><span class=\"typ\">String</span><span class=\"pln\"> actionId </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">[</span><span class=\"str\">\'data\'</span><span class=\"pun\">][</span><span class=\"str\">\'actionId\'</span><span class=\"pun\">];</span></code></li><li class=\"L3\"><code><span class=\"pln\">   </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">pageId </span><span class=\"pun\">==</span><span class=\"pln\"> </span><span class=\"str\">\'socket\'</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> actionId </span><span class=\"pun\">==</span><span class=\"pln\"> </span><span class=\"str\">\'connect\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">     onLine </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">     </span><span class=\"typ\">NotificationUtils</span><span class=\"pun\">.</span><span class=\"pln\">instance</span><span class=\"pun\">().</span><span class=\"pln\">showNotification</span><span class=\"pun\">({</span><span class=\"str\">\"title\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'在线\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"message\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">},</span><span class=\"pln\"> channelId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'background_service\'</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u6587u4EF6u4E0Au4F20\"><a class=\"reference-link\" name=\"文件上传\"></a><span class=\"header-link octicon octicon-link\"></span>文件上传</h2><p>flutter端会读取手机的文件。并转为base64发送给页面js端接收后，给页面端使用</p>\n<ul>\n<li><h3 id=\"h3-u53C2u8003u793Au4F8B\"><a class=\"reference-link\" name=\"参考示例\"></a><span class=\"header-link octicon octicon-link\"></span>参考示例</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\"> </span><span class=\"com\">// 选择文件</span></code></li><li class=\"L1\"><code><span class=\"typ\">Future</span><span class=\"str\">&lt;void&gt;</span><span class=\"pln\"> filePicker</span><span class=\"pun\">(</span><span class=\"pln\">context</span><span class=\"pun\">,</span><span class=\"pln\"> result</span><span class=\"pun\">)</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\"> </span><span class=\"typ\">FilePickerResult</span><span class=\"pln\"> fileResult </span><span class=\"pun\">=</span><span class=\"pln\"> await </span><span class=\"typ\">FilePicker</span><span class=\"pun\">.</span><span class=\"pln\">platform</span><span class=\"pun\">.</span><span class=\"pln\">pickFiles</span><span class=\"pun\">();</span></code></li><li class=\"L3\"><code><span class=\"pln\"> </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">fileResult</span><span class=\"pun\">.</span><span class=\"pln\">files</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">&gt;</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">   sendBase64ToWeb</span><span class=\"pun\">(</span><span class=\"pln\">context</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'filePickerResultBack\'</span><span class=\"pun\">,</span><span class=\"pln\"> actionTime</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"${result[\'actionTime\']}\"</span><span class=\"pun\">,</span><span class=\"pln\"> file</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"typ\">File</span><span class=\"pun\">(</span><span class=\"pln\">fileResult</span><span class=\"pun\">.</span><span class=\"pln\">files</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">].</span><span class=\"pln\">path</span><span class=\"pun\">));</span></code></li><li class=\"L5\"><code><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code><span class=\"pun\">}</span></code></li><li class=\"L7\"><code><span class=\"com\">// 选择图片</span></code></li><li class=\"L8\"><code><span class=\"kwd\">void</span><span class=\"pln\"> imagePicker</span><span class=\"pun\">(</span><span class=\"typ\">BuildContext</span><span class=\"pln\"> context</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"typ\">Map</span><span class=\"pln\"> result</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code><span class=\"pln\"> </span><span class=\"typ\">CameraOrGallery</span><span class=\"pun\">.</span><span class=\"pln\">showModalBottomSheetOpen</span><span class=\"pun\">(</span><span class=\"pln\">context</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"typ\">List</span><span class=\"pun\">&lt;</span><span class=\"typ\">File</span><span class=\"pun\">&gt;</span><span class=\"pln\"> file</span><span class=\"pun\">)</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">   </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">&gt;</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">     </span><span class=\"com\">// File newFile = await ImageCompressUtil().imageCompressAndGetFile(file.first);</span></code></li><li class=\"L2\"><code><span class=\"pln\">     sendBase64ToWeb</span><span class=\"pun\">(</span><span class=\"pln\">context</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'filePickerResultBack\'</span><span class=\"pun\">,</span><span class=\"pln\"> actionTime</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"${result[\'actionTime\']}\"</span><span class=\"pun\">,</span><span class=\"pln\"> file</span><span class=\"pun\">:</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">first</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L5\"><code><span class=\"pun\">}</span></code></li><li class=\"L6\"><code><span class=\"com\">// 发送文件base64到web端</span></code></li><li class=\"L7\"><code><span class=\"kwd\">void</span><span class=\"pln\"> sendBase64ToWeb</span><span class=\"pun\">(</span><span class=\"pln\">context</span><span class=\"pun\">,</span><span class=\"pln\"> jsMethod</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"typ\">String</span><span class=\"pln\"> actionTime</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"typ\">File</span><span class=\"pln\"> file</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"typ\">String</span><span class=\"pln\"> isBase64</span><span class=\"pun\">})</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pln\"> fileSize </span><span class=\"pun\">=</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">lengthSync</span><span class=\"pun\">();</span></code></li><li class=\"L9\"><code><span class=\"pln\"> </span><span class=\"kwd\">var</span><span class=\"pln\"> name </span><span class=\"pun\">=</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">substring</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">lastIndexOf</span><span class=\"pun\">(</span><span class=\"str\">\"/\"</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pun\">,</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">length</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code><span class=\"pln\"> </span><span class=\"kwd\">var</span><span class=\"pln\"> suffix </span><span class=\"pun\">=</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">substring</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">.</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">lastIndexOf</span><span class=\"pun\">(</span><span class=\"str\">\".\"</span><span class=\"pun\">),</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">length</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code><span class=\"pln\"> </span><span class=\"typ\">MediaType</span><span class=\"pln\"> mediaType </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">DioUtils</span><span class=\"pun\">.</span><span class=\"pln\">getMediaType</span><span class=\"pun\">(</span><span class=\"pln\">suffix</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code><span class=\"pln\"> </span><span class=\"com\">// 大小限制，太大的通过flutter上传</span></code></li><li class=\"L3\"><code><span class=\"pln\"> </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">fileSize </span><span class=\"pun\">&lt;</span><span class=\"pln\"> </span><span class=\"lit\">50</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"lit\">1024</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"lit\">1024</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">   </span><span class=\"typ\">String</span><span class=\"pln\"> method </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"$jsMethod(\'$actionTime\', \'$name\', \'\', true)\"</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">   await controller</span><span class=\"pun\">.</span><span class=\"pln\">runJavascript</span><span class=\"pun\">(</span><span class=\"pln\">method</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code><span class=\"pln\">   </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">isBase64 </span><span class=\"pun\">==</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code><span class=\"pln\">     </span><span class=\"typ\">List</span><span class=\"pln\"> bytes </span><span class=\"pun\">=</span><span class=\"pln\"> await file</span><span class=\"pun\">.</span><span class=\"pln\">readAsBytes</span><span class=\"pun\">();</span></code></li><li class=\"L8\"><code><span class=\"pln\">     isBase64 </span><span class=\"pun\">=</span><span class=\"pln\"> base64Encode</span><span class=\"pun\">(</span><span class=\"pln\">bytes</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code><span class=\"pln\">   method </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"$jsMethod(\'$actionTime\', \'$name\', \'data:${mediaType.type}/${mediaType.subtype};base64,$isBase64\')\"</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">   await controller</span><span class=\"pun\">.</span><span class=\"pln\">runJavascript</span><span class=\"pun\">(</span><span class=\"pln\">method</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u4E0Bu8F7Du4E0Eu6253u5F00\"><a class=\"reference-link\" name=\"下载与打开\"></a><span class=\"header-link octicon octicon-link\"></span>下载与打开</h2><ul>\n<li>App和桌面会接管页面的下载请求，并且在界面中有下载进度和下载文件管理列表</li><li><h3 id=\"h3-appu53C2u8003u793Au4F8B\"><a class=\"reference-link\" name=\"App参考示例\"></a><span class=\"header-link octicon octicon-link\"></span>App参考示例</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\"> await </span><span class=\"typ\">DownloadUtils</span><span class=\"pun\">.</span><span class=\"pln\">downloadFile</span><span class=\"pun\">(</span><span class=\"pln\">context</span><span class=\"pun\">,</span><span class=\"pln\"> result</span><span class=\"pun\">:</span><span class=\"pln\"> result</span><span class=\"pun\">);</span><span class=\"pln\"> </span><span class=\"com\">// 启动下载</span></code></li><li class=\"L1\"><code><span class=\"pln\"> downListSetState</span><span class=\"pun\">(()</span><span class=\"pln\"> </span><span class=\"pun\">{});</span><span class=\"pln\"> </span><span class=\"com\">// 下载状态更新</span></code></li><li class=\"L2\"><code><span class=\"pln\"> </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">Future</span><span class=\"str\">&lt;void&gt;</span><span class=\"pln\"> downloadFile</span><span class=\"pun\">(</span><span class=\"typ\">BuildContext</span><span class=\"pln\"> context</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"typ\">Map</span><span class=\"pln\"> result</span><span class=\"pun\">})</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">     </span><span class=\"typ\">String</span><span class=\"pln\"> fileUrl </span><span class=\"pun\">=</span><span class=\"pln\"> result</span><span class=\"pun\">[</span><span class=\"str\">\'downloadPath\'</span><span class=\"pun\">];</span></code></li><li class=\"L4\"><code><span class=\"pln\">     </span><span class=\"typ\">String</span><span class=\"pln\"> fileName </span><span class=\"pun\">=</span><span class=\"pln\"> result</span><span class=\"pun\">[</span><span class=\"str\">\'filename\'</span><span class=\"pun\">];</span></code></li><li class=\"L5\"><code><span class=\"pln\">     </span><span class=\"typ\">String</span><span class=\"pln\"> downloadUrl </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'${Constants.hostUrl}/appId/upload$fileUrl\'</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">     </span><span class=\"typ\">String</span><span class=\"pln\"> path </span><span class=\"pun\">=</span><span class=\"pln\"> await </span><span class=\"typ\">AndroidPathProvider</span><span class=\"pun\">.</span><span class=\"pln\">downloadsPath</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code><span class=\"pln\">     </span><span class=\"typ\">Directory</span><span class=\"pln\"> savePath </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Directory</span><span class=\"pun\">(</span><span class=\"str\">\"$path/appId\"</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pun\">(!</span><span class=\"pln\">savePath</span><span class=\"pun\">.</span><span class=\"pln\">existsSync</span><span class=\"pun\">())</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code><span class=\"pln\">       savePath</span><span class=\"pun\">.</span><span class=\"pln\">createSync</span><span class=\"pun\">();</span></code></li><li class=\"L0\"><code><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code><span class=\"pln\">     </span><span class=\"typ\">String</span><span class=\"pln\"> fullPath </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"${savePath.path}/$fileName\"</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pun\">(</span><span class=\"typ\">File</span><span class=\"pun\">(</span><span class=\"pln\">fullPath</span><span class=\"pun\">).</span><span class=\"pln\">existsSync</span><span class=\"pun\">())</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">       </span><span class=\"com\">// 下载过的文件。直接打开</span></code></li><li class=\"L4\"><code><span class=\"pln\">       </span><span class=\"typ\">OpenFile</span><span class=\"pun\">.</span><span class=\"pln\">open</span><span class=\"pun\">(</span><span class=\"pln\">fullPath</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code><span class=\"pln\">     </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code><span class=\"pln\">       </span><span class=\"typ\">Response</span><span class=\"pln\"> response </span><span class=\"pun\">=</span><span class=\"pln\"> await </span><span class=\"typ\">Dio</span><span class=\"pun\">().</span><span class=\"kwd\">get</span><span class=\"pun\">(</span></code></li><li class=\"L9\"><code><span class=\"pln\">         downloadUrl</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code><span class=\"pln\">         onReceiveProgress</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">int</span><span class=\"pln\"> count</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"kwd\">int</span><span class=\"pln\"> total</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">           </span><span class=\"typ\">String</span><span class=\"pln\"> method </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"someProgress(\'${result[\'actionTime\']}\', \'${count / total * 100}\')\"</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">           </span><span class=\"typ\">JavascriptUtils</span><span class=\"pun\">.</span><span class=\"pln\">instance</span><span class=\"pun\">().</span><span class=\"pln\">controller</span><span class=\"pun\">.</span><span class=\"pln\">runJavascript</span><span class=\"pun\">(</span><span class=\"pln\">method</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code><span class=\"pln\">           </span><span class=\"kwd\">print</span><span class=\"pun\">(</span><span class=\"str\">\"下载进度${count / total * 100}\"</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code><span class=\"pln\">         </span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code><span class=\"pln\">         </span><span class=\"com\">//Received data with List&lt;int&gt;</span></code></li><li class=\"L6\"><code><span class=\"pln\">         options</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"typ\">Options</span><span class=\"pun\">(</span></code></li><li class=\"L7\"><code><span class=\"pln\">             responseType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"typ\">ResponseType</span><span class=\"pun\">.</span><span class=\"pln\">bytes</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 下载数据流</span></code></li><li class=\"L8\"><code><span class=\"pln\">             followRedirects</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code><span class=\"pln\">             validateStatus</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">status</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">               </span><span class=\"kwd\">return</span><span class=\"pln\"> status </span><span class=\"pun\">&lt;</span><span class=\"pln\"> </span><span class=\"lit\">500</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">             </span><span class=\"pun\">}),</span></code></li><li class=\"L2\"><code><span class=\"pln\">       </span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code><span class=\"pln\">       </span><span class=\"typ\">File</span><span class=\"pln\"> file </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">File</span><span class=\"pun\">(</span><span class=\"pln\">fullPath</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code><span class=\"pln\">       </span><span class=\"com\">// 写入数据流到本地文件</span></code></li><li class=\"L5\"><code><span class=\"pln\">       </span><span class=\"kwd\">var</span><span class=\"pln\"> raf </span><span class=\"pun\">=</span><span class=\"pln\"> file</span><span class=\"pun\">.</span><span class=\"pln\">openSync</span><span class=\"pun\">(</span><span class=\"pln\">mode</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"typ\">FileMode</span><span class=\"pun\">.</span><span class=\"pln\">write</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code><span class=\"pln\">       </span><span class=\"com\">// response.data is List&lt;int&gt; type</span></code></li><li class=\"L7\"><code><span class=\"pln\">       raf</span><span class=\"pun\">.</span><span class=\"pln\">writeFromSync</span><span class=\"pun\">(</span><span class=\"pln\">response</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code><span class=\"pln\">       await raf</span><span class=\"pun\">.</span><span class=\"pln\">close</span><span class=\"pun\">();</span></code></li><li class=\"L9\"><code><span class=\"pln\">       </span><span class=\"com\">// 打开下载的文件</span></code></li><li class=\"L0\"><code><span class=\"pln\">       </span><span class=\"typ\">OpenFile</span><span class=\"pun\">.</span><span class=\"pln\">open</span><span class=\"pun\">(</span><span class=\"pln\">fullPath</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code><span class=\"pln\">     </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">e</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">       </span><span class=\"kwd\">print</span><span class=\"pun\">(</span><span class=\"pln\">e</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li><li>macos App、exe参考示例<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"com\">// renderer.js中下载监听</span></code></li><li class=\"L1\"><code><span class=\"pln\"> ipcRenderer</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'downloadStart\'</span><span class=\"pun\">,</span><span class=\"pln\"> async</span><span class=\"pun\">(</span><span class=\"kwd\">event</span><span class=\"pun\">,</span><span class=\"pln\"> message</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">     downloadTasks</span><span class=\"pun\">.</span><span class=\"pln\">push</span><span class=\"pun\">(</span><span class=\"pln\">message</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code><span class=\"pln\">     renderDownloadUI</span><span class=\"pun\">();</span></code></li><li class=\"L4\"><code><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L5\"><code><span class=\"pln\"> ipcRenderer</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'downloadProgress\'</span><span class=\"pun\">,</span><span class=\"pln\"> async</span><span class=\"pun\">(</span><span class=\"kwd\">event</span><span class=\"pun\">,</span><span class=\"pln\"> message</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code><span class=\"pln\">     </span><span class=\"kwd\">const</span><span class=\"pln\"> nowItemIndex </span><span class=\"pun\">=</span><span class=\"pln\"> downloadTasks</span><span class=\"pun\">.</span><span class=\"pln\">findIndex</span><span class=\"pun\">(</span><span class=\"pln\">item </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">timehander </span><span class=\"pun\">===</span><span class=\"pln\"> message</span><span class=\"pun\">.</span><span class=\"pln\">timehander</span><span class=\"pun\">)</span></code></li><li class=\"L7\"><code><span class=\"pln\">     downloadTasks</span><span class=\"pun\">[</span><span class=\"pln\">nowItemIndex</span><span class=\"pun\">].</span><span class=\"pln\">progress </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">.</span><span class=\"pln\">progress</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code><span class=\"pln\">     renderDownloadUI</span><span class=\"pun\">();</span></code></li><li class=\"L9\"><code><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L0\"><code><span class=\"pln\"> ipcRenderer</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'downloadDone\'</span><span class=\"pun\">,</span><span class=\"pln\"> async</span><span class=\"pun\">(</span><span class=\"kwd\">event</span><span class=\"pun\">,</span><span class=\"pln\"> message</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">     </span><span class=\"kwd\">const</span><span class=\"pln\"> nowItemIndex </span><span class=\"pun\">=</span><span class=\"pln\"> downloadTasks</span><span class=\"pun\">.</span><span class=\"pln\">findIndex</span><span class=\"pun\">(</span><span class=\"pln\">item </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">timehander </span><span class=\"pun\">===</span><span class=\"pln\"> message</span><span class=\"pun\">.</span><span class=\"pln\">timehander</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code><span class=\"pln\">     downloadTasks</span><span class=\"pun\">[</span><span class=\"pln\">nowItemIndex</span><span class=\"pun\">].</span><span class=\"pln\">progress </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">.</span><span class=\"pln\">progress</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">     renderDownloadUI</span><span class=\"pun\">();</span></code></li><li class=\"L4\"><code><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L5\"><code><span class=\"pln\"> </span><span class=\"com\">// main.js 中接管下载请求</span></code></li><li class=\"L6\"><code><span class=\"pln\"> mainWindow</span><span class=\"pun\">.</span><span class=\"pln\">webContents</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'did-finish-load\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code><span class=\"pln\">     downloadHandle</span><span class=\"pun\">(</span><span class=\"pln\">mainWindow</span><span class=\"pun\">.</span><span class=\"pln\">webContents</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L9\"><code><span class=\"pln\"> </span><span class=\"kwd\">function</span><span class=\"pln\"> downloadHandle</span><span class=\"pun\">(</span><span class=\"pln\">webContents</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">     webContents</span><span class=\"pun\">.</span><span class=\"pln\">session</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'will-download\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">event</span><span class=\"pun\">,</span><span class=\"pln\"> item</span><span class=\"pun\">,</span><span class=\"pln\"> _webContents</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">         willDownload </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">         </span><span class=\"com\">//设置文件存放位置，如果用户没有设置保存路径，Electron将使用默认方式来确定保存路径（通常会提示保存对话框）</span></code></li><li class=\"L3\"><code><span class=\"pln\">         </span><span class=\"kwd\">const</span><span class=\"pln\"> savePath </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`${global.downloadPath}/${item.getFilename()}`</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">         item</span><span class=\"pun\">.</span><span class=\"pln\">setSavePath</span><span class=\"pun\">(</span><span class=\"pln\">savePath</span><span class=\"pun\">)</span></code></li><li class=\"L5\"><code><span class=\"pln\">         </span><span class=\"kwd\">const</span><span class=\"pln\"> timehander </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">getTime</span><span class=\"pun\">();</span></code></li><li class=\"L6\"><code><span class=\"pln\">         webContents</span><span class=\"pun\">.</span><span class=\"pln\">send</span><span class=\"pun\">(</span><span class=\"str\">\"downloadStart\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> downloadPath</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">global</span><span class=\"pun\">.</span><span class=\"pln\">downloadPath</span><span class=\"pun\">,</span><span class=\"pln\"> savePath</span><span class=\"pun\">,</span><span class=\"pln\"> timehander</span><span class=\"pun\">,</span><span class=\"pln\"> filename</span><span class=\"pun\">:</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">getFilename</span><span class=\"pun\">(),</span><span class=\"pln\"> progress</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L7\"><code><span class=\"pln\">         item</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'updated\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">event</span><span class=\"pun\">,</span><span class=\"pln\"> state</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code><span class=\"pln\">             </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">state </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'interrupted\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code><span class=\"pln\">                 </span><span class=\"com\">// Download is interrupted but can be resumed</span></code></li><li class=\"L0\"><code><span class=\"pln\">             </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">state </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'progressing\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">                 </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">item</span><span class=\"pun\">.</span><span class=\"pln\">isPaused</span><span class=\"pun\">())</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">                     </span><span class=\"com\">// Download is paused</span></code></li><li class=\"L3\"><code><span class=\"pln\">                 </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">                     </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code><span class=\"pln\">                     </span><span class=\"com\">// 发送给UI更新下载进度</span></code></li><li class=\"L6\"><code><span class=\"pln\">                         webContents</span><span class=\"pun\">.</span><span class=\"pln\">send</span><span class=\"pun\">(</span><span class=\"str\">\"downloadProgress\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> downloadPath</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">global</span><span class=\"pun\">.</span><span class=\"pln\">downloadPath</span><span class=\"pun\">,</span><span class=\"pln\"> savePath</span><span class=\"pun\">,</span><span class=\"pln\"> timehander</span><span class=\"pun\">,</span><span class=\"pln\"> filename</span><span class=\"pun\">:</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">getFilename</span><span class=\"pun\">(),</span><span class=\"pln\"> progress</span><span class=\"pun\">:</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">getReceivedBytes</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">getTotalBytes</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L7\"><code><span class=\"pln\">                     </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">err</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{}</span></code></li><li class=\"L8\"><code><span class=\"pln\">                 </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code><span class=\"pln\">             </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code><span class=\"pln\">         </span><span class=\"pun\">})</span></code></li><li class=\"L1\"><code><span class=\"pln\">         item</span><span class=\"pun\">.</span><span class=\"pln\">on</span><span class=\"pun\">(</span><span class=\"str\">\'done\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">event</span><span class=\"pun\">,</span><span class=\"pln\"> state</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">             </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">state </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'completed\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">                 </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">willDownload</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">                     willDownload </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">                     </span><span class=\"com\">// 下载完成回调UI渲染</span></code></li><li class=\"L6\"><code><span class=\"pln\">                     webContents</span><span class=\"pun\">.</span><span class=\"pln\">send</span><span class=\"pun\">(</span><span class=\"str\">\"downloadDone\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> downloadPath</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">global</span><span class=\"pun\">.</span><span class=\"pln\">downloadPath</span><span class=\"pun\">,</span><span class=\"pln\"> savePath</span><span class=\"pun\">,</span><span class=\"pln\"> timehander</span><span class=\"pun\">,</span><span class=\"pln\"> filename</span><span class=\"pun\">:</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">getFilename</span><span class=\"pun\">(),</span><span class=\"pln\"> progress</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L7\"><code><span class=\"pln\">                 </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code><span class=\"pln\">             </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code><span class=\"pln\">                 downloaded </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code><span class=\"pln\">                 console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">`Download failed: ${state}`</span><span class=\"pun\">)</span></code></li><li class=\"L1\"><code><span class=\"pln\">                 </span><span class=\"com\">// 回显 调用渲染进程方法</span></code></li><li class=\"L2\"><code><span class=\"pln\">                 _webContents</span><span class=\"pun\">.</span><span class=\"pln\">send</span><span class=\"pun\">(</span><span class=\"str\">\'downstate\'</span><span class=\"pun\">,</span><span class=\"pln\"> state</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code><span class=\"pln\">             </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code><span class=\"pln\">         </span><span class=\"pun\">})</span></code></li><li class=\"L5\"><code><span class=\"pln\">     </span><span class=\"pun\">})</span></code></li><li class=\"L6\"><code><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-webviewu4E92u52A8\"><a class=\"reference-link\" name=\"webview互动\"></a><span class=\"header-link octicon octicon-link\"></span>webview互动</h2><ul>\n<li><p>js可以通过webView发送数据给flutter，进行一些APP端可以运行的操作</p>\n</li><li><h3 id=\"h3-u53C2u8003u793Au4F8BuFF08webu7ED920flutter20u4F20u6570u636EuFF09\"><a class=\"reference-link\" name=\"参考示例（web 给 flutter 传数据）\"></a><span class=\"header-link octicon octicon-link\"></span>参考示例（web 给 flutter 传数据）</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"com\">// flutter端</span></code></li><li class=\"L1\"><code><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"typ\">WebView</span><span class=\"pun\">(</span></code></li><li class=\"L2\"><code><span class=\"pln\">  initialUrl</span><span class=\"pun\">:</span><span class=\"pln\"> url</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code><span class=\"pln\">  onWebViewCreated</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"typ\">WebViewController</span><span class=\"pln\"> webViewController</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">      </span><span class=\"typ\">JavascriptUtils</span><span class=\"pun\">.</span><span class=\"pln\">instance</span><span class=\"pun\">().</span><span class=\"pln\">controller </span><span class=\"pun\">=</span><span class=\"pln\"> webViewController</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">  </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code><span class=\"pln\">  javascriptChannels</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">&lt;</span><span class=\"typ\">JavascriptChannel</span><span class=\"pun\">&gt;{</span></code></li><li class=\"L7\"><code><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"typ\">JavascriptChannel</span><span class=\"pun\">(</span></code></li><li class=\"L8\"><code><span class=\"pln\">          name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'DuoxingApp\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 在web端全局注册此Channels，web端可以直接调用 DuoxingApp.postMessage 给flutter 发送消息了</span></code></li><li class=\"L9\"><code><span class=\"pln\">          onMessageReceived</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"typ\">JavascriptMessage</span><span class=\"pln\"> message</span><span class=\"pun\">)</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">              </span><span class=\"typ\">Map</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> jsonDecode</span><span class=\"pun\">(</span><span class=\"pln\">message</span><span class=\"pun\">.</span><span class=\"pln\">message</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code><span class=\"pln\">              </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">result</span><span class=\"pun\">.</span><span class=\"pln\">containsKey</span><span class=\"pun\">(</span><span class=\"str\">\'action\'</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">                  </span><span class=\"kwd\">switch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">result</span><span class=\"pun\">[</span><span class=\"str\">\'action\'</span><span class=\"pun\">])</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">                      </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'openLink\'</span><span class=\"pun\">:</span></code></li><li class=\"L4\"><code><span class=\"pln\">                          </span><span class=\"com\">// 接收到连接后，在手机浏览器中打开连接</span></code></li><li class=\"L5\"><code><span class=\"pln\">                          </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">                      </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'downloadFile\'</span><span class=\"pun\">:</span></code></li><li class=\"L7\"><code><span class=\"pln\">                          </span><span class=\"com\">// 可以通过flutter下载文件到手机目录中，</span></code></li><li class=\"L8\"><code><span class=\"pln\">                          </span><span class=\"com\">// 可以管理下载的文件列表</span></code></li><li class=\"L9\"><code><span class=\"pln\">                          </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code><span class=\"pln\">                      </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'startRecord\'</span><span class=\"pun\">:</span></code></li><li class=\"L1\"><code><span class=\"pln\">                          </span><span class=\"com\">// 可以录音，并回传给web端</span></code></li><li class=\"L2\"><code><span class=\"pln\">                          </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">                      </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'imagePicker\'</span><span class=\"pun\">:</span></code></li><li class=\"L4\"><code><span class=\"pln\">                          </span><span class=\"com\">// 可以选择手机上的图片，处理后回传</span></code></li><li class=\"L5\"><code><span class=\"pln\">                          </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">                      </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'imageSaveToAlbum\'</span><span class=\"pun\">:</span></code></li><li class=\"L7\"><code><span class=\"pln\">                          </span><span class=\"com\">// 可以发送图片给flutter保存到手机相册中</span></code></li><li class=\"L8\"><code><span class=\"pln\">                          </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code><span class=\"pln\">                      </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'notice\'</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"com\">// 消息通知</span></code></li><li class=\"L0\"><code><span class=\"pln\">                          </span><span class=\"com\">// 可以发送本地手机通知消息</span></code></li><li class=\"L1\"><code><span class=\"pln\">                          </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">                  </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code><span class=\"pln\">              </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code><span class=\"pln\">          </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code><span class=\"pln\">      </span><span class=\"pun\">)</span></code></li><li class=\"L6\"><code><span class=\"pln\">  </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code><span class=\"pun\">)</span></code></li><li class=\"L8\"><code><span class=\"com\">// web端</span></code></li><li class=\"L9\"><code><span class=\"com\">// 通过 DuoxingApp.postMessage(`${JSON.stringify(params)}`); 给flutter 发送消息了</span></code></li><li class=\"L0\"><code><span class=\"kwd\">function</span><span class=\"pln\"> checkIsApp</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">  </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">    isApp </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">!!</span><span class=\"typ\">DuoxingApp</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"com\">// 判断当前是否子APP中运行的网页</span></code></li><li class=\"L3\"><code><span class=\"pln\">  </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">e</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">    isApp </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code><span class=\"pln\">  window</span><span class=\"pun\">.</span><span class=\"pln\">isApp </span><span class=\"pun\">=</span><span class=\"pln\"> isApp</span></code></li><li class=\"L7\"><code><span class=\"pun\">}</span></code></li><li class=\"L8\"><code><span class=\"pln\">  </span><span class=\"com\">// 给APP传递参数和事件的方法</span></code></li><li class=\"L9\"><code><span class=\"kwd\">function</span><span class=\"pln\"> appPostMessage</span><span class=\"pun\">(</span><span class=\"kwd\">params</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">  </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">    </span><span class=\"typ\">DuoxingApp</span><span class=\"pun\">.</span><span class=\"pln\">postMessage</span><span class=\"pun\">(</span><span class=\"str\">`${JSON.stringify(params)}`</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code><span class=\"pln\">  </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">e</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">_try</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"kwd\">throw</span><span class=\"pln\"> e</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code><span class=\"pun\">}</span></code></li></ol></pre>\n</li><li><h3 id=\"h3-u53C2u8003u793Au4F8BuFF08flutteru7ED920web20u4F20u6570u636EuFF09\"><a class=\"reference-link\" name=\"参考示例（flutter 给 web 传数据）\"></a><span class=\"header-link octicon octicon-link\"></span>参考示例（flutter 给 web 传数据）</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"com\">// web端, 在全局中注册方法</span></code></li><li class=\"L1\"><code><span class=\"kwd\">function</span><span class=\"pln\"> appMessage</span><span class=\"pun\">(</span><span class=\"kwd\">params</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code><span class=\"pln\">  console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"kwd\">params</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"com\">// 打印：123123</span></code></li><li class=\"L3\"><code><span class=\"pln\">  </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">\"333333\"</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pun\">}</span></code></li><li class=\"L5\"><code><span class=\"com\">// flutter端, 在上边示例中。创建webView后，拿到的controller，执行 runJavascript</span></code></li><li class=\"L6\"><code><span class=\"typ\">JavascriptUtils</span><span class=\"pun\">.</span><span class=\"pln\">instance</span><span class=\"pun\">().</span><span class=\"pln\">controller</span><span class=\"pun\">.</span><span class=\"pln\">runJavascript</span><span class=\"pun\">(</span><span class=\"str\">\"appMessage(\'123123\')\"</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code><span class=\"com\">// controller另一个方法是可以返回结果的 runJavascriptReturningResult</span></code></li><li class=\"L8\"><code><span class=\"typ\">String</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await </span><span class=\"typ\">JavascriptUtils</span><span class=\"pun\">.</span><span class=\"pln\">instance</span><span class=\"pun\">().</span><span class=\"pln\">controller</span><span class=\"pun\">.</span><span class=\"pln\">runJavascriptReturningResult</span><span class=\"pun\">(</span><span class=\"str\">\"appMessage(\'123123\')\"</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code><span class=\"kwd\">print</span><span class=\"pun\">(</span><span class=\"pln\">result</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"com\">// // 打印：333333</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u52A8u6001u57DFu540D\"><a class=\"reference-link\" name=\"动态域名\"></a><span class=\"header-link octicon octicon-link\"></span>动态域名</h2><ul>\n<li><h3 id=\"h3-u624Bu673Aapp\"><a class=\"reference-link\" name=\"手机APP\"></a><span class=\"header-link octicon octicon-link\"></span>手机APP</h3><p>通过读取线上的json配置文件，进行域名的更换<br>当有多个线上配置文件时。要保证线上多个配置相同才会更换<br>若只有一个线上配置，则读取后自动更换</p>\n</li><li><h3 id=\"h3-u53C2u8003u793Au4F8B\"><a class=\"reference-link\" name=\"参考示例\"></a><span class=\"header-link octicon octicon-link\"></span>参考示例</h3><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-flutter\"><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"typ\">Protocol</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-flutter\"><span class=\"pln\">  </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">String</span><span class=\"pln\"> hostName </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'xx.xxx.com\'</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-flutter\"><span class=\"pln\">  </span></code></li><li class=\"L3\"><code class=\"language-flutter\"><span class=\"pln\">  </span><span class=\"com\">// 开始动态域名的更换</span></code></li><li class=\"L4\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">Future</span><span class=\"str\">&lt;void&gt;</span><span class=\"pln\"> initResolverList</span><span class=\"pun\">()</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"typ\">List</span><span class=\"pun\">&lt;</span><span class=\"typ\">String</span><span class=\"pun\">&gt;</span><span class=\"pln\"> resolverListEncode </span><span class=\"pun\">=</span><span class=\"pln\"> await getConfigFromResolverList</span><span class=\"pun\">();</span></code></li><li class=\"L6\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"typ\">String</span><span class=\"pln\"> newEncodedConfig </span><span class=\"pun\">=</span><span class=\"pln\"> getMergedConfig</span><span class=\"pun\">(</span><span class=\"pln\">resolverListEncode</span><span class=\"pun\">:</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-flutter\"><span class=\"pln\">      await replaceConfig</span><span class=\"pun\">(</span><span class=\"pln\">newEncodedConfig</span><span class=\"pun\">:</span><span class=\"pln\"> newEncodedConfig</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-flutter\"><span class=\"pln\">    </span></code></li><li class=\"L0\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"com\">// 通过Dio获取线上动态域名配置密文</span></code></li><li class=\"L1\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">Future</span><span class=\"pun\">&lt;</span><span class=\"typ\">List</span><span class=\"pun\">&lt;</span><span class=\"typ\">String</span><span class=\"pun\">&gt;&gt;</span><span class=\"pln\"> getConfigFromResolverList</span><span class=\"pun\">()</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"typ\">List</span><span class=\"pun\">&lt;</span><span class=\"typ\">String</span><span class=\"pun\">&gt;</span><span class=\"pln\"> resolverEncode </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">[];</span></code></li><li class=\"L3\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> resolverList </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"str\">\'https://xxx.oss-cn-hangzhou.aliyuncs.com/xxxx.json\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'https://xxx.cos.ap-guangzhou.myqcloud.com/xxx.json\'</span><span class=\"pun\">];</span></code></li><li class=\"L4\"><code class=\"language-flutter\"><span class=\"pln\">      await </span><span class=\"typ\">Future</span><span class=\"pun\">.</span><span class=\"pln\">forEach</span><span class=\"pun\">(</span><span class=\"pln\">resolverList</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolver</span><span class=\"pun\">)</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-flutter\"><span class=\"pln\">          </span><span class=\"typ\">Response</span><span class=\"pln\"> response </span><span class=\"pun\">=</span><span class=\"pln\"> await </span><span class=\"typ\">Dio</span><span class=\"pun\">().</span><span class=\"kwd\">get</span><span class=\"pun\">(</span><span class=\"str\">\"$resolver?random=${Random().nextInt(9999)}\"</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-flutter\"><span class=\"pln\">          resolverEncode</span><span class=\"pun\">.</span><span class=\"pln\">add</span><span class=\"pun\">(</span><span class=\"pln\">response</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">[</span><span class=\"str\">\'attachment\'</span><span class=\"pun\">]);</span></code></li><li class=\"L8\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pun\">(</span><span class=\"pln\">error</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-flutter\"><span class=\"pln\">          resolverEncode</span><span class=\"pun\">.</span><span class=\"pln\">add</span><span class=\"pun\">(</span><span class=\"kwd\">null</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"pun\">});</span></code></li><li class=\"L2\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> resolverEncode</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-flutter\"><span class=\"pln\">    </span></code></li><li class=\"L5\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"com\">// 判断是否要进行域名更换</span></code></li><li class=\"L6\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">String</span><span class=\"pln\"> getMergedConfig</span><span class=\"pun\">({</span><span class=\"typ\">List</span><span class=\"pun\">&lt;</span><span class=\"typ\">String</span><span class=\"pun\">&gt;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">==</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">])</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">];</span></code></li><li class=\"L9\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">!=</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">])</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">==</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">];</span></code></li><li class=\"L5\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">==</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">];</span></code></li><li class=\"L8\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">0</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">==</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolverListEncode</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">==</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-flutter\"><span class=\"pln\">    </span></code></li><li class=\"L5\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"com\">// 替换现在的默认域名</span></code></li><li class=\"L6\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">Future</span><span class=\"str\">&lt;void&gt;</span><span class=\"pln\"> replaceConfig</span><span class=\"pun\">({</span><span class=\"typ\">String</span><span class=\"pln\"> newEncodedConfig</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"typ\">String</span><span class=\"pln\"> localEncodedConfig</span><span class=\"pun\">})</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pun\">(</span><span class=\"pln\">newEncodedConfig </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"typ\">String</span><span class=\"pln\"> newDecodedConfig </span><span class=\"pun\">=</span><span class=\"pln\"> decrypt</span><span class=\"pun\">(</span><span class=\"pln\">newEncodedConfig</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"typ\">Map</span><span class=\"pln\"> newDecodedConfigJson </span><span class=\"pun\">=</span><span class=\"pln\"> json</span><span class=\"pun\">.</span><span class=\"pln\">decode</span><span class=\"pun\">(</span><span class=\"pln\">newDecodedConfig</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"kwd\">if</span><span class=\"pun\">(</span><span class=\"pln\">hostName </span><span class=\"pun\">!=</span><span class=\"pln\"> newDecodedConfigJson</span><span class=\"pun\">[</span><span class=\"str\">\'domain\'</span><span class=\"pun\">])</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-flutter\"><span class=\"pln\">          cleanLoginInfo</span><span class=\"pun\">();</span></code></li><li class=\"L2\"><code class=\"language-flutter\"><span class=\"pln\">        </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-flutter\"><span class=\"pln\">        hostName </span><span class=\"pun\">=</span><span class=\"pln\"> newDecodedConfigJson</span><span class=\"pun\">[</span><span class=\"str\">\'domain\'</span><span class=\"pun\">];</span></code></li><li class=\"L4\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-flutter\"><span class=\"pln\">    </span></code></li><li class=\"L7\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"com\">// 解密方法</span></code></li><li class=\"L8\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">String</span><span class=\"pln\"> decrypt</span><span class=\"pun\">(</span><span class=\"typ\">String</span><span class=\"pln\"> enCode</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"typ\">Codec</span><span class=\"pun\">&lt;</span><span class=\"typ\">String</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"typ\">String</span><span class=\"pun\">&gt;</span><span class=\"pln\"> stringToBase64 </span><span class=\"pun\">=</span><span class=\"pln\"> utf8</span><span class=\"pun\">.</span><span class=\"pln\">fuse</span><span class=\"pun\">(</span><span class=\"pln\">base64</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"typ\">String</span><span class=\"pln\"> encoded </span><span class=\"pun\">=</span><span class=\"pln\"> stringToBase64</span><span class=\"pun\">.</span><span class=\"pln\">decode</span><span class=\"pun\">(</span><span class=\"pln\">enCode</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-flutter\"><span class=\"pln\">      encoded </span><span class=\"pun\">=</span><span class=\"pln\"> encoded</span><span class=\"pun\">.</span><span class=\"pln\">substring</span><span class=\"pun\">(</span><span class=\"lit\">0</span><span class=\"pun\">,</span><span class=\"pln\"> cryptKey</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> encoded</span><span class=\"pun\">.</span><span class=\"pln\">substring</span><span class=\"pun\">(</span><span class=\"pln\">cryptKey</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> cryptKey</span><span class=\"pun\">.</span><span class=\"pln\">length</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> stringToBase64</span><span class=\"pun\">.</span><span class=\"pln\">decode</span><span class=\"pun\">(</span><span class=\"pln\">encoded</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-flutter\"><span class=\"pln\">    </span></code></li><li class=\"L5\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"com\">// 域名变更后，要清理登录态</span></code></li><li class=\"L6\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"typ\">Future</span><span class=\"str\">&lt;void&gt;</span><span class=\"pln\"> cleanLoginInfo</span><span class=\"pun\">()</span><span class=\"pln\"> async </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-flutter\"><span class=\"pln\">      </span><span class=\"typ\">SharedUtil</span><span class=\"pun\">.</span><span class=\"pln\">instance</span><span class=\"pun\">.</span><span class=\"pln\">saveBoolean</span><span class=\"pun\">(</span><span class=\"typ\">Keys</span><span class=\"pun\">.</span><span class=\"pln\">hasLogged</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code class=\"language-flutter\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-flutter\"><span class=\"pun\">}</span></code></li></ol></pre>\n</li><li><h3 id=\"h3-u684Cu9762u5E94u752828macosu3001winexe29\"><a class=\"reference-link\" name=\"桌面应用(macos、winexe)\"></a><span class=\"header-link octicon octicon-link\"></span>桌面应用(macos、winexe)</h3><p>electron 渲染进程中执行</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-electron\"><span class=\"com\">// 渲染进程入口</span></code></li><li class=\"L1\"><code class=\"language-electron\"><span class=\"pln\">  async </span><span class=\"kwd\">function</span><span class=\"pln\"> initPage</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"com\">// 域名替换方法</span></code></li><li class=\"L3\"><code class=\"language-electron\"><span class=\"pln\">      await changeResolver</span><span class=\"pun\">()</span></code></li><li class=\"L4\"><code class=\"language-electron\"><span class=\"pln\">      tabGroup</span><span class=\"pun\">.</span><span class=\"pln\">addTab</span><span class=\"pun\">({</span></code></li><li class=\"L5\"><code class=\"language-electron\"><span class=\"pln\">          title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'多星\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-electron\"><span class=\"pln\">          src</span><span class=\"pun\">:</span><span class=\"pln\"> webHref</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-electron\"><span class=\"pln\">          visible</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-electron\"><span class=\"pln\">          active</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-electron\"><span class=\"pln\">          closable</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span></code></li><li class=\"L0\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"pun\">});</span></code></li><li class=\"L1\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"com\">// 通过axios获取线上配置</span></code></li><li class=\"L3\"><code class=\"language-electron\"><span class=\"pln\">  async </span><span class=\"kwd\">function</span><span class=\"pln\"> getResolver</span><span class=\"pun\">(</span><span class=\"pln\">index</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Promise</span><span class=\"pun\">(</span><span class=\"pln\">async resolver </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-electron\"><span class=\"pln\">          </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"kwd\">const</span><span class=\"pln\"> response </span><span class=\"pun\">=</span><span class=\"pln\"> await axios</span><span class=\"pun\">.</span><span class=\"kwd\">get</span><span class=\"pun\">((</span><span class=\"pln\">isPackaged </span><span class=\"pun\">?</span><span class=\"pln\"> resolverList</span><span class=\"pun\">[</span><span class=\"pln\">index</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">:</span><span class=\"pln\"> resolverDevList</span><span class=\"pun\">[</span><span class=\"pln\">index</span><span class=\"pun\">])</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'?random=\'</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"typ\">Math</span><span class=\"pun\">.</span><span class=\"pln\">random</span><span class=\"pun\">())</span></code></li><li class=\"L7\"><code class=\"language-electron\"><span class=\"pln\">              resolver</span><span class=\"pun\">(</span><span class=\"pln\">response</span><span class=\"pun\">.</span><span class=\"pln\">data</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code class=\"language-electron\"><span class=\"pln\">          </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">err</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-electron\"><span class=\"pln\">              resolver</span><span class=\"pun\">(</span><span class=\"kwd\">null</span><span class=\"pun\">)</span></code></li><li class=\"L0\"><code class=\"language-electron\"><span class=\"pln\">          </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"pun\">})</span></code></li><li class=\"L2\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"com\">// 解密方法</span></code></li><li class=\"L4\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"kwd\">function</span><span class=\"pln\"> decrypt</span><span class=\"pun\">(</span><span class=\"pln\">key</span><span class=\"pun\">,</span><span class=\"pln\"> encryptedText</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"kwd\">var</span><span class=\"pln\"> base64Text </span><span class=\"pun\">=</span><span class=\"pln\"> atob</span><span class=\"pun\">(</span><span class=\"pln\">encryptedText</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-electron\"><span class=\"pln\">      base64Text </span><span class=\"pun\">=</span><span class=\"pln\"> base64Text</span><span class=\"pun\">.</span><span class=\"pln\">slice</span><span class=\"pun\">(</span><span class=\"lit\">0</span><span class=\"pun\">,</span><span class=\"pln\"> key</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> base64Text</span><span class=\"pun\">.</span><span class=\"pln\">slice</span><span class=\"pun\">(</span><span class=\"pln\">key</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> key</span><span class=\"pun\">.</span><span class=\"pln\">length</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> atob</span><span class=\"pun\">(</span><span class=\"pln\">base64Text</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"com\">// 替换域名</span></code></li><li class=\"L0\"><code class=\"language-electron\"><span class=\"pln\">  async </span><span class=\"kwd\">function</span><span class=\"pln\"> changeResolver</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"kwd\">let</span><span class=\"pln\"> resolver1 </span><span class=\"pun\">=</span><span class=\"pln\"> await getResolver</span><span class=\"pun\">(</span><span class=\"lit\">0</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"kwd\">let</span><span class=\"pln\"> resolver2 </span><span class=\"pun\">=</span><span class=\"pln\"> await getResolver</span><span class=\"pun\">(</span><span class=\"lit\">1</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Promise</span><span class=\"pun\">(</span><span class=\"pln\">resolver </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-electron\"><span class=\"pln\">          </span><span class=\"com\">// 两个都通</span></code></li><li class=\"L5\"><code class=\"language-electron\"><span class=\"pln\">          </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolver1 </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> resolver2 </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-electron\"><span class=\"pln\">                  console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">\'resolver1=\'</span><span class=\"pun\">,</span><span class=\"pln\"> resolver1</span><span class=\"pun\">)</span></code></li><li class=\"L8\"><code class=\"language-electron\"><span class=\"pln\">                  console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">\'resolver2=\'</span><span class=\"pun\">,</span><span class=\"pln\"> resolver2</span><span class=\"pun\">)</span></code></li><li class=\"L9\"><code class=\"language-electron\"><span class=\"pln\">                  </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolver1</span><span class=\"pun\">.</span><span class=\"pln\">serviceLink </span><span class=\"pun\">==</span><span class=\"pln\"> resolver2</span><span class=\"pun\">.</span><span class=\"pln\">serviceLink</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-electron\"><span class=\"pln\">                      </span><span class=\"kwd\">const</span><span class=\"pln\"> serviceLink </span><span class=\"pun\">=</span><span class=\"pln\"> decrypt</span><span class=\"pun\">(</span><span class=\"str\">\'key\'</span><span class=\"pun\">,</span><span class=\"pln\"> resolver1</span><span class=\"pun\">.</span><span class=\"pln\">serviceLink</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-electron\"><span class=\"pln\">                      console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">`attachment  ${serviceLink}`</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code class=\"language-electron\"><span class=\"pln\">                      webHref </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`${serviceLink}`</span></code></li><li class=\"L3\"><code class=\"language-electron\"><span class=\"pln\">                  </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">err</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-electron\"><span class=\"pln\">                  console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">`err  ${err}`</span><span class=\"pun\">)</span></code></li><li class=\"L6\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-electron\"><span class=\"pln\">          </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">resolver1 </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> resolver2 </span><span class=\"pun\">!=</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"com\">// 只通一个</span></code></li><li class=\"L9\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"kwd\">try</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-electron\"><span class=\"pln\">                  resolver </span><span class=\"pun\">=</span><span class=\"pln\"> JSON</span><span class=\"pun\">.</span><span class=\"pln\">parse</span><span class=\"pun\">(</span><span class=\"pln\">resolver1 </span><span class=\"pun\">||</span><span class=\"pln\"> resolver1</span><span class=\"pun\">)</span></code></li><li class=\"L1\"><code class=\"language-electron\"><span class=\"pln\">                  </span><span class=\"kwd\">const</span><span class=\"pln\"> serviceLink </span><span class=\"pun\">=</span><span class=\"pln\"> decrypt</span><span class=\"pun\">(</span><span class=\"str\">\'key\'</span><span class=\"pun\">,</span><span class=\"pln\"> resolver</span><span class=\"pun\">.</span><span class=\"pln\">serviceLink</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-electron\"><span class=\"pln\">                  console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">`attachment  ${serviceLink}`</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code class=\"language-electron\"><span class=\"pln\">                  webHref </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`${serviceLink}`</span></code></li><li class=\"L4\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">catch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">err</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-electron\"><span class=\"pln\">                  console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(</span><span class=\"str\">`err  ${err}`</span><span class=\"pun\">)</span></code></li><li class=\"L6\"><code class=\"language-electron\"><span class=\"pln\">              </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-electron\"><span class=\"pln\">          </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-electron\"><span class=\"pln\">          resolver</span><span class=\"pun\">(</span><span class=\"kwd\">true</span><span class=\"pun\">)</span></code></li><li class=\"L9\"><code class=\"language-electron\"><span class=\"pln\">      </span><span class=\"pun\">})</span></code></li><li class=\"L0\"><code class=\"language-electron\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:32:03+08:00', 'W00001', '张三丰', '2022-04-25T21:38:16+08:00', 'W00001', '张三丰', 'jhUpdate', 'W00001', '张三丰', '2022-04-25T21:38:16+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1464, 10050, '10004', '06框架进阶', '', 'public', '2022-04-23T21:32:37+08:00', '国际化i18n', NULL, '## 国际化\n\n- 内容\n- constant_ui', '<h2 id=\"h2-u56FDu9645u5316\"><a class=\"reference-link\" name=\"国际化\"></a><span class=\"header-link octicon octicon-link\"></span>国际化</h2><ul>\n<li>内容</li><li>constant_ui</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:32:38+08:00', 'W00001', '张三丰', '2022-06-12T04:55:42+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-12T04:55:42+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1465, 10051, '10004', '06框架进阶', '', 'public', '2022-04-23T21:33:02+08:00', '单点登录', NULL, '## 单点登录\n', '<h2 id=\"h2-u5355u70B9u767Bu5F55\"><a class=\"reference-link\" name=\"单点登录\"></a><span class=\"header-link octicon octicon-link\"></span>单点登录</h2>', NULL, NULL, NULL, '', '2022-04-23T21:33:02+08:00', 'W00001', '张三丰', '2022-04-23T21:33:02+08:00', 'W00001', '张三丰', 'jhInsert', 'W00001', '张三丰', '2022-04-23T21:33:02+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1466, 10052, '10004', '06框架进阶', '', 'public', '2022-04-23T21:33:31+08:00', '三方登录', NULL, '## 三方登录', '<h2 id=\"h2-u4E09u65B9u767Bu5F55\"><a class=\"reference-link\" name=\"三方登录\"></a><span class=\"header-link octicon octicon-link\"></span>三方登录</h2>', NULL, NULL, NULL, '', '2022-04-23T21:33:31+08:00', 'W00001', '张三丰', '2022-04-23T21:33:31+08:00', 'W00001', '张三丰', 'jhInsert', 'W00001', '张三丰', '2022-04-23T21:33:31+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1467, 10053, '10004', '06框架进阶', '', 'public', '2022-04-23T21:34:16+08:00', '第三方接口', NULL, '## 第三方接口', '<h2 id=\"h2-u7B2Cu4E09u65B9u63A5u53E3\"><a class=\"reference-link\" name=\"第三方接口\"></a><span class=\"header-link octicon octicon-link\"></span>第三方接口</h2>', NULL, NULL, NULL, '', '2022-04-23T21:34:17+08:00', 'W00001', '张三丰', '2022-04-23T21:34:17+08:00', 'W00001', '张三丰', 'jhInsert', 'W00001', '张三丰', '2022-04-23T21:34:17+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1468, 10054, '10004', '06框架进阶', '', 'public', '2022-04-23T21:35:25+08:00', '错误处理', NULL, '- error-handling，onerror\n\n- validation', '<ul>\n<li><p>error-handling，onerror</p>\n</li><li><p>validation</p>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T21:35:25+08:00', 'W00001', '张三丰', '2022-06-12T05:04:19+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-12T05:04:19+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1469, 10055, '10010', '江湖JS-工具', '', 'login', '2022-04-23T21:36:01+08:00', 'srs 相关文档', NULL, '## SRS-024-陈海博：SRS在安防中的应用\nhttps://www.bilibili.com/video/BV11S4y197Zx\n\n## 肖志宏：SRS支持WebRTC级联和QUIC协议\nhttps://www.bilibili.com/video/BV1Db4y1b77J\n\n## v4_CN_Home\nhttps://github.com/ossrs/srs/wiki/v4_CN_Home#getting-started\n\n## srs v4_CN_WebRTC\nhttps://github.com/ossrs/srs/wiki/v4_CN_WebRTC#sfu-one-to-one\n\n## 半小时弄懂-WebRTC的STUN\nhttps://www.bilibili.com/video/BV1v3411i72v?from=search&seid=4789274326745584735&spm_id_from=333.337.0.0\n\n## WebRTC_API\nhttps://developer.mozilla.org/zh-CN/docs/Web/API/WebRTC_API\n\n呼叫者通过 navigator.mediaDevices.getUserMedia() (en-US) 捕捉本地媒体。\n呼叫者创建一个RTCPeerConnection 并调用 RTCPeerConnection.addTrack() (注： addStream 已经过时。)\n呼叫者调用 RTCPeerConnection.createOffer() 来创建一个提议(offer).\n呼叫者调用 RTCPeerConnection.setLocalDescription() (en-US) 将提议(Offer) 设置为本地描述 (即，连接的本地描述).\nsetLocalDescription()之后, 呼叫者请求 STUN 服务创建ice候选(ice candidates)\n呼叫者通过信令服务器将提议(offer)传递至 本次呼叫的预期的接受者.\n接受者收到了提议(offer) 并调用 RTCPeerConnection.setRemoteDescription() 将其记录为远程描述 (也就是连接的另一端的描述).\n接受者做一些可能需要的步骤结束本次呼叫：捕获本地媒体，然后通过RTCPeerConnection.addTrack()添加到连接中。\n接受者通过 RTCPeerConnection.createAnswer() (en-US) 创建一个应答。\n接受者调用 RTCPeerConnection.setLocalDescription() (en-US) 将应答(answer)   设置为本地描述. 此时，接受者已经获知连接双方的配置了.\n接受者通过信令服务器将应答传递到呼叫者.\n呼叫者接受到应答.\n呼叫者调用 RTCPeerConnection.setRemoteDescription() 将应答设定为远程描述. 如此，呼叫者已经获知连接双方的配置了.\n', '<h2 id=\"h2-srs-024-u9648u6D77u535AuFF1Asrsu5728u5B89u9632u4E2Du7684u5E94u7528\"><a class=\"reference-link\" name=\"SRS-024-陈海博：SRS在安防中的应用\"></a><span class=\"header-link octicon octicon-link\"></span>SRS-024-陈海博：SRS在安防中的应用</h2><p><a href=\"https://www.bilibili.com/video/BV11S4y197Zx\">https://www.bilibili.com/video/BV11S4y197Zx</a></p>\n<h2 id=\"h2-u8096u5FD7u5B8FuFF1Asrsu652Fu6301webrtcu7EA7u8054u548Cquicu534Fu8BAE\"><a class=\"reference-link\" name=\"肖志宏：SRS支持WebRTC级联和QUIC协议\"></a><span class=\"header-link octicon octicon-link\"></span>肖志宏：SRS支持WebRTC级联和QUIC协议</h2><p><a href=\"https://www.bilibili.com/video/BV1Db4y1b77J\">https://www.bilibili.com/video/BV1Db4y1b77J</a></p>\n<h2 id=\"h2-v4_cn_home\"><a class=\"reference-link\" name=\"v4_CN_Home\"></a><span class=\"header-link octicon octicon-link\"></span>v4_CN_Home</h2><p><a href=\"https://github.com/ossrs/srs/wiki/v4_CN_Home#getting-started\">https://github.com/ossrs/srs/wiki/v4_CN_Home#getting-started</a></p>\n<h2 id=\"h2-srsv4_cn_webrtc\"><a class=\"reference-link\" name=\"srs v4_CN_WebRTC\"></a><span class=\"header-link octicon octicon-link\"></span>srs v4_CN_WebRTC</h2><p><a href=\"https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#sfu-one-to-one\">https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#sfu-one-to-one</a></p>\n<h2 id=\"h2-u534Au5C0Fu65F6u5F04u61C2-webrtcu7684stun\"><a class=\"reference-link\" name=\"半小时弄懂-WebRTC的STUN\"></a><span class=\"header-link octicon octicon-link\"></span>半小时弄懂-WebRTC的STUN</h2><p><a href=\"https://www.bilibili.com/video/BV1v3411i72v?from=search&amp;seid=4789274326745584735&amp;spm_id_from=333.337.0.0\">https://www.bilibili.com/video/BV1v3411i72v?from=search&amp;seid=4789274326745584735&amp;spm_id_from=333.337.0.0</a></p>\n<h2 id=\"h2-webrtc_api\"><a class=\"reference-link\" name=\"WebRTC_API\"></a><span class=\"header-link octicon octicon-link\"></span>WebRTC_API</h2><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/WebRTC_API\">https://developer.mozilla.org/zh-CN/docs/Web/API/WebRTC_API</a></p>\n<p>呼叫者通过 navigator.mediaDevices.getUserMedia() (en-US) 捕捉本地媒体。<br>呼叫者创建一个RTCPeerConnection 并调用 RTCPeerConnection.addTrack() (注： addStream 已经过时。)<br>呼叫者调用 RTCPeerConnection.createOffer() 来创建一个提议(offer).<br>呼叫者调用 RTCPeerConnection.setLocalDescription() (en-US) 将提议(Offer) 设置为本地描述 (即，连接的本地描述).<br>setLocalDescription()之后, 呼叫者请求 STUN 服务创建ice候选(ice candidates)<br>呼叫者通过信令服务器将提议(offer)传递至 本次呼叫的预期的接受者.<br>接受者收到了提议(offer) 并调用 RTCPeerConnection.setRemoteDescription() 将其记录为远程描述 (也就是连接的另一端的描述).<br>接受者做一些可能需要的步骤结束本次呼叫：捕获本地媒体，然后通过RTCPeerConnection.addTrack()添加到连接中。<br>接受者通过 RTCPeerConnection.createAnswer() (en-US) 创建一个应答。<br>接受者调用 RTCPeerConnection.setLocalDescription() (en-US) 将应答(answer)   设置为本地描述. 此时，接受者已经获知连接双方的配置了.<br>接受者通过信令服务器将应答传递到呼叫者.<br>呼叫者接受到应答.<br>呼叫者调用 RTCPeerConnection.setRemoteDescription() 将应答设定为远程描述. 如此，呼叫者已经获知连接双方的配置了.</p>\n', NULL, NULL, NULL, '', '2022-04-23T21:36:01+08:00', 'W00001', '张三丰', '2022-06-12T16:16:28+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:16:28+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1470, 10056, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:02:33+08:00', '文档站点部署', NULL, '文档服务地址： https://openjianghu.org/\n使用项目：https://github.com/zmister2016/MrDoc\n\n## 环境准备\n\n环境：CentOS 7，系统自带 Python 3.6.8。\n项目总目录：/opt/MrDoc\n\n安装 Nginx、gcc 等环境\n\n```\nyum group install \"Development Tools\"\nyum install nginx python-devel openldap-devel mysql-devel\n```\n\n安装 sqlite3（Django 2.2.x 需要依赖 sqlite3）\n\n```\nwget https://kojipkgs.fedoraproject.org//packages/sqlite/3.8.11/1.fc21/x86_64/sqlite-3.8.11-1.fc21.x86_64.rpm\nyum install sqlite-3.8.11-1.fc21.x86_64.rpm\n\n# 查看确认版本\nsqlite3 -version\n3.8.11 2015-07-27 13:49:41 b8e92227a469de677a66da62e4361f099c0b79d0\n# 进 Python 确认\npython3\n>>> import sqlite3\n>>> sqlite3.sqlite_version\n\'3.8.11\'\n```\n\n安装 uwsgi\n\n```\npip3 install uwsgi\n```\n\n拉取源码\n\n```\ngit clone https://git.mrdoc.pro/MrDoc/MrDocPro\n```\n\n创建 Python 虚拟环境 mrdoc_env\n\n```\npython3 -m venv mrdoc_env\n```\n\n激活虚拟环境\n\n```\nsource ./mrdoc_env/bin/activate\n```\n\n在虚拟环境下安装依赖\n\n```\npip3 install -r ./MrDoc/requirements.txt\n```\n\n如果依赖安装失败可能需要 Google 搜索排查一下问题。\n\n## 配置文件\n\n`/opt/MrDoc` 下会的目录结构如下：\n\n- MrDocPro 项目代码\n- mrdoc_env 虚拟环境\n- mrdoc_deploy 配置文件目录\n  - mrdoc_nginx.conf nginx 配置，之后会软链到 nginx 配置目录\n  - mrdoc.service systemd 服务文件\n  - mrdoc_uwsgi.ini uwsgi 配置\n  - uwsgi_params uwsgi 配置\n  - nginx 存放 Nginx 证书的目录\n    - STAR.openjianghu.org.key\n    - STAR.openjianghu.org.crt\n\n具体内容：\n\n```cnf\ncat mrdoc_deploy/mrdoc_nginx.conf \nserver\n{\n    listen 80;\n        listen 443 ssl http2;\n    server_name www.openjianghu.org;\n    index index.php index.html index.htm default.php default.htm default.html;\n    root /www/wwwroot/doc.openjianghu.org;\n\n    #SSL-START SSL related configuration, do NOT delete or modify the next line of commented-out 404 rules\n    #error_page 404/404.html;\n    #HTTP_TO_HTTPS_START\n    if ($server_port !~ 443){\n        rewrite ^(/.*)$ https://$host$1 permanent;\n    }\n    #HTTP_TO_HTTPS_END\n    ssl_certificate    /opt/MrDoc/mrdoc_deploy/nginx/STAR.openjianghu.org.crt;\n    ssl_certificate_key    /opt/MrDoc/mrdoc_deploy/nginx/STAR.openjianghu.org.key;\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;\n    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;\n    ssl_prefer_server_ciphers on;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    add_header Strict-Transport-Security \"max-age=31536000\";\n    error_page 497  https://$host$request_uri;\n\n    #SSL-END\n\n    client_max_body_size 75M;\n\n    # Forbidden files or directories\n    location ~ ^/(\\.user.ini|\\.htaccess|\\.git|\\.svn|\\.project|LICENSE|README.md)\n    {\n        return 404;\n    }\n\n    # Directory verification related settings for one-click application for SSL certificate\n    location ~ \\.well-known {\n        allow all;\n    }\n\n    location / { \n        include /opt/MrDoc/mrdoc_deploy/uwsgi_params;\n        uwsgi_pass 127.0.0.1:8008;\n        uwsgi_read_timeout 60;\n    }   \n    location /static {\n        expires 30d;\n        autoindex on; \n        add_header Cache-Control private;\n        alias /opt/MrDoc/MrDocPro/static;\n     }\n     location /media  {\n        alias /opt/MrDoc/MrDocPro/media;\n    }\n\n    charset UTF-8;\n    access_log      /var/log/nginx/mrdoc_access.log;\n    error_log       /var/log/nginx/mrdoc_error.log;\n}\n```\n```service\ncat mrdoc_deploy/mrdoc.service \n[Unit]\nDescription=MrdocApp\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nWorkingDirectory=/opt/MrDoc/MrDocPro\nExecStart=/usr/local/bin/uwsgi --ini /opt/MrDoc/mrdoc_deploy/mrdoc_uwsgi.ini\nUser=root\nRestart=always\nStandardError=syslo\n```\n\n```ini\ncat mrdoc_deploy/mrdoc_uwsgi.ini \n[uwsgi]\n# Django-related settings\nsocket = :8008\n# the base directory (full path)\nchdir           = /opt/MrDoc/MrDocPro\nvirtualenv = /opt/MrDoc/mrdoc_env\n# Django s wsgi file\nmodule          = MrDocPro.wsgi:application\nwsgi-file       = MrDocPro/wsgi.py\n# process-related settings\n# master\nmaster          = true\n# maximum number of worker processes\nprocesses       = 1\nthreads = 2\n# ... with appropriate permissions - may be needed\n# chmod-socket    = 664\n# clear environment on exit\nplugins = python3\nvacuum          = true\npython-autoreload = 1\n```\n\n```\ncat mrdoc_deploy/uwsgi_params \nuwsgi_param  QUERY_STRING       $query_string;\nuwsgi_param  REQUEST_METHOD     $request_method;\nuwsgi_param  CONTENT_TYPE       $content_type;\nuwsgi_param  CONTENT_LENGTH     $content_length;\nuwsgi_param  REQUEST_URI        $request_uri;\nuwsgi_param  PATH_INFO          $document_uri;\nuwsgi_param  DOCUMENT_ROOT      $document_root;\nuwsgi_param  SERVER_PROTOCOL    $server_protocol;\nuwsgi_param  REQUEST_SCHEME     $scheme;\nuwsgi_param  HTTPS              $https if_not_empty;\nuwsgi_param  REMOTE_ADDR        $remote_addr;\nuwsgi_param  REMOTE_PORT        $remote_port;\nuwsgi_param  SERVER_PORT        $server_port;\nuwsgi_param  SERVER_NAME        $server_name;\n```\n\n## 项目数据迁移\n\n项目主要数据：\n\n- `config/db.sqlite3` 数据库文件\n- `media` 上传图片的目录\n\n只需要将这两个文件拷过来就可以了。\n\n如果项目是初次部署，需要初始化一下 sqlite：（在 Python 虚拟环境下执行）\n\n```\npython3 manage.py makemigrations\npython3 manage.py migrate\npython3 manage.py createsuperuser # 创建管理员账号\n```\n\n## 启动服务 & 配置 nginx\n\n注册服务到 systemd 并启动服务。\n\n```\nsystemctl enable /opt/MrDoc/mrdoc_deploy/mrdoc.service\nsystemctl start mrdoc.service\n```\n\n如果遇到报错可以用 `systemctl status mrdoc.service` 查看启动日志。\n\n服务启动后，8008 端口就准备好请求了，接下来配置 nginx：\n\n软链配置到 nginx 目录\n```\nmkdir -p /etc/nginx/sites-enabled\nln -s /opt/MrDoc/mrdoc_deploy/mrdoc_nginx.conf /etc/nginx/sites-enabled/mrdoc_nginx.conf\n```\n\n在 nginx 配置文件中增加一行，将 `/etc/nginx/sites-enabled` 下的文件都 include 进来：\n\n```\n    include /etc/nginx/sites-enabled/*.conf;\n```\n\n配置好之后，测试一下配置文件：\n\n```\nnginx -t\n```\n\n如果没有报错，则重启 nginx 服务：\n\n```\nsystemctl restart nginx\n```\n\n现在可以访问网站目录测试网站是否正常。\n\n## 数据备份\n\n数据备份采用 crontab 定时拷贝 sqlite 文件和 media 目录：\n\n```\ncrontab -e # 进入 crontab 编辑模式，加上下面两行\n0 1 * * * cp /opt/MrDoc/MrDocPro/config/db.sqlite3 /opt/MrDoc/backup/db.sqlite_`date \"+\\%Y\\%m\\%d\"`\n0 1 * * * cp -r /opt/MrDoc/MrDocPro/media /opt/MrDoc/backup/media_`date \"+\\%Y\\%m\\%d\"`\n```\n\n## docker 部署问题\n\n使用 docker 部署的服务，偶尔会有卡顿问题，未排查出原因，暂不建议在生产使用。\n\n', '<p>文档服务地址： <a href=\"https://openjianghu.org/\">https://openjianghu.org/</a><br>使用项目：<a href=\"https://github.com/zmister2016/MrDoc\">https://github.com/zmister2016/MrDoc</a></p>\n<h2 id=\"h2-u73AFu5883u51C6u5907\"><a class=\"reference-link\" name=\"环境准备\"></a><span class=\"header-link octicon octicon-link\"></span>环境准备</h2><p>环境：CentOS 7，系统自带 Python 3.6.8。<br>项目总目录：/opt/MrDoc</p>\n<p>安装 Nginx、gcc 等环境</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">yum </span><span class=\"kwd\">group</span><span class=\"pln\"> install </span><span class=\"str\">\"Development Tools\"</span></code></li><li class=\"L1\"><code><span class=\"pln\">yum install nginx python</span><span class=\"pun\">-</span><span class=\"pln\">devel openldap</span><span class=\"pun\">-</span><span class=\"pln\">devel mysql</span><span class=\"pun\">-</span><span class=\"pln\">devel</span></code></li></ol></pre>\n<p>安装 sqlite3（Django 2.2.x 需要依赖 sqlite3）</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">wget https</span><span class=\"pun\">:</span><span class=\"com\">//kojipkgs.fedoraproject.org//packages/sqlite/3.8.11/1.fc21/x86_64/sqlite-3.8.11-1.fc21.x86_64.rpm</span></code></li><li class=\"L1\"><code><span class=\"pln\">yum install sqlite</span><span class=\"pun\">-</span><span class=\"lit\">3.8</span><span class=\"pun\">.</span><span class=\"lit\">11</span><span class=\"pun\">-</span><span class=\"lit\">1.fc21.x86</span><span class=\"pln\">_64</span><span class=\"pun\">.</span><span class=\"pln\">rpm</span></code></li><li class=\"L2\"><code></code></li><li class=\"L3\"><code><span class=\"com\"># 查看确认版本</span></code></li><li class=\"L4\"><code><span class=\"pln\">sqlite3 </span><span class=\"pun\">-</span><span class=\"pln\">version</span></code></li><li class=\"L5\"><code><span class=\"lit\">3.8</span><span class=\"pun\">.</span><span class=\"lit\">11</span><span class=\"pln\"> </span><span class=\"lit\">2015</span><span class=\"pun\">-</span><span class=\"lit\">07</span><span class=\"pun\">-</span><span class=\"lit\">27</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">49</span><span class=\"pun\">:</span><span class=\"lit\">41</span><span class=\"pln\"> b8e92227a469de677a66da62e4361f099c0b79d0</span></code></li><li class=\"L6\"><code><span class=\"com\"># 进 Python 确认</span></code></li><li class=\"L7\"><code><span class=\"pln\">python3</span></code></li><li class=\"L8\"><code><span class=\"pun\">&gt;&gt;&gt;</span><span class=\"pln\"> </span><span class=\"kwd\">import</span><span class=\"pln\"> sqlite3</span></code></li><li class=\"L9\"><code><span class=\"pun\">&gt;&gt;&gt;</span><span class=\"pln\"> sqlite3</span><span class=\"pun\">.</span><span class=\"pln\">sqlite_version</span></code></li><li class=\"L0\"><code><span class=\"str\">\'3.8.11\'</span></code></li></ol></pre>\n<p>安装 uwsgi</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">pip3 install uwsgi</span></code></li></ol></pre>\n<p>拉取源码</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">git clone https</span><span class=\"pun\">:</span><span class=\"com\">//git.mrdoc.pro/MrDoc/MrDocPro</span></code></li></ol></pre>\n<p>创建 Python 虚拟环境 mrdoc_env</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">python3 </span><span class=\"pun\">-</span><span class=\"pln\">m venv mrdoc_env</span></code></li></ol></pre>\n<p>激活虚拟环境</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">source </span><span class=\"pun\">./</span><span class=\"pln\">mrdoc_env</span><span class=\"pun\">/</span><span class=\"pln\">bin</span><span class=\"pun\">/</span><span class=\"pln\">activate</span></code></li></ol></pre>\n<p>在虚拟环境下安装依赖</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">pip3 install </span><span class=\"pun\">-</span><span class=\"pln\">r </span><span class=\"pun\">./</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">requirements</span><span class=\"pun\">.</span><span class=\"pln\">txt</span></code></li></ol></pre>\n<p>如果依赖安装失败可能需要 Google 搜索排查一下问题。</p>\n<h2 id=\"h2-u914Du7F6Eu6587u4EF6\"><a class=\"reference-link\" name=\"配置文件\"></a><span class=\"header-link octicon octicon-link\"></span>配置文件</h2><p><code>/opt/MrDoc</code> 下会的目录结构如下：</p>\n<ul>\n<li>MrDocPro 项目代码</li><li>mrdoc_env 虚拟环境</li><li>mrdoc_deploy 配置文件目录<ul>\n<li>mrdoc_nginx.conf nginx 配置，之后会软链到 nginx 配置目录</li><li>mrdoc.service systemd 服务文件</li><li>mrdoc_uwsgi.ini uwsgi 配置</li><li>uwsgi_params uwsgi 配置</li><li>nginx 存放 Nginx 证书的目录<ul>\n<li>STAR.openjianghu.org.key</li><li>STAR.openjianghu.org.crt</li></ul>\n</li></ul>\n</li></ul>\n<p>具体内容：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-cnf\"><span class=\"pln\">cat mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_nginx</span><span class=\"pun\">.</span><span class=\"pln\">conf </span></code></li><li class=\"L1\"><code class=\"language-cnf\"><span class=\"pln\">server</span></code></li><li class=\"L2\"><code class=\"language-cnf\"><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-cnf\"><span class=\"pln\">    listen </span><span class=\"lit\">80</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-cnf\"><span class=\"pln\">        listen </span><span class=\"lit\">443</span><span class=\"pln\"> ssl http2</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-cnf\"><span class=\"pln\">    server_name www</span><span class=\"pun\">.</span><span class=\"pln\">openjianghu</span><span class=\"pun\">.</span><span class=\"pln\">org</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-cnf\"><span class=\"pln\">    index index</span><span class=\"pun\">.</span><span class=\"pln\">php index</span><span class=\"pun\">.</span><span class=\"pln\">html index</span><span class=\"pun\">.</span><span class=\"pln\">htm </span><span class=\"kwd\">default</span><span class=\"pun\">.</span><span class=\"pln\">php </span><span class=\"kwd\">default</span><span class=\"pun\">.</span><span class=\"pln\">htm </span><span class=\"kwd\">default</span><span class=\"pun\">.</span><span class=\"pln\">html</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-cnf\"><span class=\"pln\">    root </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">wwwroot</span><span class=\"pun\">/</span><span class=\"pln\">doc</span><span class=\"pun\">.</span><span class=\"pln\">openjianghu</span><span class=\"pun\">.</span><span class=\"pln\">org</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-cnf\"></code></li><li class=\"L9\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"com\">#SSL-START SSL related configuration, do NOT delete or modify the next line of commented-out 404 rules</span></code></li><li class=\"L0\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"com\">#error_page 404/404.html;</span></code></li><li class=\"L1\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"com\">#HTTP_TO_HTTPS_START</span></code></li><li class=\"L2\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">$server_port </span><span class=\"pun\">!~</span><span class=\"pln\"> </span><span class=\"lit\">443</span><span class=\"pun\">){</span></code></li><li class=\"L3\"><code class=\"language-cnf\"><span class=\"pln\">        rewrite </span><span class=\"pun\">^(</span><span class=\"str\">/.*)$ https:/</span><span class=\"pun\">/</span><span class=\"pln\">$host$1 permanent</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"com\">#HTTP_TO_HTTPS_END</span></code></li><li class=\"L6\"><code class=\"language-cnf\"><span class=\"pln\">    ssl_certificate    </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">STAR</span><span class=\"pun\">.</span><span class=\"pln\">openjianghu</span><span class=\"pun\">.</span><span class=\"pln\">org</span><span class=\"pun\">.</span><span class=\"pln\">crt</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-cnf\"><span class=\"pln\">    ssl_certificate_key    </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">STAR</span><span class=\"pun\">.</span><span class=\"pln\">openjianghu</span><span class=\"pun\">.</span><span class=\"pln\">org</span><span class=\"pun\">.</span><span class=\"pln\">key</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-cnf\"><span class=\"pln\">    ssl_protocols </span><span class=\"typ\">TLSv1</span><span class=\"pun\">.</span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"typ\">TLSv1</span><span class=\"pun\">.</span><span class=\"lit\">2</span><span class=\"pln\"> </span><span class=\"typ\">TLSv1</span><span class=\"pun\">.</span><span class=\"lit\">3</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-cnf\"><span class=\"pln\">    ssl_ciphers EECDH</span><span class=\"pun\">+</span><span class=\"pln\">CHACHA20</span><span class=\"pun\">:</span><span class=\"pln\">EECDH</span><span class=\"pun\">+</span><span class=\"pln\">CHACHA20</span><span class=\"pun\">-</span><span class=\"pln\">draft</span><span class=\"pun\">:</span><span class=\"pln\">EECDH</span><span class=\"pun\">+</span><span class=\"pln\">AES128</span><span class=\"pun\">:</span><span class=\"pln\">RSA</span><span class=\"pun\">+</span><span class=\"pln\">AES128</span><span class=\"pun\">:</span><span class=\"pln\">EECDH</span><span class=\"pun\">+</span><span class=\"pln\">AES256</span><span class=\"pun\">:</span><span class=\"pln\">RSA</span><span class=\"pun\">+</span><span class=\"pln\">AES256</span><span class=\"pun\">:</span><span class=\"pln\">EECDH</span><span class=\"pun\">+</span><span class=\"lit\">3DES</span><span class=\"pun\">:</span><span class=\"pln\">RSA</span><span class=\"pun\">+</span><span class=\"lit\">3DES</span><span class=\"pun\">:!</span><span class=\"pln\">MD5</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-cnf\"><span class=\"pln\">    ssl_prefer_server_ciphers on</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-cnf\"><span class=\"pln\">    ssl_session_cache shared</span><span class=\"pun\">:</span><span class=\"pln\">SSL</span><span class=\"pun\">:</span><span class=\"lit\">10m</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-cnf\"><span class=\"pln\">    ssl_session_timeout </span><span class=\"lit\">10m</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-cnf\"><span class=\"pln\">    add_header </span><span class=\"typ\">Strict</span><span class=\"pun\">-</span><span class=\"typ\">Transport</span><span class=\"pun\">-</span><span class=\"typ\">Security</span><span class=\"pln\"> </span><span class=\"str\">\"max-age=31536000\"</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-cnf\"><span class=\"pln\">    error_page </span><span class=\"lit\">497</span><span class=\"pln\">  https</span><span class=\"pun\">:</span><span class=\"com\">//$host$request_uri;</span></code></li><li class=\"L5\"><code class=\"language-cnf\"></code></li><li class=\"L6\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"com\">#SSL-END</span></code></li><li class=\"L7\"><code class=\"language-cnf\"></code></li><li class=\"L8\"><code class=\"language-cnf\"><span class=\"pln\">    client_max_body_size </span><span class=\"lit\">75M</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-cnf\"></code></li><li class=\"L0\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"com\"># Forbidden files or directories</span></code></li><li class=\"L1\"><code class=\"language-cnf\"><span class=\"pln\">    location </span><span class=\"pun\">~</span><span class=\"pln\"> </span><span class=\"pun\">^/(</span><span class=\"pln\">\\.user</span><span class=\"pun\">.</span><span class=\"pln\">ini</span><span class=\"pun\">|</span><span class=\"pln\">\\.htaccess</span><span class=\"pun\">|</span><span class=\"pln\">\\.git</span><span class=\"pun\">|</span><span class=\"pln\">\\.svn</span><span class=\"pun\">|</span><span class=\"pln\">\\.project</span><span class=\"pun\">|</span><span class=\"pln\">LICENSE</span><span class=\"pun\">|</span><span class=\"pln\">README</span><span class=\"pun\">.</span><span class=\"pln\">md</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-cnf\"><span class=\"pln\">        </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"lit\">404</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-cnf\"></code></li><li class=\"L6\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"com\"># Directory verification related settings for one-click application for SSL certificate</span></code></li><li class=\"L7\"><code class=\"language-cnf\"><span class=\"pln\">    location </span><span class=\"pun\">~</span><span class=\"pln\"> \\.well</span><span class=\"pun\">-</span><span class=\"pln\">known </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-cnf\"><span class=\"pln\">        allow all</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-cnf\"></code></li><li class=\"L1\"><code class=\"language-cnf\"><span class=\"pln\">    location </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span></code></li><li class=\"L2\"><code class=\"language-cnf\"><span class=\"pln\">        include </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">uwsgi_params</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-cnf\"><span class=\"pln\">        uwsgi_pass </span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span><span class=\"pun\">:</span><span class=\"lit\">8008</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-cnf\"><span class=\"pln\">        uwsgi_read_timeout </span><span class=\"lit\">60</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"pun\">}</span><span class=\"pln\">   </span></code></li><li class=\"L6\"><code class=\"language-cnf\"><span class=\"pln\">    location </span><span class=\"pun\">/</span><span class=\"kwd\">static</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-cnf\"><span class=\"pln\">        expires </span><span class=\"lit\">30d</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-cnf\"><span class=\"pln\">        autoindex on</span><span class=\"pun\">;</span><span class=\"pln\"> </span></code></li><li class=\"L9\"><code class=\"language-cnf\"><span class=\"pln\">        add_header </span><span class=\"typ\">Cache</span><span class=\"pun\">-</span><span class=\"typ\">Control</span><span class=\"pln\"> </span><span class=\"kwd\">private</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-cnf\"><span class=\"pln\">        </span><span class=\"kwd\">alias</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"typ\">MrDocPro</span><span class=\"pun\">/</span><span class=\"kwd\">static</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-cnf\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-cnf\"><span class=\"pln\">     location </span><span class=\"pun\">/</span><span class=\"pln\">media  </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-cnf\"><span class=\"pln\">        </span><span class=\"kwd\">alias</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"typ\">MrDocPro</span><span class=\"pun\">/</span><span class=\"pln\">media</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-cnf\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-cnf\"></code></li><li class=\"L6\"><code class=\"language-cnf\"><span class=\"pln\">    charset UTF</span><span class=\"pun\">-</span><span class=\"lit\">8</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-cnf\"><span class=\"pln\">    access_log      </span><span class=\"pun\">/</span><span class=\"kwd\">var</span><span class=\"pun\">/</span><span class=\"pln\">log</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_access</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-cnf\"><span class=\"pln\">    error_log       </span><span class=\"pun\">/</span><span class=\"kwd\">var</span><span class=\"pun\">/</span><span class=\"pln\">log</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_error</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-cnf\"><span class=\"pun\">}</span></code></li></ol></pre>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-service\"><span class=\"pln\">cat mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc</span><span class=\"pun\">.</span><span class=\"pln\">service </span></code></li><li class=\"L1\"><code class=\"language-service\"><span class=\"pun\">[</span><span class=\"typ\">Unit</span><span class=\"pun\">]</span></code></li><li class=\"L2\"><code class=\"language-service\"><span class=\"typ\">Description</span><span class=\"pun\">=</span><span class=\"typ\">MrdocApp</span></code></li><li class=\"L3\"><code class=\"language-service\"><span class=\"typ\">After</span><span class=\"pun\">=</span><span class=\"pln\">syslog</span><span class=\"pun\">.</span><span class=\"pln\">target</span></code></li><li class=\"L4\"><code class=\"language-service\"></code></li><li class=\"L5\"><code class=\"language-service\"><span class=\"pun\">[</span><span class=\"typ\">Install</span><span class=\"pun\">]</span></code></li><li class=\"L6\"><code class=\"language-service\"><span class=\"typ\">WantedBy</span><span class=\"pun\">=</span><span class=\"pln\">multi</span><span class=\"pun\">-</span><span class=\"pln\">user</span><span class=\"pun\">.</span><span class=\"pln\">target</span></code></li><li class=\"L7\"><code class=\"language-service\"></code></li><li class=\"L8\"><code class=\"language-service\"><span class=\"pun\">[</span><span class=\"typ\">Service</span><span class=\"pun\">]</span></code></li><li class=\"L9\"><code class=\"language-service\"><span class=\"typ\">WorkingDirectory</span><span class=\"pun\">=</span><span class=\"str\">/opt/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"typ\">MrDocPro</span></code></li><li class=\"L0\"><code class=\"language-service\"><span class=\"typ\">ExecStart</span><span class=\"pun\">=</span><span class=\"str\">/usr/</span><span class=\"kwd\">local</span><span class=\"pun\">/</span><span class=\"pln\">bin</span><span class=\"pun\">/</span><span class=\"pln\">uwsgi </span><span class=\"pun\">--</span><span class=\"pln\">ini </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_uwsgi</span><span class=\"pun\">.</span><span class=\"pln\">ini</span></code></li><li class=\"L1\"><code class=\"language-service\"><span class=\"typ\">User</span><span class=\"pun\">=</span><span class=\"pln\">root</span></code></li><li class=\"L2\"><code class=\"language-service\"><span class=\"typ\">Restart</span><span class=\"pun\">=</span><span class=\"pln\">always</span></code></li><li class=\"L3\"><code class=\"language-service\"><span class=\"typ\">StandardError</span><span class=\"pun\">=</span><span class=\"pln\">syslo</span></code></li></ol></pre>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-ini\"><span class=\"pln\">cat mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_uwsgi</span><span class=\"pun\">.</span><span class=\"pln\">ini </span></code></li><li class=\"L1\"><code class=\"language-ini\"><span class=\"pun\">[</span><span class=\"pln\">uwsgi</span><span class=\"pun\">]</span></code></li><li class=\"L2\"><code class=\"language-ini\"><span class=\"com\"># Django-related settings</span></code></li><li class=\"L3\"><code class=\"language-ini\"><span class=\"pln\">socket </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">:</span><span class=\"lit\">8008</span></code></li><li class=\"L4\"><code class=\"language-ini\"><span class=\"com\"># the base directory (full path)</span></code></li><li class=\"L5\"><code class=\"language-ini\"><span class=\"pln\">chdir           </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">/opt/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"typ\">MrDocPro</span></code></li><li class=\"L6\"><code class=\"language-ini\"><span class=\"pln\">virtualenv </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">/opt/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_env</span></code></li><li class=\"L7\"><code class=\"language-ini\"><span class=\"com\"># Django s wsgi file</span></code></li><li class=\"L8\"><code class=\"language-ini\"><span class=\"kwd\">module</span><span class=\"pln\">          </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">MrDocPro</span><span class=\"pun\">.</span><span class=\"pln\">wsgi</span><span class=\"pun\">:</span><span class=\"pln\">application</span></code></li><li class=\"L9\"><code class=\"language-ini\"><span class=\"pln\">wsgi</span><span class=\"pun\">-</span><span class=\"pln\">file       </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">MrDocPro</span><span class=\"pun\">/</span><span class=\"pln\">wsgi</span><span class=\"pun\">.</span><span class=\"pln\">py</span></code></li><li class=\"L0\"><code class=\"language-ini\"><span class=\"com\"># process-related settings</span></code></li><li class=\"L1\"><code class=\"language-ini\"><span class=\"com\"># master</span></code></li><li class=\"L2\"><code class=\"language-ini\"><span class=\"pln\">master          </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">true</span></code></li><li class=\"L3\"><code class=\"language-ini\"><span class=\"com\"># maximum number of worker processes</span></code></li><li class=\"L4\"><code class=\"language-ini\"><span class=\"pln\">processes       </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"lit\">1</span></code></li><li class=\"L5\"><code class=\"language-ini\"><span class=\"pln\">threads </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"lit\">2</span></code></li><li class=\"L6\"><code class=\"language-ini\"><span class=\"com\"># ... with appropriate permissions - may be needed</span></code></li><li class=\"L7\"><code class=\"language-ini\"><span class=\"com\"># chmod-socket    = 664</span></code></li><li class=\"L8\"><code class=\"language-ini\"><span class=\"com\"># clear environment on exit</span></code></li><li class=\"L9\"><code class=\"language-ini\"><span class=\"pln\">plugins </span><span class=\"pun\">=</span><span class=\"pln\"> python3</span></code></li><li class=\"L0\"><code class=\"language-ini\"><span class=\"pln\">vacuum          </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">true</span></code></li><li class=\"L1\"><code class=\"language-ini\"><span class=\"pln\">python</span><span class=\"pun\">-</span><span class=\"pln\">autoreload </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"lit\">1</span></code></li></ol></pre>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">cat mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">uwsgi_params </span></code></li><li class=\"L1\"><code><span class=\"pln\">uwsgi_param  QUERY_STRING       $query_string</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">uwsgi_param  REQUEST_METHOD     $request_method</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">uwsgi_param  CONTENT_TYPE       $content_type</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">uwsgi_param  CONTENT_LENGTH     $content_length</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">uwsgi_param  REQUEST_URI        $request_uri</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">uwsgi_param  PATH_INFO          $document_uri</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code><span class=\"pln\">uwsgi_param  DOCUMENT_ROOT      $document_root</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code><span class=\"pln\">uwsgi_param  SERVER_PROTOCOL    $server_protocol</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code><span class=\"pln\">uwsgi_param  REQUEST_SCHEME     $scheme</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code><span class=\"pln\">uwsgi_param  HTTPS              $https if_not_empty</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">uwsgi_param  REMOTE_ADDR        $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">uwsgi_param  REMOTE_PORT        $remote_port</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">uwsgi_param  SERVER_PORT        $server_port</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">uwsgi_param  SERVER_NAME        $server_name</span><span class=\"pun\">;</span></code></li></ol></pre>\n<h2 id=\"h2-u9879u76EEu6570u636Eu8FC1u79FB\"><a class=\"reference-link\" name=\"项目数据迁移\"></a><span class=\"header-link octicon octicon-link\"></span>项目数据迁移</h2><p>项目主要数据：</p>\n<ul>\n<li><code>config/db.sqlite3</code> 数据库文件</li><li><code>media</code> 上传图片的目录</li></ul>\n<p>只需要将这两个文件拷过来就可以了。</p>\n<p>如果项目是初次部署，需要初始化一下 sqlite：（在 Python 虚拟环境下执行）</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">python3 manage</span><span class=\"pun\">.</span><span class=\"pln\">py makemigrations</span></code></li><li class=\"L1\"><code><span class=\"pln\">python3 manage</span><span class=\"pun\">.</span><span class=\"pln\">py migrate</span></code></li><li class=\"L2\"><code><span class=\"pln\">python3 manage</span><span class=\"pun\">.</span><span class=\"pln\">py createsuperuser </span><span class=\"com\"># 创建管理员账号</span></code></li></ol></pre>\n<h2 id=\"h2-u542Fu52A8u670Du52A126amp3B20u914Du7F6E20nginx\"><a class=\"reference-link\" name=\"启动服务 &amp; 配置 nginx\"></a><span class=\"header-link octicon octicon-link\"></span>启动服务 &amp; 配置 nginx</h2><p>注册服务到 systemd 并启动服务。</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">systemctl enable </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc</span><span class=\"pun\">.</span><span class=\"pln\">service</span></code></li><li class=\"L1\"><code><span class=\"pln\">systemctl start mrdoc</span><span class=\"pun\">.</span><span class=\"pln\">service</span></code></li></ol></pre>\n<p>如果遇到报错可以用 <code>systemctl status mrdoc.service</code> 查看启动日志。</p>\n<p>服务启动后，8008 端口就准备好请求了，接下来配置 nginx：</p>\n<p>软链配置到 nginx 目录</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">mkdir </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">sites</span><span class=\"pun\">-</span><span class=\"pln\">enabled</span></code></li><li class=\"L1\"><code><span class=\"pln\">ln </span><span class=\"pun\">-</span><span class=\"pln\">s </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_deploy</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_nginx</span><span class=\"pun\">.</span><span class=\"pln\">conf </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">sites</span><span class=\"pun\">-</span><span class=\"pln\">enabled</span><span class=\"pun\">/</span><span class=\"pln\">mrdoc_nginx</span><span class=\"pun\">.</span><span class=\"pln\">conf</span></code></li></ol></pre>\n<p>在 nginx 配置文件中增加一行，将 <code>/etc/nginx/sites-enabled</code> 下的文件都 include 进来：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">    include </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">sites</span><span class=\"pun\">-</span><span class=\"pln\">enabled</span><span class=\"com\">/*.conf;</span></code></li></ol></pre>\n<p>配置好之后，测试一下配置文件：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">nginx </span><span class=\"pun\">-</span><span class=\"pln\">t</span></code></li></ol></pre>\n<p>如果没有报错，则重启 nginx 服务：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">systemctl restart nginx</span></code></li></ol></pre>\n<p>现在可以访问网站目录测试网站是否正常。</p>\n<h2 id=\"h2-u6570u636Eu5907u4EFD\"><a class=\"reference-link\" name=\"数据备份\"></a><span class=\"header-link octicon octicon-link\"></span>数据备份</h2><p>数据备份采用 crontab 定时拷贝 sqlite 文件和 media 目录：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">crontab </span><span class=\"pun\">-</span><span class=\"pln\">e </span><span class=\"com\"># 进入 crontab 编辑模式，加上下面两行</span></code></li><li class=\"L1\"><code><span class=\"lit\">0</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> cp </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"typ\">MrDocPro</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">db</span><span class=\"pun\">.</span><span class=\"pln\">sqlite3 </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">db</span><span class=\"pun\">.</span><span class=\"pln\">sqlite_</span><span class=\"str\">`date \"+\\%Y\\%m\\%d\"`</span></code></li><li class=\"L2\"><code><span class=\"lit\">0</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">*</span><span class=\"pln\"> cp </span><span class=\"pun\">-</span><span class=\"pln\">r </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"typ\">MrDocPro</span><span class=\"pun\">/</span><span class=\"pln\">media </span><span class=\"pun\">/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"typ\">MrDoc</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">media_</span><span class=\"str\">`date \"+\\%Y\\%m\\%d\"`</span></code></li></ol></pre>\n<h2 id=\"h2-dockeru90E8u7F72u95EEu9898\"><a class=\"reference-link\" name=\"docker 部署问题\"></a><span class=\"header-link octicon octicon-link\"></span>docker 部署问题</h2><p>使用 docker 部署的服务，偶尔会有卡顿问题，未排查出原因，暂不建议在生产使用。</p>\n', NULL, NULL, NULL, '', '2022-04-23T22:02:34+08:00', 'W00001', '张三丰', '2022-06-12T16:18:25+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:18:25+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1471, 10057, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:02:58+08:00', '数据操作相关工具', NULL, '## 数据触发器\n- 数据仓库的同步方式有多种，其中一种方式是使用`mysql`自带的`表触发器`来实现的；\n- 具体怎么使用，请自行问`百度/谷歌`去，这里就不做详细说明了哈\n', '<h2 id=\"h2-u6570u636Eu89E6u53D1u5668\"><a class=\"reference-link\" name=\"数据触发器\"></a><span class=\"header-link octicon octicon-link\"></span>数据触发器</h2><ul>\n<li>数据仓库的同步方式有多种，其中一种方式是使用<code>mysql</code>自带的<code>表触发器</code>来实现的；</li><li>具体怎么使用，请自行问<code>百度/谷歌</code>去，这里就不做详细说明了哈</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T22:02:59+08:00', 'W00001', '张三丰', '2022-06-12T16:17:57+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:17:57+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1472, 10058, '10004', '08江湖JS-工具', '', 'deleted', '2022-04-23T22:03:18+08:00', '其他工具', NULL, '其他工具', '<p>其他工具</p>\n', NULL, NULL, NULL, '', '2022-04-23T22:03:21+08:00', 'W00001', '张三丰', '2022-04-23T22:03:21+08:00', 'W00001', '张三丰', 'update', 'm3611F', 'Colin', '2022-06-12T16:18:58+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1473, 10059, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:03:39+08:00', 'EduSoho开源网校系统、EduSoho企培版 部署记录', NULL, '网站：https://www.edusoho.com/open/show\n版本：V22.1.4\n官方参考文档：http://www.qiqiuyu.com/course/20/task/1598/show\n\n## 环境准备\n\n使用宝塔，安装 php7x 及 mysql57，开启 mcrypt 等扩展。\n\n## 安装步骤\n\n### 宝塔操作\n\n创建 PHP 类型的站点，配置 SSL。\n创建对应的数据库。\n\n### 上传项目\n\n将项目包上传到 /www/wwwroot/xxx.xxx.com，双击解压，会在当前目录解压出一个目录 edusoho。\n\n### 站点配置\n\n在【站点目录】下，取消 open_basedir 的限制，并配置站点目录为 /www/wwwroot/xxx.xxx.com/edusoho ，执行目录选择 /web。\n\n![](/media/202202/2022-02-21_224605_964625.png)\n\n### nginx 配置\n\n官方给的 nginx 是这样的：\n\n```\nserver {\n    listen 80;\n    server_name www.example.com;\n    root /var/www/edusoho/web;\n\n    access_log /var/log/nginx/edusoho.access.log;\n    error_log /var/log/nginx/edusoho.error.log;\n\n    location / {\n        index app.php;\n        try_files $uri @rewriteapp;\n    }\n\n    location @rewriteapp {\n        rewrite ^(.*)$ /app.php/$1 last;\n    }\n\n    location ~ ^/udisk {\n        internal;\n        root /var/www/edusoho/app/data/;\n    }\n\n    location ~ ^/(app|app_dev)\\.php(/|$) {\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_split_path_info ^(.+\\.php)(/.*)$;\n        include fastcgi_params;\n        fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;\n        fastcgi_param  HTTPS              off;\n        fastcgi_param HTTP_X-Sendfile-Type X-Accel-Redirect;\n        fastcgi_param HTTP_X-Accel-Mapping /udisk=/var/www/edusoho/app/data/udisk;\n        fastcgi_buffer_size 128k;\n        fastcgi_buffers 8 128k;\n    }\n\n    location ~* \\.(jpg|jpeg|gif|png|ico|swf)$ {\n        expires 3y;\n        access_log off;\n        gzip off;\n    }\n\n    location ~* \\.(css|js)$ {\n        access_log off;\n        expires 3y;\n    }\n\n    location ~ ^/files/.*\\.(php|php5)$ {\n        deny all;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_split_path_info ^(.+\\.php)(/.*)$;\n        fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;\n        fastcgi_param  HTTPS              off;\n        include        fastcgi_params;\n    }\n}\n```\n\n可以看到还有几个特殊的目录需要配置，我们直接把那些 location 配置到宝塔的站点里面，再调整一下里面的目录：\n\n\n![](/media/202202/2022-02-21_225723_576882.png)\n\n## 应用启动\n\n网站起来后，访问网站即可进行数据库初始化，初始化完之后网站就可以正常使用了。\n\n需要注意的是，如果初始化时有文件权限不足的提示，可以暂时将对应文件配置成 777 权限。\n\n', '<p>网站：<a href=\"https://www.edusoho.com/open/show\">https://www.edusoho.com/open/show</a><br>版本：V22.1.4<br>官方参考文档：<a href=\"http://www.qiqiuyu.com/course/20/task/1598/show\">http://www.qiqiuyu.com/course/20/task/1598/show</a></p>\n<h2 id=\"h2-u73AFu5883u51C6u5907\"><a class=\"reference-link\" name=\"环境准备\"></a><span class=\"header-link octicon octicon-link\"></span>环境准备</h2><p>使用宝塔，安装 php7x 及 mysql57，开启 mcrypt 等扩展。</p>\n<h2 id=\"h2-u5B89u88C5u6B65u9AA4\"><a class=\"reference-link\" name=\"安装步骤\"></a><span class=\"header-link octicon octicon-link\"></span>安装步骤</h2><h3 id=\"h3-u5B9Du5854u64CDu4F5C\"><a class=\"reference-link\" name=\"宝塔操作\"></a><span class=\"header-link octicon octicon-link\"></span>宝塔操作</h3><p>创建 PHP 类型的站点，配置 SSL。<br>创建对应的数据库。</p>\n<h3 id=\"h3-u4E0Au4F20u9879u76EE\"><a class=\"reference-link\" name=\"上传项目\"></a><span class=\"header-link octicon octicon-link\"></span>上传项目</h3><p>将项目包上传到 /www/wwwroot/xxx.xxx.com，双击解压，会在当前目录解压出一个目录 edusoho。</p>\n<h3 id=\"h3-u7AD9u70B9u914Du7F6E\"><a class=\"reference-link\" name=\"站点配置\"></a><span class=\"header-link octicon octicon-link\"></span>站点配置</h3><p>在【站点目录】下，取消 open_basedir 的限制，并配置站点目录为 /www/wwwroot/xxx.xxx.com/edusoho ，执行目录选择 /web。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-21_224605_964625.png\"></p>\n<h3 id=\"h3-nginxu914Du7F6E\"><a class=\"reference-link\" name=\"nginx 配置\"></a><span class=\"header-link octicon octicon-link\"></span>nginx 配置</h3><p>官方给的 nginx 是这样的：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">server </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">    listen </span><span class=\"lit\">80</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">    server_name www</span><span class=\"pun\">.</span><span class=\"pln\">example</span><span class=\"pun\">.</span><span class=\"pln\">com</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">    root </span><span class=\"pun\">/</span><span class=\"kwd\">var</span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">edusoho</span><span class=\"pun\">/</span><span class=\"pln\">web</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code></code></li><li class=\"L5\"><code><span class=\"pln\">    access_log </span><span class=\"pun\">/</span><span class=\"kwd\">var</span><span class=\"pun\">/</span><span class=\"pln\">log</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">edusoho</span><span class=\"pun\">.</span><span class=\"pln\">access</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">    error_log </span><span class=\"pun\">/</span><span class=\"kwd\">var</span><span class=\"pun\">/</span><span class=\"pln\">log</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">edusoho</span><span class=\"pun\">.</span><span class=\"pln\">error</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code></code></li><li class=\"L8\"><code><span class=\"pln\">    location </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code><span class=\"pln\">        index app</span><span class=\"pun\">.</span><span class=\"pln\">php</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code><span class=\"pln\">        try_files $uri </span><span class=\"lit\">@rewriteapp</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code></code></li><li class=\"L3\"><code><span class=\"pln\">    location </span><span class=\"lit\">@rewriteapp</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code><span class=\"pln\">        rewrite </span><span class=\"pun\">^(.*)</span><span class=\"pln\">$ </span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">php</span><span class=\"pun\">/</span><span class=\"pln\">$1 </span><span class=\"kwd\">last</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code></code></li><li class=\"L7\"><code><span class=\"pln\">    location </span><span class=\"pun\">~</span><span class=\"pln\"> </span><span class=\"pun\">^/</span><span class=\"pln\">udisk </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code><span class=\"pln\">        </span><span class=\"kwd\">internal</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code><span class=\"pln\">        root </span><span class=\"pun\">/</span><span class=\"kwd\">var</span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">edusoho</span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">/</span><span class=\"pln\">data</span><span class=\"pun\">/;</span></code></li><li class=\"L0\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code></code></li><li class=\"L2\"><code><span class=\"pln\">    location </span><span class=\"pun\">~</span><span class=\"pln\"> </span><span class=\"pun\">^</span><span class=\"str\">/(app|app_dev)\\.php(/</span><span class=\"pun\">|</span><span class=\"pln\">$</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code><span class=\"pln\">        fastcgi_pass   </span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span><span class=\"pun\">:</span><span class=\"lit\">9000</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">        fastcgi_split_path_info </span><span class=\"pun\">^(.+</span><span class=\"pln\">\\.php</span><span class=\"pun\">)(/.*)</span><span class=\"pln\">$</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">        include fastcgi_params</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">        fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code><span class=\"pln\">        fastcgi_param  HTTPS              off</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code><span class=\"pln\">        fastcgi_param HTTP_X</span><span class=\"pun\">-</span><span class=\"typ\">Sendfile</span><span class=\"pun\">-</span><span class=\"typ\">Type</span><span class=\"pln\"> X</span><span class=\"pun\">-</span><span class=\"typ\">Accel</span><span class=\"pun\">-</span><span class=\"typ\">Redirect</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code><span class=\"pln\">        fastcgi_param HTTP_X</span><span class=\"pun\">-</span><span class=\"typ\">Accel</span><span class=\"pun\">-</span><span class=\"typ\">Mapping</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\">udisk</span><span class=\"pun\">=</span><span class=\"str\">/var/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">edusoho</span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">/</span><span class=\"pln\">data</span><span class=\"pun\">/</span><span class=\"pln\">udisk</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code><span class=\"pln\">        fastcgi_buffer_size </span><span class=\"lit\">128k</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">        fastcgi_buffers </span><span class=\"lit\">8</span><span class=\"pln\"> </span><span class=\"lit\">128k</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code></code></li><li class=\"L4\"><code><span class=\"pln\">    location </span><span class=\"pun\">~*</span><span class=\"pln\"> \\.</span><span class=\"pun\">(</span><span class=\"pln\">jpg</span><span class=\"pun\">|</span><span class=\"pln\">jpeg</span><span class=\"pun\">|</span><span class=\"pln\">gif</span><span class=\"pun\">|</span><span class=\"pln\">png</span><span class=\"pun\">|</span><span class=\"pln\">ico</span><span class=\"pun\">|</span><span class=\"pln\">swf</span><span class=\"pun\">)</span><span class=\"pln\">$ </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code><span class=\"pln\">        expires </span><span class=\"lit\">3y</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pln\">        access_log off</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code><span class=\"pln\">        gzip off</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code></code></li><li class=\"L0\"><code><span class=\"pln\">    location </span><span class=\"pun\">~*</span><span class=\"pln\"> \\.</span><span class=\"pun\">(</span><span class=\"pln\">css</span><span class=\"pun\">|</span><span class=\"pln\">js</span><span class=\"pun\">)</span><span class=\"pln\">$ </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">        access_log off</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">        expires </span><span class=\"lit\">3y</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code></code></li><li class=\"L5\"><code><span class=\"pln\">    location </span><span class=\"pun\">~</span><span class=\"pln\"> </span><span class=\"pun\">^</span><span class=\"str\">/files/</span><span class=\"pun\">.*</span><span class=\"pln\">\\.</span><span class=\"pun\">(</span><span class=\"pln\">php</span><span class=\"pun\">|</span><span class=\"pln\">php5</span><span class=\"pun\">)</span><span class=\"pln\">$ </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code><span class=\"pln\">        deny all</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code></code></li><li class=\"L9\"><code><span class=\"pln\">    location </span><span class=\"pun\">~</span><span class=\"pln\"> \\.php$ </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code><span class=\"pln\">        fastcgi_pass   </span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span><span class=\"pun\">:</span><span class=\"lit\">9000</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">        fastcgi_split_path_info </span><span class=\"pun\">^(.+</span><span class=\"pln\">\\.php</span><span class=\"pun\">)(/.*)</span><span class=\"pln\">$</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code><span class=\"pln\">        fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">        fastcgi_param  HTTPS              off</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">        include        fastcgi_params</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code><span class=\"pun\">}</span></code></li></ol></pre>\n<p>可以看到还有几个特殊的目录需要配置，我们直接把那些 location 配置到宝塔的站点里面，再调整一下里面的目录：</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-21_225723_576882.png\"></p>\n<h2 id=\"h2-u5E94u7528u542Fu52A8\"><a class=\"reference-link\" name=\"应用启动\"></a><span class=\"header-link octicon octicon-link\"></span>应用启动</h2><p>网站起来后，访问网站即可进行数据库初始化，初始化完之后网站就可以正常使用了。</p>\n<p>需要注意的是，如果初始化时有文件权限不足的提示，可以暂时将对应文件配置成 777 权限。</p>\n', NULL, NULL, NULL, '', '2022-04-23T22:03:42+08:00', 'W00001', '张三丰', '2022-06-12T16:15:43+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:15:43+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1474, 10060, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:04:02+08:00', '学之思开源考试系统 - 部署', NULL, '网址：https://www.mindskip.net/xzs.html\n代码仓库：https://gitee.com/mindskip/xzs-mysql\n数据库下载地址：https://www.mindskip.net/sql/3.6.0/xzs-sql.zip\n文档教程：https://www.mindskip.net:999/guide/develop.html\n视频教程：https://ke.qq.com/course/3614230\n\n## 环境准备\n\n- JDK8（可在宝塔中安装 Tomcat 就有 JDK8 环境）\n- maven（构建时使用，不在服务器上构建则不需要安装）\n- mysql 5.7\n- 七牛云对象存储 ak、sk\n\n## 构建 jar 包\n\n项目是基于 spring boot 框架实现的，可以直接打包可执行 jar 包，不需要配置 tomcat。\n\n使用 maven 打包构建 jar 包：\n\n```\nmvn clean package -Dmaven.test.skip=true\n```\n\n构建成功后，可执行 jar 包放在 target/xzs-3.6.0.jar，将文件上传到服务器上。\n\n## 启动 jar 包\n\n启动 jar 包的命令是 `nohup java -jar xxx.jar > xxx.log 2>&1 &`，不过这样的话每次重启都要重新找到进程杀掉。\n\n我一般用一个脚本工具来做：\n\n```shell\n#!/bin/bash\nsource /etc/profile\nBUILD_ID=DONTKILLME\nappname=$1\nhomedir=`pwd`\nappdir=$homedir/$appname\nappjarname=$appname\n\nfunction go_start(){\n        num=`ps -ef | grep $appdir | grep -v grep | awk \'{print $2}\'| wc -l`\n        if [ $num -ne 0 ];then\n                echo \"WARNING : $appname already start up \"\n        else\n                nohup java -jar -Xms512m -Xmx512m $homedir/$appjarname >$homedir/logs/$appjarname.log 2>&1 &\n        echo \"$appname status : [ started ]\"\n        fi\n}\n\nfunction go_stop(){\n        num=`ps -ef | grep $appdir | grep -v grep | awk \'{print $2}\'| wc -l`\n        if [ $num -ne 0 ];then\n                ps -ef | grep $appdir | grep -v grep | awk \'{print $2}\' | xargs kill -9\n                echo \"$appname status : [ stopped ]\"\n        else\n                echo \"WARNING : $appname already stop up \"\n        fi\n}\n\nfunction go_status(){\n        num=`ps -ef | grep $appdir | grep -v grep | awk \'{print $2}\'| wc -l`\n        if [ $num -ne 0 ];then\n                echo \"$appname status : [ startd ]\"\n        else\n                echo \"$appname status : [ stopped ]\"\n        fi\n}\n\n\ncase \"$2\" in\nstart)\n  go_start\n  ;;\nstop)\n  go_stop\n  ;;\nrestart)\n  go_stop\n  go_start\n  ;;\nstatus)\n        go_status\n        ;;\n*)\n  echo  \"Usage: $0 appname {start|stop|restart|status}\"\n  exit 1\n  ;;\nesac\n```\n\n将脚本保存为 jar.sh：\n\n```\n# 启动服务\n./jar.sh xzs-3.6.0.jar start\n# 重启服务\n./jar.sh xzs-3.6.0.jar restart\n# 停止服务\n./jar.sh xzs-3.6.0.jar stop\n```\n\n## 配置 nginx\n\n在宝塔创建一个站点，然后在 nginx 上配置一个 proxy_pass 到 127.0.0.1:8000 端口即可。\n\n```\nlocation ^~ / {\n    proxy_pass http://127.0.0.1:8000;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header REMOTE-HOST $remote_addr;\n}\n```\n\n', '<p>网址：<a href=\"https://www.mindskip.net/xzs.html\">https://www.mindskip.net/xzs.html</a><br>代码仓库：<a href=\"https://gitee.com/mindskip/xzs-mysql\">https://gitee.com/mindskip/xzs-mysql</a><br>数据库下载地址：<a href=\"https://www.mindskip.net/sql/3.6.0/xzs-sql.zip\">https://www.mindskip.net/sql/3.6.0/xzs-sql.zip</a><br>文档教程：<a href=\"https://www.mindskip.net:999/guide/develop.html\">https://www.mindskip.net:999/guide/develop.html</a><br>视频教程：<a href=\"https://ke.qq.com/course/3614230\">https://ke.qq.com/course/3614230</a></p>\n<h2 id=\"h2-u73AFu5883u51C6u5907\"><a class=\"reference-link\" name=\"环境准备\"></a><span class=\"header-link octicon octicon-link\"></span>环境准备</h2><ul>\n<li>JDK8（可在宝塔中安装 Tomcat 就有 JDK8 环境）</li><li>maven（构建时使用，不在服务器上构建则不需要安装）</li><li>mysql 5.7</li><li>七牛云对象存储 ak、sk</li></ul>\n<h2 id=\"h2-u6784u5EFAjar20u5305\"><a class=\"reference-link\" name=\"构建 jar 包\"></a><span class=\"header-link octicon octicon-link\"></span>构建 jar 包</h2><p>项目是基于 spring boot 框架实现的，可以直接打包可执行 jar 包，不需要配置 tomcat。</p>\n<p>使用 maven 打包构建 jar 包：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">mvn clean </span><span class=\"kwd\">package</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"typ\">Dmaven</span><span class=\"pun\">.</span><span class=\"pln\">test</span><span class=\"pun\">.</span><span class=\"pln\">skip</span><span class=\"pun\">=</span><span class=\"kwd\">true</span></code></li></ol></pre>\n<p>构建成功后，可执行 jar 包放在 target/xzs-3.6.0.jar，将文件上传到服务器上。</p>\n<h2 id=\"h2-u542Fu52A8jar20u5305\"><a class=\"reference-link\" name=\"启动 jar 包\"></a><span class=\"header-link octicon octicon-link\"></span>启动 jar 包</h2><p>启动 jar 包的命令是 <code>nohup java -jar xxx.jar &gt; xxx.log 2&gt;&amp;1 &amp;</code>，不过这样的话每次重启都要重新找到进程杀掉。</p>\n<p>我一般用一个脚本工具来做：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-shell\"><span class=\"com\">#!/bin/bash</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">source </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">profile</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">BUILD_ID</span><span class=\"pun\">=</span><span class=\"pln\">DONTKILLME</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">appname</span><span class=\"pun\">=</span><span class=\"pln\">$1</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">homedir</span><span class=\"pun\">=</span><span class=\"str\">`pwd`</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">appdir</span><span class=\"pun\">=</span><span class=\"pln\">$homedir</span><span class=\"pun\">/</span><span class=\"pln\">$appname</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">appjarname</span><span class=\"pun\">=</span><span class=\"pln\">$appname</span></code></li><li class=\"L7\"><code class=\"language-shell\"></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"kwd\">function</span><span class=\"pln\"> go_start</span><span class=\"pun\">(){</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">        num</span><span class=\"pun\">=</span><span class=\"str\">`ps -ef | grep $appdir | grep -v grep | awk \'{print $2}\'| wc -l`</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> $num </span><span class=\"pun\">-</span><span class=\"pln\">ne </span><span class=\"lit\">0</span><span class=\"pln\"> </span><span class=\"pun\">];</span><span class=\"kwd\">then</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">                echo </span><span class=\"str\">\"WARNING : $appname already start up \"</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">else</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">                nohup java </span><span class=\"pun\">-</span><span class=\"pln\">jar </span><span class=\"pun\">-</span><span class=\"typ\">Xms512m</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"typ\">Xmx512m</span><span class=\"pln\"> $homedir</span><span class=\"pun\">/</span><span class=\"pln\">$appjarname </span><span class=\"pun\">&gt;</span><span class=\"pln\">$homedir</span><span class=\"pun\">/</span><span class=\"pln\">logs</span><span class=\"pun\">/</span><span class=\"pln\">$appjarname</span><span class=\"pun\">.</span><span class=\"pln\">log </span><span class=\"lit\">2</span><span class=\"pun\">&gt;&amp;</span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"pun\">&amp;</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">        echo </span><span class=\"str\">\"$appname status : [ started ]\"</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">fi</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-shell\"></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"kwd\">function</span><span class=\"pln\"> go_stop</span><span class=\"pun\">(){</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">        num</span><span class=\"pun\">=</span><span class=\"str\">`ps -ef | grep $appdir | grep -v grep | awk \'{print $2}\'| wc -l`</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> $num </span><span class=\"pun\">-</span><span class=\"pln\">ne </span><span class=\"lit\">0</span><span class=\"pln\"> </span><span class=\"pun\">];</span><span class=\"kwd\">then</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">                ps </span><span class=\"pun\">-</span><span class=\"pln\">ef </span><span class=\"pun\">|</span><span class=\"pln\"> grep $appdir </span><span class=\"pun\">|</span><span class=\"pln\"> grep </span><span class=\"pun\">-</span><span class=\"pln\">v grep </span><span class=\"pun\">|</span><span class=\"pln\"> awk </span><span class=\"str\">\'{print $2}\'</span><span class=\"pln\"> </span><span class=\"pun\">|</span><span class=\"pln\"> xargs kill </span><span class=\"pun\">-</span><span class=\"lit\">9</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">                echo </span><span class=\"str\">\"$appname status : [ stopped ]\"</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">else</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">                echo </span><span class=\"str\">\"WARNING : $appname already stop up \"</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">fi</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-shell\"></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"kwd\">function</span><span class=\"pln\"> go_status</span><span class=\"pun\">(){</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">        num</span><span class=\"pun\">=</span><span class=\"str\">`ps -ef | grep $appdir | grep -v grep | awk \'{print $2}\'| wc -l`</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> $num </span><span class=\"pun\">-</span><span class=\"pln\">ne </span><span class=\"lit\">0</span><span class=\"pln\"> </span><span class=\"pun\">];</span><span class=\"kwd\">then</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">                echo </span><span class=\"str\">\"$appname status : [ startd ]\"</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">else</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">                echo </span><span class=\"str\">\"$appname status : [ stopped ]\"</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"kwd\">fi</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-shell\"></code></li><li class=\"L7\"><code class=\"language-shell\"></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\"$2\"</span><span class=\"pln\"> </span><span class=\"kwd\">in</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">start</span><span class=\"pun\">)</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">  go_start</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">;;</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pln\">stop</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">  go_stop</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">;;</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">restart</span><span class=\"pun\">)</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"pln\">  go_stop</span></code></li><li class=\"L7\"><code class=\"language-shell\"><span class=\"pln\">  go_start</span></code></li><li class=\"L8\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">;;</span></code></li><li class=\"L9\"><code class=\"language-shell\"><span class=\"pln\">status</span><span class=\"pun\">)</span></code></li><li class=\"L0\"><code class=\"language-shell\"><span class=\"pln\">        go_status</span></code></li><li class=\"L1\"><code class=\"language-shell\"><span class=\"pln\">        </span><span class=\"pun\">;;</span></code></li><li class=\"L2\"><code class=\"language-shell\"><span class=\"pun\">*)</span></code></li><li class=\"L3\"><code class=\"language-shell\"><span class=\"pln\">  echo  </span><span class=\"str\">\"Usage: $0 appname {start|stop|restart|status}\"</span></code></li><li class=\"L4\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"kwd\">exit</span><span class=\"pln\"> </span><span class=\"lit\">1</span></code></li><li class=\"L5\"><code class=\"language-shell\"><span class=\"pln\">  </span><span class=\"pun\">;;</span></code></li><li class=\"L6\"><code class=\"language-shell\"><span class=\"kwd\">esac</span></code></li></ol></pre>\n<p>将脚本保存为 jar.sh：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"com\"># 启动服务</span></code></li><li class=\"L1\"><code><span class=\"pun\">./</span><span class=\"pln\">jar</span><span class=\"pun\">.</span><span class=\"pln\">sh xzs</span><span class=\"pun\">-</span><span class=\"lit\">3.6</span><span class=\"pun\">.</span><span class=\"lit\">0.jar</span><span class=\"pln\"> start</span></code></li><li class=\"L2\"><code><span class=\"com\"># 重启服务</span></code></li><li class=\"L3\"><code><span class=\"pun\">./</span><span class=\"pln\">jar</span><span class=\"pun\">.</span><span class=\"pln\">sh xzs</span><span class=\"pun\">-</span><span class=\"lit\">3.6</span><span class=\"pun\">.</span><span class=\"lit\">0.jar</span><span class=\"pln\"> restart</span></code></li><li class=\"L4\"><code><span class=\"com\"># 停止服务</span></code></li><li class=\"L5\"><code><span class=\"pun\">./</span><span class=\"pln\">jar</span><span class=\"pun\">.</span><span class=\"pln\">sh xzs</span><span class=\"pun\">-</span><span class=\"lit\">3.6</span><span class=\"pun\">.</span><span class=\"lit\">0.jar</span><span class=\"pln\"> stop</span></code></li></ol></pre>\n<h2 id=\"h2-u914Du7F6Enginx\"><a class=\"reference-link\" name=\"配置 nginx\"></a><span class=\"header-link octicon octicon-link\"></span>配置 nginx</h2><p>在宝塔创建一个站点，然后在 nginx 上配置一个 proxy_pass 到 127.0.0.1:8000 端口即可。</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">location </span><span class=\"pun\">^~</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code><span class=\"pln\">    proxy_pass http</span><span class=\"pun\">:</span><span class=\"com\">//127.0.0.1:8000;</span></code></li><li class=\"L2\"><code><span class=\"pln\">    proxy_set_header </span><span class=\"typ\">Host</span><span class=\"pln\"> $host</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code><span class=\"pln\">    proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Real</span><span class=\"pun\">-</span><span class=\"pln\">IP $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code><span class=\"pln\">    proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Forwarded</span><span class=\"pun\">-</span><span class=\"typ\">For</span><span class=\"pln\"> $proxy_add_x_forwarded_for</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code><span class=\"pln\">    proxy_set_header REMOTE</span><span class=\"pun\">-</span><span class=\"pln\">HOST $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code><span class=\"pun\">}</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-04-23T22:04:02+08:00', 'W00001', '张三丰', '2022-06-12T16:17:35+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:17:35+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1475, 10061, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:04:22+08:00', 'VSCode 使用指南', NULL, '- 使用 egg-bin 调试\n- 使用vscode进行调试\n\n\n## 安装\n\n打开官网 https://code.visualstudio.com/ 即可。\n\n官网提供稳定版（Stable）及预发布版（Insiders），如果你遇到 VSCode 的 Bug，可以安装 Insiders 版本，说不定已经修复了。\n\n![](/media/202202/2022-02-25_205442_317475.png)\n\n## 操作界面\n\n![](/media/202202/2022-02-25_205837_122330.png)\n\n具体每一块的功能可以看官方的说明文档：https://code.visualstudio.com/docs/getstarted/userinterface\n\n## 从 WebStorm、IDEA 迁移快捷键\n\n对于习惯 IntelliJ 系产品的同学，可以将 VSCode 的键位切换为 IntelliJ 的键位。\n\n使用 [IntelliJ IDEA Keybindings 插件](https://marketplace.visualstudio.com/items?itemName=k--kato.intellij-idea-keybindings)就可以使用 IntelliJ 的键位啦。\n\n如果之前在使用 WebStorm、IDEA 时有配置自己的快捷键，同样也可以将键位导出迁移过来，具体这样操作：\n\n1、先在 WebStorm、IDEA 导出所有配置\n\n![](/media/202202/2022-02-25_212301_597600.png)\n\n2、解压后配置包里面有个 keymaps 目录，底下就有你自己的快捷键配置了。\n\n3、在安装完 IntelliJ IDEA Keybindings 的情况下，打开 Command Palette：\n\n![](/media/202202/2022-02-25_213231_875241.png)\n\n输入 IntelliJ，回车开始导入配置：\n\n![](/media/202202/2022-02-25_213320_975453.png)\n\n选择「Import from XML file」，然后根据你的配置导出操作系统和当前操作系统选一下：\n\n![](/media/202202/2022-02-25_213525_999896.png)\n\n之后选择刚才导出的键位文件，XML 格式的，会打开一份 JSON 格式的 keymap 配置，复制到 keybindings.json：\n\n![](/media/202202/2022-02-25_213751_030246.png)\n\n关掉 Untitle-1 文件，保存 keybindings.json，配置就结束了，你可以使用之前习惯的键位了。\n\n![](/media/202202/2022-02-25_213922_466974.png)\n\n## 常用快捷键及如何调整快捷键\n\nVSCode 还是有不少实用的键位的，可以记录在这边，大家一起简单学一下。\n\n_TODO 补充_\n\n| 快捷键 | 说明 |\n| --- | --- |\n|  |  |\n|  |  |\n|  |  |\n|  |  |\n|  |  |\n|  |  |\n\n## Node 开发环境配置及调试\n\n### Node 支持\n\n安装插件集 Node Essentials，里面包含了调试器、ESLint、GitLen 等一系列好用的插件。\n安装之后项目就可以支持 Node 的开发和调试了。\n\n### ESLint 配置\n\n打开 VSCode 的配置项，搜索 Format On，勾选下列选项：\n\n1. Format On Paste 粘贴时进行格式化\n2. Format On Save 保存时进行格式化\n3. Format On Save Mode 保存时格式化哪些代码\n	- 默认是「file」就是全文件都格式化\n	- 「modifications」则是只格式化 git 管理下的修改的那部分代码，没有 git 则不格式化\n	- 「modificationsIfAvailable」只格式化 git 管理下的修改的那部分代码，没有 git 则全文件格式化\n\n![](/media/202202/2022-02-25_231615_746788.png)\n\n### 断点调试配置\n\nVSCode 默认没法在任意代码上进行断点（如 node_module 里的代码），所以需要打开这个配置：\n\n![](/media/202202/2022-02-25_234347_088774.png)\n\n打开后就可以在任意地方打断点了。\n\n![](/media/202202/2022-02-25_234607_753327.png)\n\n### Npm 项目调试\n\nNpm 项目指的是带 package.json 的那类项目，可以直接打开 package.json，找到 scripts 上面的「Debug」按钮，选择要调试的脚本。\n\n![](/media/202202/2022-02-25_233744_488098.png)\n\n在下面的 Terminal 上就可以看到程序运行日志，然后进行断点调试了。\n\n![](/media/202202/2022-02-25_235143_119333.png)\n\n可以看到功能还是很齐全的，上面的悬浮按钮可以进行单步、重启服务等操作，下面终端可以看到程序输出，左边可以看到上下文变量、变量监视、调用栈、断点管理。\n\n同时你也可以在断点状态下，在「Debug Console」里执行 js 脚本：\n\n![](/media/202202/2022-02-26_000013_474864.png)\n\n这种方式启动调试的问题在于这个调试方案是临时的，所以停止调试后，下次没法重新进入调试，只能再次打开 package.json 重新点 Debug 进入调试。如果希望能调试方案能固定下来，可以查看下面「配置化的调试方式」部分\n\n### Node 脚本调试\n\nNode 脚本调试也很简单，只需要在终端那边创建一个 Debug Terminal，执行你的 Node 命令，就可以进入调试模式。\n\n这种调试方式同样也适用于 Npm 项目。\n\n![](/media/202202/2022-02-26_000712_279295.png)\n\n### 配置化的调试方式\n\n上面两种调试方式都有一个问题，就是每次停止后都得重新操作才能进行调试。\n\nVSCode 提供一种更灵活的调试方式，就是将调试方式配置化，将调试方案保存到 .vscode/launch.json 文件下。\n\n进入 Debug 界面后，点击「create a launch.json file」创建配置文件，选择 Node 类型（如果是 Egg.js 项目也可以创建 Egg 类型，这个需要安装「eggjs」插件）。\n\n![](/media/202202/2022-02-26_001253_305849.png)\n\n修改 launch.js 就能进行各种各样的调试效果了，这边提供一个模板：\n```json\n{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"command\": \"npm --prefix=jianghujs_demo_basic run dev\",\n            \"name\": \"jianghujs_demo_basic\",\n            \"request\": \"launch\",\n            \"type\": \"node-terminal\"\n        },\n        {\n            \"command\": \"npm --prefix=jianghujs_demo_advanced run dev\",\n            \"name\": \"jianghujs_demo_advanced\",\n            \"request\": \"launch\",\n            \"type\": \"node-terminal\"\n        },\n    ]\n}\n```\n\n\n## Git 插件的使用\n\nVSCode 默认使用 `Source Control` 来管理Git;\n常用的`Source Control` 如下:\n- git pull代码\n	> ![](/media/202202/2022-02-26_234319_068837.png)\n- git commit 代码 & push 代码到服务器 \n	> ![](/media/202202/2022-02-26_234155_362978.png)\n- git 合并代码时冲突解决\n	> ![](/media/202202/2022-02-26_234823_893925.png)\n	> \n	> ![](/media/202202/2022-02-26_234944_029320.png)\n	>\n	> `5.` 如果添加后变成 staged 状态，打开命令行执行`git rebase --continue` 并 使用`vi`语法 提交message 然后 `:wq`退出\n	> ```bash\n		$ git rebase --continue\n			merge test \n			# 请为您的变更输入提交说明。以 \'#\' 开始的行将被忽略，而一个空的提交\n			# 说明将会终止提交。\n			#\n			# 交互式变基操作正在进行中；至 a081d7c\n			# 最后一条命令已完成（1 条命令被执行）：\n			#    pick cc05104 [merge]\n			# 未剩下任何命令。\n			# 您在执行将分支 \'main\' 变基到 \'a081d7c\' 的操作。\n			#\n			# 要提交的变更：\n			#       修改：     package.json\n			:wq\n			1 file changed, 2 insertions(+)\n			成功变基并更新 refs/heads/main。\n	>```\n	> 点击同步\n	> ![](/media/202202/2022-02-27_144152_155314.png)\n\n## 同步配置到云端\n\n\n\n## SSH 远程开发\n\n\n## Docker 管理及开发\n\n\n## 其它实用插件推荐\n### 名称:  es6-string-html\nID: Tobermory.es6-string-html\n说明: Syntax highlighting in es6 multiline strings\n版本: 2.12.0\n发布者: Tobermory\nVS Marketplace 链接: https://marketplace.visualstudio.com/items?itemName=Tobermory.es6-string-html\n- html文件中写vue组件，template的html代码端没有变色，加上这个/*html*/\n缺点：无法格式化这段html代码\n```\ntemplate: /*html*/ `\n    <div class=\"footDiv\"></div>\n	`\n```\n\n### 名称: Vue 2 Snippets\nID: NicholasHsiang.vscode-vue2-snippets\n说明: Code snippets for Vue 2 vue2写代码提示\n版本: 1.1.1\n发布者: NicholasHsiang\nVS Marketplace 链接: https://marketplace.visualstudio.com/items?itemName=NicholasHsiang.vscode-vue2-snippets\n- Bracket Pair Colorizer 彩色配对括号插件\n- Draw.io Integration 可以直接在 VSCode \n', '<ul>\n<li>使用 egg-bin 调试</li><li>使用vscode进行调试</li></ul>\n<h2 id=\"h2-u5B89u88C5\"><a class=\"reference-link\" name=\"安装\"></a><span class=\"header-link octicon octicon-link\"></span>安装</h2><p>打开官网 <a href=\"https://code.visualstudio.com/\">https://code.visualstudio.com/</a> 即可。</p>\n<p>官网提供稳定版（Stable）及预发布版（Insiders），如果你遇到 VSCode 的 Bug，可以安装 Insiders 版本，说不定已经修复了。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_205442_317475.png\"></p>\n<h2 id=\"h2-u64CDu4F5Cu754Cu9762\"><a class=\"reference-link\" name=\"操作界面\"></a><span class=\"header-link octicon octicon-link\"></span>操作界面</h2><p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_205837_122330.png\"></p>\n<p>具体每一块的功能可以看官方的说明文档：<a href=\"https://code.visualstudio.com/docs/getstarted/userinterface\">https://code.visualstudio.com/docs/getstarted/userinterface</a></p>\n<h2 id=\"h2-u4ECEwebstormu3001idea20u8FC1u79FBu5FEBu6377u952E\"><a class=\"reference-link\" name=\"从 WebStorm、IDEA 迁移快捷键\"></a><span class=\"header-link octicon octicon-link\"></span>从 WebStorm、IDEA 迁移快捷键</h2><p>对于习惯 IntelliJ 系产品的同学，可以将 VSCode 的键位切换为 IntelliJ 的键位。</p>\n<p>使用 <a href=\"https://marketplace.visualstudio.com/items?itemName=k--kato.intellij-idea-keybindings\">IntelliJ IDEA Keybindings 插件</a>就可以使用 IntelliJ 的键位啦。</p>\n<p>如果之前在使用 WebStorm、IDEA 时有配置自己的快捷键，同样也可以将键位导出迁移过来，具体这样操作：</p>\n<p>1、先在 WebStorm、IDEA 导出所有配置</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_212301_597600.png\"></p>\n<p>2、解压后配置包里面有个 keymaps 目录，底下就有你自己的快捷键配置了。</p>\n<p>3、在安装完 IntelliJ IDEA Keybindings 的情况下，打开 Command Palette：</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_213231_875241.png\"></p>\n<p>输入 IntelliJ，回车开始导入配置：</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_213320_975453.png\"></p>\n<p>选择「Import from XML file」，然后根据你的配置导出操作系统和当前操作系统选一下：</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_213525_999896.png\"></p>\n<p>之后选择刚才导出的键位文件，XML 格式的，会打开一份 JSON 格式的 keymap 配置，复制到 keybindings.json：</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_213751_030246.png\"></p>\n<p>关掉 Untitle-1 文件，保存 keybindings.json，配置就结束了，你可以使用之前习惯的键位了。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_213922_466974.png\"></p>\n<h2 id=\"h2-u5E38u7528u5FEBu6377u952Eu53CAu5982u4F55u8C03u6574u5FEBu6377u952E\"><a class=\"reference-link\" name=\"常用快捷键及如何调整快捷键\"></a><span class=\"header-link octicon octicon-link\"></span>常用快捷键及如何调整快捷键</h2><p>VSCode 还是有不少实用的键位的，可以记录在这边，大家一起简单学一下。</p>\n<p><em>TODO 补充</em></p>\n<table>\n<thead>\n<tr>\n<th>快捷键</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"h2-nodeu5F00u53D1u73AFu5883u914Du7F6Eu53CAu8C03u8BD5\"><a class=\"reference-link\" name=\"Node 开发环境配置及调试\"></a><span class=\"header-link octicon octicon-link\"></span>Node 开发环境配置及调试</h2><h3 id=\"h3-nodeu652Fu6301\"><a class=\"reference-link\" name=\"Node 支持\"></a><span class=\"header-link octicon octicon-link\"></span>Node 支持</h3><p>安装插件集 Node Essentials，里面包含了调试器、ESLint、GitLen 等一系列好用的插件。<br>安装之后项目就可以支持 Node 的开发和调试了。</p>\n<h3 id=\"h3-eslintu914Du7F6E\"><a class=\"reference-link\" name=\"ESLint 配置\"></a><span class=\"header-link octicon octicon-link\"></span>ESLint 配置</h3><p>打开 VSCode 的配置项，搜索 Format On，勾选下列选项：</p>\n<ol>\n<li>Format On Paste 粘贴时进行格式化</li><li>Format On Save 保存时进行格式化</li><li>Format On Save Mode 保存时格式化哪些代码<ul>\n<li>默认是「file」就是全文件都格式化</li><li>「modifications」则是只格式化 git 管理下的修改的那部分代码，没有 git 则不格式化</li><li>「modificationsIfAvailable」只格式化 git 管理下的修改的那部分代码，没有 git 则全文件格式化</li></ul>\n</li></ol>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_231615_746788.png\"></p>\n<h3 id=\"h3-u65ADu70B9u8C03u8BD5u914Du7F6E\"><a class=\"reference-link\" name=\"断点调试配置\"></a><span class=\"header-link octicon octicon-link\"></span>断点调试配置</h3><p>VSCode 默认没法在任意代码上进行断点（如 node_module 里的代码），所以需要打开这个配置：</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_234347_088774.png\"></p>\n<p>打开后就可以在任意地方打断点了。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_234607_753327.png\"></p>\n<h3 id=\"h3-npmu9879u76EEu8C03u8BD5\"><a class=\"reference-link\" name=\"Npm 项目调试\"></a><span class=\"header-link octicon octicon-link\"></span>Npm 项目调试</h3><p>Npm 项目指的是带 package.json 的那类项目，可以直接打开 package.json，找到 scripts 上面的「Debug」按钮，选择要调试的脚本。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_233744_488098.png\"></p>\n<p>在下面的 Terminal 上就可以看到程序运行日志，然后进行断点调试了。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-25_235143_119333.png\"></p>\n<p>可以看到功能还是很齐全的，上面的悬浮按钮可以进行单步、重启服务等操作，下面终端可以看到程序输出，左边可以看到上下文变量、变量监视、调用栈、断点管理。</p>\n<p>同时你也可以在断点状态下，在「Debug Console」里执行 js 脚本：</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-26_000013_474864.png\"></p>\n<p>这种方式启动调试的问题在于这个调试方案是临时的，所以停止调试后，下次没法重新进入调试，只能再次打开 package.json 重新点 Debug 进入调试。如果希望能调试方案能固定下来，可以查看下面「配置化的调试方式」部分</p>\n<h3 id=\"h3-nodeu811Au672Cu8C03u8BD5\"><a class=\"reference-link\" name=\"Node 脚本调试\"></a><span class=\"header-link octicon octicon-link\"></span>Node 脚本调试</h3><p>Node 脚本调试也很简单，只需要在终端那边创建一个 Debug Terminal，执行你的 Node 命令，就可以进入调试模式。</p>\n<p>这种调试方式同样也适用于 Npm 项目。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-26_000712_279295.png\"></p>\n<h3 id=\"h3-u914Du7F6Eu5316u7684u8C03u8BD5u65B9u5F0F\"><a class=\"reference-link\" name=\"配置化的调试方式\"></a><span class=\"header-link octicon octicon-link\"></span>配置化的调试方式</h3><p>上面两种调试方式都有一个问题，就是每次停止后都得重新操作才能进行调试。</p>\n<p>VSCode 提供一种更灵活的调试方式，就是将调试方式配置化，将调试方案保存到 .vscode/launch.json 文件下。</p>\n<p>进入 Debug 界面后，点击「create a launch.json file」创建配置文件，选择 Node 类型（如果是 Egg.js 项目也可以创建 Egg 类型，这个需要安装「eggjs」插件）。</p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-26_001253_305849.png\"></p>\n<p>修改 launch.js 就能进行各种各样的调试效果了，这边提供一个模板：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-json\"><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"str\">\"version\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"0.2.0\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"str\">\"configurations\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L3\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"command\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"npm --prefix=jianghujs_demo_basic run dev\"</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"name\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"jianghujs_demo_basic\"</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"request\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"launch\"</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"type\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"node-terminal\"</span></code></li><li class=\"L8\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"command\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"npm --prefix=jianghujs_demo_advanced run dev\"</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"name\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"jianghujs_demo_advanced\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"request\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"launch\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"type\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"node-terminal\"</span></code></li><li class=\"L4\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-json\"><span class=\"pln\">    </span><span class=\"pun\">]</span></code></li><li class=\"L6\"><code class=\"language-json\"><span class=\"pun\">}</span></code></li></ol></pre>\n<h2 id=\"h2-gitu63D2u4EF6u7684u4F7Fu7528\"><a class=\"reference-link\" name=\"Git 插件的使用\"></a><span class=\"header-link octicon octicon-link\"></span>Git 插件的使用</h2><p>VSCode 默认使用 <code>Source Control</code> 来管理Git;<br>常用的<code>Source Control</code> 如下:</p>\n<ul>\n<li>git pull代码<blockquote class=\"default\">\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-26_234319_068837.png\"></p>\n</blockquote>\n</li><li>git commit 代码 &amp; push 代码到服务器 <blockquote class=\"default\">\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-26_234155_362978.png\"></p>\n</blockquote>\n</li><li>git 合并代码时冲突解决<blockquote class=\"default\">\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-26_234823_893925.png\"></p>\n<p><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-26_234944_029320.png\"></p>\n<p><code>5.</code> 如果添加后变成 staged 状态，打开命令行执行<code>git rebase --continue</code> 并 使用<code>vi</code>语法 提交message 然后 <code>:wq</code>退出</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">      $ git rebase </span><span class=\"pun\">--</span><span class=\"kwd\">continue</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">          merge test </span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\"># 请为您的变更输入提交说明。以 \'#\' 开始的行将被忽略，而一个空的提交</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\"># 说明将会终止提交。</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\">#</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\"># 交互式变基操作正在进行中；至 a081d7c</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\"># 最后一条命令已完成（1 条命令被执行）：</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\">#    pick cc05104 [merge]</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\"># 未剩下任何命令。</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\"># 您在执行将分支 \'main\' 变基到 \'a081d7c\' 的操作。</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\">#</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\"># 要提交的变更：</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"com\">#       修改：     package.json</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"pun\">:</span><span class=\"pln\">wq</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"lit\">1</span><span class=\"pln\"> file changed</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"lit\">2</span><span class=\"pln\"> insertions</span><span class=\"pun\">(+)</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">          </span><span class=\"pun\">成功变基并更新</span><span class=\"pln\"> refs</span><span class=\"pun\">/</span><span class=\"pln\">heads</span><span class=\"pun\">/</span><span class=\"pln\">main</span><span class=\"pun\">。</span></code></li></ol></pre>\n<p>点击同步<br><img alt=\"\" title=\"null\" src=\"/media/202202/2022-02-27_144152_155314.png\"></p>\n</blockquote>\n</li></ul>\n<h2 id=\"h2-u540Cu6B65u914Du7F6Eu5230u4E91u7AEF\"><a class=\"reference-link\" name=\"同步配置到云端\"></a><span class=\"header-link octicon octicon-link\"></span>同步配置到云端</h2><h2 id=\"h2-sshu8FDCu7A0Bu5F00u53D1\"><a class=\"reference-link\" name=\"SSH 远程开发\"></a><span class=\"header-link octicon octicon-link\"></span>SSH 远程开发</h2><h2 id=\"h2-dockeru7BA1u7406u53CAu5F00u53D1\"><a class=\"reference-link\" name=\"Docker 管理及开发\"></a><span class=\"header-link octicon octicon-link\"></span>Docker 管理及开发</h2><h2 id=\"h2-u5176u5B83u5B9Eu7528u63D2u4EF6u63A8u8350\"><a class=\"reference-link\" name=\"其它实用插件推荐\"></a><span class=\"header-link octicon octicon-link\"></span>其它实用插件推荐</h2><h3 id=\"h3-u540Du79F03A20es6-string-html\"><a class=\"reference-link\" name=\"名称:  es6-string-html\"></a><span class=\"header-link octicon octicon-link\"></span>名称:  es6-string-html</h3><p>ID: Tobermory.es6-string-html<br>说明: Syntax highlighting in es6 multiline strings<br>版本: 2.12.0<br>发布者: Tobermory<br>VS Marketplace 链接: <a href=\"https://marketplace.visualstudio.com/items?itemName=Tobermory.es6-string-html\">https://marketplace.visualstudio.com/items?itemName=Tobermory.es6-string-html</a></p>\n<ul>\n<li>html文件中写vue组件，template的html代码端没有变色，加上这个/<em>html</em>/<br>缺点：无法格式化这段html代码<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"kwd\">template</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"com\">/*html*/</span><span class=\"pln\"> </span><span class=\"str\">`</span></code></li><li class=\"L1\"><code><span class=\"str\">  &lt;div class=\"footDiv\"&gt;&lt;/div&gt;</span></code></li><li class=\"L2\"><code><span class=\"str\">  `</span></code></li></ol></pre>\n</li></ul>\n<h3 id=\"h3-u540Du79F03Avue20220snippets\"><a class=\"reference-link\" name=\"名称: Vue 2 Snippets\"></a><span class=\"header-link octicon octicon-link\"></span>名称: Vue 2 Snippets</h3><p>ID: NicholasHsiang.vscode-vue2-snippets<br>说明: Code snippets for Vue 2 vue2写代码提示<br>版本: 1.1.1<br>发布者: NicholasHsiang<br>VS Marketplace 链接: <a href=\"https://marketplace.visualstudio.com/items?itemName=NicholasHsiang.vscode-vue2-snippets\">https://marketplace.visualstudio.com/items?itemName=NicholasHsiang.vscode-vue2-snippets</a></p>\n<ul>\n<li>Bracket Pair Colorizer 彩色配对括号插件</li><li>Draw.io Integration 可以直接在 VSCode </li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T22:04:23+08:00', 'W00001', '张三丰', '2022-06-12T16:16:55+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:16:55+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1476, 10062, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:04:39+08:00', 'CodeFever 部署', NULL, 'CodeFever 服务地址： https://code.openjianghu.org/\n使用项目：https://github.com/PGYER/codefever\n\n## Docker 部署\n\n可参考：https://github.com/PGYER/codefever/blob/master/doc/zh-cn/installation/install_via_docker.md\n\n由于镜像默认暴露 80 和 22 端口，会和宿主机的端口冲突，所以可以重新映射端口：\n\n```\ndocker run -d --privileged=true --name codefever -p 1080:80 -p 0.0.0.0:10022:22 -it pgyer/codefever-community:latest /usr/sbin/init\n```\n\n## 数据备份\n\n目前 CodeFever 官方的数据备份指南还不完善，通过 issue https://github.com/PGYER/codefever/issues/47 可知，可以通过备份 docker 内数据库、git 仓库目录来达到备份数据的目的。\n\n不过目前 docker 内数据库还不支持从外部连接进去，所以较难备份。\n\n这边会持续关注官方进展。\n\n## 其它注意事项\n\n除了 Nginx 上的域名映射，还需要注意给这个项目开放 nginx 上传大小限制，不然太大的项目上传会会报 413：\n\n```\nclient_max_body_size 10G;\nclient_body_buffer_size 400M;\n```\n\n## 项目分析\n\n项目主体由 PHP 写成，使用的是 http://codeigniter.com/ 框架。\n\n另外针对 git 和 http 协议的 git 操作请求，是由 golang 处理的。\n', '<p>CodeFever 服务地址： <a href=\"https://code.openjianghu.org/\">https://code.openjianghu.org/</a><br>使用项目：<a href=\"https://github.com/PGYER/codefever\">https://github.com/PGYER/codefever</a></p>\n<h2 id=\"h2-dockeru90E8u7F72\"><a class=\"reference-link\" name=\"Docker 部署\"></a><span class=\"header-link octicon octicon-link\"></span>Docker 部署</h2><p>可参考：<a href=\"https://github.com/PGYER/codefever/blob/master/doc/zh-cn/installation/install_via_docker.md\">https://github.com/PGYER/codefever/blob/master/doc/zh-cn/installation/install_via_docker.md</a></p>\n<p>由于镜像默认暴露 80 和 22 端口，会和宿主机的端口冲突，所以可以重新映射端口：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">docker run </span><span class=\"pun\">-</span><span class=\"pln\">d </span><span class=\"pun\">--</span><span class=\"pln\">privileged</span><span class=\"pun\">=</span><span class=\"kwd\">true</span><span class=\"pln\"> </span><span class=\"pun\">--</span><span class=\"pln\">name codefever </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"lit\">1080</span><span class=\"pun\">:</span><span class=\"lit\">80</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"lit\">0.0</span><span class=\"pun\">.</span><span class=\"lit\">0.0</span><span class=\"pun\">:</span><span class=\"lit\">10022</span><span class=\"pun\">:</span><span class=\"lit\">22</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\">it pgyer</span><span class=\"pun\">/</span><span class=\"pln\">codefever</span><span class=\"pun\">-</span><span class=\"pln\">community</span><span class=\"pun\">:</span><span class=\"pln\">latest </span><span class=\"pun\">/</span><span class=\"pln\">usr</span><span class=\"pun\">/</span><span class=\"pln\">sbin</span><span class=\"pun\">/</span><span class=\"pln\">init</span></code></li></ol></pre>\n<h2 id=\"h2-u6570u636Eu5907u4EFD\"><a class=\"reference-link\" name=\"数据备份\"></a><span class=\"header-link octicon octicon-link\"></span>数据备份</h2><p>目前 CodeFever 官方的数据备份指南还不完善，通过 issue <a href=\"https://github.com/PGYER/codefever/issues/47\">https://github.com/PGYER/codefever/issues/47</a> 可知，可以通过备份 docker 内数据库、git 仓库目录来达到备份数据的目的。</p>\n<p>不过目前 docker 内数据库还不支持从外部连接进去，所以较难备份。</p>\n<p>这边会持续关注官方进展。</p>\n<h2 id=\"h2-u5176u5B83u6CE8u610Fu4E8Bu9879\"><a class=\"reference-link\" name=\"其它注意事项\"></a><span class=\"header-link octicon octicon-link\"></span>其它注意事项</h2><p>除了 Nginx 上的域名映射，还需要注意给这个项目开放 nginx 上传大小限制，不然太大的项目上传会会报 413：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">client_max_body_size </span><span class=\"lit\">10G</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code><span class=\"pln\">client_body_buffer_size </span><span class=\"lit\">400M</span><span class=\"pun\">;</span></code></li></ol></pre>\n<h2 id=\"h2-u9879u76EEu5206u6790\"><a class=\"reference-link\" name=\"项目分析\"></a><span class=\"header-link octicon octicon-link\"></span>项目分析</h2><p>项目主体由 PHP 写成，使用的是 <a href=\"http://codeigniter.com/\">http://codeigniter.com/</a> 框架。</p>\n<p>另外针对 git 和 http 协议的 git 操作请求，是由 golang 处理的。</p>\n', NULL, NULL, NULL, '', '2022-04-23T22:04:42+08:00', 'W00001', '张三丰', '2022-06-12T16:15:27+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:15:27+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1477, 10063, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:05:02+08:00', 'Linux 上使用 Xtrabackup 备份mysql', NULL, '## Xtrabackup安装\n\n> mysql5.7 要用 2.4版本\n>\n> [安装教程](https://www.percona.com/doc/percona-xtrabackup/2.4/installation/yum_repo.html#installing-percona-xtrabackup-from-percona-yum-repository)\n```bash\nwget https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/binary/redhat/7/x86_64/percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm\nyum localinstall percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm\n```\n\n## 配置定时备份\n\n\n1. 将**xtrabackup.sh**上次至服务器`/www/backup/xtrabackup.sh`\n```bash\n#!/bin/bash\ntimestamp=$(date +%Y%m%d_%H%M%S)\nrm -rf /www/backup/xtrabackup_data/\nmkdir -p /www/backup/xtrabackup_data\nxtrabackup --backup --user=root  --port=3306 --password=123456 --target-dir=/www/backup/xtrabackup_data &>> /www/wwwlogs/xtrabackup.log\nmkdir -p /www/backup/xtrabackup_data_history\nzip -r /www/backup/xtrabackup_data_history/xtrabackup_data_$timestamp.zip /www/backup/xtrabackup_data\necho \"  backup file output====>  /www/backup/xtrabackup_data_history/xtrabackup_data_$timestamp.zip\"\n```\n2. 使用Linux 的 Crontab 配置 每天凌晨1点 运行`/www/backup/xtrabackup.sh`\n![](/media/202203/2022-03-14_170505_909457.png)\n\n## FAQ\n\n问题:  _resource_request_log 表空间太大, 如何优化？\n问题Fix: `optimize table _resource_request_log;`\n\n\n\n', '<h2 id=\"h2-xtrabackupu5B89u88C5\"><a class=\"reference-link\" name=\"Xtrabackup安装\"></a><span class=\"header-link octicon octicon-link\"></span>Xtrabackup安装</h2><blockquote class=\"default\">\n<p>mysql5.7 要用 2.4版本</p>\n<p><a href=\"https://www.percona.com/doc/percona-xtrabackup/2.4/installation/yum_repo.html#installing-percona-xtrabackup-from-percona-yum-repository\">安装教程</a></p>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">wget https</span><span class=\"pun\">://</span><span class=\"pln\">www</span><span class=\"pun\">.</span><span class=\"pln\">percona</span><span class=\"pun\">.</span><span class=\"pln\">com</span><span class=\"pun\">/</span><span class=\"pln\">downloads</span><span class=\"pun\">/</span><span class=\"typ\">XtraBackup</span><span class=\"pun\">/</span><span class=\"typ\">Percona</span><span class=\"pun\">-</span><span class=\"typ\">XtraBackup</span><span class=\"pun\">-</span><span class=\"lit\">2.4</span><span class=\"pun\">.</span><span class=\"lit\">4</span><span class=\"pun\">/</span><span class=\"pln\">binary</span><span class=\"pun\">/</span><span class=\"pln\">redhat</span><span class=\"pun\">/</span><span class=\"lit\">7</span><span class=\"pun\">/</span><span class=\"pln\">x86_64</span><span class=\"pun\">/</span><span class=\"pln\">percona</span><span class=\"pun\">-</span><span class=\"pln\">xtrabackup</span><span class=\"pun\">-</span><span class=\"lit\">24</span><span class=\"pun\">-</span><span class=\"lit\">2.4</span><span class=\"pun\">.</span><span class=\"lit\">4</span><span class=\"pun\">-</span><span class=\"lit\">1.el7.x86</span><span class=\"pln\">_64</span><span class=\"pun\">.</span><span class=\"pln\">rpm</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">yum localinstall percona</span><span class=\"pun\">-</span><span class=\"pln\">xtrabackup</span><span class=\"pun\">-</span><span class=\"lit\">24</span><span class=\"pun\">-</span><span class=\"lit\">2.4</span><span class=\"pun\">.</span><span class=\"lit\">4</span><span class=\"pun\">-</span><span class=\"lit\">1.el7.x86</span><span class=\"pln\">_64</span><span class=\"pun\">.</span><span class=\"pln\">rpm</span></code></li></ol></pre>\n<h2 id=\"h2-u914Du7F6Eu5B9Au65F6u5907u4EFD\"><a class=\"reference-link\" name=\"配置定时备份\"></a><span class=\"header-link octicon octicon-link\"></span>配置定时备份</h2><ol>\n<li>将<strong>xtrabackup.sh</strong>上次至服务器<code>/www/backup/xtrabackup.sh</code><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"com\">#!/bin/bash</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">timestamp</span><span class=\"pun\">=</span><span class=\"pln\">$</span><span class=\"pun\">(</span><span class=\"pln\">date </span><span class=\"pun\">+%</span><span class=\"pln\">Y</span><span class=\"pun\">%</span><span class=\"pln\">m</span><span class=\"pun\">%</span><span class=\"pln\">d_</span><span class=\"pun\">%</span><span class=\"pln\">H</span><span class=\"pun\">%</span><span class=\"pln\">M</span><span class=\"pun\">%</span><span class=\"pln\">S</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">rm </span><span class=\"pun\">-</span><span class=\"pln\">rf </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup_data</span><span class=\"pun\">/</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">mkdir </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup_data</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">xtrabackup </span><span class=\"pun\">--</span><span class=\"pln\">backup </span><span class=\"pun\">--</span><span class=\"pln\">user</span><span class=\"pun\">=</span><span class=\"pln\">root  </span><span class=\"pun\">--</span><span class=\"pln\">port</span><span class=\"pun\">=</span><span class=\"lit\">3306</span><span class=\"pln\"> </span><span class=\"pun\">--</span><span class=\"pln\">password</span><span class=\"pun\">=</span><span class=\"lit\">123456</span><span class=\"pln\"> </span><span class=\"pun\">--</span><span class=\"pln\">target</span><span class=\"pun\">-</span><span class=\"pln\">dir</span><span class=\"pun\">=/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup_data </span><span class=\"pun\">&amp;&gt;&gt;</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">wwwlogs</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup</span><span class=\"pun\">.</span><span class=\"pln\">log</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">mkdir </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup_data_history</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">zip </span><span class=\"pun\">-</span><span class=\"pln\">r </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup_data_history</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup_data_$timestamp</span><span class=\"pun\">.</span><span class=\"pln\">zip </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">backup</span><span class=\"pun\">/</span><span class=\"pln\">xtrabackup_data</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">echo </span><span class=\"str\">\"  backup file output====&gt;  /www/backup/xtrabackup_data_history/xtrabackup_data_$timestamp.zip\"</span></code></li></ol></pre>\n</li><li>使用Linux 的 Crontab 配置 每天凌晨1点 运行<code>/www/backup/xtrabackup.sh</code><br><img alt=\"\" title=\"null\" src=\"/media/202203/2022-03-14_170505_909457.png\"></li></ol>\n<h2 id=\"h2-faq\"><a class=\"reference-link\" name=\"FAQ\"></a><span class=\"header-link octicon octicon-link\"></span>FAQ</h2><p>问题:  _resource_request_log 表空间太大, 如何优化？<br>问题Fix: <code>optimize table _resource_request_log;</code></p>\n', NULL, NULL, NULL, '', '2022-04-23T22:05:03+08:00', 'W00001', '张三丰', '2022-06-12T16:16:01+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:16:01+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1478, 10064, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:05:30+08:00', '使用Github DeployKey 部署项目', NULL, '## Github DeployKey 简介\n\n- 主要用于 服务器拉取github代码\n- 一个仓库可以配置多个 DeployKey\n- 但是跨仓库之后 DeployKey 不能重复；<font color=\"red\">因此当一服务器上要 拉取多个github项目时，需要配置多个DeployKey</font>\n\n## 使用 DeployKey 在服务器上 clone 项目\n\n> 这里以 fssl-tech 组织为例\n\n1. 将**clone_project_by_deploy_key.sh**上传至服务器 `cd /www/wwwroot/clone_project_by_deploy_key.sh`\n\n```bash\n#!/bin/bash\nroot_path=\"/www/wwwroot\"\ncd $root_path\nread -p \"请输入fssl-tech组织下的项目名: \"  project_name\nssh_config=\"${HOME}/.ssh/config\"\nrsa_private_file=\"${HOME}/.ssh/${project_name}\"\nrsa_public_file=\"${rsa_private_file}.pub\"\ngithub_deploy_key_url=\"https://github.com/fsll-tech/${project_name}/settings/keys\"\ngithub_clone_url=\"git clone git@${project_name}:fsll-tech/${project_name}.git\"\nif [ ! -f \"${rsa_private_file}\" ]; then\n    ssh-keygen -t rsa -C \"${project_name}@fsll-tech.com\" -f $rsa_private_file -N \"\" <<< y\n    # mac 环境\n    if [[ `uname  -a` =~ \"Darwin\" ]];then\n        sed -i \"\" \"/# git clone git@${project_name}:fsll-tech/,+5d\" \"${ssh_config}\"\n    # linux 环境\n    else\n        sed -i \"/# git clone git@${project_name}:fsll-tech/,+5d\" \"${ssh_config}\"\n    fi\n    echo \"# ${github_clone_url}\" >> $ssh_config\n    echo \"Host ${project_name}\" >> $ssh_config\n    echo \"    HostName github.com\" >> $ssh_config\n    echo \"    User git\" >> $ssh_config\n    echo \"    PreferredAuthentications publickey\" >> $ssh_config\n    echo \"    IdentityFile ${rsa_private_file}\" >> $ssh_config\n    echo \">>>>>>>>${rsa_public_file} 创建成功\"\n    echo \">>>>>>>>${rsa_private_file} 创建成功\"\nelse\n    echo \">>>>>>>>${rsa_public_file} 已存在, 无需重复创建\"\n    echo \">>>>>>>>${rsa_private_file} 已存在, 无需重复创建\"\nfi\necho \"请将下面的pub key添加至Github项目的 \\\"Deploy key\\\"==>${github_deploy_key_url}\"\ncat $rsa_public_file\nread -p \"添加成功后Enter进入下一步\"\nif [ ! -d \"${root_path}/${project_name}\" ]; then\n    echo $github_clone_url\n    $github_clone_url\n    echo \"${project_name} 已clone至====> ${root_path}/${project_name}\"\nelse\n    cd \"${root_path}/${project_name}\"\n    git pull\n    echo \"${root_path}/${project_name}已存在, 执行git pull 成功\"\n    cd $root_path\nfi\n```\n2. sh /www/wwwroot/clone_project_by_deploy_key.sh', '<h2 id=\"h2-githubdeploykey20u7B80u4ECB\"><a class=\"reference-link\" name=\"Github DeployKey 简介\"></a><span class=\"header-link octicon octicon-link\"></span>Github DeployKey 简介</h2><ul>\n<li>主要用于 服务器拉取github代码</li><li>一个仓库可以配置多个 DeployKey</li><li>但是跨仓库之后 DeployKey 不能重复；&lt;font color=\"red\"&gt;因此当一服务器上要 拉取多个github项目时，需要配置多个DeployKey&lt;/font&gt;</li></ul>\n<h2 id=\"h2-u4F7Fu7528deploykey20u5728u670Du52A1u5668u4E0A20clone20u9879u76EE\"><a class=\"reference-link\" name=\"使用 DeployKey 在服务器上 clone 项目\"></a><span class=\"header-link octicon octicon-link\"></span>使用 DeployKey 在服务器上 clone 项目</h2><blockquote class=\"default\">\n<p>这里以 fssl-tech 组织为例</p>\n</blockquote>\n<ol>\n<li>将<strong>clone_project_by_deploy_key.sh</strong>上传至服务器 <code>cd /www/wwwroot/clone_project_by_deploy_key.sh</code></li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"com\">#!/bin/bash</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">root_path</span><span class=\"pun\">=</span><span class=\"str\">\"/www/wwwroot\"</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">cd $root_path</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">read </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"str\">\"请输入fssl-tech组织下的项目名: \"</span><span class=\"pln\">  project_name</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">ssh_config</span><span class=\"pun\">=</span><span class=\"str\">\"${HOME}/.ssh/config\"</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">rsa_private_file</span><span class=\"pun\">=</span><span class=\"str\">\"${HOME}/.ssh/${project_name}\"</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">rsa_public_file</span><span class=\"pun\">=</span><span class=\"str\">\"${rsa_private_file}.pub\"</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">github_deploy_key_url</span><span class=\"pun\">=</span><span class=\"str\">\"https://github.com/fsll-tech/${project_name}/settings/keys\"</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">github_clone_url</span><span class=\"pun\">=</span><span class=\"str\">\"git clone git@${project_name}:fsll-tech/${project_name}.git\"</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"pun\">!</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\">f </span><span class=\"str\">\"${rsa_private_file}\"</span><span class=\"pln\"> </span><span class=\"pun\">];</span><span class=\"pln\"> </span><span class=\"kwd\">then</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    ssh</span><span class=\"pun\">-</span><span class=\"pln\">keygen </span><span class=\"pun\">-</span><span class=\"pln\">t rsa </span><span class=\"pun\">-</span><span class=\"pln\">C </span><span class=\"str\">\"${project_name}@fsll-tech.com\"</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\">f $rsa_private_file </span><span class=\"pun\">-</span><span class=\"pln\">N </span><span class=\"str\">\"\"</span><span class=\"pln\"> </span><span class=\"pun\">&lt;&lt;&lt;</span><span class=\"pln\"> y</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"com\"># mac 环境</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">[[</span><span class=\"pln\"> </span><span class=\"str\">`uname  -a`</span><span class=\"pln\"> </span><span class=\"pun\">=~</span><span class=\"pln\"> </span><span class=\"str\">\"Darwin\"</span><span class=\"pln\"> </span><span class=\"pun\">]];</span><span class=\"kwd\">then</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">        sed </span><span class=\"pun\">-</span><span class=\"pln\">i </span><span class=\"str\">\"\"</span><span class=\"pln\"> </span><span class=\"str\">\"/# git clone git@${project_name}:fsll-tech/,+5d\"</span><span class=\"pln\"> </span><span class=\"str\">\"${ssh_config}\"</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"com\"># linux 环境</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"kwd\">else</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">        sed </span><span class=\"pun\">-</span><span class=\"pln\">i </span><span class=\"str\">\"/# git clone git@${project_name}:fsll-tech/,+5d\"</span><span class=\"pln\"> </span><span class=\"str\">\"${ssh_config}\"</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"kwd\">fi</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"# ${github_clone_url}\"</span><span class=\"pln\"> </span><span class=\"pun\">&gt;&gt;</span><span class=\"pln\"> $ssh_config</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"Host ${project_name}\"</span><span class=\"pln\"> </span><span class=\"pun\">&gt;&gt;</span><span class=\"pln\"> $ssh_config</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"    HostName github.com\"</span><span class=\"pln\"> </span><span class=\"pun\">&gt;&gt;</span><span class=\"pln\"> $ssh_config</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"    User git\"</span><span class=\"pln\"> </span><span class=\"pun\">&gt;&gt;</span><span class=\"pln\"> $ssh_config</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"    PreferredAuthentications publickey\"</span><span class=\"pln\"> </span><span class=\"pun\">&gt;&gt;</span><span class=\"pln\"> $ssh_config</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"    IdentityFile ${rsa_private_file}\"</span><span class=\"pln\"> </span><span class=\"pun\">&gt;&gt;</span><span class=\"pln\"> $ssh_config</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;${rsa_public_file} 创建成功\"</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;${rsa_private_file} 创建成功\"</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"kwd\">else</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;${rsa_public_file} 已存在, 无需重复创建\"</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;${rsa_private_file} 已存在, 无需重复创建\"</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"kwd\">fi</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">echo </span><span class=\"str\">\"请将下面的pub key添加至Github项目的 \\\"Deploy key\\\"==&gt;${github_deploy_key_url}\"</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">cat $rsa_public_file</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">read </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"str\">\"添加成功后Enter进入下一步\"</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"pun\">!</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\">d </span><span class=\"str\">\"${root_path}/${project_name}\"</span><span class=\"pln\"> </span><span class=\"pun\">];</span><span class=\"pln\"> </span><span class=\"kwd\">then</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    echo $github_clone_url</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    $github_clone_url</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"${project_name} 已clone至====&gt; ${root_path}/${project_name}\"</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"kwd\">else</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    cd </span><span class=\"str\">\"${root_path}/${project_name}\"</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">    git pull</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    echo </span><span class=\"str\">\"${root_path}/${project_name}已存在, 执行git pull 成功\"</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    cd $root_path</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"kwd\">fi</span></code></li></ol></pre>\n<ol start=\"2\">\n<li>sh /www/wwwroot/clone_project_by_deploy_key.sh</li></ol>\n', NULL, NULL, NULL, '', '2022-04-23T22:05:30+08:00', 'W00001', '张三丰', '2022-06-12T16:17:08+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:17:08+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1479, 10065, '10004', '08江湖JS-工具', '', 'login', '2022-04-23T22:05:51+08:00', 'Flutter 开发环境 & 项目打包', NULL, '## 链接\n\n- [在macOS上搭建Flutter开发环境](https://flutterchina.club/setup-macos/)\n	- [手动安装 2.10.3版本](https://storage.googleapis.com/flutter_infra_release/releases/stable/macos/flutter_macos_2.10.2-stable.zip)\n	- 通过`brew install flutter`安装\n- [图标工厂](https://icon.wuruihong.com/)\n- vscode插件\n	- Flutter\n	- dart\n	- Flutter Widget Snippets\n\n\n## Mac上 安装 Flutter开发环境\n\n> - Flutter 2.10.2\n> - SDK安装位置:\n>     i. /opt/homebrew/Caskroom/flutter/2.10.2/flutter/bin/flutter\n>     i. /opt/homebrew/Caskroom/flutter/2.10.2/flutter/bin/cache/dart-sdk\n```bash\n$ brew install flutter\n	==> Downloading https://storage.googleapis.com/flutter_infra_release/releases/st\n	######################################################################## 100.0%\n	==> Installing Cask flutter\n	==> Linking Binary \'dart\' to \'/opt/homebrew/bin/dart\'\n	==> Linking Binary \'flutter\' to \'/opt/homebrew/bin/flutter\'\n	🍺  flutter was successfully installed!\n$ colin@ColindeMacBook-Pro ~ % flutter doctor\n	[✓] Chrome - develop for the web\n	[!] Android Studio\n		✗ Unable to find bundled Java version.\n	[✓] IntelliJ IDEA Ultimate Edition (version 2021.3.2)\n	[✓] VS Code (version 1.65.2)\n	[!] Proxy Configuration\n		! NO_PROXY is not set\n	[✓] Connected device (1 available)\n	[✓] HTTP Host Availability\n	! Doctor found issues in 4 categories.\n$ flutter --version \n	Flutter 2.10.2 • channel stable • https://github.com/flutter/flutter.git\n	Framework • revision 097d3313d8 (3 周前) • 2022-02-18 19:33:08 -0600\n	Engine • revision a83ed0e5e3\n	Tools • Dart 2.16.1 • DevTools 2.9.2\n```\n\n## Mac上 Flutter配置Android开发环境\n\n> Android SDK 使用 11+\n![](/media/202203/2022-03-15_201005_130748.png)\n\n**mac android adb 环境配置**\n```\n# android adb环境变量配置\nexport ANDROID_HOME=/Users/colin/Library/Android/sdk\nexport PATH=${PATH}:${ANDROID_HOME}/tools\nexport PATH=${PATH}:${ANDROID_HOME}/platform-tools\n```\n\n## 启动项目 & 打包\n\n- 使用`flutter create first_flutter` 创建一个 flutter demo项目\n- 启动项目: `cd first_flutter` 然后执行 `flutter run --flavor=dev`\n> 启动项目时指定本地的 服务: 修改`libs/Utils/util_resolver_list.dart`中的\n> ```bash\n> Constants.hostUrl = \'http://ipv4:port\';\n> ```\n- 打包apk: `flutter build apk --no-sound-null-safety --flavor=dev` or `flutter build apk --no-sound-null-safety --flavor=prod`\n	> 设置apk版本: `pubspec.yaml`\n	> 打包后的apk放在`/xxx/build/app/outputs/flutter-apk`\n- adb安装apk到当前模拟器: `adb install /xxxx/build/app/outputs/flutter-apk/xxx.apk`\n> chrome 控制模拟器的webview: 打开chrome访问`chrome://inspect/#devices`\n\n## 断点 调试项目\n\n**launch.json** 配置启动执行\n```json\n        {\n            \"name\": \"duoxing_v5_Flutter\",\n            \"type\": \"dart\",\n            \"args\": [\n                \"--flavor\",\n                \"dev\"\n            ],\n            \"request\": \"launch\",\n            \"program\": \"lib/main.dart\"\n        }\n```\n运行指令\n![](/media/202203/2022-03-15_210059_507622.png)\n然后就可在代码上打断点\n\n## Vscode配置 flutter 项目 hotReload\n\n![](/media/202203/2022-03-15_212637_242072.png)\n\n## android 签名证书生成\n\n```bash\nkeytool -genkey -alias duoxing5 -keyalg RSA -validity 20000 -keystore duoxing5.jks\n```\n然后修改 `android/app/build.gradle` 中 `signingConfigs`配置\n\n### FAQ\n\n- dd', '<h2 id=\"h2-u94FEu63A5\"><a class=\"reference-link\" name=\"链接\"></a><span class=\"header-link octicon octicon-link\"></span>链接</h2><ul>\n<li><a href=\"https://flutterchina.club/setup-macos/\">在macOS上搭建Flutter开发环境</a><ul>\n<li><a href=\"https://storage.googleapis.com/flutter_infra_release/releases/stable/macos/flutter_macos_2.10.2-stable.zip\">手动安装 2.10.3版本</a></li><li>通过<code>brew install flutter</code>安装</li></ul>\n</li><li><a href=\"https://icon.wuruihong.com/\">图标工厂</a></li><li>vscode插件<ul>\n<li>Flutter</li><li>dart</li><li>Flutter Widget Snippets</li></ul>\n</li></ul>\n<h2 id=\"h2-macu4E0Au5B89u88C520flutteru5F00u53D1u73AFu5883\"><a class=\"reference-link\" name=\"Mac上 安装 Flutter开发环境\"></a><span class=\"header-link octicon octicon-link\"></span>Mac上 安装 Flutter开发环境</h2><blockquote class=\"default\">\n<ul>\n<li>Flutter 2.10.2</li><li>SDK安装位置:<br>  i. /opt/homebrew/Caskroom/flutter/2.10.2/flutter/bin/flutter<br>  i. /opt/homebrew/Caskroom/flutter/2.10.2/flutter/bin/cache/dart-sdk</li></ul>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">$ brew install flutter</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">==&gt;</span><span class=\"pln\"> </span><span class=\"typ\">Downloading</span><span class=\"pln\"> https</span><span class=\"pun\">://</span><span class=\"pln\">storage</span><span class=\"pun\">.</span><span class=\"pln\">googleapis</span><span class=\"pun\">.</span><span class=\"pln\">com</span><span class=\"pun\">/</span><span class=\"pln\">flutter_infra_release</span><span class=\"pun\">/</span><span class=\"pln\">releases</span><span class=\"pun\">/</span><span class=\"pln\">st</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"com\">######################################################################## 100.0%</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">==&gt;</span><span class=\"pln\"> </span><span class=\"typ\">Installing</span><span class=\"pln\"> </span><span class=\"typ\">Cask</span><span class=\"pln\"> flutter</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">==&gt;</span><span class=\"pln\"> </span><span class=\"typ\">Linking</span><span class=\"pln\"> </span><span class=\"typ\">Binary</span><span class=\"pln\"> </span><span class=\"str\">\'dart\'</span><span class=\"pln\"> to </span><span class=\"str\">\'/opt/homebrew/bin/dart\'</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">==&gt;</span><span class=\"pln\"> </span><span class=\"typ\">Linking</span><span class=\"pln\"> </span><span class=\"typ\">Binary</span><span class=\"pln\"> </span><span class=\"str\">\'flutter\'</span><span class=\"pln\"> to </span><span class=\"str\">\'/opt/homebrew/bin/flutter\'</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">🍺</span><span class=\"pln\">  flutter was successfully installed</span><span class=\"pun\">!</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">$ colin@ColindeMacBook</span><span class=\"pun\">-</span><span class=\"typ\">Pro</span><span class=\"pln\"> </span><span class=\"pun\">~</span><span class=\"pln\"> </span><span class=\"pun\">%</span><span class=\"pln\"> flutter doctor</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">[✓]</span><span class=\"pln\"> </span><span class=\"typ\">Chrome</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\"> develop </span><span class=\"kwd\">for</span><span class=\"pln\"> the web</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">[!]</span><span class=\"pln\"> </span><span class=\"typ\">Android</span><span class=\"pln\"> </span><span class=\"typ\">Studio</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">        </span><span class=\"pun\">✗</span><span class=\"pln\"> </span><span class=\"typ\">Unable</span><span class=\"pln\"> to find bundled </span><span class=\"typ\">Java</span><span class=\"pln\"> version</span><span class=\"pun\">.</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">[✓]</span><span class=\"pln\"> </span><span class=\"typ\">IntelliJ</span><span class=\"pln\"> IDEA </span><span class=\"typ\">Ultimate</span><span class=\"pln\"> </span><span class=\"typ\">Edition</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">version </span><span class=\"lit\">2021.3</span><span class=\"pun\">.</span><span class=\"lit\">2</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">[✓]</span><span class=\"pln\"> VS </span><span class=\"typ\">Code</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">version </span><span class=\"lit\">1.65</span><span class=\"pun\">.</span><span class=\"lit\">2</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">[!]</span><span class=\"pln\"> </span><span class=\"typ\">Proxy</span><span class=\"pln\"> </span><span class=\"typ\">Configuration</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">        </span><span class=\"pun\">!</span><span class=\"pln\"> NO_PROXY is not </span><span class=\"kwd\">set</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">[✓]</span><span class=\"pln\"> </span><span class=\"typ\">Connected</span><span class=\"pln\"> device </span><span class=\"pun\">(</span><span class=\"lit\">1</span><span class=\"pln\"> available</span><span class=\"pun\">)</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">[✓]</span><span class=\"pln\"> HTTP </span><span class=\"typ\">Host</span><span class=\"pln\"> </span><span class=\"typ\">Availability</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">!</span><span class=\"pln\"> </span><span class=\"typ\">Doctor</span><span class=\"pln\"> found issues </span><span class=\"kwd\">in</span><span class=\"pln\"> </span><span class=\"lit\">4</span><span class=\"pln\"> categories</span><span class=\"pun\">.</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">$ flutter </span><span class=\"pun\">--</span><span class=\"pln\">version </span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"typ\">Flutter</span><span class=\"pln\"> </span><span class=\"lit\">2.10</span><span class=\"pun\">.</span><span class=\"lit\">2</span><span class=\"pln\"> </span><span class=\"pun\">•</span><span class=\"pln\"> channel stable </span><span class=\"pun\">•</span><span class=\"pln\"> https</span><span class=\"pun\">://</span><span class=\"pln\">github</span><span class=\"pun\">.</span><span class=\"pln\">com</span><span class=\"pun\">/</span><span class=\"pln\">flutter</span><span class=\"pun\">/</span><span class=\"pln\">flutter</span><span class=\"pun\">.</span><span class=\"pln\">git</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"typ\">Framework</span><span class=\"pln\"> </span><span class=\"pun\">•</span><span class=\"pln\"> revision </span><span class=\"lit\">097d3313d8</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"lit\">3</span><span class=\"pln\"> </span><span class=\"pun\">周前)</span><span class=\"pln\"> </span><span class=\"pun\">•</span><span class=\"pln\"> </span><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">02</span><span class=\"pun\">-</span><span class=\"lit\">18</span><span class=\"pln\"> </span><span class=\"lit\">19</span><span class=\"pun\">:</span><span class=\"lit\">33</span><span class=\"pun\">:</span><span class=\"lit\">08</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"lit\">0600</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"typ\">Engine</span><span class=\"pln\"> </span><span class=\"pun\">•</span><span class=\"pln\"> revision a83ed0e5e3</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"typ\">Tools</span><span class=\"pln\"> </span><span class=\"pun\">•</span><span class=\"pln\"> </span><span class=\"typ\">Dart</span><span class=\"pln\"> </span><span class=\"lit\">2.16</span><span class=\"pun\">.</span><span class=\"lit\">1</span><span class=\"pln\"> </span><span class=\"pun\">•</span><span class=\"pln\"> </span><span class=\"typ\">DevTools</span><span class=\"pln\"> </span><span class=\"lit\">2.9</span><span class=\"pun\">.</span><span class=\"lit\">2</span></code></li></ol></pre>\n<h2 id=\"h2-macu4E0Aflutteru914Du7F6Eandroidu5F00u53D1u73AFu5883\"><a class=\"reference-link\" name=\"Mac上 Flutter配置Android开发环境\"></a><span class=\"header-link octicon octicon-link\"></span>Mac上 Flutter配置Android开发环境</h2><blockquote class=\"default\">\n<p>Android SDK 使用 11+<br><img alt=\"\" title=\"null\" src=\"/media/202203/2022-03-15_201005_130748.png\"></p>\n</blockquote>\n<p><strong>mac android adb 环境配置</strong></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"com\"># android adb环境变量配置</span></code></li><li class=\"L1\"><code><span class=\"kwd\">export</span><span class=\"pln\"> ANDROID_HOME</span><span class=\"pun\">=</span><span class=\"str\">/Users/</span><span class=\"pln\">colin</span><span class=\"pun\">/</span><span class=\"typ\">Library</span><span class=\"pun\">/</span><span class=\"typ\">Android</span><span class=\"pun\">/</span><span class=\"pln\">sdk</span></code></li><li class=\"L2\"><code><span class=\"kwd\">export</span><span class=\"pln\"> PATH</span><span class=\"pun\">=</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">PATH</span><span class=\"pun\">}:</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">ANDROID_HOME</span><span class=\"pun\">}/</span><span class=\"pln\">tools</span></code></li><li class=\"L3\"><code><span class=\"kwd\">export</span><span class=\"pln\"> PATH</span><span class=\"pun\">=</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">PATH</span><span class=\"pun\">}:</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">ANDROID_HOME</span><span class=\"pun\">}/</span><span class=\"pln\">platform</span><span class=\"pun\">-</span><span class=\"pln\">tools</span></code></li></ol></pre>\n<h2 id=\"h2-u542Fu52A8u9879u76EE26amp3B20u6253u5305\"><a class=\"reference-link\" name=\"启动项目 &amp; 打包\"></a><span class=\"header-link octicon octicon-link\"></span>启动项目 &amp; 打包</h2><ul>\n<li>使用<code>flutter create first_flutter</code> 创建一个 flutter demo项目</li><li>启动项目: <code>cd first_flutter</code> 然后执行 <code>flutter run --flavor=dev</code><blockquote class=\"default\">\n<p>启动项目时指定本地的 服务: 修改<code>libs/Utils/util_resolver_list.dart</code>中的</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"typ\">Constants</span><span class=\"pun\">.</span><span class=\"pln\">hostUrl </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'http://ipv4:port\'</span><span class=\"pun\">;</span></code></li></ol></pre>\n</blockquote>\n</li><li>打包apk: <code>flutter build apk --no-sound-null-safety --flavor=dev</code> or <code>flutter build apk --no-sound-null-safety --flavor=prod</code><blockquote class=\"default\">\n<p>设置apk版本: <code>pubspec.yaml</code><br>打包后的apk放在<code>/xxx/build/app/outputs/flutter-apk</code></p>\n</blockquote>\n</li><li>adb安装apk到当前模拟器: <code>adb install /xxxx/build/app/outputs/flutter-apk/xxx.apk</code><blockquote class=\"default\">\n<p>chrome 控制模拟器的webview: 打开chrome访问<code>chrome://inspect/#devices</code></p>\n</blockquote>\n</li></ul>\n<h2 id=\"h2-u65ADu70B9u8C03u8BD5u9879u76EE\"><a class=\"reference-link\" name=\"断点 调试项目\"></a><span class=\"header-link octicon octicon-link\"></span>断点 调试项目</h2><p><strong>launch.json</strong> 配置启动执行</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"name\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"duoxing_v5_Flutter\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"type\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"dart\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"args\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L4\"><code class=\"language-json\"><span class=\"pln\">                </span><span class=\"str\">\"--flavor\"</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-json\"><span class=\"pln\">                </span><span class=\"str\">\"dev\"</span></code></li><li class=\"L6\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"pun\">],</span></code></li><li class=\"L7\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"request\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"launch\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-json\"><span class=\"pln\">            </span><span class=\"str\">\"program\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"lib/main.dart\"</span></code></li><li class=\"L9\"><code class=\"language-json\"><span class=\"pln\">        </span><span class=\"pun\">}</span></code></li></ol></pre>\n<p>运行指令<br><img alt=\"\" title=\"null\" src=\"/media/202203/2022-03-15_210059_507622.png\"><br>然后就可在代码上打断点</p>\n<h2 id=\"h2-vscodeu914Du7F6Eflutter20u9879u76EE20hotreload\"><a class=\"reference-link\" name=\"Vscode配置 flutter 项目 hotReload\"></a><span class=\"header-link octicon octicon-link\"></span>Vscode配置 flutter 项目 hotReload</h2><p><img alt=\"\" title=\"null\" src=\"/media/202203/2022-03-15_212637_242072.png\"></p>\n<h2 id=\"h2-androidu7B7Eu540Du8BC1u4E66u751Fu6210\"><a class=\"reference-link\" name=\"android 签名证书生成\"></a><span class=\"header-link octicon octicon-link\"></span>android 签名证书生成</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">keytool </span><span class=\"pun\">-</span><span class=\"pln\">genkey </span><span class=\"pun\">-</span><span class=\"pln\">alias duoxing5 </span><span class=\"pun\">-</span><span class=\"pln\">keyalg RSA </span><span class=\"pun\">-</span><span class=\"pln\">validity </span><span class=\"lit\">20000</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\">keystore duoxing5</span><span class=\"pun\">.</span><span class=\"pln\">jks</span></code></li></ol></pre>\n<p>然后修改 <code>android/app/build.gradle</code> 中 <code>signingConfigs</code>配置</p>\n<h3 id=\"h3-faq\"><a class=\"reference-link\" name=\"FAQ\"></a><span class=\"header-link octicon octicon-link\"></span>FAQ</h3><ul>\n<li>dd</li></ul>\n', NULL, NULL, NULL, '', '2022-04-23T22:05:51+08:00', 'W00001', '张三丰', '2022-05-29T20:10:38+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-29T20:10:38+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1481, 10066, '10015', '江湖JS-工具', '', 'login', '2022-04-23T22:06:20+08:00', 'Gitlab 部署', NULL, 'Gitlab 服务地址： https://code.openjianghu.org/\n\n## 准备 Docker Compose 环境\n\nDocker compose 是基于 Docker 的编排工具，可以使用配置文件一次将多个 Docker 服务关联、启动。\n\n```\ncurl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\ndocker-compose --version\n```\n\n## 启动服务\n\n创建一个目录，用于存放 Gitlab 的数据和配置，这里使用 `/www/wwwroot/gitlab`。\n\n在目录下创建 docker-compose.yml 文件：\n\n```yml\nversion: \'3.6\'\nservices:\n  web:\n    image: \'gitlab/gitlab-ee:latest\'\n    restart: always\n    hostname: \'code.openjianghu.org\'\n    environment:\n      TZ: \'Asia/Shanghai\'\n      GITLAB_OMNIBUS_CONFIG: |\n        # 外部地址\n        external_url \'https://code.openjianghu.org\'\n        # 关闭自动\n        letsencrypt[\'enabled\'] = false\n        gitlab_rails[\'time_zone\'] = \'Asia/Shanghai\'\n        # 使用反向代理模式\n        nginx[\'listen_port\'] = 80\n        nginx[\'listen_https\'] = false\n        nginx[\'proxy_set_headers\'] = {\n          \"X-Forwarded-Proto\" => \"https\",\n          \"X-Forwarded-Ssl\" => \"on\",\n          \"Host\" => \"code.openjianghu.org\",\n          \"X-Real-IP\" => \"$$remote_addr\",\n          \"X-Forwarded-For\" => \"$$proxy_add_x_forwarded_for\",\n          \"Upgrade\" => \"$$http_upgrade\",\n          \"Connection\" => \"$$connection_upgrade\"\n        }\n    ports:\n      - \'8929:80\'\n      - \'22:22\'\n    volumes:\n      - \'$GITLAB_HOME/config:/etc/gitlab\'\n      - \'$GITLAB_HOME/logs:/var/log/gitlab\'\n      - \'$GITLAB_HOME/data:/var/opt/gitlab\'\n    shm_size: \'256m\'\n```\n\n这个配置表示起了一个 gitlab 镜像，并映射出 8929、22 端口。\n\n由于我们使用的是 nginx 反向代理模式，所以不能映射 443 端口出来，而且得在配置那边把 let\'s encrypt 的开关关了，并且配置 nginx 选项。\n\n配置完文件执行 docker-compose up -d 就可以启动 gitlab 服务，稍等片刻即可访问。\n\n## 项目备份\n\nGitlab 自带备份命令：\n\n```\ndocker exec -t gitlab_web_1 gitlab-rake gitlab:backup:create\n```\n\n执行完就会在 `/www/wwwroot/gitlab/data/backups` 目录看到新生成的备份文件\n', '<p>Gitlab 服务地址： <a href=\"https://code.openjianghu.org/\">https://code.openjianghu.org/</a></p>\n<h2 id=\"h2-u51C6u5907docker20compose20u73AFu5883\"><a class=\"reference-link\" name=\"准备 Docker Compose 环境\"></a><span class=\"header-link octicon octicon-link\"></span>准备 Docker Compose 环境</h2><p>Docker compose 是基于 Docker 的编排工具，可以使用配置文件一次将多个 Docker 服务关联、启动。</p>\n<pre><code>curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\ndocker-compose --version\n</code></pre>\n<h2 id=\"h2-u542Fu52A8u670Du52A1\"><a class=\"reference-link\" name=\"启动服务\"></a><span class=\"header-link octicon octicon-link\"></span>启动服务</h2><p>创建一个目录，用于存放 Gitlab 的数据和配置，这里使用 <code>/www/wwwroot/gitlab</code>。</p>\n<p>在目录下创建 docker-compose.yml 文件：</p>\n<pre><code class=\"language-yml\">version: \'3.6\'\nservices:\n  web:\n    image: \'gitlab/gitlab-ee:latest\'\n    restart: always\n    hostname: \'code.openjianghu.org\'\n    environment:\n      TZ: \'Asia/Shanghai\'\n      GITLAB_OMNIBUS_CONFIG: |\n        # 外部地址\n        external_url \'https://code.openjianghu.org\'\n        # 关闭自动\n        letsencrypt[\'enabled\'] = false\n        gitlab_rails[\'time_zone\'] = \'Asia/Shanghai\'\n        # 使用反向代理模式\n        nginx[\'listen_port\'] = 80\n        nginx[\'listen_https\'] = false\n        nginx[\'proxy_set_headers\'] = {\n          \"X-Forwarded-Proto\" =&gt; \"https\",\n          \"X-Forwarded-Ssl\" =&gt; \"on\",\n          \"Host\" =&gt; \"code.openjianghu.org\",\n          \"X-Real-IP\" =&gt; \"$$remote_addr\",\n          \"X-Forwarded-For\" =&gt; \"$$proxy_add_x_forwarded_for\",\n          \"Upgrade\" =&gt; \"$$http_upgrade\",\n          \"Connection\" =&gt; \"$$connection_upgrade\"\n        }\n    ports:\n      - \'8929:80\'\n      - \'22:22\'\n    volumes:\n      - \'$GITLAB_HOME/config:/etc/gitlab\'\n      - \'$GITLAB_HOME/logs:/var/log/gitlab\'\n      - \'$GITLAB_HOME/data:/var/opt/gitlab\'\n    shm_size: \'256m\'\n</code></pre>\n<p>这个配置表示起了一个 gitlab 镜像，并映射出 8929、22 端口。</p>\n<p>由于我们使用的是 nginx 反向代理模式，所以不能映射 443 端口出来，而且得在配置那边把 let’s encrypt 的开关关了，并且配置 nginx 选项。</p>\n<p>配置完文件执行 docker-compose up -d 就可以启动 gitlab 服务，稍等片刻即可访问。</p>\n<h2 id=\"h2-u9879u76EEu5907u4EFD\"><a class=\"reference-link\" name=\"项目备份\"></a><span class=\"header-link octicon octicon-link\"></span>项目备份</h2><p>Gitlab 自带备份命令：</p>\n<pre><code>docker exec -t gitlab_web_1 gitlab-rake gitlab:backup:create\n</code></pre>\n<p>执行完就会在 <code>/www/wwwroot/gitlab/data/backups</code> 目录看到新生成的备份文件</p>\n', NULL, NULL, NULL, '', '2022-04-23T22:06:21+08:00', 'W00001', '张三丰', '2022-06-12T16:15:52+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:15:52+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1482, 10067, '10004', '07江湖JS-部署', '', 'login', '2022-04-23T22:09:07+08:00', '生产环境准备', NULL, '## 生产环境准备\n\n1. 硬件配置推荐\n2. 环境搭建：aapanel\n3. 软件安装：mysql，nginx，nodejs\n\n## 备份\n\n- 数据库备份: Xtrabackup定时备份mysql\n- 项目/upload目录备份: shell脚本定时备份/upload\n\n## FAQ\n\n问题: 线上环境(Linux)运行项目时报`test.txt: Permission denied`\n问题Fix: `sudo chmod 644 ./test.txt`\n> - 644: 所有者有读和写的权限，组用户只有读的权限\n>   - 所有者具有读、写、权限但没有写权限\n>   - 同组用户具有读权限但没有写权限\n>   - 其他用户具有读权限但没有写权限\n> - 755:\n>   - 所有者具有读、写、执行权限\n>   - 同组用户具有读、执行权限但没有写权限\n>   - 其他用户具有读、执行权限但没有写权限\n> - 777:\n>   - 所有者具有读、写、执行权限\n>   - 同组用户具有读、写、执行权限\n>   - 其他用户具有读、写、执行权限\n\n\n问题: 线上环境(Linux)运脚本时报`test.sh 没有执行权限`\n问题Fix: `sudo chmod +x  ./test.sh` 或者 `sudo chmod 777 ./test.txt`\n', '<h2 id=\"h2-u751Fu4EA7u73AFu5883u51C6u5907\"><a class=\"reference-link\" name=\"生产环境准备\"></a><span class=\"header-link octicon octicon-link\"></span>生产环境准备</h2><ol>\n<li>硬件配置推荐</li><li>环境搭建：aapanel</li><li>软件安装：mysql，nginx，nodejs</li></ol>\n<h2 id=\"h2-u5907u4EFD\"><a class=\"reference-link\" name=\"备份\"></a><span class=\"header-link octicon octicon-link\"></span>备份</h2><ul>\n<li>数据库备份: Xtrabackup定时备份mysql</li><li>项目/upload目录备份: shell脚本定时备份/upload</li></ul>\n<h2 id=\"h2-faq\"><a class=\"reference-link\" name=\"FAQ\"></a><span class=\"header-link octicon octicon-link\"></span>FAQ</h2><p>问题: 线上环境(Linux)运行项目时报<code>test.txt: Permission denied</code><br>问题Fix: <code>sudo chmod 644 ./test.txt</code></p>\n<blockquote class=\"default\">\n<ul>\n<li>644: 所有者有读和写的权限，组用户只有读的权限<ul>\n<li>所有者具有读、写、权限但没有写权限</li><li>同组用户具有读权限但没有写权限</li><li>其他用户具有读权限但没有写权限</li></ul>\n</li><li>755:<ul>\n<li>所有者具有读、写、执行权限</li><li>同组用户具有读、执行权限但没有写权限</li><li>其他用户具有读、执行权限但没有写权限</li></ul>\n</li><li>777:<ul>\n<li>所有者具有读、写、执行权限</li><li>同组用户具有读、写、执行权限</li><li>其他用户具有读、写、执行权限</li></ul>\n</li></ul>\n</blockquote>\n<p>问题: 线上环境(Linux)运脚本时报<code>test.sh 没有执行权限</code><br>问题Fix: <code>sudo chmod +x  ./test.sh</code> 或者 <code>sudo chmod 777 ./test.txt</code></p>\n', NULL, NULL, NULL, '', '2022-04-23T22:09:10+08:00', 'W00001', '张三丰', '2022-05-29T20:43:35+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-29T20:43:35+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1483, 10068, '10004', '07江湖JS-部署', '', 'login', '2022-04-23T22:09:38+08:00', 'Nginx配置', NULL, '- 前置代理模式？\n\n## Nginx配置\n\n1. 规范说明\n2. 域名与SSL\n\n## nginx配置 之域名代理\n\n```config\n# 将favicon.ico 上传到 /www/wwwroot/duoxing-v5.openjianghu.org/\nlocation = /favicon.ico {\n  root  /www/wwwroot/duoxing-v5.openjianghu.org;\n}\n\nlocation / {\n    proxy_pass http://127.0.0.1:8083;\n\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header REMOTE-HOST $remote_addr;\n\n    # wss 支持\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n}\n```\n\n##  nginx配置 之 桥接服务器代理\n\n> 作用：用户访问加速\n\n第一层 nginx 反向代理 http、ws，需要设置 X-Real-IP 和 X-Forwarded-For 来传递客户端真实 ip：\n```config\n    location / {\n      proxy_pass  https://duoxing-v5.openjianghu.org;\n      proxy_set_header Host $proxy_host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection upgrade;\n    }\n```\n后面的 nginx 则不能设置 X-Real-IP 和 X-Forwarded-For 头，否则客户端真实 ip 会丢失', '<ul>\n<li>前置代理模式？</li></ul>\n<h2 id=\"h2-nginxu914Du7F6E\"><a class=\"reference-link\" name=\"Nginx配置\"></a><span class=\"header-link octicon octicon-link\"></span>Nginx配置</h2><ol>\n<li>规范说明</li><li>域名与SSL</li></ol>\n<h2 id=\"h2-nginxu914Du7F6Eu4E4Bu57DFu540Du4EE3u7406\"><a class=\"reference-link\" name=\"nginx配置 之域名代理\"></a><span class=\"header-link octicon octicon-link\"></span>nginx配置 之域名代理</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-config\"><span class=\"com\"># 将favicon.ico 上传到 /www/wwwroot/duoxing-v5.openjianghu.org/</span></code></li><li class=\"L1\"><code class=\"language-config\"><span class=\"pln\">location </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\">favicon</span><span class=\"pun\">.</span><span class=\"pln\">ico </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-config\"><span class=\"pln\">  root  </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">wwwroot</span><span class=\"pun\">/</span><span class=\"pln\">duoxing</span><span class=\"pun\">-</span><span class=\"pln\">v5</span><span class=\"pun\">.</span><span class=\"pln\">openjianghu</span><span class=\"pun\">.</span><span class=\"pln\">org</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-config\"><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-config\"></code></li><li class=\"L5\"><code class=\"language-config\"><span class=\"pln\">location </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-config\"><span class=\"pln\">    proxy_pass http</span><span class=\"pun\">:</span><span class=\"com\">//127.0.0.1:8083;</span></code></li><li class=\"L7\"><code class=\"language-config\"></code></li><li class=\"L8\"><code class=\"language-config\"><span class=\"pln\">    proxy_set_header </span><span class=\"typ\">Host</span><span class=\"pln\"> $host</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-config\"><span class=\"pln\">    proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Real</span><span class=\"pun\">-</span><span class=\"pln\">IP $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-config\"><span class=\"pln\">    proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Forwarded</span><span class=\"pun\">-</span><span class=\"typ\">For</span><span class=\"pln\"> $proxy_add_x_forwarded_for</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-config\"><span class=\"pln\">    proxy_set_header REMOTE</span><span class=\"pun\">-</span><span class=\"pln\">HOST $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-config\"></code></li><li class=\"L3\"><code class=\"language-config\"><span class=\"pln\">    </span><span class=\"com\"># wss 支持</span></code></li><li class=\"L4\"><code class=\"language-config\"><span class=\"pln\">    proxy_http_version </span><span class=\"lit\">1.1</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-config\"><span class=\"pln\">    proxy_set_header </span><span class=\"typ\">Upgrade</span><span class=\"pln\"> $http_upgrade</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-config\"><span class=\"pln\">    proxy_set_header </span><span class=\"typ\">Connection</span><span class=\"pln\"> </span><span class=\"str\">\"upgrade\"</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-config\"><span class=\"pun\">}</span></code></li></ol></pre>\n<h2 id=\"h2-nginxu914Du7F6Eu4E4B20u6865u63A5u670Du52A1u5668u4EE3u7406\"><a class=\"reference-link\" name=\"nginx配置 之 桥接服务器代理\"></a><span class=\"header-link octicon octicon-link\"></span>nginx配置 之 桥接服务器代理</h2><blockquote class=\"default\">\n<p>作用：用户访问加速</p>\n</blockquote>\n<p>第一层 nginx 反向代理 http、ws，需要设置 X-Real-IP 和 X-Forwarded-For 来传递客户端真实 ip：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-config\"><span class=\"pln\">    location </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-config\"><span class=\"pln\">      proxy_pass  https</span><span class=\"pun\">:</span><span class=\"com\">//duoxing-v5.openjianghu.org;</span></code></li><li class=\"L2\"><code class=\"language-config\"><span class=\"pln\">      proxy_set_header </span><span class=\"typ\">Host</span><span class=\"pln\"> $proxy_host</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-config\"><span class=\"pln\">      proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Real</span><span class=\"pun\">-</span><span class=\"pln\">IP $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-config\"><span class=\"pln\">      proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Forwarded</span><span class=\"pun\">-</span><span class=\"typ\">For</span><span class=\"pln\"> $proxy_add_x_forwarded_for</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-config\"><span class=\"pln\">      proxy_http_version </span><span class=\"lit\">1.1</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-config\"><span class=\"pln\">      proxy_set_header </span><span class=\"typ\">Upgrade</span><span class=\"pln\"> $http_upgrade</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-config\"><span class=\"pln\">      proxy_set_header </span><span class=\"typ\">Connection</span><span class=\"pln\"> upgrade</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-config\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li></ol></pre>\n<p>后面的 nginx 则不能设置 X-Real-IP 和 X-Forwarded-For 头，否则客户端真实 ip 会丢失</p>\n', NULL, NULL, NULL, '', '2022-04-23T22:09:38+08:00', 'W00001', '张三丰', '2022-06-12T05:00:19+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-12T05:00:19+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1484, 10069, '10004', '07江湖JS-部署', '', 'login', '2022-04-23T22:10:30+08:00', '数据备份、恢复', NULL, '## 数据备份、恢复\n\n1. xtrabackup，备份与恢复\n2. 文件备份\n3. 数据归档', '<h2 id=\"h2-u6570u636Eu5907u4EFDu3001u6062u590D\"><a class=\"reference-link\" name=\"数据备份、恢复\"></a><span class=\"header-link octicon octicon-link\"></span>数据备份、恢复</h2><ol>\n<li>xtrabackup，备份与恢复</li><li>文件备份</li><li>数据归档</li></ol>\n', NULL, NULL, NULL, '', '2022-04-23T22:10:30+08:00', 'W00001', '张三丰', '2022-04-23T22:10:30+08:00', 'W00001', '张三丰', 'jhInsert', 'W00001', '张三丰', '2022-04-23T22:10:30+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1485, 10070, '10004', '07江湖JS-部署', '', 'login', '2022-04-23T22:10:51+08:00', '生产环境监控', NULL, '## 生产环境监控\n\n1. activity\n2. error log', '<h2 id=\"h2-u751Fu4EA7u73AFu5883u76D1u63A7\"><a class=\"reference-link\" name=\"生产环境监控\"></a><span class=\"header-link octicon octicon-link\"></span>生产环境监控</h2><ol>\n<li>activity</li><li>error log</li></ol>\n', NULL, NULL, NULL, '', '2022-04-23T22:10:51+08:00', 'W00001', '张三丰', '2022-04-23T22:10:51+08:00', 'W00001', '张三丰', 'jhInsert', 'W00001', '张三丰', '2022-04-23T22:10:51+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1486, 10071, '10015', '江湖JS-工具', '', 'login', '2022-04-26T00:00:00+08:00', '宝塔', NULL, '## 宝塔\n\n## 宝塔-数据库管理\n\n- sqllite: `/www/server/panel/data/default.db`\n\n通过软件商店将MySQL运行端口切换之后，需要重启服务器，才能使配置完全生效\n\n## 宝塔-防火墙设置\n\n在宝塔面板防火墙里开放的端口，如果没有进程运行的话，使用telnet无法连接进来。telnet只能进入有进程运行的端口。', '<h2 id=\"h2-u5B9Du5854\"><a class=\"reference-link\" name=\"宝塔\"></a><span class=\"header-link octicon octicon-link\"></span>宝塔</h2><h2 id=\"h2-u5B9Du5854-u6570u636Eu5E93u7BA1u7406\"><a class=\"reference-link\" name=\"宝塔-数据库管理\"></a><span class=\"header-link octicon octicon-link\"></span>宝塔-数据库管理</h2><ul>\n<li>sqllite: <code>/www/server/panel/data/default.db</code></li></ul>\n<p>通过软件商店将MySQL运行端口切换之后，需要重启服务器，才能使配置完全生效</p>\n<h2 id=\"h2-u5B9Du5854-u9632u706Bu5899u8BBEu7F6E\"><a class=\"reference-link\" name=\"宝塔-防火墙设置\"></a><span class=\"header-link octicon octicon-link\"></span>宝塔-防火墙设置</h2><p>在宝塔面板防火墙里开放的端口，如果没有进程运行的话，使用telnet无法连接进来。telnet只能进入有进程运行的端口。</p>\n', NULL, NULL, NULL, '', '2022-04-27T20:00:05+08:00', 'm3611F', '刘计', '2022-06-12T16:17:49+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:17:49+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1487, 10072, '10004', '03前端开发参考', '', 'public', '2022-05-01T22:04:36+08:00', '前端开发FAQ', NULL, '## window.confirmDialog 导致 v-navigation-drawer 关闭\n\n```\n\n  <v-navigation-drawer v-model=\"isEditDrawerShow\" absolute temporary right width=\"80%\" hide-overlay\n    v-click-outside=\"{ closeConditional: () => !dialogIsOpen(), }\" class=\"elevation-24\">\n  </v-navigation-drawer>\n\n\n  <script type=\"module\">\n  new Vue({\n    methods: {\n	  dialogIsOpen() {\n        return window.dialogIsOpen;\n      }\n	}\n  })\n```\n\n## form 表单校验\n\n```\n    <v-form v-model=\"isFormValid\" v-if=\"isEditDrawerShow\" ref=\"form\" lazy-validation>\n      <v-row class=\"pa-0 ma-0 pa-xs-4 pb-xs-4 flex-none\">\n        <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n          <v-text-field class=\"cus-v-input mr-2\" dense outlined label=\"姓名\" v-model=\"editItem.name\"></v-text-field>\n        </v-col>\n	 </v-row>\n	  <v-row class=\"justify-end pr-6\">\n        <v-btn color=\"success\" @click=\"createStudent\" small>保存</v-btn>\n      </v-row>\n	</v-form>\n\n  <script type=\"module\">\n  new Vue({\n    data: () => ({\n		editItem: {\n			name: null\n		}\n    })\n   methods: {\n	  createStudent() {\n        if (!this.$refs.form.validate()) return false;\n      }\n	}\n  })\n	\n```', '<h2 id=\"h2-window.confirmdialogu5BFCu81F420v-navigation-drawer20u5173u95ED\"><a class=\"reference-link\" name=\"window.confirmDialog 导致 v-navigation-drawer 关闭\"></a><span class=\"header-link octicon octicon-link\"></span>window.confirmDialog 导致 v-navigation-drawer 关闭</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code></code></li><li class=\"L1\"><code><span class=\"pln\">  </span><span class=\"tag\">&lt;v-navigation-drawer</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"isEditDrawerShow\"</span><span class=\"pln\"> </span><span class=\"atn\">absolute</span><span class=\"pln\"> </span><span class=\"atn\">temporary</span><span class=\"pln\"> </span><span class=\"atn\">right</span><span class=\"pln\"> </span><span class=\"atn\">width</span><span class=\"pun\">=</span><span class=\"atv\">\"80%\"</span><span class=\"pln\"> </span><span class=\"atn\">hide-overlay</span></code></li><li class=\"L2\"><code><span class=\"pln\">    </span><span class=\"atn\">v-click-outside</span><span class=\"pun\">=</span><span class=\"atv\">\"{ closeConditional: () =&gt;</span><span class=\"pln\"> !dialogIsOpen(), }\" class=\"elevation-24\"&gt;</span></code></li><li class=\"L3\"><code><span class=\"pln\">  </span><span class=\"tag\">&lt;/v-navigation-drawer&gt;</span></code></li><li class=\"L4\"><code></code></li><li class=\"L5\"><code></code></li><li class=\"L6\"><code><span class=\"pln\">  </span><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">type</span><span class=\"pun\">=</span><span class=\"atv\">\"module\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code><span class=\"pln\">  new Vue({</span></code></li><li class=\"L8\"><code><span class=\"pln\">    methods: {</span></code></li><li class=\"L9\"><code><span class=\"pln\">      dialogIsOpen() {</span></code></li><li class=\"L0\"><code><span class=\"pln\">        return window.dialogIsOpen;</span></code></li><li class=\"L1\"><code><span class=\"pln\">      }</span></code></li><li class=\"L2\"><code><span class=\"pln\">    }</span></code></li><li class=\"L3\"><code><span class=\"pln\">  })</span></code></li></ol></pre>\n<h2 id=\"h2-formu8868u5355u6821u9A8C\"><a class=\"reference-link\" name=\"form 表单校验\"></a><span class=\"header-link octicon octicon-link\"></span>form 表单校验</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">    </span><span class=\"tag\">&lt;v-form</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"isFormValid\"</span><span class=\"pln\"> </span><span class=\"atn\">v-if</span><span class=\"pun\">=</span><span class=\"atv\">\"isEditDrawerShow\"</span><span class=\"pln\"> </span><span class=\"atn\">ref</span><span class=\"pun\">=</span><span class=\"atv\">\"form\"</span><span class=\"pln\"> </span><span class=\"atn\">lazy-validation</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code><span class=\"pln\">      </span><span class=\"tag\">&lt;v-row</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-0 ma-0 pa-xs-4 pb-xs-4 flex-none\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L2\"><code><span class=\"pln\">        </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L3\"><code><span class=\"pln\">          </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"姓名\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.name\"</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L4\"><code><span class=\"pln\">        </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L5\"><code><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L6\"><code><span class=\"pln\">      </span><span class=\"tag\">&lt;v-row</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"justify-end pr-6\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code><span class=\"pln\">        </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"success\"</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"createStudent\"</span><span class=\"pln\"> </span><span class=\"atn\">small</span><span class=\"tag\">&gt;</span><span class=\"pln\">保存</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L8\"><code><span class=\"pln\">      </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L9\"><code><span class=\"pln\">    </span><span class=\"tag\">&lt;/v-form&gt;</span></code></li><li class=\"L0\"><code></code></li><li class=\"L1\"><code><span class=\"pln\">  </span><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">type</span><span class=\"pun\">=</span><span class=\"atv\">\"module\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L2\"><code><span class=\"pln\">  new Vue({</span></code></li><li class=\"L3\"><code><span class=\"pln\">    data: () =&gt; ({</span></code></li><li class=\"L4\"><code><span class=\"pln\">        editItem: {</span></code></li><li class=\"L5\"><code><span class=\"pln\">            name: null</span></code></li><li class=\"L6\"><code><span class=\"pln\">        }</span></code></li><li class=\"L7\"><code><span class=\"pln\">    })</span></code></li><li class=\"L8\"><code><span class=\"pln\">   methods: {</span></code></li><li class=\"L9\"><code><span class=\"pln\">      createStudent() {</span></code></li><li class=\"L0\"><code><span class=\"pln\">        if (!this.$refs.form.validate()) return false;</span></code></li><li class=\"L1\"><code><span class=\"pln\">      }</span></code></li><li class=\"L2\"><code><span class=\"pln\">    }</span></code></li><li class=\"L3\"><code><span class=\"pln\">  })</span></code></li><li class=\"L4\"><code><span class=\"pln\">    </span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-05-01T22:04:36+08:00', 'm3611F', '刘计', '2022-05-01T22:56:40+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-05-01T22:56:40+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1488, 10073, '10004', '08江湖JS-工具', '', 'deleted', '2022-05-02T21:38:52+08:00', 'VSCode 插件开发', NULL, '\n- [从0到1开发一款自己的vscode插件](https://segmentfault.com/a/1190000040720760)\n\n## VSCode  插件相关配置\n\n-  VSCode插件存放目录: `~/.vscode/extensions`\n- `~/.vscode/extensions/cweijan.vscode-mysql-client2-5.2.4`', '<ul>\n<li><a href=\"https://segmentfault.com/a/1190000040720760\">从0到1开发一款自己的vscode插件</a></li></ul>\n<h2 id=\"h2-vscode20u63D2u4EF6u76F8u5173u914Du7F6E\"><a class=\"reference-link\" name=\"VSCode  插件相关配置\"></a><span class=\"header-link octicon octicon-link\"></span>VSCode  插件相关配置</h2><ul>\n<li> VSCode插件存放目录: <code>~/.vscode/extensions</code></li><li><code>~/.vscode/extensions/cweijan.vscode-mysql-client2-5.2.4</code></li></ul>\n', NULL, NULL, NULL, '', '2022-05-02T21:38:52+08:00', 'm3611F', '刘计', '2022-05-30T13:59:27+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-30T13:59:27+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1489, 10074, '10015', '江湖JS-工具', '', 'login', '2022-05-03T20:05:44+08:00', 'mysql工具', NULL, '\n\n##江湖数据库 mysqldump \n\n1. npm i knex --save\n1. npm i mysqldump --save\n1. mysqldumpDemo.js\n\n```javascript\n// dump sql to project/sql/init.sql\n\'use strict\';\n\nconst mysqldump = require(\'mysqldump\')\nconst Knex = require(\'knex\')\nconst fs = require(\"fs\");\n\nconst connection = {\n    host: \"127.0.0.1\",\n    port: 3306,\n    user: \"root\",\n    password: \"123456\",\n};\n\n/**\n * 导出 sql\n * @param database 数据库\n * @param noDataTables 不导出数据的表，如 log 相关表\n * @param clearFields 导出前清除的表的字段\n * @param targetFile 导出文件\n * @param replace 关键字替换\n * @returns {Promise<void>}\n */\nasync function dumpSql(database, noDataTables, clearFields, targetFile, replace) {\n    connection.database = database;\n    const knex = Knex({\n        client: \'mysql\',\n        connection,\n    });\n\n    // clear fields\n    clearFields.map(async tableField => {\n        await knex(tableField.table).update(tableField.field, null);\n    })\n\n    const res = await mysqldump({\n        connection,\n        dump: {\n            data: {\n                format: false\n            },\n            schema: {\n                table: {\n                    dropIfExist: true,\n                },\n            },\n            trigger: {\n                dropIfExist: false,\n            },\n        }\n    });\n\n\n    let content = \'\';\n    res.tables.forEach(tableData => {\n        if (noDataTables.includes(tableData.name)) {\n            content += tableData.schema + \'\\n\' + (tableData.triggers && tableData.triggers.join(\'\\n\') || \'\') + \'\\n\\n\\n\'\n        } else {\n            content += tableData.schema + \'\\n\' + (tableData.data || \'\')  + \'\\n\' + (tableData.triggers && tableData.triggers.join(\'\\n\') || \'\') + \'\\n\\n\\n\'\n        }\n    })\n\n    replace.forEach((item) => {\n        content = content.replace(new RegExp(/DROP TRIGGER IF EXISTS (\\w*);/, \'g\'), \'DROP TRIGGER IF EXISTS `$1`;\')\n        content = content.replace(new RegExp(item.key, \'g\'), item.value)\n    })\n\n    fs.writeFileSync(targetFile, content);\n    console.log(`导出${database}结束`)\n    await knex.destroy();\n}\n\n// 不导出数据部分的表\nlet noDataTables = [ \'_cache\', \'_resource_request_log\', \'_record_history\', \'_user_session\'];\n// 导出前清理表中的无用字段\nlet clearFields = [\n    { table: \'_resource\', field: \'requestDemo\' },\n    { table: \'_resource\', field: \'responseDemo\' }\n];\nlet replace = [\n    // 前缀处理成模板\n    // { key: \'jianghujs_demo_enterprise_\', value: \'{{dbPrefix}}\'},\n    // 抹掉 utf8 相关配置\n    { key: \' COLLATE utf8mb4_bin\', value: \'\'},\n    { key: \' COLLATE utf8\', value: \'\'},\n    { key: \' COLLATE = utf8mb4_bin\', value: \'\'},\n    { key: \' COLLATE = utf8\', value: \'\'},\n    { key: \' DEFAULT CHARSET = utf8mb4_bin\', value: \'\'},\n    { key: \' DEFAULT CHARSET = utf8mb4\', value: \'\'},\n    { key: \' DEFAULT CHARSET = utf8\', value: \'\'},\n    { key: \' CHARACTER SET utf8mb4_bin\', value: \'\'},\n    { key: \' CHARACTER SET utf8mb4\', value: \'\'},\n    { key: \' CHARACTER SET utf8\', value: \'\'},\n];\n\n(async () => {\n\n    await dumpSql(\n      \"jianghujs_demo_basic\",\n      noDataTables,\n      clearFields,\n      \"/xxx/xxx/sql/init.sql\",\n      replace\n    );\n})()\n\n\n```\n1. `node mysqldumpDemo.js`', '<p>##江湖数据库 mysqldump </p>\n<ol>\n<li>npm i knex –save</li><li>npm i mysqldump –save</li><li>mysqldumpDemo.js</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"com\">// dump sql to project/sql/init.sql</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"str\">\'use strict\'</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-javascript\"></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> mysqldump </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'mysqldump\'</span><span class=\"pun\">)</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"typ\">Knex</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'knex\'</span><span class=\"pun\">)</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> fs </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\"fs\"</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-javascript\"></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> connection </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    host</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"127.0.0.1\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    port</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">3306</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    user</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"root\"</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"123456\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pun\">};</span></code></li><li class=\"L3\"><code class=\"language-javascript\"></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"com\">/**</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"com\"> * 导出 sql</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"com\"> * @param database 数据库</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"com\"> * @param noDataTables 不导出数据的表，如 log 相关表</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"com\"> * @param clearFields 导出前清除的表的字段</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"com\"> * @param targetFile 导出文件</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"com\"> * @param replace 关键字替换</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"com\"> * @returns {Promise&lt;void&gt;}</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"com\"> */</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">async </span><span class=\"kwd\">function</span><span class=\"pln\"> dumpSql</span><span class=\"pun\">(</span><span class=\"pln\">database</span><span class=\"pun\">,</span><span class=\"pln\"> noDataTables</span><span class=\"pun\">,</span><span class=\"pln\"> clearFields</span><span class=\"pun\">,</span><span class=\"pln\"> targetFile</span><span class=\"pun\">,</span><span class=\"pln\"> replace</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    connection</span><span class=\"pun\">.</span><span class=\"pln\">database </span><span class=\"pun\">=</span><span class=\"pln\"> database</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> knex </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Knex</span><span class=\"pun\">({</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">        client</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'mysql\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">        connection</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">});</span></code></li><li class=\"L9\"><code class=\"language-javascript\"></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"com\">// clear fields</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    clearFields</span><span class=\"pun\">.</span><span class=\"pln\">map</span><span class=\"pun\">(</span><span class=\"pln\">async tableField </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">        await knex</span><span class=\"pun\">(</span><span class=\"pln\">tableField</span><span class=\"pun\">.</span><span class=\"pln\">table</span><span class=\"pun\">).</span><span class=\"pln\">update</span><span class=\"pun\">(</span><span class=\"pln\">tableField</span><span class=\"pun\">.</span><span class=\"pln\">field</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">})</span></code></li><li class=\"L4\"><code class=\"language-javascript\"></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> res </span><span class=\"pun\">=</span><span class=\"pln\"> await mysqldump</span><span class=\"pun\">({</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">        connection</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">        dump</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">            data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">                format</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">            schema</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">                table</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">                    dropIfExist</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">                </span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">            trigger</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">                dropIfExist</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">            </span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">});</span></code></li><li class=\"L1\"><code class=\"language-javascript\"></code></li><li class=\"L2\"><code class=\"language-javascript\"></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    let content </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    res</span><span class=\"pun\">.</span><span class=\"pln\">tables</span><span class=\"pun\">.</span><span class=\"pln\">forEach</span><span class=\"pun\">(</span><span class=\"pln\">tableData </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">noDataTables</span><span class=\"pun\">.</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"pln\">tableData</span><span class=\"pun\">.</span><span class=\"pln\">name</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">            content </span><span class=\"pun\">+=</span><span class=\"pln\"> tableData</span><span class=\"pun\">.</span><span class=\"pln\">schema </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'\\n\'</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">tableData</span><span class=\"pun\">.</span><span class=\"pln\">triggers </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> tableData</span><span class=\"pun\">.</span><span class=\"pln\">triggers</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"str\">\'\\n\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'\\n\\n\\n\'</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">            content </span><span class=\"pun\">+=</span><span class=\"pln\"> tableData</span><span class=\"pun\">.</span><span class=\"pln\">schema </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'\\n\'</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">tableData</span><span class=\"pun\">.</span><span class=\"pln\">data </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">)</span><span class=\"pln\">  </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'\\n\'</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">tableData</span><span class=\"pun\">.</span><span class=\"pln\">triggers </span><span class=\"pun\">&amp;&amp;</span><span class=\"pln\"> tableData</span><span class=\"pun\">.</span><span class=\"pln\">triggers</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"str\">\'\\n\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'\\n\\n\\n\'</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">})</span></code></li><li class=\"L1\"><code class=\"language-javascript\"></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    replace</span><span class=\"pun\">.</span><span class=\"pln\">forEach</span><span class=\"pun\">((</span><span class=\"pln\">item</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">        content </span><span class=\"pun\">=</span><span class=\"pln\"> content</span><span class=\"pun\">.</span><span class=\"pln\">replace</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">RegExp</span><span class=\"pun\">(</span><span class=\"str\">/DROP TRIGGER IF EXISTS (\\w*);/</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'g\'</span><span class=\"pun\">),</span><span class=\"pln\"> </span><span class=\"str\">\'DROP TRIGGER IF EXISTS `$1`;\'</span><span class=\"pun\">)</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">        content </span><span class=\"pun\">=</span><span class=\"pln\"> content</span><span class=\"pun\">.</span><span class=\"pln\">replace</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">RegExp</span><span class=\"pun\">(</span><span class=\"pln\">item</span><span class=\"pun\">.</span><span class=\"pln\">key</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'g\'</span><span class=\"pun\">),</span><span class=\"pln\"> item</span><span class=\"pun\">.</span><span class=\"pln\">value</span><span class=\"pun\">)</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">})</span></code></li><li class=\"L6\"><code class=\"language-javascript\"></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    fs</span><span class=\"pun\">.</span><span class=\"pln\">writeFileSync</span><span class=\"pun\">(</span><span class=\"pln\">targetFile</span><span class=\"pun\">,</span><span class=\"pln\"> content</span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    console</span><span class=\"pun\">.</span><span class=\"pln\">log</span><span class=\"pun\">(`导出</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">database</span><span class=\"pun\">}结束`)</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    await knex</span><span class=\"pun\">.</span><span class=\"pln\">destroy</span><span class=\"pun\">();</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-javascript\"></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"com\">// 不导出数据部分的表</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">let noDataTables </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"str\">\'_cache\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'_resource_request_log\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'_record_history\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'_user_session\'</span><span class=\"pun\">];</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"com\">// 导出前清理表中的无用字段</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">let clearFields </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> table</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'_resource\'</span><span class=\"pun\">,</span><span class=\"pln\"> field</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'requestDemo\'</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> table</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'_resource\'</span><span class=\"pun\">,</span><span class=\"pln\"> field</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'responseDemo\'</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pun\">];</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">let replace </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"com\">// 前缀处理成模板</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"com\">// { key: \'jianghujs_demo_enterprise_\', value: \'{{dbPrefix}}\'},</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"com\">// 抹掉 utf8 相关配置</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' COLLATE utf8mb4_bin\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' COLLATE utf8\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' COLLATE = utf8mb4_bin\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' COLLATE = utf8\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' DEFAULT CHARSET = utf8mb4_bin\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' DEFAULT CHARSET = utf8mb4\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' DEFAULT CHARSET = utf8\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' CHARACTER SET utf8mb4_bin\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' CHARACTER SET utf8mb4\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">{</span><span class=\"pln\"> key</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\' CHARACTER SET utf8\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pun\">];</span></code></li><li class=\"L4\"><code class=\"language-javascript\"></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pun\">(</span><span class=\"pln\">async </span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-javascript\"></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    await dumpSql</span><span class=\"pun\">(</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"str\">\"jianghujs_demo_basic\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">      noDataTables</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">      clearFields</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"str\">\"/xxx/xxx/sql/init.sql\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">      replace</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pun\">})()</span></code></li><li class=\"L5\"><code class=\"language-javascript\"></code></li></ol></pre>\n<ol>\n<li><code>node mysqldumpDemo.js</code></li></ol>\n', NULL, NULL, NULL, '', '2022-05-03T20:05:45+08:00', 'm3611F', '刘计', '2022-06-12T16:16:16+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T16:16:16+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1490, 10075, '10009', '', '', 'login', '2022-05-03T21:53:24+08:00', '简介', NULL, '## 简介', '<h2 id=\"h2-u7B80u4ECB\"><a class=\"reference-link\" name=\"简介\"></a><span class=\"header-link octicon octicon-link\"></span>简介</h2>', NULL, NULL, NULL, '', '2022-05-03T21:53:24+08:00', 'm3611F', '刘计', '2022-05-03T22:00:25+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-05-03T22:00:25+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1491, 10076, '10010', '', '', 'login', '2022-05-03T21:54:07+08:00', '简介', NULL, '## 简介', '<h2 id=\"h2-u7B80u4ECB\"><a class=\"reference-link\" name=\"简介\"></a><span class=\"header-link octicon octicon-link\"></span>简介</h2>', NULL, NULL, NULL, '', '2022-05-03T21:54:07+08:00', 'm3611F', '刘计', '2022-05-03T22:00:11+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-05-03T22:00:11+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1492, 10077, '10004', '06框架进阶', '', 'public', '2022-05-05T14:47:33+08:00', '框架升级', NULL, '## egg-jianghu 框架升级\n\negg-jianghu版本升级会增加新特性/修复bug, 对应的数据库/项目代码 也需要同步升级\n1. 修改`package.json`中egg-jianghu版本\n1. 数据库升级: 参考对应版本[jianghujs_demo_basic sql](https://github.com/openJianghu/jianghujs_demo_basic_uiAction/blob/main/sql/init.sql)升级数据库表 & 数据\n	i. 推荐使用navicat 进行 `表结构` & `表数据`的同步\n1. 代码升级: 参考对应版本的[jianghujs_demo_basic](https://github.com/openJianghu/jianghujs_demo_basic)代码逻辑/风格\n\n\n## egg-jianghu  1.1.xx ===> 1.2.xx 说明\n\n\n**代码:**\n1. resouce返回数据结构变动; `appData.rows` ===> `appData.resultData.rows`\n\n**数据库表结构:**\n1. 新增表`_ui`\n1. 新增表`_test_case`\n1. 新增字段`_page`.`pageHook`\n\n**数据库数据:**\n1. `_resource`表新增 `allPage	getChunkInfo`, `allPage	httpUploadByStream`, `allPage	httpUploadByBase64`', '<h2 id=\"h2-egg-jianghuu6846u67B6u5347u7EA7\"><a class=\"reference-link\" name=\"egg-jianghu 框架升级\"></a><span class=\"header-link octicon octicon-link\"></span>egg-jianghu 框架升级</h2><p>egg-jianghu版本升级会增加新特性/修复bug, 对应的数据库/项目代码 也需要同步升级</p>\n<ol>\n<li>修改<code>package.json</code>中egg-jianghu版本</li><li>数据库升级: 参考对应版本<a href=\"https://github.com/openJianghu/jianghujs_demo_basic_uiAction/blob/main/sql/init.sql\">jianghujs_demo_basic sql</a>升级数据库表 &amp; 数据<br> i. 推荐使用navicat 进行 <code>表结构</code> &amp; <code>表数据</code>的同步</li><li>代码升级: 参考对应版本的<a href=\"https://github.com/openJianghu/jianghujs_demo_basic\">jianghujs_demo_basic</a>代码逻辑/风格</li></ol>\n<h2 id=\"h2-egg-jianghu201.1.xx203D3D3D26gt3B201.2.xx20u8BF4u660E\"><a class=\"reference-link\" name=\"egg-jianghu  1.1.xx ===> 1.2.xx 说明\"></a><span class=\"header-link octicon octicon-link\"></span>egg-jianghu  1.1.xx ===&gt; 1.2.xx 说明</h2><p><strong>代码:</strong></p>\n<ol>\n<li>resouce返回数据结构变动; <code>appData.rows</code> ===&gt; <code>appData.resultData.rows</code></li></ol>\n<p><strong>数据库表结构:</strong></p>\n<ol>\n<li>新增表<code>_ui</code></li><li>新增表<code>_test_case</code></li><li>新增字段<code>_page</code>.<code>pageHook</code></li></ol>\n<p><strong>数据库数据:</strong></p>\n<ol>\n<li><code>_resource</code>表新增 <code>allPage    getChunkInfo</code>, <code>allPage    httpUploadByStream</code>, <code>allPage    httpUploadByBase64</code></li></ol>\n', NULL, NULL, NULL, '', '2022-05-05T14:47:34+08:00', 'm3611F', 'Colin', '2022-05-06T22:00:58+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-06T22:00:58+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1495, 10080, '10009', '开发手册', '', 'login', '2022-05-05T22:10:53+08:00', 'xuanfeng_app_v5开发手册', NULL, '# xuanfeng_app_v5 开发手册\n\n## 产品介绍\n类似头条app的可以查看文章，播放对应讲课内容及相关音视频的用户端。兼容PC和移动端\n\n## 基础信息\n### 测试环境地址\nhttps://app.jhxf.org/xuanfeng_web\n### 代码地址\nhttps://github.com/fsll-tech/md_xuanfeng_app_v5\n\n## 技术栈\n##### 后端\n- Node\n- egg-jianghu\n\n##### 前端\n- Vuetifyjs\n\n##### 移动端\n- flutter\n\n## Web端\n####  目录结构\n\n├── app\n│   ├── common           // 后端通用工具\n│   ├── constant           // 常量\n│   ├── controller\n│   ├── public               // 前端公用文件\n│   │   ├── audio\n│   │   ├── css\n│   │   ├── emotion    // 表情包文件\n│   │   ├── fonts\n│   │   ├── img\n│   │   └── js\n│   │       ├── data\n│   │       └── lib\n│   ├── service\n│   └── view                   // web前端页面\n│       ├── common           // 通用工具\n│       ├── components      // 主要业务组件\n│       └── page         // 主页面，登录页面及部分管理页面\n├── config     // 配置文件，主要配置都在config.local.js\n├── multipartTmp  // 文件上传临时目录\n├── sql     // sql 初始化脚本\n└── upload           // 文件上传后的存储目录\n\n#### 主要文件\n\n├── component\n│   ├── articleContent.html            // 文章内容组件\n│   ├── articleList.html                  // 文章列表\n│   ├── audioPlayer.html                // PC端音频播放组件\n│   ├── formItemListRender.html\n│   ├── jhToast.html                      // toast组件\n│   ├── singleSelectDialog.html      // 单选组件\n│   ├── xfAppBar.html                    // 移动端appBar\n│   ├── xfAssignment.html           // 作业\n│   ├── xfBroadcast.html               // 直播\n│   ├── xfComment.html               // 评论列表页面\n│   ├── xfDiscoverList.html          // 发现列表页面\n│   ├── xfLogin.html                    // 登录页面\n│   ├── xfMine.html                    // 我的页面\n│   ├── xfNote.html                    // 笔记页面\n│   ├── xfNoteAndAssignment.html // 笔记和作业？\n│   ├── xfSearchList.html              // 搜索页面\n│   └── xfUserCenter.html           // 用户中心\n├── page\n│   ├── commentManagement.html  // 评论管理\n│   ├── home.html                          // web端主页面\n│   ├── login.html                         // 登录\n│   ├── userActionManagement.html // 用户行为统计\n│   └── userManagement.html         // 用户管理\n\n\n## Flutter端\n####  目录结构\n\n├── android  // 安卓原生模块\n│   ├── app\n│   │   └── src\n│   │       ├── main\n│   │       │   ├── kotlin\n│   │       │   │   └── org\n│   │       │   │       └── fsll\n│   │       │   │           └── xuanfeng5         // 安卓原生代码\n│   │       │   └── res // 安卓资源文件\n│   │       └── profile\n│   └── gradle\n├── assets    // flutter 资源文件目录\n│   └── images\n├── flutter-music-player // 第三方库移动端音乐播放组件， 跟packages目录下open_file-master属于同类型\n├── ios  //  iOS原生模块\n├── lib  // 主要代码\n│   ├── action // uiAction 相关\n│   ├── cacheImage // image组件\n│   │   └── cache\n│   ├── common     // 通用模块，常量,全局key 等\n│   ├── generated\n│   │   └── json\n│   │       └── base\n│   ├── layout     // 布局文件\n│   ├── player     // 音乐播放\n│   ├── utils        // 工具类\n│   └── widget   // 业务组件\n├── packages // 三方包\n│   └── open_file-master // 打开文件的库\n\n\n## 注意事项\n- 暂无', '<h1 id=\"h1-xuanfeng_app_v5u5F00u53D1u624Bu518C\"><a class=\"reference-link\" name=\"xuanfeng_app_v5 开发手册\"></a><span class=\"header-link octicon octicon-link\"></span>xuanfeng_app_v5 开发手册</h1><h2 id=\"h2-u4EA7u54C1u4ECBu7ECD\"><a class=\"reference-link\" name=\"产品介绍\"></a><span class=\"header-link octicon octicon-link\"></span>产品介绍</h2><p>类似头条app的可以查看文章，播放对应讲课内容及相关音视频的用户端。兼容PC和移动端</p>\n<h2 id=\"h2-u57FAu7840u4FE1u606F\"><a class=\"reference-link\" name=\"基础信息\"></a><span class=\"header-link octicon octicon-link\"></span>基础信息</h2><h3 id=\"h3-u6D4Bu8BD5u73AFu5883u5730u5740\"><a class=\"reference-link\" name=\"测试环境地址\"></a><span class=\"header-link octicon octicon-link\"></span>测试环境地址</h3><p><a href=\"https://app.jhxf.org/xuanfeng_web\">https://app.jhxf.org/xuanfeng_web</a></p>\n<h3 id=\"h3-u4EE3u7801u5730u5740\"><a class=\"reference-link\" name=\"代码地址\"></a><span class=\"header-link octicon octicon-link\"></span>代码地址</h3><p><a href=\"https://github.com/fsll-tech/md_xuanfeng_app_v5\">https://github.com/fsll-tech/md_xuanfeng_app_v5</a></p>\n<h2 id=\"h2-u6280u672Fu6808\"><a class=\"reference-link\" name=\"技术栈\"></a><span class=\"header-link octicon octicon-link\"></span>技术栈</h2><h5 id=\"h5-u540Eu7AEF\"><a class=\"reference-link\" name=\"后端\"></a><span class=\"header-link octicon octicon-link\"></span>后端</h5><ul>\n<li>Node</li><li>egg-jianghu</li></ul>\n<h5 id=\"h5-u524Du7AEF\"><a class=\"reference-link\" name=\"前端\"></a><span class=\"header-link octicon octicon-link\"></span>前端</h5><ul>\n<li>Vuetifyjs</li></ul>\n<h5 id=\"h5-u79FBu52A8u7AEF\"><a class=\"reference-link\" name=\"移动端\"></a><span class=\"header-link octicon octicon-link\"></span>移动端</h5><ul>\n<li>flutter</li></ul>\n<h2 id=\"h2-webu7AEF\"><a class=\"reference-link\" name=\"Web端\"></a><span class=\"header-link octicon octicon-link\"></span>Web端</h2><h4 id=\"h4-u76EEu5F55u7ED3u6784\"><a class=\"reference-link\" name=\"目录结构\"></a><span class=\"header-link octicon octicon-link\"></span>目录结构</h4><p>├── app<br>│&nbsp;&nbsp; ├── common           // 后端通用工具<br>│&nbsp;&nbsp; ├── constant           // 常量<br>│&nbsp;&nbsp; ├── controller<br>│&nbsp;&nbsp; ├── public               // 前端公用文件<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── audio<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── css<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── emotion    // 表情包文件<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── fonts<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── img<br>│&nbsp;&nbsp; │&nbsp;&nbsp; └── js<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     ├── data<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     └── lib<br>│&nbsp;&nbsp; ├── service<br>│&nbsp;&nbsp; └── view                   // web前端页面<br>│&nbsp;&nbsp;     ├── common           // 通用工具<br>│&nbsp;&nbsp;     ├── components      // 主要业务组件<br>│&nbsp;&nbsp;     └── page         // 主页面，登录页面及部分管理页面<br>├── config     // 配置文件，主要配置都在config.local.js<br>├── multipartTmp  // 文件上传临时目录<br>├── sql     // sql 初始化脚本<br>└── upload           // 文件上传后的存储目录</p>\n<h4 id=\"h4-u4E3Bu8981u6587u4EF6\"><a class=\"reference-link\" name=\"主要文件\"></a><span class=\"header-link octicon octicon-link\"></span>主要文件</h4><p>├── component<br>│&nbsp;&nbsp; ├── articleContent.html            // 文章内容组件<br>│&nbsp;&nbsp; ├── articleList.html                  // 文章列表<br>│&nbsp;&nbsp; ├── audioPlayer.html                // PC端音频播放组件<br>│&nbsp;&nbsp; ├── formItemListRender.html<br>│&nbsp;&nbsp; ├── jhToast.html                      // toast组件<br>│&nbsp;&nbsp; ├── singleSelectDialog.html      // 单选组件<br>│&nbsp;&nbsp; ├── xfAppBar.html                    // 移动端appBar<br>│&nbsp;&nbsp; ├── xfAssignment.html           // 作业<br>│&nbsp;&nbsp; ├── xfBroadcast.html               // 直播<br>│&nbsp;&nbsp; ├── xfComment.html               // 评论列表页面<br>│&nbsp;&nbsp; ├── xfDiscoverList.html          // 发现列表页面<br>│&nbsp;&nbsp; ├── xfLogin.html                    // 登录页面<br>│&nbsp;&nbsp; ├── xfMine.html                    // 我的页面<br>│&nbsp;&nbsp; ├── xfNote.html                    // 笔记页面<br>│&nbsp;&nbsp; ├── xfNoteAndAssignment.html // 笔记和作业？<br>│&nbsp;&nbsp; ├── xfSearchList.html              // 搜索页面<br>│&nbsp;&nbsp; └── xfUserCenter.html           // 用户中心<br>├── page<br>│&nbsp;&nbsp; ├── commentManagement.html  // 评论管理<br>│&nbsp;&nbsp; ├── home.html                          // web端主页面<br>│&nbsp;&nbsp; ├── login.html                         // 登录<br>│&nbsp;&nbsp; ├── userActionManagement.html // 用户行为统计<br>│&nbsp;&nbsp; └── userManagement.html         // 用户管理</p>\n<h2 id=\"h2-flutteru7AEF\"><a class=\"reference-link\" name=\"Flutter端\"></a><span class=\"header-link octicon octicon-link\"></span>Flutter端</h2><h4 id=\"h4-u76EEu5F55u7ED3u6784\"><a class=\"reference-link\" name=\"目录结构\"></a><span class=\"header-link octicon octicon-link\"></span>目录结构</h4><p>├── android  // 安卓原生模块<br>│&nbsp;&nbsp; ├── app<br>│&nbsp;&nbsp; │&nbsp;&nbsp; └── src<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     ├── main<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     │&nbsp;&nbsp; ├── kotlin<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     │&nbsp;&nbsp; │&nbsp;&nbsp; └── org<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     │&nbsp;&nbsp; │&nbsp;&nbsp;     └── fsll<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     │&nbsp;&nbsp; │&nbsp;&nbsp;         └── xuanfeng5         // 安卓原生代码<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     │&nbsp;&nbsp; └── res // 安卓资源文件<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     └── profile<br>│&nbsp;&nbsp; └── gradle<br>├── assets    // flutter 资源文件目录<br>│&nbsp;&nbsp; └── images<br>├── flutter-music-player // 第三方库移动端音乐播放组件， 跟packages目录下open_file-master属于同类型<br>├── ios  //  iOS原生模块<br>├── lib  // 主要代码<br>│&nbsp;&nbsp; ├── action // uiAction 相关<br>│&nbsp;&nbsp; ├── cacheImage // image组件<br>│&nbsp;&nbsp; │&nbsp;&nbsp; └── cache<br>│&nbsp;&nbsp; ├── common     // 通用模块，常量,全局key 等<br>│&nbsp;&nbsp; ├── generated<br>│&nbsp;&nbsp; │&nbsp;&nbsp; └── json<br>│&nbsp;&nbsp; │&nbsp;&nbsp;     └── base<br>│&nbsp;&nbsp; ├── layout     // 布局文件<br>│&nbsp;&nbsp; ├── player     // 音乐播放<br>│&nbsp;&nbsp; ├── utils        // 工具类<br>│&nbsp;&nbsp; └── widget   // 业务组件<br>├── packages // 三方包<br>│&nbsp;&nbsp; └── open_file-master // 打开文件的库</p>\n<h2 id=\"h2-u6CE8u610Fu4E8Bu9879\"><a class=\"reference-link\" name=\"注意事项\"></a><span class=\"header-link octicon octicon-link\"></span>注意事项</h2><ul>\n<li>暂无</li></ul>\n', NULL, NULL, NULL, '', '2022-05-05T22:10:54+08:00', 'm3862G', 'louis', '2022-05-05T22:15:49+08:00', 'm3862G', 'louis', 'jhUpdate', 'm3862G', 'louis', '2022-05-05T22:15:49+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1496, 10081, '10009', '开发手册', '', 'login', '2022-05-05T22:27:25+08:00', 'xuanfeng_admin_v5 开发手册', NULL, '# xuanfeng_admin_v5 开发手册\n\n## 产品介绍\n旋风管理端，主要管理文章，文集，分类，作业等相关内容\n\n## 基础信息\n### 测试环境地址\n稍后更新\n### 代码地址\nhttps://github.com/fsll-tech/md_xuanfeng_admin_v5\n\n## 技术栈\n##### 后端\n- Node\n- egg-jianghu\n\n##### 前端\n- Vuetifyjs\n- egg-jianghu\n\n\n## 主要结构\n####  目录结构\n\n├── app\n│   ├── common           // 后端通用工具\n│   ├── constant           // 常量\n│   ├── controller\n│   ├── public               // 前端公用文件\n│   │   ├── editor.md    // 编辑器组件\n│   │   ├── images\n│   │   │   └── home\n│   │   ├── img\n│   │   │   └── home\n│   │   ├── jianghu\n│   │   ├── jquery\n│   │   │   └── 3.1.1\n│   │   ├── layui\n│   │   │   ├── css\n│   │   │   │   └── modules\n│   │   │   │       ├── laydate\n│   │   │   │       │   └── default\n│   │   │   │       └── layer\n│   │   │   │           └── default\n│   │   │   └── font\n│   │   ├── mrdoc\n│   │   ├── mrdoc-editor\n│   │   ├── toc\n│   │   └── viewerjs\n│   ├── service\n│   └── view        // web前端页面\n│       ├── component // 通用组件\n│       │   └── fileBrowser\n│       ├── layout      // 布局文件\n│       ├── page     // 主要业务组件\n│       ├── pageDoc\n│       └── template  // 模板文件\n├── config     // 配置文件，主要配置都在config.local.js\n├── multipartTmp  // 文件上传临时目录\n├── sql     // sql 初始化脚本\n└── upload           // 文件上传后的存储目录\n \n\n#### 主要文件\n\n├── layout\n│   └── xuanfengLayout.html     // 布局文件\n├── page\n│   ├── albumManagement.html    // 文集管理\n│   ├── article.html               // 文章列表\n│   ├── articleEdit.html          // 文章编辑\n│   ├── articleHistoryManagement.html     // 文章历史版本\n│   ├── articleManagement.html       // 文章管理\n│   ├── assignmentDesign.html        // 作业设计\n│   ├── categoryManagement.html   // 分类管理\n│   ├── materialManagement.html\n│   ├── resetUserPassword.html     // 重置密码\n│   └── userManagement.html      // 用户管理\n├── pageDoc\n│   └── manual.md\n└── template\n    └── layuiTemplate.html    // 模版文件\n\n\n## 注意事项\n- 暂无', '<h1 id=\"h1-xuanfeng_admin_v5u5F00u53D1u624Bu518C\"><a class=\"reference-link\" name=\"xuanfeng_admin_v5 开发手册\"></a><span class=\"header-link octicon octicon-link\"></span>xuanfeng_admin_v5 开发手册</h1><h2 id=\"h2-u4EA7u54C1u4ECBu7ECD\"><a class=\"reference-link\" name=\"产品介绍\"></a><span class=\"header-link octicon octicon-link\"></span>产品介绍</h2><p>旋风管理端，主要管理文章，文集，分类，作业等相关内容</p>\n<h2 id=\"h2-u57FAu7840u4FE1u606F\"><a class=\"reference-link\" name=\"基础信息\"></a><span class=\"header-link octicon octicon-link\"></span>基础信息</h2><h3 id=\"h3-u6D4Bu8BD5u73AFu5883u5730u5740\"><a class=\"reference-link\" name=\"测试环境地址\"></a><span class=\"header-link octicon octicon-link\"></span>测试环境地址</h3><p>稍后更新</p>\n<h3 id=\"h3-u4EE3u7801u5730u5740\"><a class=\"reference-link\" name=\"代码地址\"></a><span class=\"header-link octicon octicon-link\"></span>代码地址</h3><p><a href=\"https://github.com/fsll-tech/md_xuanfeng_admin_v5\">https://github.com/fsll-tech/md_xuanfeng_admin_v5</a></p>\n<h2 id=\"h2-u6280u672Fu6808\"><a class=\"reference-link\" name=\"技术栈\"></a><span class=\"header-link octicon octicon-link\"></span>技术栈</h2><h5 id=\"h5-u540Eu7AEF\"><a class=\"reference-link\" name=\"后端\"></a><span class=\"header-link octicon octicon-link\"></span>后端</h5><ul>\n<li>Node</li><li>egg-jianghu</li></ul>\n<h5 id=\"h5-u524Du7AEF\"><a class=\"reference-link\" name=\"前端\"></a><span class=\"header-link octicon octicon-link\"></span>前端</h5><ul>\n<li>Vuetifyjs</li><li>egg-jianghu</li></ul>\n<h2 id=\"h2-u4E3Bu8981u7ED3u6784\"><a class=\"reference-link\" name=\"主要结构\"></a><span class=\"header-link octicon octicon-link\"></span>主要结构</h2><h4 id=\"h4-u76EEu5F55u7ED3u6784\"><a class=\"reference-link\" name=\"目录结构\"></a><span class=\"header-link octicon octicon-link\"></span>目录结构</h4><p>├── app<br>│&nbsp;&nbsp; ├── common           // 后端通用工具<br>│&nbsp;&nbsp; ├── constant           // 常量<br>│&nbsp;&nbsp; ├── controller<br>│&nbsp;&nbsp; ├── public               // 前端公用文件<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── editor.md    // 编辑器组件<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── images<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; └── home<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── img<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; └── home<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── jianghu<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── jquery<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; └── 3.1.1<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── layui<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; ├── css<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; └── modules<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp;     ├── laydate<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp;     │&nbsp;&nbsp; └── default<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp;     └── layer<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp;         └── default<br>│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; └── font<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── mrdoc<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── mrdoc-editor<br>│&nbsp;&nbsp; │&nbsp;&nbsp; ├── toc<br>│&nbsp;&nbsp; │&nbsp;&nbsp; └── viewerjs<br>│&nbsp;&nbsp; ├── service<br>│&nbsp;&nbsp; └── view        // web前端页面<br>│&nbsp;&nbsp;     ├── component // 通用组件<br>│&nbsp;&nbsp;     │&nbsp;&nbsp; └── fileBrowser<br>│&nbsp;&nbsp;     ├── layout      // 布局文件<br>│&nbsp;&nbsp;     ├── page     // 主要业务组件<br>│&nbsp;&nbsp;     ├── pageDoc<br>│&nbsp;&nbsp;     └── template  // 模板文件<br>├── config     // 配置文件，主要配置都在config.local.js<br>├── multipartTmp  // 文件上传临时目录<br>├── sql     // sql 初始化脚本<br>└── upload           // 文件上传后的存储目录</p>\n<h4 id=\"h4-u4E3Bu8981u6587u4EF6\"><a class=\"reference-link\" name=\"主要文件\"></a><span class=\"header-link octicon octicon-link\"></span>主要文件</h4><p>├── layout<br>│&nbsp;&nbsp; └── xuanfengLayout.html     // 布局文件<br>├── page<br>│&nbsp;&nbsp; ├── albumManagement.html    // 文集管理<br>│&nbsp;&nbsp; ├── article.html               // 文章列表<br>│&nbsp;&nbsp; ├── articleEdit.html          // 文章编辑<br>│&nbsp;&nbsp; ├── articleHistoryManagement.html     // 文章历史版本<br>│&nbsp;&nbsp; ├── articleManagement.html       // 文章管理<br>│&nbsp;&nbsp; ├── assignmentDesign.html        // 作业设计<br>│&nbsp;&nbsp; ├── categoryManagement.html   // 分类管理<br>│&nbsp;&nbsp; ├── materialManagement.html<br>│&nbsp;&nbsp; ├── resetUserPassword.html     // 重置密码<br>│&nbsp;&nbsp; └── userManagement.html      // 用户管理<br>├── pageDoc<br>│&nbsp;&nbsp; └── manual.md<br>└── template<br>    └── layuiTemplate.html    // 模版文件</p>\n<h2 id=\"h2-u6CE8u610Fu4E8Bu9879\"><a class=\"reference-link\" name=\"注意事项\"></a><span class=\"header-link octicon octicon-link\"></span>注意事项</h2><ul>\n<li>暂无</li></ul>\n', NULL, NULL, NULL, '', '2022-05-05T22:27:25+08:00', 'm3862G', 'louis', '2022-05-05T22:29:55+08:00', 'm3862G', 'louis', 'jhUpdate', 'm3862G', 'louis', '2022-05-05T22:29:55+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1497, 10082, '10007', '备份', '运维,备份,rsync', 'draft', '2022-05-09T23:39:25+08:00', '备份-同步工具Rsync', NULL, '* Tutorial: https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps#conclusion\n* Setup SSH keys: https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2\n* Installation: https://www.liquidweb.com/kb/install-rsync-and-lsync-on-centos-fedora-or-red-hat/ ', '<ul>\n<li>Tutorial: <a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps#conclusion\">https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps#conclusion</a></li><li>Setup SSH keys: <a href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2\">https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2</a></li><li>Installation: <a href=\"https://www.liquidweb.com/kb/install-rsync-and-lsync-on-centos-fedora-or-red-hat/\">https://www.liquidweb.com/kb/install-rsync-and-lsync-on-centos-fedora-or-red-hat/</a> </li></ul>\n', NULL, NULL, NULL, '', '2022-05-09T23:39:25+08:00', '100005W', '安宁', '2022-05-10T04:37:59+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-05-10T04:37:59+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1498, 10083, '10011', 'Database', 'training,database,mysql,sql,navicat', 'deleted', '2022-05-10T06:05:23+08:00', 'IT Programming Training (Beginner Level) - Lesson 00: Introduction to Database', NULL, '## Basic Concepts\n\n### Database\n\nA database is **an organized collection of data, generally stored and accessed electronically from a computer system**. It supports the storage and manipulation of data. In other words, databases are used by an organization as a method of storing, managing, and retrieving information.\n\n### SQL\n\nSQL stands for \"Structured Query Language\". It is used for accessing and manipulating data stored in the database. It enables a user to **Create**, **Read**, **Update** and **Delete** data.\n\n### MySQL\n\nMySQL is a software specifically designed for managing databases. In order to manipulate the data stored in a database, you need a database management system such as MySQL Server.\n\n## Preparation For Subsequent Lessons\n\nBefore we proceed with the actual lessons, we need to do the following preparations:\n\n1. Read the documents on SQL and MySQL\n2. Install Software: MySQL and Navicat\n\n## Documents On SQL and MySQL\n\n- SQL Tutorial\n  - W3Schools: https://www.w3schools.com/sql/default.asp\n- MySQL Tutorial\n  - MySQL 5.7 Reference Manual https://dev.mysql.com/doc/refman/5.7/en/\n  - W3Schools: https://www.w3schools.com/mysql/default.asp\n\n## Sample Data\n\nClick to download the [sample data](https://audio.fsll.org/English/ittraining/sample_data_database_learning-20220515.sql \"sample data\") as a SQL script file.\n\n## Software Installation: MySQL\n\n### Step 1: Download MySQL Installer for Windows\n\n(1) Go to the following page:\n\nhttps://dev.mysql.com/downloads/installer/\n\n(2) We need to install MySQL 5.7. Find the text \"Looking for previous GA versions?\". Click on the text to go to the download page for MySQL 5.7.\n\n(3) On the new page, click on the first \"Download\" button.\n\n(4) On the opened page, click on the text \"No thanks, just start my download\" to start the download.\n\n### Step 2: Installation\n\n(1) After the download is finished, double click the downloaded software \"mysql-installer-web-community-5.7.38.0.msi\" to begin the installation. It may take some time to fully open the software, so please be patient.\n\n(2) Choose a setup type: Choose \"Server only\", then click \"Next\".\n\n(3) Choose the server version: In the \"Available Products\" box, click on the \"+\" next to the product \"MySQL Servers\" and expand subsequent \"+\" symbols until you see \"MySQL Server 5.7.38 - X64\". Choose this server version. \n\n(4) Click on the green right arrow to add it to the list on the right. Then click \"Next\".\n\n(5) The installation software will check if your computer has all the required products before installation. In this step, you don\'t have to install the missing products yourself. All you need to do is to click on the \"Execute\" button.\n\n(6) Start the installation: after all missing required products are installed, you can click on \"Execute\" to start the installation.\n\nAfter the installation is finished, the status bar will show the message \"Complete\". A green tick will appear before the icon of MySQL. Then click the \"Next\" button to go to the Product Configuration Interface.\n\n### Step 3: Product Configuration\n\n**Note: In this step, the most important thing is to remember well the password you set for your MySQL Server. In case you may forget the password easily, please set this password to 123456.**\n\n(1) Click \"Next\" to go to the configuration of MySQL Server.\n\n(2) Type and Networking: you don\'t need to change anything in this step. Just click \"Next\".\n\n(3) Accounts and Roles: In this step, you are going to set the MySQL Root Password. Please set this password to 123456. After setting the password, click \"Next\".\n\n(4) Windows Service: Nothing needs to be changed in this step. Click \"Next\".\n\n(5) Plugins and Extensions: No change. Next.\n\n(6) Apply Server Configuration: click \"Execute\" to save the configurations. \n\nWhen this step is finished, click on the \"Finish\" button to complete the product configuration.\n\n(7) You will be returned to the Installation window. Click on \"Next\".\n\n(8) The next window shows that the installation is now completed. Click on \"Finish\" and your MySQL Server is then ready to be used.\n\n## Software Installation: Navicat for MySQL\n\nNavicat for MySQL is a software that allows you to connect to MySQL database. It provides an intuitive and powerful graphical interface for database management.\n\n### Step 1: Download the Installer\n\n(1) Go to the following link:\n\nhttps://www.navicat.com/en/download/navicat-for-mysql\n\n(2) Select the download link according to your computer\'s operating system. Click to start the download.\n\n### Step 2: Installation\n\n(1) After the download is finished, double click on the downloaded file to start the installation. You can just follow the instructions in the installation window.\n\n(2) After the installation is done, you can search for Navicat 16 in your computer and open it.\n\n### Step 3: Connect to the MySQL Server On Your Computer using Navicat\n\n(1) Open Navicat 16. Find the \"Connection\" button from the top part of the window. Click on it and choose \"MySQL ...\".\n\n(2) In the opened dialog window, key in the connection name and the root password of your MySQL Server.\n\nThe connection name can be any word. But try not to use space.\n\nThe root password is the one you set for your MySQL Server during the Production Configuration step.\n\nYou don\'t need to change the host, port, and username. You can click on the \"Test Connection\" button.\n\n(3) After the test is successful, click on \"OK\". Then Navicat is connected to the MySQL Server on your computer.\n\n(4) In the left-hand panel, you will be able to see a new icon with the same name you entered in step (2). Double click on the icon, then you will be able to see the databases in your MySQL Server.\n\n**Note:** By default, there are four databases in your MySQL Server: information_schema, mysql, performance_schema, and sys. **Never change any of the four databases. Otherwise, your MySQL Server will be damaged and all your data stored in your MySQL Server will be lost!!!**', '<h2 id=\"h2-basicconcepts\"><a class=\"reference-link\" name=\"Basic Concepts\"></a><span class=\"header-link octicon octicon-link\"></span>Basic Concepts</h2><h3 id=\"h3-database\"><a class=\"reference-link\" name=\"Database\"></a><span class=\"header-link octicon octicon-link\"></span>Database</h3><p>A database is <strong>an organized collection of data, generally stored and accessed electronically from a computer system</strong>. It supports the storage and manipulation of data. In other words, databases are used by an organization as a method of storing, managing, and retrieving information.</p>\n<h3 id=\"h3-sql\"><a class=\"reference-link\" name=\"SQL\"></a><span class=\"header-link octicon octicon-link\"></span>SQL</h3><p>SQL stands for “Structured Query Language”. It is used for accessing and manipulating data stored in the database. It enables a user to <strong>Create</strong>, <strong>Read</strong>, <strong>Update</strong> and <strong>Delete</strong> data.</p>\n<h3 id=\"h3-mysql\"><a class=\"reference-link\" name=\"MySQL\"></a><span class=\"header-link octicon octicon-link\"></span>MySQL</h3><p>MySQL is a software specifically designed for managing databases. In order to manipulate the data stored in a database, you need a database management system such as MySQL Server.</p>\n<h2 id=\"h2-preparationfor20subsequent20lessons\"><a class=\"reference-link\" name=\"Preparation For Subsequent Lessons\"></a><span class=\"header-link octicon octicon-link\"></span>Preparation For Subsequent Lessons</h2><p>Before we proceed with the actual lessons, we need to do the following preparations:</p>\n<ol>\n<li>Read the documents on SQL and MySQL</li><li>Install Software: MySQL and Navicat</li></ol>\n<h2 id=\"h2-documentson20sql20and20mysql\"><a class=\"reference-link\" name=\"Documents On SQL and MySQL\"></a><span class=\"header-link octicon octicon-link\"></span>Documents On SQL and MySQL</h2><ul>\n<li>SQL Tutorial<ul>\n<li>W3Schools: <a href=\"https://www.w3schools.com/sql/default.asp\">https://www.w3schools.com/sql/default.asp</a></li></ul>\n</li><li>MySQL Tutorial<ul>\n<li>MySQL 5.7 Reference Manual <a href=\"https://dev.mysql.com/doc/refman/5.7/en/\">https://dev.mysql.com/doc/refman/5.7/en/</a></li><li>W3Schools: <a href=\"https://www.w3schools.com/mysql/default.asp\">https://www.w3schools.com/mysql/default.asp</a></li></ul>\n</li></ul>\n<h2 id=\"h2-sampledata\"><a class=\"reference-link\" name=\"Sample Data\"></a><span class=\"header-link octicon octicon-link\"></span>Sample Data</h2><p>Click to download the <a title=\"sample data\" href=\"https://audio.fsll.org/English/ittraining/sample_data_database_learning-20220515.sql\">sample data</a> as a SQL script file.</p>\n<h2 id=\"h2-softwareinstallation3A20mysql\"><a class=\"reference-link\" name=\"Software Installation: MySQL\"></a><span class=\"header-link octicon octicon-link\"></span>Software Installation: MySQL</h2><h3 id=\"h3-step13A20download20mysql20installer20for20windows\"><a class=\"reference-link\" name=\"Step 1: Download MySQL Installer for Windows\"></a><span class=\"header-link octicon octicon-link\"></span>Step 1: Download MySQL Installer for Windows</h3><p>(1) Go to the following page:</p>\n<p><a href=\"https://dev.mysql.com/downloads/installer/\">https://dev.mysql.com/downloads/installer/</a></p>\n<p>(2) We need to install MySQL 5.7. Find the text “Looking for previous GA versions?”. Click on the text to go to the download page for MySQL 5.7.</p>\n<p>(3) On the new page, click on the first “Download” button.</p>\n<p>(4) On the opened page, click on the text “No thanks, just start my download” to start the download.</p>\n<h3 id=\"h3-step23A20installation\"><a class=\"reference-link\" name=\"Step 2: Installation\"></a><span class=\"header-link octicon octicon-link\"></span>Step 2: Installation</h3><p>(1) After the download is finished, double click the downloaded software “mysql-installer-web-community-5.7.38.0.msi” to begin the installation. It may take some time to fully open the software, so please be patient.</p>\n<p>(2) Choose a setup type: Choose “Server only”, then click “Next”.</p>\n<p>(3) Choose the server version: In the “Available Products” box, click on the “+” next to the product “MySQL Servers” and expand subsequent “+” symbols until you see “MySQL Server 5.7.38 - X64”. Choose this server version. </p>\n<p>(4) Click on the green right arrow to add it to the list on the right. Then click “Next”.</p>\n<p>(5) The installation software will check if your computer has all the required products before installation. In this step, you don’t have to install the missing products yourself. All you need to do is to click on the “Execute” button.</p>\n<p>(6) Start the installation: after all missing required products are installed, you can click on “Execute” to start the installation.</p>\n<p>After the installation is finished, the status bar will show the message “Complete”. A green tick will appear before the icon of MySQL. Then click the “Next” button to go to the Product Configuration Interface.</p>\n<h3 id=\"h3-step33A20product20configuration\"><a class=\"reference-link\" name=\"Step 3: Product Configuration\"></a><span class=\"header-link octicon octicon-link\"></span>Step 3: Product Configuration</h3><p><strong>Note: In this step, the most important thing is to remember well the password you set for your MySQL Server. In case you may forget the password easily, please set this password to 123456.</strong></p>\n<p>(1) Click “Next” to go to the configuration of MySQL Server.</p>\n<p>(2) Type and Networking: you don’t need to change anything in this step. Just click “Next”.</p>\n<p>(3) Accounts and Roles: In this step, you are going to set the MySQL Root Password. Please set this password to 123456. After setting the password, click “Next”.</p>\n<p>(4) Windows Service: Nothing needs to be changed in this step. Click “Next”.</p>\n<p>(5) Plugins and Extensions: No change. Next.</p>\n<p>(6) Apply Server Configuration: click “Execute” to save the configurations. </p>\n<p>When this step is finished, click on the “Finish” button to complete the product configuration.</p>\n<p>(7) You will be returned to the Installation window. Click on “Next”.</p>\n<p>(8) The next window shows that the installation is now completed. Click on “Finish” and your MySQL Server is then ready to be used.</p>\n<h2 id=\"h2-softwareinstallation3A20navicat20for20mysql\"><a class=\"reference-link\" name=\"Software Installation: Navicat for MySQL\"></a><span class=\"header-link octicon octicon-link\"></span>Software Installation: Navicat for MySQL</h2><p>Navicat for MySQL is a software that allows you to connect to MySQL database. It provides an intuitive and powerful graphical interface for database management.</p>\n<h3 id=\"h3-step13A20download20the20installer\"><a class=\"reference-link\" name=\"Step 1: Download the Installer\"></a><span class=\"header-link octicon octicon-link\"></span>Step 1: Download the Installer</h3><p>(1) Go to the following link:</p>\n<p><a href=\"https://www.navicat.com/en/download/navicat-for-mysql\">https://www.navicat.com/en/download/navicat-for-mysql</a></p>\n<p>(2) Select the download link according to your computer’s operating system. Click to start the download.</p>\n<h3 id=\"h3-step23A20installation\"><a class=\"reference-link\" name=\"Step 2: Installation\"></a><span class=\"header-link octicon octicon-link\"></span>Step 2: Installation</h3><p>(1) After the download is finished, double click on the downloaded file to start the installation. You can just follow the instructions in the installation window.</p>\n<p>(2) After the installation is done, you can search for Navicat 16 in your computer and open it.</p>\n<h3 id=\"h3-step33A20connect20to20the20mysql20server20on20your20computer20using20navicat\"><a class=\"reference-link\" name=\"Step 3: Connect to the MySQL Server On Your Computer using Navicat\"></a><span class=\"header-link octicon octicon-link\"></span>Step 3: Connect to the MySQL Server On Your Computer using Navicat</h3><p>(1) Open Navicat 16. Find the “Connection” button from the top part of the window. Click on it and choose “MySQL …”.</p>\n<p>(2) In the opened dialog window, key in the connection name and the root password of your MySQL Server.</p>\n<p>The connection name can be any word. But try not to use space.</p>\n<p>The root password is the one you set for your MySQL Server during the Production Configuration step.</p>\n<p>You don’t need to change the host, port, and username. You can click on the “Test Connection” button.</p>\n<p>(3) After the test is successful, click on “OK”. Then Navicat is connected to the MySQL Server on your computer.</p>\n<p>(4) In the left-hand panel, you will be able to see a new icon with the same name you entered in step (2). Double click on the icon, then you will be able to see the databases in your MySQL Server.</p>\n<p><strong>Note:</strong> By default, there are four databases in your MySQL Server: information_schema, mysql, performance_schema, and sys. <strong>Never change any of the four databases. Otherwise, your MySQL Server will be damaged and all your data stored in your MySQL Server will be lost!!!</strong></p>\n', NULL, NULL, NULL, '', '2022-05-10T06:05:23+08:00', '100005W', '安宁', '2022-05-25T15:13:08+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-25T15:13:08+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1499, 10084, '10015', '江湖JS-运维', '', 'deleted', '2022-05-12T00:00:36+08:00', '搭建服务器：Windows系统下使用VMWare Workstation安装CentOS虚拟机', NULL, '## 前提：下载并安装VMware Workstation\n\n在Windows系统中使用CentOS之前，你需要先下载安装一个VMWare Workstation\n\n## 第2步：下载并在VMware里安装CentOS 7\n\n### 2.1 下载CentOS 7\n\n* 下载地址：https://wiki.centos.org/Download\n* 下载版本：CentOS 7 x86\\_64。请根据你的实际需要，决定具体的下载版本。\n* 在转移到的页面中，选择一个镜像站点，在其中选择：CentOS-7-x86\\_64-minimal.iso，开始下载。\n\n### 2.2 在VMware里安装新的虚拟机\n\n* 运行VMware Workstation。选择“Player” -> “File” -> “New Virtual Machine”，开始创建新的虚拟机系统。\n* 选择“安装程序光盘映像文件系统”，浏览“所下载文件地址” 选择“Linux, CentOS 7”（根据你的系统，选择64位或32位）。\n* 给你的virtual machine起一个名字，分配磁盘大小，例如20G，不要选择将虚拟磁盘拆分为多个文件。下一步点击完成。\n\n### 2.3 在新创建的虚拟机里安装CentOS系统\n\n* 点击“Edit virtual machine settings (编辑虚拟机设置)”。\n* 选择CD/DVD（IDE），选择“Use ISO image file（使用ISO文件）”，选择下载的CentOS 7的安装文件，然后点击OK，启动virtual machine，启动后会自动开始安装。\n* 出现disc checking时，选择Skip。然后就开始安装了。\n* 依次选择语言、键盘、时区（选择Asia/Shanghai），设置Host name、root password。选择discard data。\n* 选择type of installlation：replace existing。然后开始安装。\n* 安装完成以后reboot system。\n\n## 第三步：使用\n\n### 3.1 login\n\n* login：root。\n* password：你设置的password。\n\n### 3.2 设置网络\n\n```ping www.baidu.com```，如果出现 ```unknown host www.baidu.com```，就需要设置网络。\n\n在VMware的虚拟机设置中，选择网络适配器，网络连接选择使用桥接模式(Bridged)，并且选择“复制物理网络连接状态”。确定后重新ping百度。\n\n如果还出现“unknown”错误，说明网络服务没有随开机启动，就需要修改网卡配置。\n\n换去网卡配置文件所在的路径：\n\n```\ncd /etc/sysconfig/network-scripts/\n```\n输入“vi ifcfg-ens33”来修改网卡配置。按\'a\'进入编辑模式，修改其中的 ```ONBOOT=yes```。 按\'ESC\'退出编辑模式，输入\":wq\"保存退出。\n\n输入```reboot```重启Cent OS。继续```ping www.baidu.com```，这时就可以ping到了。使用ip addr，可以看到本机的ip address（inet addr）。\n\n到此，Cent OS就安装成功了。\n\n## 第4步：安装其他软件\n\n* 在CentOS 7 里面安装wget：```$ sudo yum install wget```\n\n## 资料收集：使用CentOS\n\n### 1. 虚拟机 CentOS 7调整CPU、内存及硬盘容量：\n\n* 调整CPU及内存：\n  * 点击“Edit virtual machine settings (编辑虚拟机设置)”。\n  * 在Hardware Tab中，选择Processors或者Memory进行调整。\n* 挂载硬盘：\n  * CentOS挂载硬盘操作流程：https://www.bt.cn/bbs/thread-50002-1-1.html\n* 扩大硬盘容量：\n  * 通过扩展现有磁盘空间的方式实现：\n    * https://blog.csdn.net/chengyuqiang/article/details/59491942\n	* https://blog.51cto.com/u_15057823/3912285\n  * 通过添加硬盘的方式实现：https://blog.csdn.net/apacat/article/details/95926148\n* 逻辑卷管理的原理背景：https://blog.51cto.com/u_13691477/2299707\n\n### 2. 修改登录密码\n\n* CentOS7修改root用户密码：https://blog.csdn.net/wudinaniya/article/details/81060536 \n\n### 3. 解决复制虚拟机MAC地址冲突的问题\n\n复制一台虚拟机，它与原来的虚拟机的MAC地址是相同的。启动后，如果与原来的虚拟机在同一个网络里，则第二台虚拟机就无法联网了，因为两台虚拟机的MAC地址完全一样。可以按照以下的步骤，重新给第二台虚拟机分配一个MAC地址：\n\n* 教程：https://blog.csdn.net/weixin_41722525/article/details/86287382\n\n## 4. 配置网卡\n\n### 4.1. 查看IP信息\n安装完CentOS之后，通过```ip addr```命令查看ip信息。\n\n### 4.2. 查看网卡配置\n通过```ifconfig```命令查看网卡的配置信息。\n\n参考资料：\n- ifconfig ens33 内容详解：https://blog.csdn.net/weixin_46108954/article/details/104637127\n- centos 7网卡配置文件详解（ifcfg-ens33）：https://www.cnblogs.com/renshengdezheli/p/13926829.html\n\n\n### 4.3. 配置动态IP\n\n编辑网卡配置文件\n```\nvi /etc/sysconfig/network-scripts/ifcfg-ens33\n```\n\n文件内容如下\n\n```\nTYPE=Ethernet\nPROXY_METHOD=none\nBROWSER_ONLY=no\nBOOTPROTO=dhcp\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=ens33\nUUID=e7666215-13db-4cc2-bbea-6fd152c7b4a8\nDEVICE=ens33\nONBOOT=yes\n```\n\n修改完毕后，重启网络服务：\n\n```\nservice network restart\n```\n\n### 4.4. 配置静态IP\n\n编辑网卡配置文件```ifcfg-ens33```，修改其中的```BOOTPROTO=static```，并增加以下几行：\n\n```\nIPADDR=192.168.0.100\nGETWAY=192.168.0.1\nNETMASK=255.255.255.0\nDNS1=192.168.0.1\n```\n\n### 4.5. 通过VMWare Workstation配置双网卡双IP\n\n- VMware中CentOS配置多网卡多IP：https://blog.csdn.net/CleverCode/article/details/50563339\n- CentOs7设置双网卡网关：https://www.daimajiaoliu.com/daima/48720ad4a900404\n- CentOs7添加新网卡实现双IP双网关：https://cloud.tencent.com/developer/article/1903294\n- \n\n', '<h2 id=\"h2-u524Du63D0uFF1Au4E0Bu8F7Du5E76u5B89u88C5vmwareworkstation\"><a class=\"reference-link\" name=\"前提：下载并安装VMware Workstation\"></a><span class=\"header-link octicon octicon-link\"></span>前提：下载并安装VMware Workstation</h2><p>在Windows系统中使用CentOS之前，你需要先下载安装一个VMWare Workstation</p>\n<h2 id=\"h2-u7B2C2u6B65uFF1Au4E0Bu8F7Du5E76u5728vmwareu91CCu5B89u88C5centos7\"><a class=\"reference-link\" name=\"第2步：下载并在VMware里安装CentOS 7\"></a><span class=\"header-link octicon octicon-link\"></span>第2步：下载并在VMware里安装CentOS 7</h2><h3 id=\"h3-2.1u4E0Bu8F7Dcentos207\"><a class=\"reference-link\" name=\"2.1 下载CentOS 7\"></a><span class=\"header-link octicon octicon-link\"></span>2.1 下载CentOS 7</h3><ul>\n<li>下载地址：<a href=\"https://wiki.centos.org/Download\">https://wiki.centos.org/Download</a></li><li>下载版本：CentOS 7 x86_64。请根据你的实际需要，决定具体的下载版本。</li><li>在转移到的页面中，选择一个镜像站点，在其中选择：CentOS-7-x86_64-minimal.iso，开始下载。</li></ul>\n<h3 id=\"h3-2.2u5728vmwareu91CCu5B89u88C5u65B0u7684u865Au62DFu673A\"><a class=\"reference-link\" name=\"2.2 在VMware里安装新的虚拟机\"></a><span class=\"header-link octicon octicon-link\"></span>2.2 在VMware里安装新的虚拟机</h3><ul>\n<li>运行VMware Workstation。选择“Player” -&gt; “File” -&gt; “New Virtual Machine”，开始创建新的虚拟机系统。</li><li>选择“安装程序光盘映像文件系统”，浏览“所下载文件地址” 选择“Linux, CentOS 7”（根据你的系统，选择64位或32位）。</li><li>给你的virtual machine起一个名字，分配磁盘大小，例如20G，不要选择将虚拟磁盘拆分为多个文件。下一步点击完成。</li></ul>\n<h3 id=\"h3-2.3u5728u65B0u521Bu5EFAu7684u865Au62DFu673Au91CCu5B89u88C5centosu7CFBu7EDF\"><a class=\"reference-link\" name=\"2.3 在新创建的虚拟机里安装CentOS系统\"></a><span class=\"header-link octicon octicon-link\"></span>2.3 在新创建的虚拟机里安装CentOS系统</h3><ul>\n<li>点击“Edit virtual machine settings (编辑虚拟机设置)”。</li><li>选择CD/DVD（IDE），选择“Use ISO image file（使用ISO文件）”，选择下载的CentOS 7的安装文件，然后点击OK，启动virtual machine，启动后会自动开始安装。</li><li>出现disc checking时，选择Skip。然后就开始安装了。</li><li>依次选择语言、键盘、时区（选择Asia/Shanghai），设置Host name、root password。选择discard data。</li><li>选择type of installlation：replace existing。然后开始安装。</li><li>安装完成以后reboot system。</li></ul>\n<h2 id=\"h2-u7B2Cu4E09u6B65uFF1Au4F7Fu7528\"><a class=\"reference-link\" name=\"第三步：使用\"></a><span class=\"header-link octicon octicon-link\"></span>第三步：使用</h2><h3 id=\"h3-3.1login\"><a class=\"reference-link\" name=\"3.1 login\"></a><span class=\"header-link octicon octicon-link\"></span>3.1 login</h3><ul>\n<li>login：root。</li><li>password：你设置的password。</li></ul>\n<h3 id=\"h3-3.2u8BBEu7F6Eu7F51u7EDC\"><a class=\"reference-link\" name=\"3.2 设置网络\"></a><span class=\"header-link octicon octicon-link\"></span>3.2 设置网络</h3><p><code>ping www.baidu.com</code>，如果出现 <code>unknown host www.baidu.com</code>，就需要设置网络。</p>\n<p>在VMware的虚拟机设置中，选择网络适配器，网络连接选择使用桥接模式(Bridged)，并且选择“复制物理网络连接状态”。确定后重新ping百度。</p>\n<p>如果还出现“unknown”错误，说明网络服务没有随开机启动，就需要修改网卡配置。</p>\n<p>换去网卡配置文件所在的路径：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">cd </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">sysconfig</span><span class=\"pun\">/</span><span class=\"pln\">network</span><span class=\"pun\">-</span><span class=\"pln\">scripts</span><span class=\"pun\">/</span></code></li></ol></pre>\n<p>输入“vi ifcfg-ens33”来修改网卡配置。按’a’进入编辑模式，修改其中的 <code>ONBOOT=yes</code>。 按’ESC’退出编辑模式，输入”:wq”保存退出。</p>\n<p>输入<code>reboot</code>重启Cent OS。继续<code>ping www.baidu.com</code>，这时就可以ping到了。使用ip addr，可以看到本机的ip address（inet addr）。</p>\n<p>到此，Cent OS就安装成功了。</p>\n<h2 id=\"h2-u7B2C4u6B65uFF1Au5B89u88C5u5176u4ED6u8F6Fu4EF6\"><a class=\"reference-link\" name=\"第4步：安装其他软件\"></a><span class=\"header-link octicon octicon-link\"></span>第4步：安装其他软件</h2><ul>\n<li>在CentOS 7 里面安装wget：<code>$ sudo yum install wget</code></li></ul>\n<h2 id=\"h2-u8D44u6599u6536u96C6uFF1Au4F7Fu7528centos\"><a class=\"reference-link\" name=\"资料收集：使用CentOS\"></a><span class=\"header-link octicon octicon-link\"></span>资料收集：使用CentOS</h2><h3 id=\"h3-1.u865Au62DFu673A20centos207u8C03u6574cpuu3001u5185u5B58u53CAu786Cu76D8u5BB9u91CFuFF1A\"><a class=\"reference-link\" name=\"1. 虚拟机 CentOS 7调整CPU、内存及硬盘容量：\"></a><span class=\"header-link octicon octicon-link\"></span>1. 虚拟机 CentOS 7调整CPU、内存及硬盘容量：</h3><ul>\n<li>调整CPU及内存：<ul>\n<li>点击“Edit virtual machine settings (编辑虚拟机设置)”。</li><li>在Hardware Tab中，选择Processors或者Memory进行调整。</li></ul>\n</li><li>挂载硬盘：<ul>\n<li>CentOS挂载硬盘操作流程：<a href=\"https://www.bt.cn/bbs/thread-50002-1-1.html\">https://www.bt.cn/bbs/thread-50002-1-1.html</a></li></ul>\n</li><li>扩大硬盘容量：<ul>\n<li>通过扩展现有磁盘空间的方式实现：<ul>\n<li><a href=\"https://blog.csdn.net/chengyuqiang/article/details/59491942\">https://blog.csdn.net/chengyuqiang/article/details/59491942</a></li><li><a href=\"https://blog.51cto.com/u_15057823/3912285\">https://blog.51cto.com/u_15057823/3912285</a></li></ul>\n</li><li>通过添加硬盘的方式实现：<a href=\"https://blog.csdn.net/apacat/article/details/95926148\">https://blog.csdn.net/apacat/article/details/95926148</a></li></ul>\n</li><li>逻辑卷管理的原理背景：<a href=\"https://blog.51cto.com/u_13691477/2299707\">https://blog.51cto.com/u_13691477/2299707</a></li></ul>\n<h3 id=\"h3-2.u4FEEu6539u767Bu5F55u5BC6u7801\"><a class=\"reference-link\" name=\"2. 修改登录密码\"></a><span class=\"header-link octicon octicon-link\"></span>2. 修改登录密码</h3><ul>\n<li>CentOS7修改root用户密码：<a href=\"https://blog.csdn.net/wudinaniya/article/details/81060536\">https://blog.csdn.net/wudinaniya/article/details/81060536</a> </li></ul>\n<h3 id=\"h3-3.u89E3u51B3u590Du5236u865Au62DFu673Amacu5730u5740u51B2u7A81u7684u95EEu9898\"><a class=\"reference-link\" name=\"3. 解决复制虚拟机MAC地址冲突的问题\"></a><span class=\"header-link octicon octicon-link\"></span>3. 解决复制虚拟机MAC地址冲突的问题</h3><p>复制一台虚拟机，它与原来的虚拟机的MAC地址是相同的。启动后，如果与原来的虚拟机在同一个网络里，则第二台虚拟机就无法联网了，因为两台虚拟机的MAC地址完全一样。可以按照以下的步骤，重新给第二台虚拟机分配一个MAC地址：</p>\n<ul>\n<li>教程：<a href=\"https://blog.csdn.net/weixin_41722525/article/details/86287382\">https://blog.csdn.net/weixin_41722525/article/details/86287382</a></li></ul>\n<h2 id=\"h2-4.u914Du7F6Eu7F51u5361\"><a class=\"reference-link\" name=\"4. 配置网卡\"></a><span class=\"header-link octicon octicon-link\"></span>4. 配置网卡</h2><h3 id=\"h3-4.1.u67E5u770Bipu4FE1u606F\"><a class=\"reference-link\" name=\"4.1. 查看IP信息\"></a><span class=\"header-link octicon octicon-link\"></span>4.1. 查看IP信息</h3><p>安装完CentOS之后，通过<code>ip addr</code>命令查看ip信息。</p>\n<h3 id=\"h3-4.2.u67E5u770Bu7F51u5361u914Du7F6E\"><a class=\"reference-link\" name=\"4.2. 查看网卡配置\"></a><span class=\"header-link octicon octicon-link\"></span>4.2. 查看网卡配置</h3><p>通过<code>ifconfig</code>命令查看网卡的配置信息。</p>\n<p>参考资料：</p>\n<ul>\n<li>ifconfig ens33 内容详解：<a href=\"https://blog.csdn.net/weixin_46108954/article/details/104637127\">https://blog.csdn.net/weixin_46108954/article/details/104637127</a></li><li>centos 7网卡配置文件详解（ifcfg-ens33）：<a href=\"https://www.cnblogs.com/renshengdezheli/p/13926829.html\">https://www.cnblogs.com/renshengdezheli/p/13926829.html</a></li></ul>\n<h3 id=\"h3-4.3.u914Du7F6Eu52A8u6001ip\"><a class=\"reference-link\" name=\"4.3. 配置动态IP\"></a><span class=\"header-link octicon octicon-link\"></span>4.3. 配置动态IP</h3><p>编辑网卡配置文件</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">vi </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">sysconfig</span><span class=\"pun\">/</span><span class=\"pln\">network</span><span class=\"pun\">-</span><span class=\"pln\">scripts</span><span class=\"pun\">/</span><span class=\"pln\">ifcfg</span><span class=\"pun\">-</span><span class=\"pln\">ens33</span></code></li></ol></pre>\n<p>文件内容如下</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">TYPE</span><span class=\"pun\">=</span><span class=\"typ\">Ethernet</span></code></li><li class=\"L1\"><code><span class=\"pln\">PROXY_METHOD</span><span class=\"pun\">=</span><span class=\"pln\">none</span></code></li><li class=\"L2\"><code><span class=\"pln\">BROWSER_ONLY</span><span class=\"pun\">=</span><span class=\"kwd\">no</span></code></li><li class=\"L3\"><code><span class=\"pln\">BOOTPROTO</span><span class=\"pun\">=</span><span class=\"pln\">dhcp</span></code></li><li class=\"L4\"><code><span class=\"pln\">DEFROUTE</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L5\"><code><span class=\"pln\">IPV4_FAILURE_FATAL</span><span class=\"pun\">=</span><span class=\"kwd\">no</span></code></li><li class=\"L6\"><code><span class=\"pln\">IPV6INIT</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L7\"><code><span class=\"pln\">IPV6_AUTOCONF</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L8\"><code><span class=\"pln\">IPV6_DEFROUTE</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L9\"><code><span class=\"pln\">IPV6_FAILURE_FATAL</span><span class=\"pun\">=</span><span class=\"kwd\">no</span></code></li><li class=\"L0\"><code><span class=\"pln\">IPV6_ADDR_GEN_MODE</span><span class=\"pun\">=</span><span class=\"pln\">stable</span><span class=\"pun\">-</span><span class=\"pln\">privacy</span></code></li><li class=\"L1\"><code><span class=\"pln\">NAME</span><span class=\"pun\">=</span><span class=\"pln\">ens33</span></code></li><li class=\"L2\"><code><span class=\"pln\">UUID</span><span class=\"pun\">=</span><span class=\"pln\">e7666215</span><span class=\"pun\">-</span><span class=\"lit\">13db</span><span class=\"pun\">-</span><span class=\"lit\">4cc2</span><span class=\"pun\">-</span><span class=\"pln\">bbea</span><span class=\"pun\">-</span><span class=\"lit\">6fd152c7b4a8</span></code></li><li class=\"L3\"><code><span class=\"pln\">DEVICE</span><span class=\"pun\">=</span><span class=\"pln\">ens33</span></code></li><li class=\"L4\"><code><span class=\"pln\">ONBOOT</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li></ol></pre>\n<p>修改完毕后，重启网络服务：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">service network restart</span></code></li></ol></pre>\n<h3 id=\"h3-4.4.u914Du7F6Eu9759u6001ip\"><a class=\"reference-link\" name=\"4.4. 配置静态IP\"></a><span class=\"header-link octicon octicon-link\"></span>4.4. 配置静态IP</h3><p>编辑网卡配置文件<code>ifcfg-ens33</code>，修改其中的<code>BOOTPROTO=static</code>，并增加以下几行：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">IPADDR</span><span class=\"pun\">=</span><span class=\"lit\">192.168</span><span class=\"pun\">.</span><span class=\"lit\">0.100</span></code></li><li class=\"L1\"><code><span class=\"pln\">GETWAY</span><span class=\"pun\">=</span><span class=\"lit\">192.168</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li><li class=\"L2\"><code><span class=\"pln\">NETMASK</span><span class=\"pun\">=</span><span class=\"lit\">255.255</span><span class=\"pun\">.</span><span class=\"lit\">255.0</span></code></li><li class=\"L3\"><code><span class=\"pln\">DNS1</span><span class=\"pun\">=</span><span class=\"lit\">192.168</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li></ol></pre>\n<h3 id=\"h3-4.5.u901Au8FC7vmware20workstationu914Du7F6Eu53CCu7F51u5361u53CCip\"><a class=\"reference-link\" name=\"4.5. 通过VMWare Workstation配置双网卡双IP\"></a><span class=\"header-link octicon octicon-link\"></span>4.5. 通过VMWare Workstation配置双网卡双IP</h3><ul>\n<li>VMware中CentOS配置多网卡多IP：<a href=\"https://blog.csdn.net/CleverCode/article/details/50563339\">https://blog.csdn.net/CleverCode/article/details/50563339</a></li><li>CentOs7设置双网卡网关：<a href=\"https://www.daimajiaoliu.com/daima/48720ad4a900404\">https://www.daimajiaoliu.com/daima/48720ad4a900404</a></li><li>CentOs7添加新网卡实现双IP双网关：<a href=\"https://cloud.tencent.com/developer/article/1903294\">https://cloud.tencent.com/developer/article/1903294</a></li><li></li></ul>\n', NULL, NULL, NULL, '', '2022-05-12T00:00:39+08:00', '100005W', '安宁', '2022-05-12T00:00:39+08:00', '100005W', '安宁', 'update', '100005W', '安宁', '2022-05-21T03:13:43+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1500, 10085, '10015', '江湖JS-运维', 'VMWare Workstation,CentOS,network card,CPU,memory,RAM,IP', 'public', '2022-05-12T00:00:36+08:00', '搭建服务器：Windows系统下使用VMWare Workstation安装CentOS虚拟机', NULL, '## 前提：下载并安装VMware Workstation\n\n在Windows系统中使用CentOS之前，你需要先下载安装一个VMWare Workstation\n\n## 第2步：下载并在VMware里安装CentOS 7\n\n### 2.1 下载CentOS 7\n\n* 下载地址：https://wiki.centos.org/Download\n* 下载版本：CentOS 7 x86\\_64。请根据你的实际需要，决定具体的下载版本。\n* 在转移到的页面中，选择一个镜像站点，在其中选择：CentOS-7-x86\\_64-minimal.iso，开始下载。\n\n### 2.2 在VMware里安装新的虚拟机\n\n* 运行VMware Workstation。选择“Player” -> “File” -> “New Virtual Machine”，开始创建新的虚拟机系统。\n* 选择“安装程序光盘映像文件系统”，浏览“所下载文件地址” 选择“Linux, CentOS 7”（根据你的系统，选择64位或32位）。\n* 给你的virtual machine起一个名字，分配磁盘大小，例如20G，不要选择将虚拟磁盘拆分为多个文件。下一步点击完成。\n\n### 2.3 在新创建的虚拟机里安装CentOS系统\n\n* 点击“Edit virtual machine settings (编辑虚拟机设置)”。\n* 选择CD/DVD（IDE），选择“Use ISO image file（使用ISO文件）”，选择下载的CentOS 7的安装文件，然后点击OK，启动virtual machine，启动后会自动开始安装。\n* 出现disc checking时，选择Skip。然后就开始安装了。\n* 依次选择语言、键盘、时区（选择Asia/Shanghai），设置Host name、root password。选择discard data。\n* 选择type of installlation：replace existing。然后开始安装。\n* 安装完成以后reboot system。\n\n## 第三步：使用\n\n### 3.1 login\n\n* login：root。\n* password：你设置的password。\n\n### 3.2 设置网络\n\n```ping www.baidu.com```，如果出现 ```unknown host www.baidu.com```，就需要设置网络。\n\n在VMware的虚拟机设置中，选择网络适配器，网络连接选择使用桥接模式(Bridged)，并且选择“复制物理网络连接状态”。确定后重新ping百度。\n\n如果还出现“unknown”错误，说明网络服务没有随开机启动，就需要修改网卡配置。\n\n换去网卡配置文件所在的路径：\n\n```\ncd /etc/sysconfig/network-scripts/\n```\n输入“vi ifcfg-ens33”来修改网卡配置。按\'a\'进入编辑模式，修改其中的 ```ONBOOT=yes```。 按\'ESC\'退出编辑模式，输入\":wq\"保存退出。\n\n输入```reboot```重启Cent OS。继续```ping www.baidu.com```，这时就可以ping到了。使用ip addr，可以看到本机的ip address（inet addr）。\n\n到此，Cent OS就安装成功了。\n\n## 第4步：安装其他软件\n\n* 在CentOS 7 里面安装wget：```$ sudo yum install wget```\n\n## 资料收集：使用CentOS\n\n### 1. 虚拟机 CentOS 7调整CPU、内存及硬盘容量：\n\n* 调整CPU及内存：\n  * 点击“Edit virtual machine settings (编辑虚拟机设置)”。\n  * 在Hardware Tab中，选择Processors或者Memory进行调整。\n* 挂载硬盘：\n  * CentOS挂载硬盘操作流程：https://www.bt.cn/bbs/thread-50002-1-1.html\n* 扩大硬盘容量：\n  * 通过扩展现有磁盘空间的方式实现：\n    * 【首选】https://blog.csdn.net/chengyuqiang/article/details/59491942\n	* https://blog.51cto.com/u_15057823/3912285\n  * 通过添加硬盘的方式实现：https://blog.csdn.net/apacat/article/details/95926148\n* 逻辑卷管理的原理背景：https://blog.51cto.com/u_13691477/2299707\n\n### 2. 修改登录密码\n\n* CentOS7修改root用户密码：https://blog.csdn.net/wudinaniya/article/details/81060536 \n\n### 3. 解决复制虚拟机MAC地址冲突的问题\n\n复制一台虚拟机，它与原来的虚拟机的MAC地址是相同的。启动后，如果与原来的虚拟机在同一个网络里，则第二台虚拟机就无法联网了，因为两台虚拟机的MAC地址完全一样。可以按照以下的步骤，重新给第二台虚拟机分配一个MAC地址：\n\n* 教程：https://blog.csdn.net/weixin_41722525/article/details/86287382\n\n### 4. 配置网卡\n\n#### 4.1. 查看IP信息\n安装完CentOS之后，通过```ip addr```命令查看ip信息。\n\n#### 4.2. 查看网卡配置\n通过```ifconfig```命令查看网卡的配置信息。\n\n参考资料：\n- ifconfig ens33 内容详解：https://blog.csdn.net/weixin_46108954/article/details/104637127\n- centos 7网卡配置文件详解（ifcfg-ens33）：https://www.cnblogs.com/renshengdezheli/p/13926829.html\n\n\n#### 4.3. 配置动态IP\n\n编辑网卡配置文件\n```\nvi /etc/sysconfig/network-scripts/ifcfg-ens33\n```\n\n文件内容如下\n\n```\nTYPE=Ethernet\nPROXY_METHOD=none\nBROWSER_ONLY=no\nBOOTPROTO=dhcp\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=ens33\nUUID=e7666215-13db-4cc2-bbea-6fd152c7b4a8\nDEVICE=ens33\nONBOOT=yes\n```\n\n修改完毕后，重启网络服务：\n\n```\nservice network restart\n```\n\n#### 4.4. 配置静态IP\n\n编辑网卡配置文件```ifcfg-ens33```，修改其中的```BOOTPROTO=static```，并增加以下几行：\n\n```\nIPADDR=192.168.0.100\nGETWAY=192.168.0.1\nNETMASK=255.255.255.0\nDNS1=192.168.0.1\n```\n\n#### 4.5. 通过VMWare Workstation配置双网卡双IP\n\n- VMware中CentOS配置多网卡多IP：https://blog.csdn.net/CleverCode/article/details/50563339\n- CentOs7设置双网卡网关：https://www.daimajiaoliu.com/daima/48720ad4a900404\n- CentOs7添加新网卡实现双IP双网关：https://cloud.tencent.com/developer/article/1903294\n\n', '<h2 id=\"h2-u524Du63D0uFF1Au4E0Bu8F7Du5E76u5B89u88C5vmwareworkstation\"><a class=\"reference-link\" name=\"前提：下载并安装VMware Workstation\"></a><span class=\"header-link octicon octicon-link\"></span>前提：下载并安装VMware Workstation</h2><p>在Windows系统中使用CentOS之前，你需要先下载安装一个VMWare Workstation</p>\n<h2 id=\"h2-u7B2C2u6B65uFF1Au4E0Bu8F7Du5E76u5728vmwareu91CCu5B89u88C5centos7\"><a class=\"reference-link\" name=\"第2步：下载并在VMware里安装CentOS 7\"></a><span class=\"header-link octicon octicon-link\"></span>第2步：下载并在VMware里安装CentOS 7</h2><h3 id=\"h3-2.1u4E0Bu8F7Dcentos207\"><a class=\"reference-link\" name=\"2.1 下载CentOS 7\"></a><span class=\"header-link octicon octicon-link\"></span>2.1 下载CentOS 7</h3><ul>\n<li>下载地址：<a href=\"https://wiki.centos.org/Download\">https://wiki.centos.org/Download</a></li><li>下载版本：CentOS 7 x86_64。请根据你的实际需要，决定具体的下载版本。</li><li>在转移到的页面中，选择一个镜像站点，在其中选择：CentOS-7-x86_64-minimal.iso，开始下载。</li></ul>\n<h3 id=\"h3-2.2u5728vmwareu91CCu5B89u88C5u65B0u7684u865Au62DFu673A\"><a class=\"reference-link\" name=\"2.2 在VMware里安装新的虚拟机\"></a><span class=\"header-link octicon octicon-link\"></span>2.2 在VMware里安装新的虚拟机</h3><ul>\n<li>运行VMware Workstation。选择“Player” -&gt; “File” -&gt; “New Virtual Machine”，开始创建新的虚拟机系统。</li><li>选择“安装程序光盘映像文件系统”，浏览“所下载文件地址” 选择“Linux, CentOS 7”（根据你的系统，选择64位或32位）。</li><li>给你的virtual machine起一个名字，分配磁盘大小，例如20G，不要选择将虚拟磁盘拆分为多个文件。下一步点击完成。</li></ul>\n<h3 id=\"h3-2.3u5728u65B0u521Bu5EFAu7684u865Au62DFu673Au91CCu5B89u88C5centosu7CFBu7EDF\"><a class=\"reference-link\" name=\"2.3 在新创建的虚拟机里安装CentOS系统\"></a><span class=\"header-link octicon octicon-link\"></span>2.3 在新创建的虚拟机里安装CentOS系统</h3><ul>\n<li>点击“Edit virtual machine settings (编辑虚拟机设置)”。</li><li>选择CD/DVD（IDE），选择“Use ISO image file（使用ISO文件）”，选择下载的CentOS 7的安装文件，然后点击OK，启动virtual machine，启动后会自动开始安装。</li><li>出现disc checking时，选择Skip。然后就开始安装了。</li><li>依次选择语言、键盘、时区（选择Asia/Shanghai），设置Host name、root password。选择discard data。</li><li>选择type of installlation：replace existing。然后开始安装。</li><li>安装完成以后reboot system。</li></ul>\n<h2 id=\"h2-u7B2Cu4E09u6B65uFF1Au4F7Fu7528\"><a class=\"reference-link\" name=\"第三步：使用\"></a><span class=\"header-link octicon octicon-link\"></span>第三步：使用</h2><h3 id=\"h3-3.1login\"><a class=\"reference-link\" name=\"3.1 login\"></a><span class=\"header-link octicon octicon-link\"></span>3.1 login</h3><ul>\n<li>login：root。</li><li>password：你设置的password。</li></ul>\n<h3 id=\"h3-3.2u8BBEu7F6Eu7F51u7EDC\"><a class=\"reference-link\" name=\"3.2 设置网络\"></a><span class=\"header-link octicon octicon-link\"></span>3.2 设置网络</h3><p><code>ping www.baidu.com</code>，如果出现 <code>unknown host www.baidu.com</code>，就需要设置网络。</p>\n<p>在VMware的虚拟机设置中，选择网络适配器，网络连接选择使用桥接模式(Bridged)，并且选择“复制物理网络连接状态”。确定后重新ping百度。</p>\n<p>如果还出现“unknown”错误，说明网络服务没有随开机启动，就需要修改网卡配置。</p>\n<p>换去网卡配置文件所在的路径：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">cd </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">sysconfig</span><span class=\"pun\">/</span><span class=\"pln\">network</span><span class=\"pun\">-</span><span class=\"pln\">scripts</span><span class=\"pun\">/</span></code></li></ol></pre>\n<p>输入“vi ifcfg-ens33”来修改网卡配置。按\'a\'进入编辑模式，修改其中的 <code>ONBOOT=yes</code>。 按\'ESC\'退出编辑模式，输入\":wq\"保存退出。</p>\n<p>输入<code>reboot</code>重启Cent OS。继续<code>ping www.baidu.com</code>，这时就可以ping到了。使用ip addr，可以看到本机的ip address（inet addr）。</p>\n<p>到此，Cent OS就安装成功了。</p>\n<h2 id=\"h2-u7B2C4u6B65uFF1Au5B89u88C5u5176u4ED6u8F6Fu4EF6\"><a class=\"reference-link\" name=\"第4步：安装其他软件\"></a><span class=\"header-link octicon octicon-link\"></span>第4步：安装其他软件</h2><ul>\n<li>在CentOS 7 里面安装wget：<code>$ sudo yum install wget</code></li></ul>\n<h2 id=\"h2-u8D44u6599u6536u96C6uFF1Au4F7Fu7528centos\"><a class=\"reference-link\" name=\"资料收集：使用CentOS\"></a><span class=\"header-link octicon octicon-link\"></span>资料收集：使用CentOS</h2><h3 id=\"h3-1.u865Au62DFu673A20centos207u8C03u6574cpuu3001u5185u5B58u53CAu786Cu76D8u5BB9u91CFuFF1A\"><a class=\"reference-link\" name=\"1. 虚拟机 CentOS 7调整CPU、内存及硬盘容量：\"></a><span class=\"header-link octicon octicon-link\"></span>1. 虚拟机 CentOS 7调整CPU、内存及硬盘容量：</h3><ul>\n<li>调整CPU及内存：<ul>\n<li>点击“Edit virtual machine settings (编辑虚拟机设置)”。</li><li>在Hardware Tab中，选择Processors或者Memory进行调整。</li></ul>\n</li><li>挂载硬盘：<ul>\n<li>CentOS挂载硬盘操作流程：<a href=\"https://www.bt.cn/bbs/thread-50002-1-1.html\">https://www.bt.cn/bbs/thread-50002-1-1.html</a></li></ul>\n</li><li>扩大硬盘容量：<ul>\n<li>通过扩展现有磁盘空间的方式实现：<ul>\n<li>【首选】<a href=\"https://blog.csdn.net/chengyuqiang/article/details/59491942\">https://blog.csdn.net/chengyuqiang/article/details/59491942</a></li><li><a href=\"https://blog.51cto.com/u_15057823/3912285\">https://blog.51cto.com/u_15057823/3912285</a></li></ul>\n</li><li>通过添加硬盘的方式实现：<a href=\"https://blog.csdn.net/apacat/article/details/95926148\">https://blog.csdn.net/apacat/article/details/95926148</a></li></ul>\n</li><li>逻辑卷管理的原理背景：<a href=\"https://blog.51cto.com/u_13691477/2299707\">https://blog.51cto.com/u_13691477/2299707</a></li></ul>\n<h3 id=\"h3-2.u4FEEu6539u767Bu5F55u5BC6u7801\"><a class=\"reference-link\" name=\"2. 修改登录密码\"></a><span class=\"header-link octicon octicon-link\"></span>2. 修改登录密码</h3><ul>\n<li>CentOS7修改root用户密码：<a href=\"https://blog.csdn.net/wudinaniya/article/details/81060536\">https://blog.csdn.net/wudinaniya/article/details/81060536</a> </li></ul>\n<h3 id=\"h3-3.u89E3u51B3u590Du5236u865Au62DFu673Amacu5730u5740u51B2u7A81u7684u95EEu9898\"><a class=\"reference-link\" name=\"3. 解决复制虚拟机MAC地址冲突的问题\"></a><span class=\"header-link octicon octicon-link\"></span>3. 解决复制虚拟机MAC地址冲突的问题</h3><p>复制一台虚拟机，它与原来的虚拟机的MAC地址是相同的。启动后，如果与原来的虚拟机在同一个网络里，则第二台虚拟机就无法联网了，因为两台虚拟机的MAC地址完全一样。可以按照以下的步骤，重新给第二台虚拟机分配一个MAC地址：</p>\n<ul>\n<li>教程：<a href=\"https://blog.csdn.net/weixin_41722525/article/details/86287382\">https://blog.csdn.net/weixin_41722525/article/details/86287382</a></li></ul>\n<h3 id=\"h3-4.u914Du7F6Eu7F51u5361\"><a class=\"reference-link\" name=\"4. 配置网卡\"></a><span class=\"header-link octicon octicon-link\"></span>4. 配置网卡</h3><h4 id=\"h4-4.1.u67E5u770Bipu4FE1u606F\"><a class=\"reference-link\" name=\"4.1. 查看IP信息\"></a><span class=\"header-link octicon octicon-link\"></span>4.1. 查看IP信息</h4><p>安装完CentOS之后，通过<code>ip addr</code>命令查看ip信息。</p>\n<h4 id=\"h4-4.2.u67E5u770Bu7F51u5361u914Du7F6E\"><a class=\"reference-link\" name=\"4.2. 查看网卡配置\"></a><span class=\"header-link octicon octicon-link\"></span>4.2. 查看网卡配置</h4><p>通过<code>ifconfig</code>命令查看网卡的配置信息。</p>\n<p>参考资料：</p>\n<ul>\n<li>ifconfig ens33 内容详解：<a href=\"https://blog.csdn.net/weixin_46108954/article/details/104637127\">https://blog.csdn.net/weixin_46108954/article/details/104637127</a></li><li>centos 7网卡配置文件详解（ifcfg-ens33）：<a href=\"https://www.cnblogs.com/renshengdezheli/p/13926829.html\">https://www.cnblogs.com/renshengdezheli/p/13926829.html</a></li></ul>\n<h4 id=\"h4-4.3.u914Du7F6Eu52A8u6001ip\"><a class=\"reference-link\" name=\"4.3. 配置动态IP\"></a><span class=\"header-link octicon octicon-link\"></span>4.3. 配置动态IP</h4><p>编辑网卡配置文件</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">vi </span><span class=\"pun\">/</span><span class=\"pln\">etc</span><span class=\"pun\">/</span><span class=\"pln\">sysconfig</span><span class=\"pun\">/</span><span class=\"pln\">network</span><span class=\"pun\">-</span><span class=\"pln\">scripts</span><span class=\"pun\">/</span><span class=\"pln\">ifcfg</span><span class=\"pun\">-</span><span class=\"pln\">ens33</span></code></li></ol></pre>\n<p>文件内容如下</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">TYPE</span><span class=\"pun\">=</span><span class=\"typ\">Ethernet</span></code></li><li class=\"L1\"><code><span class=\"pln\">PROXY_METHOD</span><span class=\"pun\">=</span><span class=\"pln\">none</span></code></li><li class=\"L2\"><code><span class=\"pln\">BROWSER_ONLY</span><span class=\"pun\">=</span><span class=\"kwd\">no</span></code></li><li class=\"L3\"><code><span class=\"pln\">BOOTPROTO</span><span class=\"pun\">=</span><span class=\"pln\">dhcp</span></code></li><li class=\"L4\"><code><span class=\"pln\">DEFROUTE</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L5\"><code><span class=\"pln\">IPV4_FAILURE_FATAL</span><span class=\"pun\">=</span><span class=\"kwd\">no</span></code></li><li class=\"L6\"><code><span class=\"pln\">IPV6INIT</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L7\"><code><span class=\"pln\">IPV6_AUTOCONF</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L8\"><code><span class=\"pln\">IPV6_DEFROUTE</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li><li class=\"L9\"><code><span class=\"pln\">IPV6_FAILURE_FATAL</span><span class=\"pun\">=</span><span class=\"kwd\">no</span></code></li><li class=\"L0\"><code><span class=\"pln\">IPV6_ADDR_GEN_MODE</span><span class=\"pun\">=</span><span class=\"pln\">stable</span><span class=\"pun\">-</span><span class=\"pln\">privacy</span></code></li><li class=\"L1\"><code><span class=\"pln\">NAME</span><span class=\"pun\">=</span><span class=\"pln\">ens33</span></code></li><li class=\"L2\"><code><span class=\"pln\">UUID</span><span class=\"pun\">=</span><span class=\"pln\">e7666215</span><span class=\"pun\">-</span><span class=\"lit\">13db</span><span class=\"pun\">-</span><span class=\"lit\">4cc2</span><span class=\"pun\">-</span><span class=\"pln\">bbea</span><span class=\"pun\">-</span><span class=\"lit\">6fd152c7b4a8</span></code></li><li class=\"L3\"><code><span class=\"pln\">DEVICE</span><span class=\"pun\">=</span><span class=\"pln\">ens33</span></code></li><li class=\"L4\"><code><span class=\"pln\">ONBOOT</span><span class=\"pun\">=</span><span class=\"pln\">yes</span></code></li></ol></pre>\n<p>修改完毕后，重启网络服务：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">service network restart</span></code></li></ol></pre>\n<h4 id=\"h4-4.4.u914Du7F6Eu9759u6001ip\"><a class=\"reference-link\" name=\"4.4. 配置静态IP\"></a><span class=\"header-link octicon octicon-link\"></span>4.4. 配置静态IP</h4><p>编辑网卡配置文件<code>ifcfg-ens33</code>，修改其中的<code>BOOTPROTO=static</code>，并增加以下几行：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">IPADDR</span><span class=\"pun\">=</span><span class=\"lit\">192.168</span><span class=\"pun\">.</span><span class=\"lit\">0.100</span></code></li><li class=\"L1\"><code><span class=\"pln\">GETWAY</span><span class=\"pun\">=</span><span class=\"lit\">192.168</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li><li class=\"L2\"><code><span class=\"pln\">NETMASK</span><span class=\"pun\">=</span><span class=\"lit\">255.255</span><span class=\"pun\">.</span><span class=\"lit\">255.0</span></code></li><li class=\"L3\"><code><span class=\"pln\">DNS1</span><span class=\"pun\">=</span><span class=\"lit\">192.168</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span></code></li></ol></pre>\n<h4 id=\"h4-4.5.u901Au8FC7vmware20workstationu914Du7F6Eu53CCu7F51u5361u53CCip\"><a class=\"reference-link\" name=\"4.5. 通过VMWare Workstation配置双网卡双IP\"></a><span class=\"header-link octicon octicon-link\"></span>4.5. 通过VMWare Workstation配置双网卡双IP</h4><ul>\n<li>VMware中CentOS配置多网卡多IP：<a href=\"https://blog.csdn.net/CleverCode/article/details/50563339\">https://blog.csdn.net/CleverCode/article/details/50563339</a></li><li>CentOs7设置双网卡网关：<a href=\"https://www.daimajiaoliu.com/daima/48720ad4a900404\">https://www.daimajiaoliu.com/daima/48720ad4a900404</a></li><li>CentOs7添加新网卡实现双IP双网关：<a href=\"https://cloud.tencent.com/developer/article/1903294\">https://cloud.tencent.com/developer/article/1903294</a></li></ul>\n', NULL, NULL, NULL, '', '2022-05-12T00:00:47+08:00', '100005W', '安宁', '2022-06-18T18:35:02+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-18T18:35:02+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1501, 10086, '10010', '', '', 'public', '2022-05-14T21:35:11+08:00', '武林部署', NULL, '## 链接\n\n- [SRS文档](https://gitee.com/winlinvip/srs.oschina/wikis)\n\n## SRS 服务部署\n\n> 假设要部署服务器为`47.243.6.203`\n> - IP: `47.243.6.203`(内网IP为`172.31.81.88`)\n> - 域名: `janghu-v3.openjianghu.org`\n> - 代码: [jianghu_v3](https://github.com/fsll-tech/jianghu_v3) 已download至 `/www/wwwroot/jianghu_v3`\n\n- 创建`/www/wwwroot/docker-data/srs/conf/rtc.conf`\n	```conf\n	# WebRTC streaming config for SRS.\n	# @see full.conf for detail config.\n	# rtmp推流端口\n	listen              1935;\n	# 最大连接数\n	max_connections     2000;\n	# docker模式下使用前台启动\n	daemon              off;\n	# srs log 输出方式\n	srs_log_tank        console;\n	# SRS播放器页面 & SRS控制台 & FLV拉流端口\n	http_server {\n		enabled         on;\n		listen          8080;\n		dir             ./objs/nginx/html;\n	}\n	# srs http接口 https://github.com/ossrs/srs/wiki/v4_CN_HTTPApi#https-api\n	http_api {\n		enabled         on;\n		listen          1985;\n	}\n	# 配置了SRS后台统计的信息 https://github.com/ossrs/srs/wiki/v4_CN_HTTPApi#https-api\n	stats {\n		network         0;\n	}\n	# web rtc 相关配置\n	rtc_server {\n		enabled on;\n		listen 8000; # UDP port\n		# @see https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#config-candidate\n		candidate $CANDIDATE;\n	}\n	# vhost(Virtual Host)就是虚拟域，用来隔离客户或业务。https://github.com/ossrs/srs/wiki/v4_CN_RtmpUrlVhost\n	vhost __defaultVhost__ {\n		# https://github.com/ossrs/srs/wiki/v4_CN_WebRTC\n		rtc {\n			enabled     on;\n			# @see https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#rtmp-to-rtc\n			rtmp_to_rtc off;\n			# @see https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#rtc-to-rtmp\n			rtc_to_rtmp off;\n		}\n		# http flv/mp3/aac/ts 流配置\n		http_remux {\n			enabled     off;\n			mount       [vhost]/[app]/[stream].flv;\n		}\n		# 客户端 推流、拉流、...事件 回调，可以用做鉴权 https://github.com/ossrs/srs/wiki/v4_CN_HTTPCallback\n		http_hooks {\n			enabled         on;\n			on_publish        http://masterHost:8084/jianghu3/srs/authorization;\n			on_play            http://masterHost:8084/jianghu3/srs/authorization;\n			on_unpublish    http://masterHost:8084/jianghu3/srs/exitEvent;\n			on_stop            http://masterHost:8084/jianghu3/srs/exitEvent;\n			# on_connect    http://masterHost:8084/jianghu3/srs/authorization;\n			# on_close        http://masterHost:8084/jianghu3/srs/authorization;\n			# on_dvr           http://masterHost:8084/jianghu3/srs/authorization;\n			# on_hls            http://masterHost:8084/jianghu3/srs/authorization;\n		}\n	}\n	```\n- 启动srs服务: `docker run -d --restart unless-stopped --name jianghu-srs -h=\"masterHost\" -v=/www/wwwroot/docker-data/srs/conf/rtc.conf:/usr/local/srs/conf/rtc.conf -p 1935:1935 -p 1985:1985 -p 8080:8080 --env CANDIDATE=\"47.243.6.203\" -p 8000:8000/udp ossrs/srs:v4.0-b10 ./objs/srs -c conf/rtc.conf`\n    > 注意: WebRTC需要配置 ===》CANDIDATE=\"ipv6/ip4\"\n- 开放srs推流拉流端口: 8000/UDP\n	> nginx 443 已经用做配置 http, http协议不能转发到UDP上, 所以需要单独开发8000 用做推流&拉流\n- nginx配置\n```conf\n\n    location / {\n        proxy_pass http://127.0.0.1:8084;\n		# 获取用户信息\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header REMOTE-HOST $remote_addr;\n    \n        # wss 支持\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        \n        # 禁用缓存\n        expires 1s;\n        add_header X-Cache $upstream_cache_status;\n        add_header Cache-Control no-cache;\n        proxy_no_cache 1;\n        proxy_cache_bypass 1;\n    }\n```\n- 初始化数据\n```bash\n# 数据库初始化\ncreate database `jianghu_v3` default character set utf8mb4 collate utf8mb4_bin;\nuse jianghu_v3;\n# 执行 ./sql/init.sql\n```\n- 启动jianghu_v3\n```bash\ncd /www/wwwroot/jianghu_v3/server\nnpm i\ncp ./config/config.prod.example.js config/config.prod.js\nnpm run restart\n```\n- 打开浏览器访问`https://jianghu-v3.openjianghu.org/`\n\n\n## 其它命令\n\n- 进入srs docker 容器: `docker exec -it --user root jianghu-srs /bin/bash`', '<h2 id=\"h2-u94FEu63A5\"><a class=\"reference-link\" name=\"链接\"></a><span class=\"header-link octicon octicon-link\"></span>链接</h2><ul>\n<li><a href=\"https://gitee.com/winlinvip/srs.oschina/wikis\">SRS文档</a></li></ul>\n<h2 id=\"h2-srsu670Du52A1u90E8u7F72\"><a class=\"reference-link\" name=\"SRS 服务部署\"></a><span class=\"header-link octicon octicon-link\"></span>SRS 服务部署</h2><blockquote class=\"default\">\n<p>假设要部署服务器为<code>47.243.6.203</code></p>\n<ul>\n<li>IP: <code>47.243.6.203</code>(内网IP为<code>172.31.81.88</code>)</li><li>域名: <code>janghu-v3.openjianghu.org</code></li><li>代码: <a href=\"https://github.com/fsll-tech/jianghu_v3\">jianghu_v3</a> 已download至 <code>/www/wwwroot/jianghu_v3</code></li></ul>\n</blockquote>\n<ul>\n<li><p>创建<code>/www/wwwroot/docker-data/srs/conf/rtc.conf</code></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-conf\"><span class=\"com\"># WebRTC streaming config for SRS.</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"com\"># @see full.conf for detail config.</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"com\"># rtmp推流端口</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">listen              </span><span class=\"lit\">1935</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"com\"># 最大连接数</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\">max_connections     </span><span class=\"lit\">2000</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"com\"># docker模式下使用前台启动</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">daemon              off</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"com\"># srs log 输出方式</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">srs_log_tank        console</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"com\"># SRS播放器页面 &amp; SRS控制台 &amp; FLV拉流端口</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pln\">http_server </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">    enabled         on</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">    listen          </span><span class=\"lit\">8080</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pln\">    dir             </span><span class=\"pun\">./</span><span class=\"pln\">objs</span><span class=\"pun\">/</span><span class=\"pln\">nginx</span><span class=\"pun\">/</span><span class=\"pln\">html</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"com\"># srs http接口 https://github.com/ossrs/srs/wiki/v4_CN_HTTPApi#https-api</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">http_api </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">    enabled         on</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">    listen          </span><span class=\"lit\">1985</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"com\"># 配置了SRS后台统计的信息 https://github.com/ossrs/srs/wiki/v4_CN_HTTPApi#https-api</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">stats </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">    network         </span><span class=\"lit\">0</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"com\"># web rtc 相关配置</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"pln\">rtc_server </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">    enabled on</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">    listen </span><span class=\"lit\">8000</span><span class=\"pun\">;</span><span class=\"pln\"> </span><span class=\"com\"># UDP port</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">    </span><span class=\"com\"># @see https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#config-candidate</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"pln\">    candidate $CANDIDATE</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"com\"># vhost(Virtual Host)就是虚拟域，用来隔离客户或业务。https://github.com/ossrs/srs/wiki/v4_CN_RtmpUrlVhost</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">vhost __defaultVhost__ </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pln\">    </span><span class=\"com\"># https://github.com/ossrs/srs/wiki/v4_CN_WebRTC</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\">    rtc </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"pln\">        enabled     on</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">        </span><span class=\"com\"># @see https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#rtmp-to-rtc</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">        rtmp_to_rtc off</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">        </span><span class=\"com\"># @see https://github.com/ossrs/srs/wiki/v4_CN_WebRTC#rtc-to-rtmp</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"pln\">        rtc_to_rtmp off</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">    </span><span class=\"com\"># http flv/mp3/aac/ts 流配置</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">    http_remux </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pln\">        enabled     off</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\">        mount       </span><span class=\"pun\">[</span><span class=\"pln\">vhost</span><span class=\"pun\">]/[</span><span class=\"pln\">app</span><span class=\"pun\">]/[</span><span class=\"pln\">stream</span><span class=\"pun\">].</span><span class=\"pln\">flv</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">    </span><span class=\"com\"># 客户端 推流、拉流、...事件 回调，可以用做鉴权 https://github.com/ossrs/srs/wiki/v4_CN_HTTPCallback</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">    http_hooks </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">        enabled         on</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"pln\">        on_publish        http</span><span class=\"pun\">:</span><span class=\"com\">//masterHost:8084/jianghu3/srs/authorization;</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pln\">        on_play            http</span><span class=\"pun\">:</span><span class=\"com\">//masterHost:8084/jianghu3/srs/authorization;</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">        on_unpublish    http</span><span class=\"pun\">:</span><span class=\"com\">//masterHost:8084/jianghu3/srs/exitEvent;</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">        on_stop            http</span><span class=\"pun\">:</span><span class=\"com\">//masterHost:8084/jianghu3/srs/exitEvent;</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pln\">        </span><span class=\"com\"># on_connect    http://masterHost:8084/jianghu3/srs/authorization;</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\">        </span><span class=\"com\"># on_close        http://masterHost:8084/jianghu3/srs/authorization;</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"pln\">        </span><span class=\"com\"># on_dvr           http://masterHost:8084/jianghu3/srs/authorization;</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">        </span><span class=\"com\"># on_hls            http://masterHost:8084/jianghu3/srs/authorization;</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pun\">}</span></code></li></ol></pre>\n</li><li><p>启动srs服务: <code>docker run -d --restart unless-stopped --name jianghu-srs -h=\"masterHost\" -v=/www/wwwroot/docker-data/srs/conf/rtc.conf:/usr/local/srs/conf/rtc.conf -p 1935:1935 -p 1985:1985 -p 8080:8080 --env CANDIDATE=\"47.243.6.203\" -p 8000:8000/udp ossrs/srs:v4.0-b10 ./objs/srs -c conf/rtc.conf</code></p>\n<blockquote class=\"default\">\n<p>注意: WebRTC需要配置 ===》CANDIDATE=\"ipv6/ip4\"</p>\n</blockquote>\n</li><li><p>开放srs推流拉流端口: 8000/UDP</p>\n<blockquote class=\"default\">\n<p>nginx 443 已经用做配置 http, http协议不能转发到UDP上, 所以需要单独开发8000 用做推流&amp;拉流</p>\n</blockquote>\n</li><li><p>nginx配置</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-conf\"></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pln\">  location </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">      proxy_pass http</span><span class=\"pun\">:</span><span class=\"com\">//127.0.0.1:8084;</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">      </span><span class=\"com\"># 获取用户信息</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pln\">      proxy_set_header </span><span class=\"typ\">Host</span><span class=\"pln\"> $host</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\">      proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Real</span><span class=\"pun\">-</span><span class=\"pln\">IP $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"pln\">      proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Forwarded</span><span class=\"pun\">-</span><span class=\"typ\">For</span><span class=\"pln\"> $proxy_add_x_forwarded_for</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">      proxy_set_header REMOTE</span><span class=\"pun\">-</span><span class=\"pln\">HOST $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">  </span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">      </span><span class=\"com\"># wss 支持</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"pln\">      proxy_http_version </span><span class=\"lit\">1.1</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pln\">      proxy_set_header </span><span class=\"typ\">Upgrade</span><span class=\"pln\"> $http_upgrade</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">      proxy_set_header </span><span class=\"typ\">Connection</span><span class=\"pln\"> </span><span class=\"str\">\"upgrade\"</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">      </span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pln\">      </span><span class=\"com\"># 禁用缓存</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\">      expires </span><span class=\"lit\">1s</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"pln\">      add_header X</span><span class=\"pun\">-</span><span class=\"typ\">Cache</span><span class=\"pln\"> $upstream_cache_status</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">      add_header </span><span class=\"typ\">Cache</span><span class=\"pun\">-</span><span class=\"typ\">Control</span><span class=\"pln\"> </span><span class=\"kwd\">no</span><span class=\"pun\">-</span><span class=\"pln\">cache</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">      proxy_no_cache </span><span class=\"lit\">1</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">      proxy_cache_bypass </span><span class=\"lit\">1</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li><li><p>初始化数据</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"com\"># 数据库初始化</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">create database </span><span class=\"str\">`jianghu_v3`</span><span class=\"pln\"> default character </span><span class=\"kwd\">set</span><span class=\"pln\"> utf8mb4 collate utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">use jianghu_v3</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"com\"># 执行 ./sql/init.sql</span></code></li></ol></pre>\n</li><li><p>启动jianghu_v3</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">cd </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">wwwroot</span><span class=\"pun\">/</span><span class=\"pln\">jianghu_v3</span><span class=\"pun\">/</span><span class=\"pln\">server</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">npm i</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">cp </span><span class=\"pun\">./</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"pln\">prod</span><span class=\"pun\">.</span><span class=\"pln\">example</span><span class=\"pun\">.</span><span class=\"pln\">js config</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"pln\">prod</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">npm run restart</span></code></li></ol></pre>\n</li><li><p>打开浏览器访问<code>https://jianghu-v3.openjianghu.org/</code></p>\n</li></ul>\n<h2 id=\"h2-u5176u5B83u547Du4EE4\"><a class=\"reference-link\" name=\"其它命令\"></a><span class=\"header-link octicon octicon-link\"></span>其它命令</h2><ul>\n<li>进入srs docker 容器: <code>docker exec -it --user root jianghu-srs /bin/bash</code></li></ul>\n', NULL, NULL, NULL, '', '2022-05-14T21:35:11+08:00', 'm3611F', 'Colin', '2022-06-10T14:26:59+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-10T14:26:59+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1503, 10087, '10011', 'Database', '', 'draft', '2022-05-15T21:02:00+08:00', 'IT Programming Training (Beginner Level) - Lesson Plan', NULL, '## Database\n\n### Software Required\n- TeamViewer\n- VooV Meeting\n- Navicat\n- MySQL\n\n### Course Materials\n- W3School\n- MySQL Manual\n- Navicat Manual\n- Google Search\n- OpenJianghu\n\n### Sample Data\n- School Management\n\n### Assignment\n- Describe Course Outline\n- Use of Navicat\n- Database CRUD\n- Table CRUD\n- SQL Select, Functions\n- SQL Join\n\n## HTML\n\n### Software Required\n- Google Chrome\n- Visual Studio Code\n\n### Course Materials\n\n### Sample Data\n\n### Assignment\n\n## Javascript\n\n### Software Required\n\n### Course Materials\n\n### Sample Data\n\n### Assignment\n\n## VueJS\n\n### Software Required\n\n### Course Materials\n\n### Sample Data\n\n### Assignment\n\n## VuetifyJS\n\n### Software Required\n\n### Course Materials\n\n### Sample Data\n\n### Assignment\n', '<h2 id=\"h2-database\"><a class=\"reference-link\" name=\"Database\"></a><span class=\"header-link octicon octicon-link\"></span>Database</h2><h3 id=\"h3-softwarerequired\"><a class=\"reference-link\" name=\"Software Required\"></a><span class=\"header-link octicon octicon-link\"></span>Software Required</h3><ul>\n<li>TeamViewer</li><li>VooV Meeting</li><li>Navicat</li><li>MySQL</li></ul>\n<h3 id=\"h3-coursematerials\"><a class=\"reference-link\" name=\"Course Materials\"></a><span class=\"header-link octicon octicon-link\"></span>Course Materials</h3><ul>\n<li>W3School</li><li>MySQL Manual</li><li>Navicat Manual</li><li>Google Search</li><li>OpenJianghu</li></ul>\n<h3 id=\"h3-sampledata\"><a class=\"reference-link\" name=\"Sample Data\"></a><span class=\"header-link octicon octicon-link\"></span>Sample Data</h3><ul>\n<li>School Management</li></ul>\n<h3 id=\"h3-assignment\"><a class=\"reference-link\" name=\"Assignment\"></a><span class=\"header-link octicon octicon-link\"></span>Assignment</h3><ul>\n<li>Describe Course Outline</li><li>Use of Navicat</li><li>Database CRUD</li><li>Table CRUD</li><li>SQL Select, Functions</li><li>SQL Join</li></ul>\n<h2 id=\"h2-html\"><a class=\"reference-link\" name=\"HTML\"></a><span class=\"header-link octicon octicon-link\"></span>HTML</h2><h3 id=\"h3-softwarerequired\"><a class=\"reference-link\" name=\"Software Required\"></a><span class=\"header-link octicon octicon-link\"></span>Software Required</h3><ul>\n<li>Google Chrome</li><li>Visual Studio Code</li></ul>\n<h3 id=\"h3-coursematerials\"><a class=\"reference-link\" name=\"Course Materials\"></a><span class=\"header-link octicon octicon-link\"></span>Course Materials</h3><h3 id=\"h3-sampledata\"><a class=\"reference-link\" name=\"Sample Data\"></a><span class=\"header-link octicon octicon-link\"></span>Sample Data</h3><h3 id=\"h3-assignment\"><a class=\"reference-link\" name=\"Assignment\"></a><span class=\"header-link octicon octicon-link\"></span>Assignment</h3><h2 id=\"h2-javascript\"><a class=\"reference-link\" name=\"Javascript\"></a><span class=\"header-link octicon octicon-link\"></span>Javascript</h2><h3 id=\"h3-softwarerequired\"><a class=\"reference-link\" name=\"Software Required\"></a><span class=\"header-link octicon octicon-link\"></span>Software Required</h3><h3 id=\"h3-coursematerials\"><a class=\"reference-link\" name=\"Course Materials\"></a><span class=\"header-link octicon octicon-link\"></span>Course Materials</h3><h3 id=\"h3-sampledata\"><a class=\"reference-link\" name=\"Sample Data\"></a><span class=\"header-link octicon octicon-link\"></span>Sample Data</h3><h3 id=\"h3-assignment\"><a class=\"reference-link\" name=\"Assignment\"></a><span class=\"header-link octicon octicon-link\"></span>Assignment</h3><h2 id=\"h2-vuejs\"><a class=\"reference-link\" name=\"VueJS\"></a><span class=\"header-link octicon octicon-link\"></span>VueJS</h2><h3 id=\"h3-softwarerequired\"><a class=\"reference-link\" name=\"Software Required\"></a><span class=\"header-link octicon octicon-link\"></span>Software Required</h3><h3 id=\"h3-coursematerials\"><a class=\"reference-link\" name=\"Course Materials\"></a><span class=\"header-link octicon octicon-link\"></span>Course Materials</h3><h3 id=\"h3-sampledata\"><a class=\"reference-link\" name=\"Sample Data\"></a><span class=\"header-link octicon octicon-link\"></span>Sample Data</h3><h3 id=\"h3-assignment\"><a class=\"reference-link\" name=\"Assignment\"></a><span class=\"header-link octicon octicon-link\"></span>Assignment</h3><h2 id=\"h2-vuetifyjs\"><a class=\"reference-link\" name=\"VuetifyJS\"></a><span class=\"header-link octicon octicon-link\"></span>VuetifyJS</h2><h3 id=\"h3-softwarerequired\"><a class=\"reference-link\" name=\"Software Required\"></a><span class=\"header-link octicon octicon-link\"></span>Software Required</h3><h3 id=\"h3-coursematerials\"><a class=\"reference-link\" name=\"Course Materials\"></a><span class=\"header-link octicon octicon-link\"></span>Course Materials</h3><h3 id=\"h3-sampledata\"><a class=\"reference-link\" name=\"Sample Data\"></a><span class=\"header-link octicon octicon-link\"></span>Sample Data</h3><h3 id=\"h3-assignment\"><a class=\"reference-link\" name=\"Assignment\"></a><span class=\"header-link octicon octicon-link\"></span>Assignment</h3>', NULL, NULL, NULL, '', '2022-05-15T21:02:00+08:00', '100005W', '安宁', '2022-05-15T21:02:10+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-05-15T21:02:10+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1504, 10088, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第00课 - 课程介绍、使用工具及学习方法', NULL, '\n\n## 学习要求\n\n\n- 要求1：要听老师的声音，跟着老师走，不要听自己里面的声音。\n- 要求2：学会学习，先学概念，再学操作\n- 要求3：学会享受\n\n\n\n一件事，一件事的整明白！\n\n## 学习内容\n\n\n- 第一个，学习HTML;\n- 第二个，学习Javascript;\n- 第三个：学习MySQL和SQL；\n- 第四个：学习Vuetify\n\n\n\n## 使用的工具\n\n\n- 第一个工具：浏览器；谷歌浏览器 Chrome\n- 第二个工具：编程工具，VS Code\n- 第三个工具：资源管理器，管理电脑里的文件和文件夹\n- 第四个工具：Teamviewer，远程协助\n- 第五个工具：菜鸟教程（https://www.runoob.com）\n\n\n\n## 学习的核心理念\n\n\n学习这个事儿是以学习者为中心的，积极主动的学习，要教人学习，不是教人知识。\n\n## 本课作业\n\n\n- 作业1：安装谷歌浏览器 Chrome\n- 作业2：安装Visual Studio Code\n- 作业3：安装TeamViewr\n- 作业4：快速浏览菜鸟教程的HTML、Javascript、MySQL和SQL\n- 作业5：搜索廖雪峰，浏览他的官方网站。\n- 作业6：思考如何管理自己的文件\n\n\n\n提示：可以通过腾讯电脑管家的-软件管理，来安装以上软件。\n\n附加作业：学习一下vuetify；点击“尝试一下”，动手试一试；\n\n## 学习方法\n\n\n- 第一，先抓概念\n- 第二，抓资源，找快速入门\n- 第三，抓框架\n\n', '<h2 id=\"h2-u5B66u4E60u8981u6C42\"><a class=\"reference-link\" name=\"学习要求\"></a><span class=\"header-link octicon octicon-link\"></span>学习要求</h2><ul>\n<li>要求1：要听老师的声音，跟着老师走，不要听自己里面的声音。</li><li>要求2：学会学习，先学概念，再学操作</li><li>要求3：学会享受</li></ul>\n<p>一件事，一件事的整明白！</p>\n<h2 id=\"h2-u5B66u4E60u5185u5BB9\"><a class=\"reference-link\" name=\"学习内容\"></a><span class=\"header-link octicon octicon-link\"></span>学习内容</h2><ul>\n<li>第一个，学习HTML;</li><li>第二个，学习Javascript;</li><li>第三个：学习MySQL和SQL；</li><li>第四个：学习Vuetify</li></ul>\n<h2 id=\"h2-u4F7Fu7528u7684u5DE5u5177\"><a class=\"reference-link\" name=\"使用的工具\"></a><span class=\"header-link octicon octicon-link\"></span>使用的工具</h2><ul>\n<li>第一个工具：浏览器；谷歌浏览器 Chrome</li><li>第二个工具：编程工具，VS Code</li><li>第三个工具：资源管理器，管理电脑里的文件和文件夹</li><li>第四个工具：Teamviewer，远程协助</li><li>第五个工具：菜鸟教程（<a href=\"https://www.runoob.com）\">https://www.runoob.com）</a></li></ul>\n<h2 id=\"h2-u5B66u4E60u7684u6838u5FC3u7406u5FF5\"><a class=\"reference-link\" name=\"学习的核心理念\"></a><span class=\"header-link octicon octicon-link\"></span>学习的核心理念</h2><p>学习这个事儿是以学习者为中心的，积极主动的学习，要教人学习，不是教人知识。</p>\n<h2 id=\"h2-u672Cu8BFEu4F5Cu4E1A\"><a class=\"reference-link\" name=\"本课作业\"></a><span class=\"header-link octicon octicon-link\"></span>本课作业</h2><ul>\n<li>作业1：安装谷歌浏览器 Chrome</li><li>作业2：安装Visual Studio Code</li><li>作业3：安装TeamViewr</li><li>作业4：快速浏览菜鸟教程的HTML、Javascript、MySQL和SQL</li><li>作业5：搜索廖雪峰，浏览他的官方网站。</li><li>作业6：思考如何管理自己的文件</li></ul>\n<p>提示：可以通过腾讯电脑管家的-软件管理，来安装以上软件。</p>\n<p>附加作业：学习一下vuetify；点击“尝试一下”，动手试一试；</p>\n<h2 id=\"h2-u5B66u4E60u65B9u6CD5\"><a class=\"reference-link\" name=\"学习方法\"></a><span class=\"header-link octicon octicon-link\"></span>学习方法</h2><ul>\n<li>第一，先抓概念</li><li>第二，抓资源，找快速入门</li><li>第三，抓框架</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson00-2022-01-22.mp4', '2022-05-15T23:51:30+08:00', '100062Y', '雅飒', '2022-05-17T02:34:27+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:34:27+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1505, 10089, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第01课 - HTML', NULL, '## 课前分享：学习的关键\n\n\n**第一个：在心理上得胜！**\n\n- 我们的智商不输别人；\n- 学会告诉自己：“小样的，我整不了你了？！”\n\n\n\n**第二个：利用资源！**\n\n- 不要爱面子，要敢于问问题；\n- 即使被刺激了，也要知道是老师要引导我们学习思考；\n\n\n\n**第三个：把事情整明白！不要稀里糊涂！**\n\n## 1. 什么是正确的学习方法？\n\n\n- 你去学，遇到问题你来问，这是最好的学习方法！\n- 坐在课堂里面听，是最差的学习方法！\n- 我们是周六上课，你应该在周一到周五带着一个强烈的好奇心来自己探索。\n\n\n\n## 2. 腾讯电脑管家：\n\n\n自己在“腾讯电脑管家”里面看的时候，记住，“混个脸熟！”\n\n熟悉软件的界面：\n- 看上方的菜单栏\n- 看左边的侧边栏\n\n每个项目点开一下，看看里面有什么东西。\n\n## 3. 为什么选择IT作为培训素材？\n\n\n3.1. 不会有什么损失，没有“危险”。\n3.2. 远距上可以教。\n3.3. 可以练习人的灵活。\n\n## 4. 如何进行文件管理？\n\n\n- 原则：各从其类；\n- 几十个文件的话，不能够全部摆在桌面上，需要管理。\n- 桌面新建一个文件夹，命名：IT培训\n- 打开“IT培训”文件夹，在里面继续创建一个文件夹，命名“第1课-HTML”\n\n\n\n## 5. 关于HTML和VSCODE\n\n\n### 5.1. 【VSCode】\n\n\n- 课前下载完成；\n- 教你打开：电脑左下角的开始-点击“放大镜”，在里面打字“vscode”，点开！\n- 如何你需要把vscode切换成中文的，你可以在百度搜索vscode如何切换中文？”照着提示进行操作。\n\n\n\n### 5.2.【如何看vscode的初始界面】\n\n\n- 先看最上面的菜单栏：文件/编辑/选择/查看/......一样一样看。 不知道的不要紧，慢慢的都会知道。\n- 看中间部分：演练（了解一下）\n- 一定要避免“鼠标瞎划来划去，不停的划来划去”\n\n\n\n### 5.3.【HTML的关键要点】\n\n\n- html，最关键的就是尖括号和斜杠！\n- html，一个内容显示在页面的长相！\n- 尖括号就是标签，标签决定了里面一坨字的长相！\n\n\n\n### 5.4.【HTML菜鸟教程】\n\n\n- 图像；\n- 剩下的自己就可以看了！\n\n\n\n## 6. 本周作业\n\n\n6.1. 大家把HTML的菜鸟教程的左边栏内容混个脸熟，挨个点点，看看效果；\n\n只要知道在哪里找，就?拉！\n\n6.2.下周讲javascript，让你的html动起来！所以大家去浏览javascript菜鸟教程的内容，知道有啥；\n\n6.3.input（输入框）， button（按钮），点击一下，玩一下！\n\n## 7. 资源\n\n本课用到的网页资料：\n\n- 菜鸟教程\n\n- HTML教程：https://www.runoob.com/html/html-tutorial.html\n\n', '<h2 id=\"h2-u8BFEu524Du5206u4EABuFF1Au5B66u4E60u7684u5173u952E\"><a class=\"reference-link\" name=\"课前分享：学习的关键\"></a><span class=\"header-link octicon octicon-link\"></span>课前分享：学习的关键</h2><p><strong>第一个：在心理上得胜！</strong></p>\n<ul>\n<li>我们的智商不输别人；</li><li>学会告诉自己：“小样的，我整不了你了？！”</li></ul>\n<p><strong>第二个：利用资源！</strong></p>\n<ul>\n<li>不要爱面子，要敢于问问题；</li><li>即使被刺激了，也要知道是老师要引导我们学习思考；</li></ul>\n<p><strong>第三个：把事情整明白！不要稀里糊涂！</strong></p>\n<h2 id=\"h2-1.u4EC0u4E48u662Fu6B63u786Eu7684u5B66u4E60u65B9u6CD5uFF1F\"><a class=\"reference-link\" name=\"1. 什么是正确的学习方法？\"></a><span class=\"header-link octicon octicon-link\"></span>1. 什么是正确的学习方法？</h2><ul>\n<li>你去学，遇到问题你来问，这是最好的学习方法！</li><li>坐在课堂里面听，是最差的学习方法！</li><li>我们是周六上课，你应该在周一到周五带着一个强烈的好奇心来自己探索。</li></ul>\n<h2 id=\"h2-2.u817Eu8BAFu7535u8111u7BA1u5BB6uFF1A\"><a class=\"reference-link\" name=\"2. 腾讯电脑管家：\"></a><span class=\"header-link octicon octicon-link\"></span>2. 腾讯电脑管家：</h2><p>自己在“腾讯电脑管家”里面看的时候，记住，“混个脸熟！”</p>\n<p>熟悉软件的界面：</p>\n<ul>\n<li>看上方的菜单栏</li><li>看左边的侧边栏</li></ul>\n<p>每个项目点开一下，看看里面有什么东西。</p>\n<h2 id=\"h2-3.u4E3Au4EC0u4E48u9009u62E9itu4F5Cu4E3Au57F9u8BADu7D20u6750uFF1F\"><a class=\"reference-link\" name=\"3. 为什么选择IT作为培训素材？\"></a><span class=\"header-link octicon octicon-link\"></span>3. 为什么选择IT作为培训素材？</h2><p>3.1. 不会有什么损失，没有“危险”。<br>3.2. 远距上可以教。<br>3.3. 可以练习人的灵活。</p>\n<h2 id=\"h2-4.u5982u4F55u8FDBu884Cu6587u4EF6u7BA1u7406uFF1F\"><a class=\"reference-link\" name=\"4. 如何进行文件管理？\"></a><span class=\"header-link octicon octicon-link\"></span>4. 如何进行文件管理？</h2><ul>\n<li>原则：各从其类；</li><li>几十个文件的话，不能够全部摆在桌面上，需要管理。</li><li>桌面新建一个文件夹，命名：IT培训</li><li>打开“IT培训”文件夹，在里面继续创建一个文件夹，命名“第1课-HTML”</li></ul>\n<h2 id=\"h2-5.u5173u4E8Ehtmlu548Cvscode\"><a class=\"reference-link\" name=\"5. 关于HTML和VSCODE\"></a><span class=\"header-link octicon octicon-link\"></span>5. 关于HTML和VSCODE</h2><h3 id=\"h3-5.1.u3010vscodeu3011\"><a class=\"reference-link\" name=\"5.1. 【VSCode】\"></a><span class=\"header-link octicon octicon-link\"></span>5.1. 【VSCode】</h3><ul>\n<li>课前下载完成；</li><li>教你打开：电脑左下角的开始-点击“放大镜”，在里面打字“vscode”，点开！</li><li>如何你需要把vscode切换成中文的，你可以在百度搜索vscode如何切换中文？”照着提示进行操作。</li></ul>\n<h3 id=\"h3-5.2.u3010u5982u4F55u770Bvscodeu7684u521Du59CBu754Cu9762u3011\"><a class=\"reference-link\" name=\"5.2.【如何看vscode的初始界面】\"></a><span class=\"header-link octicon octicon-link\"></span>5.2.【如何看vscode的初始界面】</h3><ul>\n<li>先看最上面的菜单栏：文件/编辑/选择/查看/……一样一样看。 不知道的不要紧，慢慢的都会知道。</li><li>看中间部分：演练（了解一下）</li><li>一定要避免“鼠标瞎划来划去，不停的划来划去”</li></ul>\n<h3 id=\"h3-5.3.u3010htmlu7684u5173u952Eu8981u70B9u3011\"><a class=\"reference-link\" name=\"5.3.【HTML的关键要点】\"></a><span class=\"header-link octicon octicon-link\"></span>5.3.【HTML的关键要点】</h3><ul>\n<li>html，最关键的就是尖括号和斜杠！</li><li>html，一个内容显示在页面的长相！</li><li>尖括号就是标签，标签决定了里面一坨字的长相！</li></ul>\n<h3 id=\"h3-5.4.u3010htmlu83DCu9E1Fu6559u7A0Bu3011\"><a class=\"reference-link\" name=\"5.4.【HTML菜鸟教程】\"></a><span class=\"header-link octicon octicon-link\"></span>5.4.【HTML菜鸟教程】</h3><ul>\n<li>图像；</li><li>剩下的自己就可以看了！</li></ul>\n<h2 id=\"h2-6.u672Cu5468u4F5Cu4E1A\"><a class=\"reference-link\" name=\"6. 本周作业\"></a><span class=\"header-link octicon octicon-link\"></span>6. 本周作业</h2><p>6.1. 大家把HTML的菜鸟教程的左边栏内容混个脸熟，挨个点点，看看效果；</p>\n<p>只要知道在哪里找，就?拉！</p>\n<p>6.2.下周讲javascript，让你的html动起来！所以大家去浏览javascript菜鸟教程的内容，知道有啥；</p>\n<p>6.3.input（输入框）， button（按钮），点击一下，玩一下！</p>\n<h2 id=\"h2-7.u8D44u6E90\"><a class=\"reference-link\" name=\"7. 资源\"></a><span class=\"header-link octicon octicon-link\"></span>7. 资源</h2><p>本课用到的网页资料：</p>\n<ul>\n<li><p>菜鸟教程</p>\n</li><li><p>HTML教程：<a href=\"https://www.runoob.com/html/html-tutorial.html\">https://www.runoob.com/html/html-tutorial.html</a></p>\n</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson01-2022-01-29.mp4', '2022-05-15T23:57:28+08:00', '100062Y', '雅飒', '2022-05-17T02:36:15+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:36:15+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1506, 10090, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第02课 - Javascript', NULL, '## 1. javascript是干什么的呢？\n\n\n- 是操控HTML页面的。\n- 操控，就是把html里面的字读出来，或者把别的地方传来的信心显示出来！\n\n\n\n例子：淘宝，百度页面，都是html页面。\n原理：你点击搜索，就是javascript把你输入的东西传到了百度的服务器，然后抓了大一堆的东西传了回来！\n\nJavascript就是把数据传来传去。\n\n## 2. 看文档的方法：用到啥就看啥！\n\n\n我们的教学方法：我们在课堂上学习的是学习方法，而不是单学内容。\n\n“上课”不等于“学习！”\n\n## 3. 程序员必备技能\n\n\n- 找一个东西，复制一下，粘贴一下，修改一下！（效法和传承就是复制粘贴）\n- 程序员就是库的搬运工！\n\n\n\n## 4. 正确的学习方法\n\n\n- 学习的过程都是从不知道到知道！（混个脸熟！）\n- 你如果脑子里光想着不知道的东西，那么你没有办法学习。（着眼于你会的）\n- 先弄清楚概念，如果概念不清就去操作，就是糊涂虫。(不管做啥，概念不清全完蛋！)\n\n\n\n## 5. 编程：就是变量+函数。\n\n\n- 定义一个变量：var XXX ,变量代表它里面的值。\n- 函数：function()\n\n\n\n## 6. 数据的操作：\n\n\n增 删 改 查（crud）\n\n## 7. 作业\n\n\n对vuetify的文档混个脸熟，浏览UI组件，练习复制和粘贴！\n\n## 8. 资源\n\n\n本课用到的网页资料：\n\n**菜鸟教程：**\n\n- HTML标签 按钮 ：https://www.runoob.com/tags/tag-button.html\n- HTML标签 输入框 ：https://www.runoob.com/tags/tag-input.html\n- Javascript 变量：https://www.runoob.com/js/js-variables.html\n- Javascript 函数：https://www.runoob.com/js/js-function-definition.html\n\n\n\n**Vuetify：**\n\n- 安装 - CDN：https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\n- 数据表格 - 基本：https://vuetifyjs.com/zh-Hans/components/data-tables/\n- 数据表格 - CRUD操作：https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\n\n', '<h2 id=\"h2-1.javascriptu662Fu5E72u4EC0u4E48u7684u5462uFF1F\"><a class=\"reference-link\" name=\"1. javascript是干什么的呢？\"></a><span class=\"header-link octicon octicon-link\"></span>1. javascript是干什么的呢？</h2><ul>\n<li>是操控HTML页面的。</li><li>操控，就是把html里面的字读出来，或者把别的地方传来的信心显示出来！</li></ul>\n<p>例子：淘宝，百度页面，都是html页面。<br>原理：你点击搜索，就是javascript把你输入的东西传到了百度的服务器，然后抓了大一堆的东西传了回来！</p>\n<p>Javascript就是把数据传来传去。</p>\n<h2 id=\"h2-2.u770Bu6587u6863u7684u65B9u6CD5uFF1Au7528u5230u5565u5C31u770Bu5565uFF01\"><a class=\"reference-link\" name=\"2. 看文档的方法：用到啥就看啥！\"></a><span class=\"header-link octicon octicon-link\"></span>2. 看文档的方法：用到啥就看啥！</h2><p>我们的教学方法：我们在课堂上学习的是学习方法，而不是单学内容。</p>\n<p>“上课”不等于“学习！”</p>\n<h2 id=\"h2-3.u7A0Bu5E8Fu5458u5FC5u5907u6280u80FD\"><a class=\"reference-link\" name=\"3. 程序员必备技能\"></a><span class=\"header-link octicon octicon-link\"></span>3. 程序员必备技能</h2><ul>\n<li>找一个东西，复制一下，粘贴一下，修改一下！（效法和传承就是复制粘贴）</li><li>程序员就是库的搬运工！</li></ul>\n<h2 id=\"h2-4.u6B63u786Eu7684u5B66u4E60u65B9u6CD5\"><a class=\"reference-link\" name=\"4. 正确的学习方法\"></a><span class=\"header-link octicon octicon-link\"></span>4. 正确的学习方法</h2><ul>\n<li>学习的过程都是从不知道到知道！（混个脸熟！）</li><li>你如果脑子里光想着不知道的东西，那么你没有办法学习。（着眼于你会的）</li><li>先弄清楚概念，如果概念不清就去操作，就是糊涂虫。(不管做啥，概念不清全完蛋！)</li></ul>\n<h2 id=\"h2-5.u7F16u7A0BuFF1Au5C31u662Fu53D8u91CF+u51FDu6570u3002\"><a class=\"reference-link\" name=\"5. 编程：就是变量+函数。\"></a><span class=\"header-link octicon octicon-link\"></span>5. 编程：就是变量+函数。</h2><ul>\n<li>定义一个变量：var XXX ,变量代表它里面的值。</li><li>函数：function()</li></ul>\n<h2 id=\"h2-6.u6570u636Eu7684u64CDu4F5CuFF1A\"><a class=\"reference-link\" name=\"6. 数据的操作：\"></a><span class=\"header-link octicon octicon-link\"></span>6. 数据的操作：</h2><p>增 删 改 查（crud）</p>\n<h2 id=\"h2-7.u4F5Cu4E1A\"><a class=\"reference-link\" name=\"7. 作业\"></a><span class=\"header-link octicon octicon-link\"></span>7. 作业</h2><p>对vuetify的文档混个脸熟，浏览UI组件，练习复制和粘贴！</p>\n<h2 id=\"h2-8.u8D44u6E90\"><a class=\"reference-link\" name=\"8. 资源\"></a><span class=\"header-link octicon octicon-link\"></span>8. 资源</h2><p>本课用到的网页资料：</p>\n<p><strong>菜鸟教程：</strong></p>\n<ul>\n<li>HTML标签 按钮 ：<a href=\"https://www.runoob.com/tags/tag-button.html\">https://www.runoob.com/tags/tag-button.html</a></li><li>HTML标签 输入框 ：<a href=\"https://www.runoob.com/tags/tag-input.html\">https://www.runoob.com/tags/tag-input.html</a></li><li>Javascript 变量：<a href=\"https://www.runoob.com/js/js-variables.html\">https://www.runoob.com/js/js-variables.html</a></li><li>Javascript 函数：<a href=\"https://www.runoob.com/js/js-function-definition.html\">https://www.runoob.com/js/js-function-definition.html</a></li></ul>\n<p><strong>Vuetify：</strong></p>\n<ul>\n<li>安装 - CDN：<a href=\"https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\">https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5</a></li><li>数据表格 - 基本：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/\">https://vuetifyjs.com/zh-Hans/components/data-tables/</a></li><li>数据表格 - CRUD操作：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\">https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c</a></li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson02-2022-02-05.mp4', '2022-05-16T00:03:00+08:00', '100062Y', '雅飒', '2022-05-17T02:36:49+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:36:49+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1507, 10091, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第03课 - VueJS', NULL, '\n## 1. 作业\n\n对vuetify的文档混个脸熟，浏览UI组件，练习复制和粘贴！\n\n## 2. 资源\n\n本课用到的网页资料：\n\n**菜鸟教程：VueJS**\n\n- 教程：https://www.runoob.com/vue2/vue-tutorial.html\n\n\n\n**Vuetify：**\n\n- 安装 - CDN：https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\n- 数据表格 - 基本：https://vuetifyjs.com/zh-Hans/components/data-tables/\n- 数据表格 - CRUD操作：https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\n\n\n\n参考资料：感兴趣的话可以去阅读：\n\n- VueJS官网介绍：https://cn.vuejs.org/v2/guide/\n\n', '<h2 id=\"h2-1.u4F5Cu4E1A\"><a class=\"reference-link\" name=\"1. 作业\"></a><span class=\"header-link octicon octicon-link\"></span>1. 作业</h2><p>对vuetify的文档混个脸熟，浏览UI组件，练习复制和粘贴！</p>\n<h2 id=\"h2-2.u8D44u6E90\"><a class=\"reference-link\" name=\"2. 资源\"></a><span class=\"header-link octicon octicon-link\"></span>2. 资源</h2><p>本课用到的网页资料：</p>\n<p><strong>菜鸟教程：VueJS</strong></p>\n<ul>\n<li>教程：<a href=\"https://www.runoob.com/vue2/vue-tutorial.html\">https://www.runoob.com/vue2/vue-tutorial.html</a></li></ul>\n<p><strong>Vuetify：</strong></p>\n<ul>\n<li>安装 - CDN：<a href=\"https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\">https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5</a></li><li>数据表格 - 基本：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/\">https://vuetifyjs.com/zh-Hans/components/data-tables/</a></li><li>数据表格 - CRUD操作：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\">https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c</a></li></ul>\n<p>参考资料：感兴趣的话可以去阅读：</p>\n<ul>\n<li>VueJS官网介绍：<a href=\"https://cn.vuejs.org/v2/guide/\">https://cn.vuejs.org/v2/guide/</a></li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson03-2022-02-12.mp4', '2022-05-16T00:07:00+08:00', '100062Y', '雅飒', '2022-05-17T02:37:26+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:37:26+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1508, 10092, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第04课 - 变量与函数', NULL, '## 1. 训练学习方法：\n\n1.1 预判。（主动的学习，不能被动的学习。）\n1.2 你怎么知道你的程序是对的？你的方法必须是对路的！\n- 比如：你怎么知道你的地基是对的？你的图必须经过审核！写程序，搞建筑，都是有章法的！\n- 比如：我怎么知道我的查经是对的？——也是有章法（找到作者在说啥）”\n\n1.3 我们现在学的是编程的章法！\n- 靠谱的人写的是靠谱的东西！\n- 编程最重要的章法是什么？—— 就是变量和函数！\ndata里面是变量。\nmethod里面是函数。\n\n变量：可以是数组[]，数组里面是对象{}。\n\n## 2. 正确的学习方法：浸泡式学习！\n\n\n- 每天沉浸在读文档里面，泡透了！\n- 每天十分钟，30分钟，没有用，刚预热就凉凉了！\n\n\n\n## 3. 怎么读文档？\n\n\n- 文档里面最重要的，就是尝试一下！改一改，碰一碰！\n- 碰到不明白的东西，需要的时候就去学一下！\n- learning on demand\n\n\n\n## 4. 重复一下重点：\n\n\n变量后面自己带着一大堆函数；\n增删改查vuetify也帮你写好了！\n声明了一个变量，放个.，知道后面放啥就行。\n写程序，从读人家的程序开始！\n学习就是从不知道到知道，从无知到有知；\n\n## 5. 资源\n\n本课用到的网页资料：\n\n**菜鸟教程：VueJS**\n\n- 教程：https://www.runoob.com/vue2/vue-tutorial.html\n\n\n\n**菜鸟教程：Javascript**\n\n- 教程：https://www.runoob.com/js/js-tutorial.html\n- 数据类型：https://www.runoob.com/js/js-datatypes.html\n- 字符串对象：https://www.runoob.com/jsref/jsref-obj-string.html\n- 数组对象：https://www.runoob.com/jsref/jsref-obj-array.html\n\n', '<h2 id=\"h2-1.u8BADu7EC3u5B66u4E60u65B9u6CD5uFF1A\"><a class=\"reference-link\" name=\"1. 训练学习方法：\"></a><span class=\"header-link octicon octicon-link\"></span>1. 训练学习方法：</h2><p>1.1 预判。（主动的学习，不能被动的学习。）<br>1.2 你怎么知道你的程序是对的？你的方法必须是对路的！</p>\n<ul>\n<li>比如：你怎么知道你的地基是对的？你的图必须经过审核！写程序，搞建筑，都是有章法的！</li><li>比如：我怎么知道我的查经是对的？——也是有章法（找到作者在说啥）”</li></ul>\n<p>1.3 我们现在学的是编程的章法！</p>\n<ul>\n<li>靠谱的人写的是靠谱的东西！</li><li>编程最重要的章法是什么？—— 就是变量和函数！<br>data里面是变量。<br>method里面是函数。</li></ul>\n<p>变量：可以是数组[]，数组里面是对象{}。</p>\n<h2 id=\"h2-2.u6B63u786Eu7684u5B66u4E60u65B9u6CD5uFF1Au6D78u6CE1u5F0Fu5B66u4E60uFF01\"><a class=\"reference-link\" name=\"2. 正确的学习方法：浸泡式学习！\"></a><span class=\"header-link octicon octicon-link\"></span>2. 正确的学习方法：浸泡式学习！</h2><ul>\n<li>每天沉浸在读文档里面，泡透了！</li><li>每天十分钟，30分钟，没有用，刚预热就凉凉了！</li></ul>\n<h2 id=\"h2-3.u600Eu4E48u8BFBu6587u6863uFF1F\"><a class=\"reference-link\" name=\"3. 怎么读文档？\"></a><span class=\"header-link octicon octicon-link\"></span>3. 怎么读文档？</h2><ul>\n<li>文档里面最重要的，就是尝试一下！改一改，碰一碰！</li><li>碰到不明白的东西，需要的时候就去学一下！</li><li>learning on demand</li></ul>\n<h2 id=\"h2-4.u91CDu590Du4E00u4E0Bu91CDu70B9uFF1A\"><a class=\"reference-link\" name=\"4. 重复一下重点：\"></a><span class=\"header-link octicon octicon-link\"></span>4. 重复一下重点：</h2><p>变量后面自己带着一大堆函数；<br>增删改查vuetify也帮你写好了！<br>声明了一个变量，放个.，知道后面放啥就行。<br>写程序，从读人家的程序开始！<br>学习就是从不知道到知道，从无知到有知；</p>\n<h2 id=\"h2-5.u8D44u6E90\"><a class=\"reference-link\" name=\"5. 资源\"></a><span class=\"header-link octicon octicon-link\"></span>5. 资源</h2><p>本课用到的网页资料：</p>\n<p><strong>菜鸟教程：VueJS</strong></p>\n<ul>\n<li>教程：<a href=\"https://www.runoob.com/vue2/vue-tutorial.html\">https://www.runoob.com/vue2/vue-tutorial.html</a></li></ul>\n<p><strong>菜鸟教程：Javascript</strong></p>\n<ul>\n<li>教程：<a href=\"https://www.runoob.com/js/js-tutorial.html\">https://www.runoob.com/js/js-tutorial.html</a></li><li>数据类型：<a href=\"https://www.runoob.com/js/js-datatypes.html\">https://www.runoob.com/js/js-datatypes.html</a></li><li>字符串对象：<a href=\"https://www.runoob.com/jsref/jsref-obj-string.html\">https://www.runoob.com/jsref/jsref-obj-string.html</a></li><li>数组对象：<a href=\"https://www.runoob.com/jsref/jsref-obj-array.html\">https://www.runoob.com/jsref/jsref-obj-array.html</a></li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson04-2022-02-19.mp4', '2022-05-16T00:10:28+08:00', '100062Y', '雅飒', '2022-05-17T02:37:49+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:37:49+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1509, 10093, '10012', '', '', 'public', '2022-05-16T00:00:00+08:00', '【学习方法课程】IT初级编程 第05课 - Javascript对象', NULL, '## 编程的框架\n\n\n编程就是关于变量和函数。\n\n任何知识都有框架体系。之前我们学习的内容：Vuetify是建立在Vue的基础上的，Vue是建立在Javascript的基础上的。\n\n今天学习的内容：Javascript对象。\nJavascript对象的重要概念：属性、方法。\n\n- 属性是Javascript对象自带的变量。\n- 方法是Javascript对象自带的函数。\n\n\n\n## Javascript对象：HTML DOM对象\n\n\n## Javascript对象：Window对象（浏览器对象）\n\n\n## Javascript对象：Array对象（数组对象）\n\n\nJavascript数组对象的方法：\n- map()\n- concat()\n\n## 学习方法\n\n\n浸泡：\n- 每天在教程里泡一下，看一下，玩一玩。\n- 看你用的，不要看那些一辈子都用不到的。\n\n读文档：\n- Javascript参考手册\n- 读完了，就在“尝试一下”里试一下。\n\n魔改：\n- 在“尝试一下”里，大胆修改，改到\"面目全非\"。\n\n学习应有的态度：\n学新东西，就得面临探索未知的东西，所以你必须得是一个有信心的人！没有信心就是废物一个。\n信心就是对未知的东西的一种勇气和信念！惧怕的人没有出息。\n\n## 软件开发的框架\n\n\nMVC：\n- M = model，数据\n- V = view，页面\n- C = control，数据与页面中间的控制\n\n养成一个框架性的思维模式。\n\n## 下一节课的学习内容：Vuetify\n\n\n## 本课作业\n\n\n- 多去尝试Javascript对象、数组对象、字符串对象、浏览器对象、HTML DOM对象\n- 复习Vue的内容\n\n', '<h2 id=\"h2-u7F16u7A0Bu7684u6846u67B6\"><a class=\"reference-link\" name=\"编程的框架\"></a><span class=\"header-link octicon octicon-link\"></span>编程的框架</h2><p>编程就是关于变量和函数。</p>\n<p>任何知识都有框架体系。之前我们学习的内容：Vuetify是建立在Vue的基础上的，Vue是建立在Javascript的基础上的。</p>\n<p>今天学习的内容：Javascript对象。<br>Javascript对象的重要概念：属性、方法。</p>\n<ul>\n<li>属性是Javascript对象自带的变量。</li><li>方法是Javascript对象自带的函数。</li></ul>\n<h2 id=\"h2-javascriptu5BF9u8C61uFF1Ahtmldomu5BF9u8C61\"><a class=\"reference-link\" name=\"Javascript对象：HTML DOM对象\"></a><span class=\"header-link octicon octicon-link\"></span>Javascript对象：HTML DOM对象</h2><h2 id=\"h2-javascriptu5BF9u8C61uFF1Awindowu5BF9u8C61uFF08u6D4Fu89C8u5668u5BF9u8C61uFF09\"><a class=\"reference-link\" name=\"Javascript对象：Window对象（浏览器对象）\"></a><span class=\"header-link octicon octicon-link\"></span>Javascript对象：Window对象（浏览器对象）</h2><h2 id=\"h2-javascriptu5BF9u8C61uFF1Aarrayu5BF9u8C61uFF08u6570u7EC4u5BF9u8C61uFF09\"><a class=\"reference-link\" name=\"Javascript对象：Array对象（数组对象）\"></a><span class=\"header-link octicon octicon-link\"></span>Javascript对象：Array对象（数组对象）</h2><p>Javascript数组对象的方法：</p>\n<ul>\n<li>map()</li><li>concat()</li></ul>\n<h2 id=\"h2-u5B66u4E60u65B9u6CD5\"><a class=\"reference-link\" name=\"学习方法\"></a><span class=\"header-link octicon octicon-link\"></span>学习方法</h2><p>浸泡：</p>\n<ul>\n<li>每天在教程里泡一下，看一下，玩一玩。</li><li>看你用的，不要看那些一辈子都用不到的。</li></ul>\n<p>读文档：</p>\n<ul>\n<li>Javascript参考手册</li><li>读完了，就在“尝试一下”里试一下。</li></ul>\n<p>魔改：</p>\n<ul>\n<li>在“尝试一下”里，大胆修改，改到”面目全非”。</li></ul>\n<p>学习应有的态度：<br>学新东西，就得面临探索未知的东西，所以你必须得是一个有信心的人！没有信心就是废物一个。<br>信心就是对未知的东西的一种勇气和信念！惧怕的人没有出息。</p>\n<h2 id=\"h2-u8F6Fu4EF6u5F00u53D1u7684u6846u67B6\"><a class=\"reference-link\" name=\"软件开发的框架\"></a><span class=\"header-link octicon octicon-link\"></span>软件开发的框架</h2><p>MVC：</p>\n<ul>\n<li>M = model，数据</li><li>V = view，页面</li><li>C = control，数据与页面中间的控制</li></ul>\n<p>养成一个框架性的思维模式。</p>\n<h2 id=\"h2-u4E0Bu4E00u8282u8BFEu7684u5B66u4E60u5185u5BB9uFF1Avuetify\"><a class=\"reference-link\" name=\"下一节课的学习内容：Vuetify\"></a><span class=\"header-link octicon octicon-link\"></span>下一节课的学习内容：Vuetify</h2><h2 id=\"h2-u672Cu8BFEu4F5Cu4E1A\"><a class=\"reference-link\" name=\"本课作业\"></a><span class=\"header-link octicon octicon-link\"></span>本课作业</h2><ul>\n<li>多去尝试Javascript对象、数组对象、字符串对象、浏览器对象、HTML DOM对象</li><li>复习Vue的内容</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson05-2022-03-03.mp4', '2022-05-16T00:11:01+08:00', '100062Y', '雅飒', '2022-05-17T02:38:19+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:38:19+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1510, 10094, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第06课 - Vuetify（数据表格的CRUD）', NULL, '## 1. Vue的特点\n\n特点1：变量驱动页面显示\n\n变量的值改变，页面显示也立即跟着改变。\n\n特点2：模板和代码\n\n带尖括号的都是模板。模板有模板的语言，代码有代码的语言。\n\n## 2. Vuetify的特点\n\n\nvuetify是建立在vue的基础上的\n\n## 3. 网页编程的框架结构\n\n\n前端-通讯协议-数据库\n\n名词：MVC\n页面V-数据M-把数据和页面连在一起的通讯协议C。\n\nＭ：数据模型；model\nV：页面；view\nC：control；\n\n分层次的思考方式不会混乱。\n\n## 4. 本课作业\n\n\n- 自学Vuetify的对话框（Dialog）组件\n- 把CRUD数据表格中的数据，换为学生（students）的数据。\n\n\n\n## 5. 资源\n\n\n本课用到的网页资料：\n\n- 菜鸟教程：VueJS\n\n- 教程：https://www.runoob.com/vue2/vue-tutorial.html\n\n- Vuetify：\n\n- 安装 - CDN：https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\n- 数据表格 - 基本：https://vuetifyjs.com/zh-Hans/components/data-tables/\n- 数据表格 - CRUD操作：https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\n- 对话框：https://vuetifyjs.com/zh-Hans/components/dialogs/\n\n## 6. VueJS和VuetifyJS的代码库\n\n如果你无法连接到原装代码库，可以使用开源江湖上的代码库：\n\n原装字体代码库：\n```\n<link href=\"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900\" rel=\"stylesheet\">\n```\n\n可以把这一行替换为：\n\n```\n<link href=\"https://fonts.cat.net/css?family=Roboto:100,300,400,500,700,900\" rel=\"stylesheet\">\n```\n\n原装CSS代码库：\n\n\n```\n<link href=\"https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css\" rel=\"stylesheet\">\n<link href=\"https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css\" rel=\"stylesheet\">\n```\n\n可以把这两行替换为：\n\n```\n<link href=\"https://dl.openjianghu.org/css/materialdesignicons.min.css\" rel=\"stylesheet\">\n<link href=\"https://dl.openjianghu.org/css/vuetify.min.css\" rel=\"stylesheet\">\n```\n\n原装JS代码库：\n\n```\n<script src=\"https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js\"></script>\n```\n\n可以把这两行替换为：\n\n```\n<script src=\"https://dl.openjianghu.org/js/vue.js\"></script>\n<script src=\"https://dl.openjianghu.org/js/vuetify.js\"></script>\n```\n\n## 7. CRUD基础模板下载\n\n点击[这里下载基础模板zip文件](https://dl.openjianghu.org/training/vuetify_crud.zip \"这里下载基础模板zip文件\")。其中包括：\n\nVuetifyJS基础模板\n- https://dl.openjianghu.org/training/vuetify_cdn.html\n\n原装VuetifyJS的数据表格CRUD模板\n- https://dl.openjianghu.org/training/vuetify_datatable_crud.html\n\nVuetifyJS的数据表格CRUD模板 - 易读版\n- https://dl.openjianghu.org/training/easy_reading_datatable_crud.html\n\nVuetifyJS的数据表格CRUD模板 - 易读版2\n- https://dl.openjianghu.org/training/easy_reading_datatable_crud2.html', '<h2 id=\"h2-1.vueu7684u7279u70B9\"><a class=\"reference-link\" name=\"1. Vue的特点\"></a><span class=\"header-link octicon octicon-link\"></span>1. Vue的特点</h2><p>特点1：变量驱动页面显示</p>\n<p>变量的值改变，页面显示也立即跟着改变。</p>\n<p>特点2：模板和代码</p>\n<p>带尖括号的都是模板。模板有模板的语言，代码有代码的语言。</p>\n<h2 id=\"h2-2.vuetifyu7684u7279u70B9\"><a class=\"reference-link\" name=\"2. Vuetify的特点\"></a><span class=\"header-link octicon octicon-link\"></span>2. Vuetify的特点</h2><p>vuetify是建立在vue的基础上的</p>\n<h2 id=\"h2-3.u7F51u9875u7F16u7A0Bu7684u6846u67B6u7ED3u6784\"><a class=\"reference-link\" name=\"3. 网页编程的框架结构\"></a><span class=\"header-link octicon octicon-link\"></span>3. 网页编程的框架结构</h2><p>前端-通讯协议-数据库</p>\n<p>名词：MVC<br>页面V-数据M-把数据和页面连在一起的通讯协议C。</p>\n<p>Ｍ：数据模型；model<br>V：页面；view<br>C：control；</p>\n<p>分层次的思考方式不会混乱。</p>\n<h2 id=\"h2-4.u672Cu8BFEu4F5Cu4E1A\"><a class=\"reference-link\" name=\"4. 本课作业\"></a><span class=\"header-link octicon octicon-link\"></span>4. 本课作业</h2><ul>\n<li>自学Vuetify的对话框（Dialog）组件</li><li>把CRUD数据表格中的数据，换为学生（students）的数据。</li></ul>\n<h2 id=\"h2-5.u8D44u6E90\"><a class=\"reference-link\" name=\"5. 资源\"></a><span class=\"header-link octicon octicon-link\"></span>5. 资源</h2><p>本课用到的网页资料：</p>\n<ul>\n<li><p>菜鸟教程：VueJS</p>\n</li><li><p>教程：<a href=\"https://www.runoob.com/vue2/vue-tutorial.html\">https://www.runoob.com/vue2/vue-tutorial.html</a></p>\n</li><li><p>Vuetify：</p>\n</li><li><p>安装 - CDN：<a href=\"https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\">https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5</a></p>\n</li><li><p>数据表格 - 基本：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/\">https://vuetifyjs.com/zh-Hans/components/data-tables/</a></p>\n</li><li><p>数据表格 - CRUD操作：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\">https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c</a></p>\n</li><li><p>对话框：<a href=\"https://vuetifyjs.com/zh-Hans/components/dialogs/\">https://vuetifyjs.com/zh-Hans/components/dialogs/</a></p>\n</li></ul>\n<h2 id=\"h2-6.vuejsu548Cvuetifyjsu7684u4EE3u7801u5E93\"><a class=\"reference-link\" name=\"6. VueJS和VuetifyJS的代码库\"></a><span class=\"header-link octicon octicon-link\"></span>6. VueJS和VuetifyJS的代码库</h2><p>如果你无法连接到原装代码库，可以使用开源江湖上的代码库：</p>\n<p>原装字体代码库：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"tag\">&lt;link</span><span class=\"pln\"> </span><span class=\"atn\">href</span><span class=\"pun\">=</span><span class=\"atv\">\"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900\"</span><span class=\"pln\"> </span><span class=\"atn\">rel</span><span class=\"pun\">=</span><span class=\"atv\">\"stylesheet\"</span><span class=\"tag\">&gt;</span></code></li></ol></pre>\n<p>可以把这一行替换为：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"tag\">&lt;link</span><span class=\"pln\"> </span><span class=\"atn\">href</span><span class=\"pun\">=</span><span class=\"atv\">\"https://fonts.cat.net/css?family=Roboto:100,300,400,500,700,900\"</span><span class=\"pln\"> </span><span class=\"atn\">rel</span><span class=\"pun\">=</span><span class=\"atv\">\"stylesheet\"</span><span class=\"tag\">&gt;</span></code></li></ol></pre>\n<p>原装CSS代码库：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"tag\">&lt;link</span><span class=\"pln\"> </span><span class=\"atn\">href</span><span class=\"pun\">=</span><span class=\"atv\">\"https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css\"</span><span class=\"pln\"> </span><span class=\"atn\">rel</span><span class=\"pun\">=</span><span class=\"atv\">\"stylesheet\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code><span class=\"tag\">&lt;link</span><span class=\"pln\"> </span><span class=\"atn\">href</span><span class=\"pun\">=</span><span class=\"atv\">\"https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css\"</span><span class=\"pln\"> </span><span class=\"atn\">rel</span><span class=\"pun\">=</span><span class=\"atv\">\"stylesheet\"</span><span class=\"tag\">&gt;</span></code></li></ol></pre>\n<p>可以把这两行替换为：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"tag\">&lt;link</span><span class=\"pln\"> </span><span class=\"atn\">href</span><span class=\"pun\">=</span><span class=\"atv\">\"https://dl.openjianghu.org/css/materialdesignicons.min.css\"</span><span class=\"pln\"> </span><span class=\"atn\">rel</span><span class=\"pun\">=</span><span class=\"atv\">\"stylesheet\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code><span class=\"tag\">&lt;link</span><span class=\"pln\"> </span><span class=\"atn\">href</span><span class=\"pun\">=</span><span class=\"atv\">\"https://dl.openjianghu.org/css/vuetify.min.css\"</span><span class=\"pln\"> </span><span class=\"atn\">rel</span><span class=\"pun\">=</span><span class=\"atv\">\"stylesheet\"</span><span class=\"tag\">&gt;</span></code></li></ol></pre>\n<p>原装JS代码库：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">src</span><span class=\"pun\">=</span><span class=\"atv\">\"https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js\"</span><span class=\"tag\">&gt;&lt;/script&gt;</span></code></li><li class=\"L1\"><code><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">src</span><span class=\"pun\">=</span><span class=\"atv\">\"https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js\"</span><span class=\"tag\">&gt;&lt;/script&gt;</span></code></li></ol></pre>\n<p>可以把这两行替换为：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">src</span><span class=\"pun\">=</span><span class=\"atv\">\"https://dl.openjianghu.org/js/vue.js\"</span><span class=\"tag\">&gt;&lt;/script&gt;</span></code></li><li class=\"L1\"><code><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">src</span><span class=\"pun\">=</span><span class=\"atv\">\"https://dl.openjianghu.org/js/vuetify.js\"</span><span class=\"tag\">&gt;&lt;/script&gt;</span></code></li></ol></pre>\n<h2 id=\"h2-7.crudu57FAu7840u6A21u677Fu4E0Bu8F7D\"><a class=\"reference-link\" name=\"7. CRUD基础模板下载\"></a><span class=\"header-link octicon octicon-link\"></span>7. CRUD基础模板下载</h2><p>点击<a title=\"这里下载基础模板zip文件\" href=\"https://dl.openjianghu.org/training/vuetify_crud.zip\">这里下载基础模板zip文件</a>。其中包括：</p>\n<p>VuetifyJS基础模板</p>\n<ul>\n<li><a href=\"https://dl.openjianghu.org/training/vuetify_cdn.html\">https://dl.openjianghu.org/training/vuetify_cdn.html</a></li></ul>\n<p>原装VuetifyJS的数据表格CRUD模板</p>\n<ul>\n<li><a href=\"https://dl.openjianghu.org/training/vuetify_datatable_crud.html\">https://dl.openjianghu.org/training/vuetify_datatable_crud.html</a></li></ul>\n<p>VuetifyJS的数据表格CRUD模板 - 易读版</p>\n<ul>\n<li><a href=\"https://dl.openjianghu.org/training/easy_reading_datatable_crud.html\">https://dl.openjianghu.org/training/easy_reading_datatable_crud.html</a></li></ul>\n<p>VuetifyJS的数据表格CRUD模板 - 易读版2</p>\n<ul>\n<li><a href=\"https://dl.openjianghu.org/training/easy_reading_datatable_crud2.html\">https://dl.openjianghu.org/training/easy_reading_datatable_crud2.html</a></li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson06-2022-03-10.mp4', '2022-05-16T00:11:53+08:00', '100062Y', '雅飒', '2022-05-25T02:03:15+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-05-25T02:03:15+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1511, 10095, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第07课第1节 - 前端开发总结', NULL, '\n## 1. 前端开发总结\n\n\n我们在学一个网页应用程序的开发。\n\n学习的方式：我们要形成一套学习方法，是工程性的思维方式，严谨，简单，直白。\n\n如何才能学习好？最重要的就是分层次，先从大的概念开始学习，就不乱。不要一个猛子扎进去，掉进细节里面出不来了。\n\n一定要抓住最大的概念。\n\n目前为止的学习，最大的概念叫做网页应用程序的开发。\n网页应用程序的开发，包括前端（页面），后端（数据库）以及中间（controller）。\n\n我们之前学习的内容，就是前端。前端最重点的内容，就是变量和函数的概念。\n\n当我们看到一坨代码的时候，也是从大的地方开始看，一块一块整清楚。整清楚了一个层次，再看下一个层次的概念。\n\n用概念指导操作，在操作中强化对概念的理解。做练习的时候，不要只在乎操作。\n\n不清不楚的操作，就是浪费时间。不要在模模糊糊当中去做事情。\n\n接下来我们学后端的数据库。\n\n', '<h2 id=\"h2-1.u524Du7AEFu5F00u53D1u603Bu7ED3\"><a class=\"reference-link\" name=\"1. 前端开发总结\"></a><span class=\"header-link octicon octicon-link\"></span>1. 前端开发总结</h2><p>我们在学一个网页应用程序的开发。</p>\n<p>学习的方式：我们要形成一套学习方法，是工程性的思维方式，严谨，简单，直白。</p>\n<p>如何才能学习好？最重要的就是分层次，先从大的概念开始学习，就不乱。不要一个猛子扎进去，掉进细节里面出不来了。</p>\n<p>一定要抓住最大的概念。</p>\n<p>目前为止的学习，最大的概念叫做网页应用程序的开发。<br>网页应用程序的开发，包括前端（页面），后端（数据库）以及中间（controller）。</p>\n<p>我们之前学习的内容，就是前端。前端最重点的内容，就是变量和函数的概念。</p>\n<p>当我们看到一坨代码的时候，也是从大的地方开始看，一块一块整清楚。整清楚了一个层次，再看下一个层次的概念。</p>\n<p>用概念指导操作，在操作中强化对概念的理解。做练习的时候，不要只在乎操作。</p>\n<p>不清不楚的操作，就是浪费时间。不要在模模糊糊当中去做事情。</p>\n<p>接下来我们学后端的数据库。</p>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson07-01-2022-03-17.mp4', '2022-05-16T00:13:04+08:00', '100062Y', '雅飒', '2022-05-26T04:42:38+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-05-26T04:42:38+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1512, 10096, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第08课 - SQL', NULL, '## 1. SQL 基本概念\n\n增删改查是所有信息（数据）的基本操作。\n\n编程就是解决增删改查的问题\n\n编程决定什么人能查？什么人能改？什么人能删？这样就解决了一权限的问题\n\n## 2. SQL语句分类：\n\n\n数据库的增删改查跟数据库里面的东西的增删改查是不一样的。\n数据库的增删改查，4种SQl语句；\n数据表格的增删改查，4种SQL语句；\n\n## 3. 资源\n\n- 文档教程：\n\n- SQL教程：https://www.runoob.com/sql/sql-intro.html\n- MySQL教程：https://www.runoob.com/mysql/mysql-tutorial.html\n- 廖雪峰SQL教程，可在线练习：https://www.liaoxuefeng.com/wiki/1177760294764384\n\n\n\n\n\n## 4. 作业：\n\n\n读文档；读SQL文档；快快扫一遍。\n\n在资源里下载本课的SQL代码，通过新建查询，把四个表创建起来。\n\n在Navicat里，操作一下“连接”、“新建查询”、“表”、“视图”等按钮。在查询和视图里，尝试使用一下“查询创建工具”和“视图创建工具”。', '<h2 id=\"h2-1.sql20u57FAu672Cu6982u5FF5\"><a class=\"reference-link\" name=\"1. SQL 基本概念\"></a><span class=\"header-link octicon octicon-link\"></span>1. SQL 基本概念</h2><p>增删改查是所有信息（数据）的基本操作。</p>\n<p>编程就是解决增删改查的问题</p>\n<p>编程决定什么人能查？什么人能改？什么人能删？这样就解决了一权限的问题</p>\n<h2 id=\"h2-2.sqlu8BEDu53E5u5206u7C7BuFF1A\"><a class=\"reference-link\" name=\"2. SQL语句分类：\"></a><span class=\"header-link octicon octicon-link\"></span>2. SQL语句分类：</h2><p>数据库的增删改查跟数据库里面的东西的增删改查是不一样的。<br>数据库的增删改查，4种SQl语句；<br>数据表格的增删改查，4种SQL语句；</p>\n<h2 id=\"h2-3.u8D44u6E90\"><a class=\"reference-link\" name=\"3. 资源\"></a><span class=\"header-link octicon octicon-link\"></span>3. 资源</h2><ul>\n<li><p>文档教程：</p>\n</li><li><p>SQL教程：<a href=\"https://www.runoob.com/sql/sql-intro.html\">https://www.runoob.com/sql/sql-intro.html</a></p>\n</li><li><p>MySQL教程：<a href=\"https://www.runoob.com/mysql/mysql-tutorial.html\">https://www.runoob.com/mysql/mysql-tutorial.html</a></p>\n</li><li><p>廖雪峰SQL教程，可在线练习：<a href=\"https://www.liaoxuefeng.com/wiki/1177760294764384\">https://www.liaoxuefeng.com/wiki/1177760294764384</a></p>\n</li></ul>\n<h2 id=\"h2-4.u4F5Cu4E1AuFF1A\"><a class=\"reference-link\" name=\"4. 作业：\"></a><span class=\"header-link octicon octicon-link\"></span>4. 作业：</h2><p>读文档；读SQL文档；快快扫一遍。</p>\n<p>在资源里下载本课的SQL代码，通过新建查询，把四个表创建起来。</p>\n<p>在Navicat里，操作一下“连接”、“新建查询”、“表”、“视图”等按钮。在查询和视图里，尝试使用一下“查询创建工具”和“视图创建工具”。</p>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson08-2022-03-24.mp4', '2022-05-16T00:24:03+08:00', '100062Y', '雅飒', '2022-05-17T02:40:31+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:40:31+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1513, 10097, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第09课 - SQL：JOIN、视图与函数计算', NULL, '## 本课学习内容\n\n- JOIN的概念：https://www.runoob.com/sql/sql-join.html\n- 视图的概念：https://www.runoob.com/sql/sql-view.html\n- SQL函数：\n  - 数数 COUNT: https://www.runoob.com/sql/sql-func-avg.html\n  - 总数 SUM：https://www.runoob.com/sql/sql-func-sum.html\n  - 平均数 AVERATE：https://www.runoob.com/sql/sql-func-avg.html\n\n## 作业\n\n1. 点击下载本课作业需要用到的SQL文件：<a href=\"https://audio.fsll.org/Chinese/ittraining/download-code-it-training-level01-lesson09-2022-03-31.zip\">点击此处下载</a>\n\n2. 在Navicat里面，打开你的数据库，运行第9课的SQL文件，来更新你的数据库数据和视图。\n\n3. 使用Student表、Course表与SC表做JOIN，找出错误的数据。\n\n5. 计算学生的课程总数、总成绩和平均成绩，并且把你的SQL语句保存为视图。\n\n6. 计算每个学生的最高分和最低分。\n\n7. 计算每个课程有多少个学生，平均分是多少。\n\n8. 计算每个课程学生成绩的最高分和最低分。\n', '<h2 id=\"h2-u672Cu8BFEu5B66u4E60u5185u5BB9\"><a class=\"reference-link\" name=\"本课学习内容\"></a><span class=\"header-link octicon octicon-link\"></span>本课学习内容</h2><ul>\n<li>JOIN的概念：<a href=\"https://www.runoob.com/sql/sql-join.html\">https://www.runoob.com/sql/sql-join.html</a></li><li>视图的概念：<a href=\"https://www.runoob.com/sql/sql-view.html\">https://www.runoob.com/sql/sql-view.html</a></li><li>SQL函数：<ul>\n<li>数数 COUNT: <a href=\"https://www.runoob.com/sql/sql-func-avg.html\">https://www.runoob.com/sql/sql-func-avg.html</a></li><li>总数 SUM：<a href=\"https://www.runoob.com/sql/sql-func-sum.html\">https://www.runoob.com/sql/sql-func-sum.html</a></li><li>平均数 AVERATE：<a href=\"https://www.runoob.com/sql/sql-func-avg.html\">https://www.runoob.com/sql/sql-func-avg.html</a></li></ul>\n</li></ul>\n<h2 id=\"h2-u4F5Cu4E1A\"><a class=\"reference-link\" name=\"作业\"></a><span class=\"header-link octicon octicon-link\"></span>作业</h2><ol>\n<li><p>点击下载本课作业需要用到的SQL文件：&lt;a href=\"https://audio.fsll.org/Chinese/ittraining/download-code-it-training-level01-lesson09-2022-03-31.zip\"&gt;点击此处下载&lt;/a&gt;</p>\n</li><li><p>在Navicat里面，打开你的数据库，运行第9课的SQL文件，来更新你的数据库数据和视图。</p>\n</li><li><p>使用Student表、Course表与SC表做JOIN，找出错误的数据。</p>\n</li><li><p>计算学生的课程总数、总成绩和平均成绩，并且把你的SQL语句保存为视图。</p>\n</li><li><p>计算每个学生的最高分和最低分。</p>\n</li><li><p>计算每个课程有多少个学生，平均分是多少。</p>\n</li><li><p>计算每个课程学生成绩的最高分和最低分。</p>\n</li></ol>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson09-2022-03-31.mp4', '2022-05-16T00:24:57+08:00', '100062Y', '雅飒', '2022-05-17T02:41:15+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:41:15+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1514, 10098, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第10课 - SQL', NULL, '\n\n\n\n\n', '', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson10-2022-04-07.mp4', '2022-05-16T00:25:45+08:00', '100062Y', '雅飒', '2022-05-17T02:41:48+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:41:48+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1515, 10099, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第11课 - SQL', NULL, '\n## 学习框架\n\n今天是初级课程最后一堂课；\n\n数据库和vuetify怎么就能连在一起呢？\n这就是中级课程要学的。\n\n只要有一个共同的协议，前端和后端就能连在一起。\n\n## 今天讲的内容：\n\n1．数据库。\n2. 如何把数据库的东西弄到前端。\n\n操作：\n把Tid所有的一起UPDATDE成带字母的id\n \n\n## 基本的思考方式：\n\n例外处理是管理的基本学问。\n用电脑干活比较省事。\n建立起用数据库管理的基本观念。\n数据库可以做多表联动，比excel好用。\n\n管理最重要的就是权限控制!\n只看你该看的！\n\n## 表格的增删改查\n\n一张表的增删改查。\n关系表的增删改查。\n\n先说一张表的增删改查：\n-	数据库的导入，导出，是一个非常重要的能力，一定要学。\n-	导出json文件。\n-	放进crud表格。\n\n## 作业\n\n接下来两个礼拜，大家尝试去做今天做的这个内容。\n\n点击下载本课作业需要用到的文件：<a href=\"https://audio.fsll.org/Chinese/ittraining/download-code-it-training-level01-lesson11-2022-04-14.zip\">点击此处下载</a>\n\n## 中级课程学习安排\n\n大家休整两个礼拜，在这两个礼拜中，继续去复习初级课程的内容。两周之后，我们会开始中级课程。进入中级课程需要考核，能够通过考核的，就可以进入中级课程学习。', '<h2 id=\"h2-u5B66u4E60u6846u67B6\"><a class=\"reference-link\" name=\"学习框架\"></a><span class=\"header-link octicon octicon-link\"></span>学习框架</h2><p>今天是初级课程最后一堂课；</p>\n<p>数据库和vuetify怎么就能连在一起呢？<br>这就是中级课程要学的。</p>\n<p>只要有一个共同的协议，前端和后端就能连在一起。</p>\n<h2 id=\"h2-u4ECAu5929u8BB2u7684u5185u5BB9uFF1A\"><a class=\"reference-link\" name=\"今天讲的内容：\"></a><span class=\"header-link octicon octicon-link\"></span>今天讲的内容：</h2><p>1．数据库。<br>2. 如何把数据库的东西弄到前端。</p>\n<p>操作：<br>把Tid所有的一起UPDATDE成带字母的id</p>\n<h2 id=\"h2-u57FAu672Cu7684u601Du8003u65B9u5F0FuFF1A\"><a class=\"reference-link\" name=\"基本的思考方式：\"></a><span class=\"header-link octicon octicon-link\"></span>基本的思考方式：</h2><p>例外处理是管理的基本学问。<br>用电脑干活比较省事。<br>建立起用数据库管理的基本观念。<br>数据库可以做多表联动，比excel好用。</p>\n<p>管理最重要的就是权限控制!<br>只看你该看的！</p>\n<h2 id=\"h2-u8868u683Cu7684u589Eu5220u6539u67E5\"><a class=\"reference-link\" name=\"表格的增删改查\"></a><span class=\"header-link octicon octicon-link\"></span>表格的增删改查</h2><p>一张表的增删改查。<br>关系表的增删改查。</p>\n<p>先说一张表的增删改查：</p>\n<ul>\n<li>   数据库的导入，导出，是一个非常重要的能力，一定要学。</li><li>   导出json文件。</li><li>   放进crud表格。</li></ul>\n<h2 id=\"h2-u4F5Cu4E1A\"><a class=\"reference-link\" name=\"作业\"></a><span class=\"header-link octicon octicon-link\"></span>作业</h2><p>接下来两个礼拜，大家尝试去做今天做的这个内容。</p>\n<p>点击下载本课作业需要用到的文件：&lt;a href=\"https://audio.fsll.org/Chinese/ittraining/download-code-it-training-level01-lesson11-2022-04-14.zip\"&gt;点击此处下载&lt;/a&gt;</p>\n<h2 id=\"h2-u4E2Du7EA7u8BFEu7A0Bu5B66u4E60u5B89u6392\"><a class=\"reference-link\" name=\"中级课程学习安排\"></a><span class=\"header-link octicon octicon-link\"></span>中级课程学习安排</h2><p>大家休整两个礼拜，在这两个礼拜中，继续去复习初级课程的内容。两周之后，我们会开始中级课程。进入中级课程需要考核，能够通过考核的，就可以进入中级课程学习。</p>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson11-2022-04-14.mp4', '2022-05-16T00:26:19+08:00', '100062Y', '雅飒', '2022-05-17T02:42:09+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:42:09+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1516, 10100, '10012', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT初级编程 第12课 - 化简Vuetify的数据表格代码结构', NULL, '\n\n', '', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson12-2022-04-19.mp4', '2022-05-16T00:28:37+08:00', '100062Y', '雅飒', '2022-05-17T02:42:32+08:00', '100062Y', '雅飒', 'jhUpdate', '100062Y', '雅飒', '2022-05-17T02:42:32+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1517, 10101, '10012', '', '', 'public', '2022-05-16T01:06:13+08:00', '【学习方法课程】IT初级编程 第07课第2节 - 数据库简介', NULL, '\n## 2. 数据库简介\n\n一开始人们用excel记录数据。\n\n当一个表和另外一张表产生了关系，就是关系型数据库，我们现在学的就是关系型数据库！\n\n（讲解技巧，用例子说明概念！）\n\n关系型数据库解决了2个问题：（1）数据干净；（2）数据使用方便。\n\nSQL：结构性查询语言；使用SQL语言可以操控数据库里面的数据。\nMySql：是一个软件，保存和管理数据。\nNavicat：是一个软件，可以查看MySQL里保存的数据。\n\n## 3. 作业\n\n（1）读文档：\n\n- 看一下菜鸟教程里的SQL和MYSQL教程。混个脸熟。\n- 读一下廖雪峰SQL教程（https://www.liaoxuefeng.com/wiki/1177760294764384），这个教程可以在线练习，用一用、试一试。\n\n（2）安装MYSQL和Navicat\n\n## 4. 本课用到的文档资料\n\n- 教程：\n  - SQL教程：https://www.runoob.com/sql/sql-intro.html\n  - MySQL教程：https://www.runoob.com/mysql/mysql-tutorial.html\n  - 廖雪峰SQL教程，可在线练习：https://www.liaoxuefeng.com/wiki/1177760294764384\n\n## 5. 下载及安装MySQL\n\n### 第一步：下载安装器：MySQL Installer for Windows\n\n（1）点击打开以下的链接：\n\nhttps://dev.mysql.com/downloads/installer/\n\n（2）我们需要安装的版本是MySQL5.7。点击页面上的文字：“Looking for previous GA versions?”来选择要下载的MySQL版本\n（3）点击第一个\"Download\"按钮，进入下载页面。\n（4）点击页面上的文字：“No thanks, just start my download.” 开始下载。\n\n### 第二步：安装\n\n（1）双击下载好的软件mysql-installer-web-community-5.7.37.0.msi，开始安装。软件打开需要一些时间，请稍等一下。 \n\n（2）选择安装类型：选择“Server only” （只安装服务器），然后点击“Next”（下一步）\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-2.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-2-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38627\" /></a> \n\n（3）选择服务器版本：依次点击“+”号，展开软件列表，选择“MySQL Server 5.7.37 – X64”。点击绿色的向右箭头，把选中的软件添加到待安装列表里。然后点击“Next”，进行下一步\n \n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-3.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-3-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38628\" /></a>\n\n（4）安装软件会自动检测你的电脑上缺不缺一些必须的软件。如果看到这样的画面，就点击下方的“Execute”：\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-4.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-4-300x223.png\" alt=\"\" width=\"300\" height=\"223\" class=\"alignnone size-medium wp-image-38629\" /></a>\n\n（5）正式安装：所有必须软件都安装好了以后，就可以安装MySQL Server了。点击“Excecute”开始安装：\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-5.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-5-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38630\" /></a>\n \n等待安装完成后，Status栏会显示Complete，MySQL的图标前会出现一个绿色的勾。然后点击“Next”按钮进入产品配置界面。\n\n## 第三步：产品配置\n\n**在这一步中最重要的一步是给你的MySQL设置一个密码。请把这个密码设置为123456。**\n\n（1）点击“Next”按钮进入MySQL Server 的配置：\n \n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-1.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-1-300x224.png\" alt=\"\" width=\"300\" height=\"224\" class=\"alignnone size-medium wp-image-38631\" /></a>\n\n（2）选择配置类型，这一步不需要任何修改，直接按“Next”进行下一步。\n \n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-2.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-2-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38632\" /></a>\n\n（3）设置MySQL的密码：请把这个密码设置为123456\n \n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-3.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-3-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38633\" /></a>\n\n（4）设置MySQL服务，这一步不需要任何修改，直接按“Next”进行下一步。\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-4.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-4-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38634\" /></a>\n\n（5）这一步不需要任何修改，直接按“Next”进行下一步。\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-5.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-5-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38635\" /></a>\n\n（6）此界面是将之前设置的配置内容应用到我们的mysql server，点击“Execute”，等待完成就可以了。\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6-300x224.png\" alt=\"\" width=\"300\" height=\"224\" class=\"alignnone size-medium wp-image-38636\" /></a>\n\n配置完成，点击“Finish”完成配置环节。\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6-2.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6-2-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38637\" /></a>\n \n（7）配置完成后将回到安装程序，我们点击“Next”继续\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-7.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-7-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38638\" /></a>\n \n（8）提示我们安装完成，点击“Finish”。MySQL就安装好了。\n\n<a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-8.png\"><img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-8-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38639\" /></a>\n\n## 6. 下载及安装Navicat\n\n### 第一步：下载安装器\n\n（1）点击打开以下的链接：\n\nhttps://www.navicat.com.cn/download/navicat-for-mysql\n\n（2）我们这次安装的版本是Navicat 16。选择合适的操作系统，点击相应的链接，开始下载。\n\n### 第二步：安装\n\n（1）双击下载以后的文件，就可以开始安装了。按照安装对话框的提示进行操作即可。\n\n（2）安装完成后，你可以在开始菜单里搜索Navicat16。点击Navicat16的图标就可以打开Navicat了。\n\n### 第三步：使用Navicat连接你的电脑的MySQL程序\n\n（1）启动Navicat 16后，点击窗口上部的“连接”按钮，选择“MySQL...”\n\n（2）在弹出的对话框里，输入连接名和密码（123456）。不需要修改主机、端口和用户名。点击“测试连接”，进行测试\n\n（3）连接测试成功后，点击“确定”。Navicat就连接到你电脑上的MySQL程序了。\n\n（4）在左侧的菜单栏里，双击你刚才创建的MySQL连接，就可以看到你的MySQL程序里的数据库了。', '<h2 id=\"h2-2.u6570u636Eu5E93u7B80u4ECB\"><a class=\"reference-link\" name=\"2. 数据库简介\"></a><span class=\"header-link octicon octicon-link\"></span>2. 数据库简介</h2><p>一开始人们用excel记录数据。</p>\n<p>当一个表和另外一张表产生了关系，就是关系型数据库，我们现在学的就是关系型数据库！</p>\n<p>（讲解技巧，用例子说明概念！）</p>\n<p>关系型数据库解决了2个问题：（1）数据干净；（2）数据使用方便。</p>\n<p>SQL：结构性查询语言；使用SQL语言可以操控数据库里面的数据。<br>MySql：是一个软件，保存和管理数据。<br>Navicat：是一个软件，可以查看MySQL里保存的数据。</p>\n<h2 id=\"h2-3.u4F5Cu4E1A\"><a class=\"reference-link\" name=\"3. 作业\"></a><span class=\"header-link octicon octicon-link\"></span>3. 作业</h2><p>（1）读文档：</p>\n<ul>\n<li>看一下菜鸟教程里的SQL和MYSQL教程。混个脸熟。</li><li>读一下廖雪峰SQL教程（<a href=\"https://www.liaoxuefeng.com/wiki/1177760294764384），这个教程可以在线练习，用一用、试一试。\">https://www.liaoxuefeng.com/wiki/1177760294764384），这个教程可以在线练习，用一用、试一试。</a></li></ul>\n<p>（2）安装MYSQL和Navicat</p>\n<h2 id=\"h2-4.u672Cu8BFEu7528u5230u7684u6587u6863u8D44u6599\"><a class=\"reference-link\" name=\"4. 本课用到的文档资料\"></a><span class=\"header-link octicon octicon-link\"></span>4. 本课用到的文档资料</h2><ul>\n<li>教程：<ul>\n<li>SQL教程：<a href=\"https://www.runoob.com/sql/sql-intro.html\">https://www.runoob.com/sql/sql-intro.html</a></li><li>MySQL教程：<a href=\"https://www.runoob.com/mysql/mysql-tutorial.html\">https://www.runoob.com/mysql/mysql-tutorial.html</a></li><li>廖雪峰SQL教程，可在线练习：<a href=\"https://www.liaoxuefeng.com/wiki/1177760294764384\">https://www.liaoxuefeng.com/wiki/1177760294764384</a></li></ul>\n</li></ul>\n<h2 id=\"h2-5.u4E0Bu8F7Du53CAu5B89u88C5mysql\"><a class=\"reference-link\" name=\"5. 下载及安装MySQL\"></a><span class=\"header-link octicon octicon-link\"></span>5. 下载及安装MySQL</h2><h3 id=\"h3-u7B2Cu4E00u6B65uFF1Au4E0Bu8F7Du5B89u88C5u5668uFF1Amysqlinstaller20for20windows\"><a class=\"reference-link\" name=\"第一步：下载安装器：MySQL Installer for Windows\"></a><span class=\"header-link octicon octicon-link\"></span>第一步：下载安装器：MySQL Installer for Windows</h3><p>（1）点击打开以下的链接：</p>\n<p><a href=\"https://dev.mysql.com/downloads/installer/\">https://dev.mysql.com/downloads/installer/</a></p>\n<p>（2）我们需要安装的版本是MySQL5.7。点击页面上的文字：“Looking for previous GA versions?”来选择要下载的MySQL版本<br>（3）点击第一个”Download”按钮，进入下载页面。<br>（4）点击页面上的文字：“No thanks, just start my download.” 开始下载。</p>\n<h3 id=\"h3-u7B2Cu4E8Cu6B65uFF1Au5B89u88C5\"><a class=\"reference-link\" name=\"第二步：安装\"></a><span class=\"header-link octicon octicon-link\"></span>第二步：安装</h3><p>（1）双击下载好的软件mysql-installer-web-community-5.7.37.0.msi，开始安装。软件打开需要一些时间，请稍等一下。 </p>\n<p>（2）选择安装类型：选择“Server only” （只安装服务器），然后点击“Next”（下一步）</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-2.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-2-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38627\" /&gt;&lt;/a&gt; </p>\n<p>（3）选择服务器版本：依次点击“+”号，展开软件列表，选择“MySQL Server 5.7.37 – X64”。点击绿色的向右箭头，把选中的软件添加到待安装列表里。然后点击“Next”，进行下一步</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-3.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-3-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38628\" /&gt;&lt;/a&gt;</p>\n<p>（4）安装软件会自动检测你的电脑上缺不缺一些必须的软件。如果看到这样的画面，就点击下方的“Execute”：</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-4.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-4-300x223.png\" alt=\"\" width=\"300\" height=\"223\" class=\"alignnone size-medium wp-image-38629\" /&gt;&lt;/a&gt;</p>\n<p>（5）正式安装：所有必须软件都安装好了以后，就可以安装MySQL Server了。点击“Excecute”开始安装：</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-5.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-2-5-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38630\" /&gt;&lt;/a&gt;</p>\n<p>等待安装完成后，Status栏会显示Complete，MySQL的图标前会出现一个绿色的勾。然后点击“Next”按钮进入产品配置界面。</p>\n<h2 id=\"h2-u7B2Cu4E09u6B65uFF1Au4EA7u54C1u914Du7F6E\"><a class=\"reference-link\" name=\"第三步：产品配置\"></a><span class=\"header-link octicon octicon-link\"></span>第三步：产品配置</h2><p><strong>在这一步中最重要的一步是给你的MySQL设置一个密码。请把这个密码设置为123456。</strong></p>\n<p>（1）点击“Next”按钮进入MySQL Server 的配置：</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-1.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-1-300x224.png\" alt=\"\" width=\"300\" height=\"224\" class=\"alignnone size-medium wp-image-38631\" /&gt;&lt;/a&gt;</p>\n<p>（2）选择配置类型，这一步不需要任何修改，直接按“Next”进行下一步。</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-2.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-2-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38632\" /&gt;&lt;/a&gt;</p>\n<p>（3）设置MySQL的密码：请把这个密码设置为123456</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-3.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-3-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38633\" /&gt;&lt;/a&gt;</p>\n<p>（4）设置MySQL服务，这一步不需要任何修改，直接按“Next”进行下一步。</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-4.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-4-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38634\" /&gt;&lt;/a&gt;</p>\n<p>（5）这一步不需要任何修改，直接按“Next”进行下一步。</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-5.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-5-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38635\" /&gt;&lt;/a&gt;</p>\n<p>（6）此界面是将之前设置的配置内容应用到我们的mysql server，点击“Execute”，等待完成就可以了。</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6-300x224.png\" alt=\"\" width=\"300\" height=\"224\" class=\"alignnone size-medium wp-image-38636\" /&gt;&lt;/a&gt;</p>\n<p>配置完成，点击“Finish”完成配置环节。</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6-2.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-6-2-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38637\" /&gt;&lt;/a&gt;</p>\n<p>（7）配置完成后将回到安装程序，我们点击“Next”继续</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-7.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-7-300x226.png\" alt=\"\" width=\"300\" height=\"226\" class=\"alignnone size-medium wp-image-38638\" /&gt;&lt;/a&gt;</p>\n<p>（8）提示我们安装完成，点击“Finish”。MySQL就安装好了。</p>\n<p>&lt;a href=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-8.png\"&gt;&lt;img src=\"http://www.mingding.org/wp-content/uploads/2018/09/mysql-install-3-8-300x225.png\" alt=\"\" width=\"300\" height=\"225\" class=\"alignnone size-medium wp-image-38639\" /&gt;&lt;/a&gt;</p>\n<h2 id=\"h2-6.u4E0Bu8F7Du53CAu5B89u88C5navicat\"><a class=\"reference-link\" name=\"6. 下载及安装Navicat\"></a><span class=\"header-link octicon octicon-link\"></span>6. 下载及安装Navicat</h2><h3 id=\"h3-u7B2Cu4E00u6B65uFF1Au4E0Bu8F7Du5B89u88C5u5668\"><a class=\"reference-link\" name=\"第一步：下载安装器\"></a><span class=\"header-link octicon octicon-link\"></span>第一步：下载安装器</h3><p>（1）点击打开以下的链接：</p>\n<p><a href=\"https://www.navicat.com.cn/download/navicat-for-mysql\">https://www.navicat.com.cn/download/navicat-for-mysql</a></p>\n<p>（2）我们这次安装的版本是Navicat 16。选择合适的操作系统，点击相应的链接，开始下载。</p>\n<h3 id=\"h3-u7B2Cu4E8Cu6B65uFF1Au5B89u88C5\"><a class=\"reference-link\" name=\"第二步：安装\"></a><span class=\"header-link octicon octicon-link\"></span>第二步：安装</h3><p>（1）双击下载以后的文件，就可以开始安装了。按照安装对话框的提示进行操作即可。</p>\n<p>（2）安装完成后，你可以在开始菜单里搜索Navicat16。点击Navicat16的图标就可以打开Navicat了。</p>\n<h3 id=\"h3-u7B2Cu4E09u6B65uFF1Au4F7Fu7528navicatu8FDEu63A5u4F60u7684u7535u8111u7684mysqlu7A0Bu5E8F\"><a class=\"reference-link\" name=\"第三步：使用Navicat连接你的电脑的MySQL程序\"></a><span class=\"header-link octicon octicon-link\"></span>第三步：使用Navicat连接你的电脑的MySQL程序</h3><p>（1）启动Navicat 16后，点击窗口上部的“连接”按钮，选择“MySQL…”</p>\n<p>（2）在弹出的对话框里，输入连接名和密码（123456）。不需要修改主机、端口和用户名。点击“测试连接”，进行测试</p>\n<p>（3）连接测试成功后，点击“确定”。Navicat就连接到你电脑上的MySQL程序了。</p>\n<p>（4）在左侧的菜单栏里，双击你刚才创建的MySQL连接，就可以看到你的MySQL程序里的数据库了。</p>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-lesson07-02-2022-03-17.mp4', '2022-05-16T01:05:54+08:00', '100062Y', '雅飒', '2022-05-26T04:42:25+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-05-26T04:42:25+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1518, 10102, '10013', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT高级编程 第01课：江湖JS框架介绍', NULL, '\n## 本课程的学习内容\n\n\n- 理解网页编程的框架：前端、后端和数据传输协议\n- 学习使用后端框架：江湖JS（jianghuJS）\n\n\n\n### 后台的功能\n\n\n能把数据库里的数据，放到vuetify的页面上\n能把页面的输入，打包传输回后台，存入数据库\n\n### 后台的框架: eggjs\n\n\n安装后台软件: npm i\n启动前先配置: config数据库\n启动: npm run dev\n\n### 后台是怎么写出来的？\n\n\n今天要学的jianghuJS，就是让我们可以简单的写出后台软件。\njianghuJS是在eggjs的基础上写出来的。\n\n## 理解jianghuJS\n\n\njianghuJS是一个简单易用的后台框架，为前台使用后台数据提供了API。\nAPI是应用程序接口，读写后台数据\n\n前端程序员需要会的技术:\n- 会画页面\n- 会使用API: 做好配置即可\n\n从简单的功能，开始理解jianghuJS框架的功能: \n- 使用学生列表功能\n- 用“后台的测试”的方法，来写\n- 写vuetify的时候，不需要先写好后台\n- 学习后台功能的时候，不需要先写好前端页面\n- 只要定好传输的数据格式，即可\n\n我们今天学习的就是江湖js，把数据从后端拿出来发到前端，把数据从前端拿出来发回后端。\n\n江湖JS做的就是\n- 第一件事：鉴权，\n- 你是谁，能否登录（用户名和用户密码），\n- 你能干啥，登录进去以后能干啥（页面、功能、数据）\n- 第二件事：数据传输\n- 读数据放到页面\n- 页面输入打包为数据，存入数据库\n\n最重要的特征：不需要写代码，只要把配置做好，就可以传数据了。\n\n## 协议\n\n\n前端和后端的开发者定好的数据传输的格式\n协议的内容\n什么操作\n哪条数据\n数据的内容\n数据必须得打包成正确的格式\n数据传输的两个基本要素：路径和数据\n我们要配置的，就是这两个基本要素\n\n我们要学的，\n第一，就是链接URL后台路径长成什么样，数据要长成什么样，照着人家的来用。\n第二，如何配置新的页面和路径（功能）\n\n## 后续的课程内容\n\n第2课的内容：如何使用后台数据接口\n第3课的内容：鉴权', '<h2 id=\"h2-u672Cu8BFEu7A0Bu7684u5B66u4E60u5185u5BB9\"><a class=\"reference-link\" name=\"本课程的学习内容\"></a><span class=\"header-link octicon octicon-link\"></span>本课程的学习内容</h2><ul>\n<li>理解网页编程的框架：前端、后端和数据传输协议</li><li>学习使用后端框架：江湖JS（jianghuJS）</li></ul>\n<h3 id=\"h3-u540Eu53F0u7684u529Fu80FD\"><a class=\"reference-link\" name=\"后台的功能\"></a><span class=\"header-link octicon octicon-link\"></span>后台的功能</h3><p>能把数据库里的数据，放到vuetify的页面上<br>能把页面的输入，打包传输回后台，存入数据库</p>\n<h3 id=\"h3-u540Eu53F0u7684u6846u67B63Aeggjs\"><a class=\"reference-link\" name=\"后台的框架: eggjs\"></a><span class=\"header-link octicon octicon-link\"></span>后台的框架: eggjs</h3><p>安装后台软件: npm i<br>启动前先配置: config数据库<br>启动: npm run dev</p>\n<h3 id=\"h3-u540Eu53F0u662Fu600Eu4E48u5199u51FAu6765u7684uFF1F\"><a class=\"reference-link\" name=\"后台是怎么写出来的？\"></a><span class=\"header-link octicon octicon-link\"></span>后台是怎么写出来的？</h3><p>今天要学的jianghuJS，就是让我们可以简单的写出后台软件。<br>jianghuJS是在eggjs的基础上写出来的。</p>\n<h2 id=\"h2-u7406u89E3jianghujs\"><a class=\"reference-link\" name=\"理解jianghuJS\"></a><span class=\"header-link octicon octicon-link\"></span>理解jianghuJS</h2><p>jianghuJS是一个简单易用的后台框架，为前台使用后台数据提供了API。<br>API是应用程序接口，读写后台数据</p>\n<p>前端程序员需要会的技术:</p>\n<ul>\n<li>会画页面</li><li>会使用API: 做好配置即可</li></ul>\n<p>从简单的功能，开始理解jianghuJS框架的功能:&nbsp;</p>\n<ul>\n<li>使用学生列表功能</li><li>用“后台的测试”的方法，来写</li><li>写vuetify的时候，不需要先写好后台</li><li>学习后台功能的时候，不需要先写好前端页面</li><li>只要定好传输的数据格式，即可</li></ul>\n<p>我们今天学习的就是江湖js，把数据从后端拿出来发到前端，把数据从前端拿出来发回后端。</p>\n<p>江湖JS做的就是</p>\n<ul>\n<li>第一件事：鉴权，</li><li>你是谁，能否登录（用户名和用户密码），</li><li>你能干啥，登录进去以后能干啥（页面、功能、数据）</li><li>第二件事：数据传输</li><li>读数据放到页面</li><li>页面输入打包为数据，存入数据库</li></ul>\n<p>最重要的特征：不需要写代码，只要把配置做好，就可以传数据了。</p>\n<h2 id=\"h2-u534Fu8BAE\"><a class=\"reference-link\" name=\"协议\"></a><span class=\"header-link octicon octicon-link\"></span>协议</h2><p>前端和后端的开发者定好的数据传输的格式<br>协议的内容<br>什么操作<br>哪条数据<br>数据的内容<br>数据必须得打包成正确的格式<br>数据传输的两个基本要素：路径和数据<br>我们要配置的，就是这两个基本要素</p>\n<p>我们要学的，<br>第一，就是链接URL后台路径长成什么样，数据要长成什么样，照着人家的来用。<br>第二，如何配置新的页面和路径（功能）</p>\n<h2 id=\"h2-u540Eu7EEDu7684u8BFEu7A0Bu5185u5BB9\"><a class=\"reference-link\" name=\"后续的课程内容\"></a><span class=\"header-link octicon octicon-link\"></span>后续的课程内容</h2><p>第2课的内容：如何使用后台数据接口<br>第3课的内容：鉴权</p>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson01-2022-02-02.mp4', '2022-05-16T01:13:58+08:00', '100062Y', '雅飒', '2022-06-15T02:28:36+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:28:36+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1519, 10103, '10013', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT高级编程 第02课：使用后端数据接口', NULL, '\n\n## 本课作业：\n\n参照studentManagement03.html，将目录的增删改查功能补全。\n\n## 复习：\n\n学完本课，要建立以下几个重要的概念：\n\n1. 前端和后端的概念：\n\n\n\n- 跟数据库打交道的是后端的程序。\n- 网页是前端的。vue, vuetify. 至于这个代码从哪里来的不重要。\n\n\n\n1. jianghuJS是一个后端框架，是一个后台和前台共同达成的协议。（通讯协议，通讯协议就是一个数据结构(格式)）\n\n\n\n- 前端的样本，可能是vuetify的样本。\n- 后端的样本，jianghuJS的设置方法学会，前端的那个代码学会（就是抄）\n\n', '<h2 id=\"h2-u672Cu8BFEu4F5Cu4E1AuFF1A\"><a class=\"reference-link\" name=\"本课作业：\"></a><span class=\"header-link octicon octicon-link\"></span>本课作业：</h2><p>参照studentManagement03.html，将目录的增删改查功能补全。</p>\n<h2 id=\"h2-u590Du4E60uFF1A\"><a class=\"reference-link\" name=\"复习：\"></a><span class=\"header-link octicon octicon-link\"></span>复习：</h2><p>学完本课，要建立以下几个重要的概念：</p>\n<ol>\n<li>前端和后端的概念：</li></ol>\n<ul>\n<li>跟数据库打交道的是后端的程序。</li><li>网页是前端的。vue, vuetify. 至于这个代码从哪里来的不重要。</li></ul>\n<ol>\n<li>jianghuJS是一个后端框架，是一个后台和前台共同达成的协议。（通讯协议，通讯协议就是一个数据结构(格式)）</li></ol>\n<ul>\n<li>前端的样本，可能是vuetify的样本。</li><li>后端的样本，jianghuJS的设置方法学会，前端的那个代码学会（就是抄）</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson02-2022-02-03.mp4', '2022-05-16T01:15:29+08:00', '100062Y', '雅飒', '2022-06-15T02:28:45+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:28:45+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1520, 10104, '10013', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT高级编程 第03课：鉴权', NULL, '## 本课作业：\n\n启动程序，向以下几个数据库表中添加数据，看看页面显示会有哪些变化，理解鉴权的概念和功能：\n\n- _user\n- _group\n- _role\n- _user_group_role\n- _user_group_role_page\n- _user_group_role_resource\n\n', '<h2 id=\"h2-u672Cu8BFEu4F5Cu4E1AuFF1A\"><a class=\"reference-link\" name=\"本课作业：\"></a><span class=\"header-link octicon octicon-link\"></span>本课作业：</h2><p>启动程序，向以下几个数据库表中添加数据，看看页面显示会有哪些变化，理解鉴权的概念和功能：</p>\n<ul>\n<li>_user</li><li>_group</li><li>_role</li><li>_user_group_role</li><li>_user_group_role_page</li><li>_user_group_role_resource</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson03-2022-02-05.mp4', '2022-05-16T01:22:11+08:00', '100062Y', '雅飒', '2022-06-15T02:28:53+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:28:53+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1521, 10105, '10013', '', '', 'public', '2022-05-16T01:24:39+08:00', '【学习方法课程】IT高级编程 第04课：鉴权之页面权限配置', NULL, '\n\n\n', '', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson04-2022-02-09.mp4', '2022-05-16T01:23:49+08:00', '100062Y', '雅飒', '2022-06-15T02:29:00+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:29:00+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1522, 10106, '10013', '', '', 'public', '2022-05-16T01:25:33+08:00', '【学习方法课程】IT高级编程 第05课：鉴权之数据权限配置', NULL, '\n\n\n', '', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson05-2022-02-10.mp4', '2022-05-16T01:25:20+08:00', '100062Y', '雅飒', '2022-06-15T02:29:09+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:29:09+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1523, 10107, '10013', '', '', 'public', '2022-05-16T01:27:35+08:00', '【学习方法课程】IT高级编程 第06课：鉴权之选择部分数据的权限配置', NULL, '\n', '', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson06-2022-02-11.mp4', '2022-05-16T01:27:09+08:00', '100062Y', '雅飒', '2022-06-15T02:29:16+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:29:16+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1524, 10108, '10013', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT高级编程 第07课：关系表的增删改查', NULL, '', '', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson07-2022-02-12.mp4', '2022-05-16T01:30:45+08:00', '100062Y', '雅飒', '2022-06-15T02:29:22+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:29:22+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1525, 10109, '10013', '', '', 'public', '2022-05-15T00:00:00+08:00', '【学习方法课程】IT高级编程 第08课：如何读代码', NULL, '## 1. 本课重点\n\n\n如何读代码？要整清楚：\n- 页面长啥样？\n- 数据库长啥样？\n- 数据接口长啥样？\n\n如何读前端代码？抓住这两大关键：\n- 数据如何显示在页面上？\n- 数据接口是怎么写的？\n\n学习方法：\n- 浸泡式学习：一段时间大量的学习、琢磨一个课题\n- 从简单的开始学习，摸摸、试试，逐步学到更复杂的内容。\n', '<h2 id=\"h2-1.u672Cu8BFEu91CDu70B9\"><a class=\"reference-link\" name=\"1. 本课重点\"></a><span class=\"header-link octicon octicon-link\"></span>1. 本课重点</h2><p>如何读代码？要整清楚：</p>\n<ul>\n<li>页面长啥样？</li><li>数据库长啥样？</li><li>数据接口长啥样？</li></ul>\n<p>如何读前端代码？抓住这两大关键：</p>\n<ul>\n<li>数据如何显示在页面上？</li><li>数据接口是怎么写的？</li></ul>\n<p>学习方法：</p>\n<ul>\n<li>浸泡式学习：一段时间大量的学习、琢磨一个课题</li><li>从简单的开始学习，摸摸、试试，逐步学到更复杂的内容。</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level03-lesson08-2022-02-23.mp4', '2022-05-16T01:32:28+08:00', '100062Y', '雅飒', '2022-06-15T02:29:30+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-15T02:29:30+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1526, 10110, '10011', 'Database', 'database,SQL,MySQL,Navicat,RDBMS', 'deleted', '2022-05-16T13:27:26+08:00', 'IT Programming Training (Beginner Level) - Lesson 01: SQL (1)', NULL, '## Course Materials\n\n- Sample Data: click to download the [sample data](https://audio.fsll.org/English/ittraining/sample_data_database_learning-20220515.sql \"sample data\")\n- Documents:\n  - SQL Tutorial on W3Schools: https://www.w3schools.com/sql/default.asp\n  - MySQL Tutorial on W3Schools: https://www.w3schools.com/mysql/default.asp\n\n## Concepts\n\n- Relational Database Management Systems\n- SQL\n- MySQL\n- Navicat\n- CRUD\n- Query Builder\n\n## Sample MySQL Statements\n\n1. Select students from class \'Class-2022-1-A\':\n\n```\nSELECT * FROM student WHERE classId = \'Class-2022-1-A\';\n```\n\n2. Calculate total score of each student:\n\n```\nSELECT studentName, SUM(score) FROM `student_subject` GROUP BY studentId;\n```\n\n3. Count the number of students in each class:\n\n```\nSELECT classId, COUNT(*) FROM `student` GROUP BY classId;\n```\n\n## Assignments\n1. Import sample data into your database\n2. Familiarize with Navicat\n3. Make sure you glance through the whole list of SQL tutorial on W3Schools. Classify the topics on the left-panel into different levels of CRUD statements.\n\nRequirement: Do it quickly. Just glance through. Never read word by word.', '<h2 id=\"h2-coursematerials\"><a class=\"reference-link\" name=\"Course Materials\"></a><span class=\"header-link octicon octicon-link\"></span>Course Materials</h2><ul>\n<li>Sample Data: click to download the <a title=\"sample data\" href=\"https://audio.fsll.org/English/ittraining/sample_data_database_learning-20220515.sql\">sample data</a></li><li>Documents:<ul>\n<li>SQL Tutorial on W3Schools: <a href=\"https://www.w3schools.com/sql/default.asp\">https://www.w3schools.com/sql/default.asp</a></li><li>MySQL Tutorial on W3Schools: <a href=\"https://www.w3schools.com/mysql/default.asp\">https://www.w3schools.com/mysql/default.asp</a></li></ul>\n</li></ul>\n<h2 id=\"h2-concepts\"><a class=\"reference-link\" name=\"Concepts\"></a><span class=\"header-link octicon octicon-link\"></span>Concepts</h2><ul>\n<li>Relational Database Management Systems</li><li>SQL</li><li>MySQL</li><li>Navicat</li><li>CRUD</li><li>Query Builder</li></ul>\n<h2 id=\"h2-samplemysql20statements\"><a class=\"reference-link\" name=\"Sample MySQL Statements\"></a><span class=\"header-link octicon octicon-link\"></span>Sample MySQL Statements</h2><ol>\n<li>Select students from class ‘Class-2022-1-A’:</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">SELECT </span><span class=\"pun\">*</span><span class=\"pln\"> FROM student WHERE classId </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\'Class-2022-1-A\'</span><span class=\"pun\">;</span></code></li></ol></pre>\n<ol start=\"2\">\n<li>Calculate total score of each student:</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">SELECT studentName</span><span class=\"pun\">,</span><span class=\"pln\"> SUM</span><span class=\"pun\">(</span><span class=\"pln\">score</span><span class=\"pun\">)</span><span class=\"pln\"> FROM </span><span class=\"str\">`student_subject`</span><span class=\"pln\"> GROUP BY studentId</span><span class=\"pun\">;</span></code></li></ol></pre>\n<ol start=\"3\">\n<li>Count the number of students in each class:</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">SELECT classId</span><span class=\"pun\">,</span><span class=\"pln\"> COUNT</span><span class=\"pun\">(*)</span><span class=\"pln\"> FROM </span><span class=\"str\">`student`</span><span class=\"pln\"> GROUP BY classId</span><span class=\"pun\">;</span></code></li></ol></pre>\n<h2 id=\"h2-assignments\"><a class=\"reference-link\" name=\"Assignments\"></a><span class=\"header-link octicon octicon-link\"></span>Assignments</h2><ol>\n<li>Import sample data into your database</li><li>Familiarize with Navicat</li><li>Make sure you glance through the whole list of SQL tutorial on W3Schools. Classify the topics on the left-panel into different levels of CRUD statements.</li></ol>\n<p>Requirement: Do it quickly. Just glance through. Never read word by word.</p>\n', NULL, NULL, NULL, '/materialRepo/video/En-it-training-level1-lesson01-2022-05-16.mp4', '2022-05-16T13:27:26+08:00', '100005W', '安宁', '2022-05-19T13:39:11+08:00', '100002D', '王番', 'update', 'm3611F', 'Colin', '2022-05-25T15:13:50+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1527, 10111, '10015', '江湖JS-运维', '', 'login', '2022-05-21T03:12:12+08:00', '搭建服务器：CentOS7系统中通过NFS挂载NAS共享文件夹', NULL, '本文以CentOS7系统以及Synology Disk Station为例，讲解如何在CentOS7系统中挂载NAS共享文件夹。\n\n- NFS：Network File System的缩写，即网络文件系统。功能是通过网络让不同的机器、不同的操作系统能够彼此分享文件，让应用程序在客户端通过网络访问位于服务器磁盘中的数据，是在类Unix系统间实现磁盘文件共享的一种方法[1]。\n- NAS: NAS（Network Attached Storage：网络附属存储）按字面简单说就是连接在网络上，具备资料存储功能的装置，因此也称为“网络存储器”。它是一种专用数据存储服务器[2]。\n\n## NAS设置共享文件夹的NFS权限\n\n在Synology Disk Station的管理界面中，打开“控制面板” >> “共享文件夹”，选中要挂载的文件夹，进行编辑。\n\n在该文件夹的“NFS权限”配置中，新增权限规则。将“服务器名称或IP地址”设置为CentOS7系统的IP地址，并根据实际需要进行其他相关设置。保存即可。\n\n记好该共享文件夹的挂载路径，例如：```/newVolume/nas_folder1```\n\n## CentOS7的配置\n\n以下命令来源：[3]\n\n1. 安装nfs-utils\n\n```bash\nyum install nfs-utils\n```\n\n2. 创建挂载点\n\n```bash\nmkdir /mnt/nas_folder1\n```\n\n3. 进行挂载\n\n```bash\nmount -t nfs <server_ip>:/newVolume/nas_folder1 /mnt/nas_folder1\n```\n\n其中，```<servier_ip>```需要被替换为Synology Disk Station的IP地址，```/newVolume/nas_folder1```为要挂载的共享文件夹的挂载路径。\n\n如果成功的话，进入```/mnt/nas_folder1```就可以看到NAS共享文件夹中的内容了。\n\n4. 错误：mount.nfs: Protocol not supported\n如果上一步中出现报错```mount.nfs: Protocol not supported```，那么很可能是NFS协议版本不支持导致的，需要在挂载时指定使用哪个NFS协议版本[4]：\n\n```\nmount -t nfs -o rw,nfsvers=3 <server_ip>:/newVolume/nas_folder1 /mnt/nas_folder1\n```\n\n以上的命令中将nfsvers指定为3(nfsvers=3)，结果挂载成功！\n\n## 进阶：端口与防火墙设置\n\nNFS服务需要使用2049及111端口[5]。所以，使用NFS需要在防火墙上开启以下端口：\n\n- tcp udp 2049\n- tcp udp 111\n\n此外，RPC服务的client会使用一个随机端口，这个随机端口也需要打开[5]。如果你使用的NAS是Synology Diskstation，该随机端口为：892 [6]。在防火墙中开启该端口即可。\n\n## 参考资料：\n\n[1] Linux 下的 NFS 系统简介，作者：JSON_NULL，来源：简书，链接：https://www.jianshu.com/p/f85c4371a43d\n[2] NAS （网络附属存储），来源：百度百科，链接：https://baike.baidu.com/item/NAS/3465615\n[3] CentOS下的NFS安裝、配置、启动及mount挂载方法，来源：IT阅读，链接：https://www.itread01.com/articles/1475832923.html\n[4] CentOS7挂载NFS报错:mount.nfs: Protocol not supported，来源：下一朵云，链接：https://www.orcy.net.cn/1687.html\n[5] Linux NFS服务器的安装与配置，作者：MoStart，来源：博客园，链接：https://www.cnblogs.com/powpoia/p/6553205.html\n[6] What network ports are used by DSM services? 来源：Synology Knowledge Center，链接：https://kb.synology.com/en-my/DSM/tutorial/What_network_ports_are_used_by_Synology_services', '<p>本文以CentOS7系统以及Synology Disk Station为例，讲解如何在CentOS7系统中挂载NAS共享文件夹。</p>\n<ul>\n<li>NFS：Network File System的缩写，即网络文件系统。功能是通过网络让不同的机器、不同的操作系统能够彼此分享文件，让应用程序在客户端通过网络访问位于服务器磁盘中的数据，是在类Unix系统间实现磁盘文件共享的一种方法[1]。</li><li>NAS: NAS（Network Attached Storage：网络附属存储）按字面简单说就是连接在网络上，具备资料存储功能的装置，因此也称为“网络存储器”。它是一种专用数据存储服务器[2]。</li></ul>\n<h2 id=\"h2-nasu8BBEu7F6Eu5171u4EABu6587u4EF6u5939u7684nfsu6743u9650\"><a class=\"reference-link\" name=\"NAS设置共享文件夹的NFS权限\"></a><span class=\"header-link octicon octicon-link\"></span>NAS设置共享文件夹的NFS权限</h2><p>在Synology Disk Station的管理界面中，打开“控制面板” &gt;&gt; “共享文件夹”，选中要挂载的文件夹，进行编辑。</p>\n<p>在该文件夹的“NFS权限”配置中，新增权限规则。将“服务器名称或IP地址”设置为CentOS7系统的IP地址，并根据实际需要进行其他相关设置。保存即可。</p>\n<p>记好该共享文件夹的挂载路径，例如：<code>/newVolume/nas_folder1</code></p>\n<h2 id=\"h2-centos7u7684u914Du7F6E\"><a class=\"reference-link\" name=\"CentOS7的配置\"></a><span class=\"header-link octicon octicon-link\"></span>CentOS7的配置</h2><p>以下命令来源：[3]</p>\n<ol>\n<li>安装nfs-utils</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">yum install nfs</span><span class=\"pun\">-</span><span class=\"pln\">utils</span></code></li></ol></pre>\n<ol start=\"2\">\n<li>创建挂载点</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">mkdir </span><span class=\"pun\">/</span><span class=\"pln\">mnt</span><span class=\"pun\">/</span><span class=\"pln\">nas_folder1</span></code></li></ol></pre>\n<ol start=\"3\">\n<li>进行挂载</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">mount </span><span class=\"pun\">-</span><span class=\"pln\">t nfs </span><span class=\"pun\">&lt;</span><span class=\"pln\">server_ip</span><span class=\"pun\">&gt;:/</span><span class=\"pln\">newVolume</span><span class=\"pun\">/</span><span class=\"pln\">nas_folder1 </span><span class=\"pun\">/</span><span class=\"pln\">mnt</span><span class=\"pun\">/</span><span class=\"pln\">nas_folder1</span></code></li></ol></pre>\n<p>其中，<code>&lt;servier_ip&gt;</code>需要被替换为Synology Disk Station的IP地址，<code>/newVolume/nas_folder1</code>为要挂载的共享文件夹的挂载路径。</p>\n<p>如果成功的话，进入<code>/mnt/nas_folder1</code>就可以看到NAS共享文件夹中的内容了。</p>\n<ol start=\"4\">\n<li>错误：mount.nfs: Protocol not supported<br>如果上一步中出现报错<code>mount.nfs: Protocol not supported</code>，那么很可能是NFS协议版本不支持导致的，需要在挂载时指定使用哪个NFS协议版本[4]：</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">mount </span><span class=\"pun\">-</span><span class=\"pln\">t nfs </span><span class=\"pun\">-</span><span class=\"pln\">o rw</span><span class=\"pun\">,</span><span class=\"pln\">nfsvers</span><span class=\"pun\">=</span><span class=\"lit\">3</span><span class=\"pln\"> </span><span class=\"str\">&lt;server_ip&gt;</span><span class=\"pun\">:</span><span class=\"str\">/newVolume/</span><span class=\"pln\">nas_folder1 </span><span class=\"pun\">/</span><span class=\"pln\">mnt</span><span class=\"pun\">/</span><span class=\"pln\">nas_folder1</span></code></li></ol></pre>\n<p>以上的命令中将nfsvers指定为3(nfsvers=3)，结果挂载成功！</p>\n<h2 id=\"h2-u8FDBu9636uFF1Au7AEFu53E3u4E0Eu9632u706Bu5899u8BBEu7F6E\"><a class=\"reference-link\" name=\"进阶：端口与防火墙设置\"></a><span class=\"header-link octicon octicon-link\"></span>进阶：端口与防火墙设置</h2><p>NFS服务需要使用2049及111端口[5]。所以，使用NFS需要在防火墙上开启以下端口：</p>\n<ul>\n<li>tcp udp 2049</li><li>tcp udp 111</li></ul>\n<p>此外，RPC服务的client会使用一个随机端口，这个随机端口也需要打开[5]。如果你使用的NAS是Synology Diskstation，该随机端口为：892 [6]。在防火墙中开启该端口即可。</p>\n<h2 id=\"h2-u53C2u8003u8D44u6599uFF1A\"><a class=\"reference-link\" name=\"参考资料：\"></a><span class=\"header-link octicon octicon-link\"></span>参考资料：</h2><p>[1] Linux 下的 NFS 系统简介，作者：JSON_NULL，来源：简书，链接：<a href=\"https://www.jianshu.com/p/f85c4371a43d\">https://www.jianshu.com/p/f85c4371a43d</a><br>[2] NAS （网络附属存储），来源：百度百科，链接：<a href=\"https://baike.baidu.com/item/NAS/3465615\">https://baike.baidu.com/item/NAS/3465615</a><br>[3] CentOS下的NFS安裝、配置、启动及mount挂载方法，来源：IT阅读，链接：<a href=\"https://www.itread01.com/articles/1475832923.html\">https://www.itread01.com/articles/1475832923.html</a><br>[4] CentOS7挂载NFS报错:mount.nfs: Protocol not supported，来源：下一朵云，链接：<a href=\"https://www.orcy.net.cn/1687.html\">https://www.orcy.net.cn/1687.html</a><br>[5] Linux NFS服务器的安装与配置，作者：MoStart，来源：博客园，链接：<a href=\"https://www.cnblogs.com/powpoia/p/6553205.html\">https://www.cnblogs.com/powpoia/p/6553205.html</a><br>[6] What network ports are used by DSM services? 来源：Synology Knowledge Center，链接：<a href=\"https://kb.synology.com/en-my/DSM/tutorial/What_network_ports_are_used_by_Synology_services\">https://kb.synology.com/en-my/DSM/tutorial/What_network_ports_are_used_by_Synology_services</a></p>\n', NULL, NULL, NULL, '', '2022-05-21T03:12:13+08:00', '100005W', '安宁', '2022-06-03T21:53:18+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-03T21:53:18+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1528, 10112, '10011', 'Database', 'database,SQL,MySQL,Navicat,RDBMS', 'deleted', '2022-05-23T14:10:54+08:00', 'IT Programming Training (Beginner Level) - Lesson 02: SQL (2)', NULL, '## Course Materials\n\n- Sample Data: click to download the [sample data](https://audio.fsll.org/English/ittraining/sample_data_database_learning-20220515.sql \"sample data\")\n- Documents:\n  - SQL Tutorial on W3Schools: https://www.w3schools.com/sql/default.asp\n  - MySQL Tutorial on W3Schools: https://www.w3schools.com/mysql/default.asp\n\n## Concepts\n\n- SQL: JOIN\n\n## Sample MySQL Statements\n\n1. Create a view ```teacher_student```: the classes and students each teacher is teaching\n\n```\nCREATE VIEW `teacher_student` AS select `teacher_class`.`teacherId` AS `teacherId`,`teacher_class`.`teacherName` AS `teacherName`,`teacher_class`.`subjectId` AS `subjectId`,`teacher_class`.`subject` AS `subject`,`teacher_class`.`subjectLevel` AS `subjectLevel`,`teacher_class`.`classId` AS `classId`,`student`.`studentId` AS `studentId`,`student`.`studentName` AS `studentName`,`student`.`gender` AS `gender` from (`teacher_class` join `student` on((`teacher_class`.`classId` = `student`.`classId`)));\n```\n\n2. Count how many students each teacher is teaching using the View ```teacher_student```:\n\n```\nSELECT teacherId, teacherName, COUNT(studentId) FROM `teacher_student` GROUP BY teacherId;\n```\n\n## Assignments\n1. Understand the concept of JOIN and different types of JOIN by reading the W3School tutorials.\n2. Understand the use of View.\n3. Practice different JOIN statements. Show your results in screenshots.', '<h2 id=\"h2-coursematerials\"><a class=\"reference-link\" name=\"Course Materials\"></a><span class=\"header-link octicon octicon-link\"></span>Course Materials</h2><ul>\n<li>Sample Data: click to download the <a title=\"sample data\" href=\"https://audio.fsll.org/English/ittraining/sample_data_database_learning-20220515.sql\">sample data</a></li><li>Documents:<ul>\n<li>SQL Tutorial on W3Schools: <a href=\"https://www.w3schools.com/sql/default.asp\">https://www.w3schools.com/sql/default.asp</a></li><li>MySQL Tutorial on W3Schools: <a href=\"https://www.w3schools.com/mysql/default.asp\">https://www.w3schools.com/mysql/default.asp</a></li></ul>\n</li></ul>\n<h2 id=\"h2-concepts\"><a class=\"reference-link\" name=\"Concepts\"></a><span class=\"header-link octicon octicon-link\"></span>Concepts</h2><ul>\n<li>SQL: JOIN</li></ul>\n<h2 id=\"h2-samplemysql20statements\"><a class=\"reference-link\" name=\"Sample MySQL Statements\"></a><span class=\"header-link octicon octicon-link\"></span>Sample MySQL Statements</h2><ol>\n<li>Create a view <code>teacher_student</code>: the classes and students each teacher is teaching</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">CREATE VIEW </span><span class=\"str\">`teacher_student`</span><span class=\"pln\"> AS </span><span class=\"kwd\">select</span><span class=\"pln\"> </span><span class=\"str\">`teacher_class`</span><span class=\"pun\">.</span><span class=\"str\">`teacherId`</span><span class=\"pln\"> AS </span><span class=\"str\">`teacherId`</span><span class=\"pun\">,</span><span class=\"str\">`teacher_class`</span><span class=\"pun\">.</span><span class=\"str\">`teacherName`</span><span class=\"pln\"> AS </span><span class=\"str\">`teacherName`</span><span class=\"pun\">,</span><span class=\"str\">`teacher_class`</span><span class=\"pun\">.</span><span class=\"str\">`subjectId`</span><span class=\"pln\"> AS </span><span class=\"str\">`subjectId`</span><span class=\"pun\">,</span><span class=\"str\">`teacher_class`</span><span class=\"pun\">.</span><span class=\"str\">`subject`</span><span class=\"pln\"> AS </span><span class=\"str\">`subject`</span><span class=\"pun\">,</span><span class=\"str\">`teacher_class`</span><span class=\"pun\">.</span><span class=\"str\">`subjectLevel`</span><span class=\"pln\"> AS </span><span class=\"str\">`subjectLevel`</span><span class=\"pun\">,</span><span class=\"str\">`teacher_class`</span><span class=\"pun\">.</span><span class=\"str\">`classId`</span><span class=\"pln\"> AS </span><span class=\"str\">`classId`</span><span class=\"pun\">,</span><span class=\"str\">`student`</span><span class=\"pun\">.</span><span class=\"str\">`studentId`</span><span class=\"pln\"> AS </span><span class=\"str\">`studentId`</span><span class=\"pun\">,</span><span class=\"str\">`student`</span><span class=\"pun\">.</span><span class=\"str\">`studentName`</span><span class=\"pln\"> AS </span><span class=\"str\">`studentName`</span><span class=\"pun\">,</span><span class=\"str\">`student`</span><span class=\"pun\">.</span><span class=\"str\">`gender`</span><span class=\"pln\"> AS </span><span class=\"str\">`gender`</span><span class=\"pln\"> </span><span class=\"kwd\">from</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`teacher_class`</span><span class=\"pln\"> join </span><span class=\"str\">`student`</span><span class=\"pln\"> on</span><span class=\"pun\">((</span><span class=\"str\">`teacher_class`</span><span class=\"pun\">.</span><span class=\"str\">`classId`</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`student`</span><span class=\"pun\">.</span><span class=\"str\">`classId`</span><span class=\"pun\">)));</span></code></li></ol></pre>\n<ol start=\"2\">\n<li>Count how many students each teacher is teaching using the View <code>teacher_student</code>:</li></ol>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">SELECT teacherId</span><span class=\"pun\">,</span><span class=\"pln\"> teacherName</span><span class=\"pun\">,</span><span class=\"pln\"> COUNT</span><span class=\"pun\">(</span><span class=\"pln\">studentId</span><span class=\"pun\">)</span><span class=\"pln\"> FROM </span><span class=\"str\">`teacher_student`</span><span class=\"pln\"> GROUP BY teacherId</span><span class=\"pun\">;</span></code></li></ol></pre>\n<h2 id=\"h2-assignments\"><a class=\"reference-link\" name=\"Assignments\"></a><span class=\"header-link octicon octicon-link\"></span>Assignments</h2><ol>\n<li>Understand the concept of JOIN and different types of JOIN by reading the W3School tutorials.</li><li>Understand the use of View.</li><li>Practice different JOIN statements. Show your results in screenshots.</li></ol>\n', NULL, NULL, NULL, '/materialRepo/video/En-it-training-level1-lesson02-2022-05-23.mp4', '2022-05-23T14:10:56+08:00', '100005W', '安宁', '2022-05-23T14:12:14+08:00', '100005W', '安宁', 'update', 'm3611F', 'Colin', '2022-05-25T15:13:45+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1529, 10113, '10004', '06框架进阶', '', 'public', '2022-05-23T18:55:39+08:00', '归档_resource_request_log数据', NULL, '## 背景\n\n- log：保留操作的信息（URL，method, HTTP request body, Access time, IP, user Id and user Name)，写入log中保存起来。\n\n_resource_request_log 用做记录 resource请求, 数据增量非常恐怖，_resource_request_log数据量大了后 会加大  resource请求接口的耗时。\n\n## _resource_request_log 归档\n\n> 归档策略: 每天凌晨3点 将日志归档到 项目log目录下\n**代码如下**:\n```javascript\n\'use strict\';\n// 每天定时归档 requestLog\n\nconst dayjs = require(\'dayjs\');\nconst { tableEnum } = require(\'../constant/constant\');\nconst fs = require(\'fs\');\nconst path = require(\'path\');\n\nmodule.exports = {\n  schedule: {\n    // immediate: true, // 应用启动后触发\n    cron: \'0 0 3 * * *\', // 每天 3 点执行\n    type: \'worker\', // worker: 只有一个worker执行\n    disable: false\n  },\n  // 定时任务的入口\n  async task (ctx) {\n    const startTime = new Date().getTime();\n    const { app } = ctx;\n    const { knex, logger } = app;\n\n    // 处理 3 天前的数据，即只处理小于 2 天前的数据\n    const handleDate = dayjs(new Date(new Date().setDate(new Date().getDate() - 3))).format(\'YYYY-MM-DD\');\n    const compareDate = dayjs(new Date(new Date().setDate(new Date().getDate() - 2))).format(\'YYYY-MM-DD\');\n    const stream = fs.createWriteStream(path.resolve(__dirname, `../../logs/${tableEnum._resource_request_log}_${handleDate}.log`));\n\n    async function writeLogFile(logs) {\n      logs.forEach(log => {\n        stream.write(JSON.stringify(log) + \'\\n\');\n      })\n    }\n\n    // 每次 select 最旧的 1000 条，每 5w 条数据换一个文件\n    for (let i = 0; i < 10000; i++) {\n      const last1000 = await knex(tableEnum._resource_request_log).limit(1000).select();\n      const olderThanDate = last1000.filter(o => o.createAt < compareDate);\n      if (olderThanDate.length <= 0) {\n        break;\n      }\n      logger.info(\'[archiveRequestLog.js] archive\', { count: olderThanDate.length });\n      await writeLogFile(olderThanDate)\n      await knex(tableEnum._resource_request_log).whereIn(\'id\', olderThanDate.map(o => o.id)).delete();\n    }\n    stream.end();\n\n    const endTime = new Date().getTime();\n    logger.info(\'[archiveRequestLog.js]\', { useTime: `${endTime - startTime}/ms` });\n  }\n\n};\n```', '<h2 id=\"h2-u80CCu666F\"><a class=\"reference-link\" name=\"背景\"></a><span class=\"header-link octicon octicon-link\"></span>背景</h2><ul>\n<li>log：保留操作的信息（URL，method, HTTP request body, Access time, IP, user Id and user Name)，写入log中保存起来。</li></ul>\n<p>_resource_request_log 用做记录 resource请求, 数据增量非常恐怖，_resource_request_log数据量大了后 会加大  resource请求接口的耗时。</p>\n<h2 id=\"h2-_resource_request_logu5F52u6863\"><a class=\"reference-link\" name=\"_resource_request_log 归档\"></a><span class=\"header-link octicon octicon-link\"></span>_resource_request_log 归档</h2><blockquote class=\"default\">\n<p>归档策略: 每天凌晨3点 将日志归档到 项目log目录下<br><strong>代码如下</strong>:</p>\n</blockquote>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-javascript\"><span class=\"str\">\'use strict\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"com\">// 每天定时归档 requestLog</span></code></li><li class=\"L2\"><code class=\"language-javascript\"></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> dayjs </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'dayjs\'</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> tableEnum </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'../constant/constant\'</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> fs </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'fs\'</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"kwd\">const</span><span class=\"pln\"> path </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'path\'</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-javascript\"></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">  schedule</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"com\">// immediate: true, // 应用启动后触发</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    cron</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'0 0 3 * * *\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// 每天 3 点执行</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    type</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'worker\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"com\">// worker: 只有一个worker执行</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    disable</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"com\">// 定时任务的入口</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">  async task </span><span class=\"pun\">(</span><span class=\"pln\">ctx</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> startTime </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">getTime</span><span class=\"pun\">();</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> app </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> ctx</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> knex</span><span class=\"pun\">,</span><span class=\"pln\"> logger </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> app</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-javascript\"></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"com\">// 处理 3 天前的数据，即只处理小于 2 天前的数据</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> handleDate </span><span class=\"pun\">=</span><span class=\"pln\"> dayjs</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">setDate</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">getDate</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"lit\">3</span><span class=\"pun\">))).</span><span class=\"pln\">format</span><span class=\"pun\">(</span><span class=\"str\">\'YYYY-MM-DD\'</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> compareDate </span><span class=\"pun\">=</span><span class=\"pln\"> dayjs</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">setDate</span><span class=\"pun\">(</span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">getDate</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"lit\">2</span><span class=\"pun\">))).</span><span class=\"pln\">format</span><span class=\"pun\">(</span><span class=\"str\">\'YYYY-MM-DD\'</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> stream </span><span class=\"pun\">=</span><span class=\"pln\"> fs</span><span class=\"pun\">.</span><span class=\"pln\">createWriteStream</span><span class=\"pun\">(</span><span class=\"pln\">path</span><span class=\"pun\">.</span><span class=\"pln\">resolve</span><span class=\"pun\">(</span><span class=\"pln\">__dirname</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">`../../</span><span class=\"pln\">logs</span><span class=\"pun\">/</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">tableEnum</span><span class=\"pun\">.</span><span class=\"pln\">_resource_request_log</span><span class=\"pun\">}</span><span class=\"pln\">_$</span><span class=\"pun\">{</span><span class=\"pln\">handleDate</span><span class=\"pun\">}.</span><span class=\"pln\">log</span><span class=\"pun\">`));</span></code></li><li class=\"L5\"><code class=\"language-javascript\"></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    async </span><span class=\"kwd\">function</span><span class=\"pln\"> writeLogFile</span><span class=\"pun\">(</span><span class=\"pln\">logs</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">      logs</span><span class=\"pun\">.</span><span class=\"pln\">forEach</span><span class=\"pun\">(</span><span class=\"pln\">log </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">        stream</span><span class=\"pun\">.</span><span class=\"pln\">write</span><span class=\"pun\">(</span><span class=\"pln\">JSON</span><span class=\"pun\">.</span><span class=\"pln\">stringify</span><span class=\"pun\">(</span><span class=\"pln\">log</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'\\n\'</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"pun\">})</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-javascript\"></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"com\">// 每次 select 最旧的 1000 条，每 5w 条数据换一个文件</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">for</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">let i </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">;</span><span class=\"pln\"> i </span><span class=\"pun\">&lt;</span><span class=\"pln\"> </span><span class=\"lit\">10000</span><span class=\"pun\">;</span><span class=\"pln\"> i</span><span class=\"pun\">++)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> last1000 </span><span class=\"pun\">=</span><span class=\"pln\"> await knex</span><span class=\"pun\">(</span><span class=\"pln\">tableEnum</span><span class=\"pun\">.</span><span class=\"pln\">_resource_request_log</span><span class=\"pun\">).</span><span class=\"pln\">limit</span><span class=\"pun\">(</span><span class=\"lit\">1000</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"kwd\">const</span><span class=\"pln\"> olderThanDate </span><span class=\"pun\">=</span><span class=\"pln\"> last1000</span><span class=\"pun\">.</span><span class=\"pln\">filter</span><span class=\"pun\">(</span><span class=\"pln\">o </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> o</span><span class=\"pun\">.</span><span class=\"pln\">createAt </span><span class=\"pun\">&lt;</span><span class=\"pln\"> compareDate</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">olderThanDate</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">&lt;=</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">        </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-javascript\"><span class=\"pln\">      </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pln\">      logger</span><span class=\"pun\">.</span><span class=\"pln\">info</span><span class=\"pun\">(</span><span class=\"str\">\'[archiveRequestLog.js] archive\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> count</span><span class=\"pun\">:</span><span class=\"pln\"> olderThanDate</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">});</span></code></li><li class=\"L0\"><code class=\"language-javascript\"><span class=\"pln\">      await writeLogFile</span><span class=\"pun\">(</span><span class=\"pln\">olderThanDate</span><span class=\"pun\">)</span></code></li><li class=\"L1\"><code class=\"language-javascript\"><span class=\"pln\">      await knex</span><span class=\"pun\">(</span><span class=\"pln\">tableEnum</span><span class=\"pun\">.</span><span class=\"pln\">_resource_request_log</span><span class=\"pun\">).</span><span class=\"pln\">whereIn</span><span class=\"pun\">(</span><span class=\"str\">\'id\'</span><span class=\"pun\">,</span><span class=\"pln\"> olderThanDate</span><span class=\"pun\">.</span><span class=\"pln\">map</span><span class=\"pun\">(</span><span class=\"pln\">o </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> o</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">)).</span><span class=\"kwd\">delete</span><span class=\"pun\">();</span></code></li><li class=\"L2\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-javascript\"><span class=\"pln\">    stream</span><span class=\"pun\">.</span><span class=\"pln\">end</span><span class=\"pun\">();</span></code></li><li class=\"L4\"><code class=\"language-javascript\"></code></li><li class=\"L5\"><code class=\"language-javascript\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> endTime </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Date</span><span class=\"pun\">().</span><span class=\"pln\">getTime</span><span class=\"pun\">();</span></code></li><li class=\"L6\"><code class=\"language-javascript\"><span class=\"pln\">    logger</span><span class=\"pun\">.</span><span class=\"pln\">info</span><span class=\"pun\">(</span><span class=\"str\">\'[archiveRequestLog.js]\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> useTime</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">endTime </span><span class=\"pun\">-</span><span class=\"pln\"> startTime</span><span class=\"pun\">}/</span><span class=\"pln\">ms</span><span class=\"pun\">`</span><span class=\"pln\"> </span><span class=\"pun\">});</span></code></li><li class=\"L7\"><code class=\"language-javascript\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-javascript\"></code></li><li class=\"L9\"><code class=\"language-javascript\"><span class=\"pun\">};</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-05-23T18:55:40+08:00', 'm3611F', 'Colin', '2022-06-12T05:02:40+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-12T05:02:40+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1530, 10114, '10004', '03前端开发参考', '', 'deleted', '2022-05-23T19:18:35+08:00', '服务端渲染', NULL, '## 服务端渲染\n\nhtml内可以直接 从 当前上文中获取数据\n- ctx.app.config\n- ...\n\n## 服务端渲染 之 pageHook\n\n', '<h2 id=\"h2-u670Du52A1u7AEFu6E32u67D3\"><a class=\"reference-link\" name=\"服务端渲染\"></a><span class=\"header-link octicon octicon-link\"></span>服务端渲染</h2><p>html内可以直接 从 当前上文中获取数据</p>\n<ul>\n<li>ctx.app.config</li><li>…</li></ul>\n<h2 id=\"h2-u670Du52A1u7AEFu6E32u67D3u4E4B20pagehook\"><a class=\"reference-link\" name=\"服务端渲染 之 pageHook\"></a><span class=\"header-link octicon octicon-link\"></span>服务端渲染 之 pageHook</h2>', NULL, NULL, NULL, '', '2022-05-23T19:18:35+08:00', 'm3611F', 'Colin', '2022-05-23T19:27:59+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-23T19:27:59+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1532, 10116, '10011', 'HTML', 'HTML,Javascript', 'draft', '2022-05-24T14:46:09+08:00', 'IT Programming Training (Beginner Level) - Lesson 02: HTML and Javascript Introduction', NULL, 'In the previous lessons, we have 1. \n\n\n## Basic Concepts\n\n### HTML\n\n### Javascript\n\n\n## Preparation For Subsequent Lessons\n\nBefore we proceed with the actual lessons, we need to do the following preparations:\n\n1. Read the documents on HTML and Javascript\n2. Install Software: Visual Studio Code, Google Chrome\n\n## Documents On HTML and Javascript\n\n- HTML Tutorial\n  - W3Schools: https://www.w3schools.com/html/default.asp\n- Javascript Tutorial\n  - W3Schools: https://www.w3schools.com/js/default.asp', '<p>In the previous lessons, we have 1. </p>\n<h2 id=\"h2-basicconcepts\"><a class=\"reference-link\" name=\"Basic Concepts\"></a><span class=\"header-link octicon octicon-link\"></span>Basic Concepts</h2><h3 id=\"h3-html\"><a class=\"reference-link\" name=\"HTML\"></a><span class=\"header-link octicon octicon-link\"></span>HTML</h3><h3 id=\"h3-javascript\"><a class=\"reference-link\" name=\"Javascript\"></a><span class=\"header-link octicon octicon-link\"></span>Javascript</h3><h2 id=\"h2-preparationfor20subsequent20lessons\"><a class=\"reference-link\" name=\"Preparation For Subsequent Lessons\"></a><span class=\"header-link octicon octicon-link\"></span>Preparation For Subsequent Lessons</h2><p>Before we proceed with the actual lessons, we need to do the following preparations:</p>\n<ol>\n<li>Read the documents on HTML and Javascript</li><li>Install Software: Visual Studio Code, Google Chrome</li></ol>\n<h2 id=\"h2-documentson20html20and20javascript\"><a class=\"reference-link\" name=\"Documents On HTML and Javascript\"></a><span class=\"header-link octicon octicon-link\"></span>Documents On HTML and Javascript</h2><ul>\n<li>HTML Tutorial<ul>\n<li>W3Schools: <a href=\"https://www.w3schools.com/html/default.asp\">https://www.w3schools.com/html/default.asp</a></li></ul>\n</li><li>Javascript Tutorial<ul>\n<li>W3Schools: <a href=\"https://www.w3schools.com/js/default.asp\">https://www.w3schools.com/js/default.asp</a></li></ul>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-05-24T14:35:47+08:00', '100005W', '安宁', '2022-05-24T15:21:24+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-05-24T15:21:24+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1533, 10117, '10005', '01快速开始', '', 'login', '2022-05-24T20:00:51+08:00', '002启动(部署)多星', NULL, '## 基础环境\n\n- 操作系统：Windows/macOS/Linux\n- 运行环境：Node.js v16.x\n- 数据库环境：Mysql5.7+\n\n## 本地开发 启动多星\n\n1. clone 代码到本地: `git clone https://github.com/fsll-tech/duoxing_v5`\n1. 创建数据库 并 初始化数据\n    ```bash\n    create database `duoxing` default character set utf8mb4 collate utf8mb4_bin;\n    use duoxing;\n    # 执行 duoxing_v5/server/sql/init.sql\n    ```\n1. 安装依赖\n   ```bash\n   cd duoxing_v5/server\n   npm i\n   ```\n1. 创建本地(local)配置文件\n   ```bash\n   cd duoxing_v5/server\n   cp ./config/config.local.example.js config/config.local.js\n   # 修改数据库配置\n   ```\n1. 启动项目\n   ```bash\n   cd duoxing_v5/server\n   npm run dev\n   ```\n1. 打开浏览器访问 http://127.0.0.1:8083  用户名: admin01 密码: 123456\n\n## 线上/服务器 启动多星\n\n1. clone 代码到本地: `git clone https://github.com/fsll-tech/duoxing_v5`\n1. 创建数据库 并 初始化数据\n    ```bash\n    create database `duoxing_v5` default character set utf8mb4 collate utf8mb4_bin;\n    use duoxing_v5;\n    # 执行 duoxing_v5/server/sql/init.sql\n    ```\n1. [安装redis](https://www.runoob.com/redis/redis-install.html) 并 配置密码\n1. 创建线上(prod)配置文件\n   ```bash\n   cd duoxing_v5/server\n   cp ./config/config.prod.example.js config/config.prod.js\n   # 修改redis 配置\n   socketIO: {\n      // 多work模式下需要 启用 redis adapter\n      redis: {\n        host: \"127.0.0.1\",\n        port: \"6379\",\n        password: \'123456\',\n        db: 0,\n      },\n    },\n   # 修改数据库配置\n   ```\n1. 启动项目\n   ```bash\n   cd duoxing_v5/server\n   npm run start\n   #  查看 duoxing_v5/server/logs/duoxing-web.log\n   ```\n1. nginx 配置域名映射\n   ```conf\n    # 将favicon.ico 上传到 /www/wwwroot/${domain}/\n    location = /favicon.ico {\n      root  /www/wwwroot/${domain};\n    }\n\n    location / {\n        proxy_pass http://127.0.0.1:8083;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header REMOTE-HOST $remote_addr;\n        # wss 支持\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n   ```\n1. 打开浏览器访问 https://${domain}  用户名: admin01 密码: 123456', '<h2 id=\"h2-u57FAu7840u73AFu5883\"><a class=\"reference-link\" name=\"基础环境\"></a><span class=\"header-link octicon octicon-link\"></span>基础环境</h2><ul>\n<li>操作系统：Windows/macOS/Linux</li><li>运行环境：Node.js v16.x</li><li>数据库环境：Mysql5.7+</li></ul>\n<h2 id=\"h2-u672Cu5730u5F00u53D1u542Fu52A8u591Au661F\"><a class=\"reference-link\" name=\"本地开发 启动多星\"></a><span class=\"header-link octicon octicon-link\"></span>本地开发 启动多星</h2><ol>\n<li>clone 代码到本地: <code>git clone https://github.com/fsll-tech/duoxing_v5</code></li><li>创建数据库 并 初始化数据<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">create database </span><span class=\"str\">`duoxing`</span><span class=\"pln\"> default character </span><span class=\"kwd\">set</span><span class=\"pln\"> utf8mb4 collate utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">use duoxing</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"com\"># 执行 duoxing_v5/server/sql/init.sql</span></code></li></ol></pre>\n</li><li>安装依赖<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">cd duoxing_v5</span><span class=\"pun\">/</span><span class=\"pln\">server</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">npm i</span></code></li></ol></pre>\n</li><li>创建本地(local)配置文件<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">cd duoxing_v5</span><span class=\"pun\">/</span><span class=\"pln\">server</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">cp </span><span class=\"pun\">./</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"kwd\">local</span><span class=\"pun\">.</span><span class=\"pln\">example</span><span class=\"pun\">.</span><span class=\"pln\">js config</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"kwd\">local</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"com\"># 修改数据库配置</span></code></li></ol></pre>\n</li><li>启动项目<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">cd duoxing_v5</span><span class=\"pun\">/</span><span class=\"pln\">server</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">npm run dev</span></code></li></ol></pre>\n</li><li>打开浏览器访问 <a href=\"http://127.0.0.1:8083\">http://127.0.0.1:8083</a>  用户名: admin01 密码: 123456</li></ol>\n<h2 id=\"h2-u7EBFu4E0A/u670Du52A1u5668u542Fu52A8u591Au661F\"><a class=\"reference-link\" name=\"线上/服务器 启动多星\"></a><span class=\"header-link octicon octicon-link\"></span>线上/服务器 启动多星</h2><ol>\n<li><p>clone 代码到本地: <code>git clone https://github.com/fsll-tech/duoxing_v5</code></p>\n</li><li><p>创建数据库 并 初始化数据</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">create database </span><span class=\"str\">`duoxing_v5`</span><span class=\"pln\"> default character </span><span class=\"kwd\">set</span><span class=\"pln\"> utf8mb4 collate utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">use duoxing_v5</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"com\"># 执行 duoxing_v5/server/sql/init.sql</span></code></li></ol></pre>\n</li><li><p><a href=\"https://www.runoob.com/redis/redis-install.html\">安装redis</a> 并 配置密码</p>\n</li><li><p>创建线上(prod)配置文件</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">cd duoxing_v5</span><span class=\"pun\">/</span><span class=\"pln\">server</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">cp </span><span class=\"pun\">./</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"pln\">prod</span><span class=\"pun\">.</span><span class=\"pln\">example</span><span class=\"pun\">.</span><span class=\"pln\">js config</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">.</span><span class=\"pln\">prod</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"com\"># 修改redis 配置</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">socketIO</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">多</span><span class=\"pln\">work</span><span class=\"pun\">模式下需要</span><span class=\"pln\"> </span><span class=\"pun\">启用</span><span class=\"pln\"> redis adapter</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">   redis</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     host</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"127.0.0.1\"</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     port</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"6379\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'123456\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">     db</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"com\"># 修改数据库配置</span></code></li></ol></pre>\n</li><li><p>启动项目</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">cd duoxing_v5</span><span class=\"pun\">/</span><span class=\"pln\">server</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">npm run start</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"com\">#  查看 duoxing_v5/server/logs/duoxing-web.log</span></code></li></ol></pre>\n</li><li><p>nginx 配置域名映射</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-conf\"><span class=\"pln\"> </span><span class=\"com\"># 将favicon.ico 上传到 /www/wwwroot/${domain}/</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pln\"> location </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">/</span><span class=\"pln\">favicon</span><span class=\"pun\">.</span><span class=\"pln\">ico </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">   root  </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">wwwroot</span><span class=\"pun\">/</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">domain</span><span class=\"pun\">};</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-conf\"></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\"> location </span><span class=\"pun\">/</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-conf\"><span class=\"pln\">     proxy_pass http</span><span class=\"pun\">:</span><span class=\"com\">//127.0.0.1:8083;</span></code></li><li class=\"L7\"><code class=\"language-conf\"><span class=\"pln\">     proxy_set_header </span><span class=\"typ\">Host</span><span class=\"pln\"> $host</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-conf\"><span class=\"pln\">     proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Real</span><span class=\"pun\">-</span><span class=\"pln\">IP $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-conf\"><span class=\"pln\">     proxy_set_header X</span><span class=\"pun\">-</span><span class=\"typ\">Forwarded</span><span class=\"pun\">-</span><span class=\"typ\">For</span><span class=\"pln\"> $proxy_add_x_forwarded_for</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-conf\"><span class=\"pln\">     proxy_set_header REMOTE</span><span class=\"pun\">-</span><span class=\"pln\">HOST $remote_addr</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-conf\"><span class=\"pln\">     </span><span class=\"com\"># wss 支持</span></code></li><li class=\"L2\"><code class=\"language-conf\"><span class=\"pln\">     proxy_http_version </span><span class=\"lit\">1.1</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-conf\"><span class=\"pln\">     proxy_set_header </span><span class=\"typ\">Upgrade</span><span class=\"pln\"> $http_upgrade</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-conf\"><span class=\"pln\">     proxy_set_header </span><span class=\"typ\">Connection</span><span class=\"pln\"> </span><span class=\"str\">\"upgrade\"</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-conf\"><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li></ol></pre>\n</li><li><p>打开浏览器访问 https://${domain}  用户名: admin01 密码: 123456</p>\n</li></ol>\n', NULL, NULL, NULL, '', '2022-05-24T20:00:51+08:00', 'm3611F', 'Colin', '2022-06-13T23:07:45+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-13T23:07:45+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1534, 10118, '10005', '01快速开始', '', 'login', '2022-05-24T20:01:17+08:00', '001多星功能介绍', NULL, '## 多星功能介绍\n\n> [多星在线Demo](https://duoxing-v5.openjianghu.org/)\n\n- 即时聊天\n	- 单聊\n	- 群聊\n- 多星机器人\n	- 单聊/群聊机器人\n	- 小程序机器人\n	- 数据交互器人\n', '<h2 id=\"h2-u591Au661Fu529Fu80FDu4ECBu7ECD\"><a class=\"reference-link\" name=\"多星功能介绍\"></a><span class=\"header-link octicon octicon-link\"></span>多星功能介绍</h2><blockquote class=\"default\">\n<p><a href=\"https://duoxing-v5.openjianghu.org/\">多星在线Demo</a></p>\n</blockquote>\n<ul>\n<li>即时聊天<ul>\n<li>单聊</li><li>群聊</li></ul>\n</li><li>多星机器人<ul>\n<li>单聊/群聊机器人</li><li>小程序机器人</li><li>数据交互器人</li></ul>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-05-24T20:01:17+08:00', 'm3611F', 'Colin', '2022-06-15T16:43:34+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-15T16:43:34+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1535, 10119, '10005', '02开发指南', '', 'login', '2022-05-24T20:42:20+08:00', '001多星架构', NULL, '## 架构\n\n- server\n	- View: 页面\n	- Http服务: 提供登录、个人信息、群组相关\n	- Socket服务: 实时消息(单聊&群聊)\n- app(duoxing_flutter_v5)\n	- Webview: 一个浏览器，用做加载 **上面的View 页面**\n	- App原生: 文件存储 & 后台保活 & 通知\n\n\n![多星架构2.png](/upload/articleMaterial/10119/1655131576913_多星架构2.png)\n\n\n## 项目目录\n\n==待完善==\n\n```bash\n├── README.md\n├── duoxing_flutter_v5\n│   ├── README.md\n│   ├── analysis_options.yaml\n│   ├── android\n│   ├── assets\n│   ├── build\n│   ├── buildApk.sh\n│   ├── coverage\n│   ├── ios\n│   ├── lib\n│   ├── packages\n│   ├── pubspec.lock\n│   └── pubspec.yaml\n└── server\n    ├── README.md\n    ├── app\n    ├── app.js\n    ├── config\n    ├── jsconfig.json\n    ├── logs\n    ├── multipartTmp\n    ├── node_modules\n    ├── package-lock.json\n    ├── package.json\n    ├── run\n    ├── sql\n    ├── typings\n    └── upload\n```', '<h2 id=\"h2-u67B6u6784\"><a class=\"reference-link\" name=\"架构\"></a><span class=\"header-link octicon octicon-link\"></span>架构</h2><ul>\n<li>server<ul>\n<li>View: 页面</li><li>Http服务: 提供登录、个人信息、群组相关</li><li>Socket服务: 实时消息(单聊&amp;群聊)</li></ul>\n</li><li>app(duoxing_flutter_v5)<ul>\n<li>Webview: 一个浏览器，用做加载 <strong>上面的View 页面</strong></li><li>App原生: 文件存储 &amp; 后台保活 &amp; 通知</li></ul>\n</li></ul>\n<p><img alt=\"多星架构2.png\" title=\"null\" src=\"/upload/articleMaterial/10119/1655131576913_多星架构2.png\"></p>\n<h2 id=\"h2-u9879u76EEu76EEu5F55\"><a class=\"reference-link\" name=\"项目目录\"></a><span class=\"header-link octicon octicon-link\"></span>项目目录</h2><p><mark>待完善</mark></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> README</span><span class=\"pun\">.</span><span class=\"pln\">md</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> duoxing_flutter_v5</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> README</span><span class=\"pun\">.</span><span class=\"pln\">md</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> analysis_options</span><span class=\"pun\">.</span><span class=\"pln\">yaml</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> android</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> assets</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> build</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> buildApk</span><span class=\"pun\">.</span><span class=\"pln\">sh</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> coverage</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> ios</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> lib</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> packages</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> pubspec</span><span class=\"pun\">.</span><span class=\"pln\">lock</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> pubspec</span><span class=\"pun\">.</span><span class=\"pln\">yaml</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">└──</span><span class=\"pln\"> server</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> README</span><span class=\"pun\">.</span><span class=\"pln\">md</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> app</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> app</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> config</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> jsconfig</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> logs</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> multipartTmp</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> node_modules</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> package</span><span class=\"pun\">-</span><span class=\"pln\">lock</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> package</span><span class=\"pun\">.</span><span class=\"pln\">json</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> run</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> sql</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> typings</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">└──</span><span class=\"pln\"> upload</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-05-24T20:42:20+08:00', 'm3611F', 'Colin', '2022-06-14T16:03:33+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-14T16:03:33+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1536, 10120, '10005', '02开发指南', '', 'login', '2022-05-24T20:42:38+08:00', '002多星Server开发指南', NULL, '## 服务端 之 聊天相关代码\n\n==待完善==\n\n```bash\napp\n├── common\n│   ├── commonUtil.js\n│   └── fileUtil.js\n├── constant\n│   ├── constant.js\n│   └── error.js\n├── controller\n│   └── README.md\n├── schedule\n│   ├── archiveRequestLog.js\n│   └── syncChatSession.js\n└── service\n    ├── data\n    │   └── duoxingMessage.js\n    ├── duoxingFriend.js\n    ├── duoxingGroup.js\n    ├── duoxingMessage.js\n    ├── duoxingSocket.js\n    ├── duoxingUser.js\n    ├── recordHistory.js\n    ├── userFriendManagement.js\n    └── userManagement.js\n```\n\n\n## View页面 之 聊天相关代码\n\n==待完善==\n\n```bash\nview\n├── common\n│   ├── appMessage.html\n│   ├── socket.html\n│   ├── utils.html\n├── components\n│   ├── common\n│   │   ├── clipboard.html\n│   │   ├── dxImage.html\n│   │   ├── emotion.html\n│   │   ├── fileUpload.html\n│   │   └── imgViewer.html\n│   ├── dialog\n│   │   ├── accountDialog.html\n│   │   ├── editPasswordDialog.html\n│   │   ├── editUserAvatarDialog.html\n│   │   ├── inputDialog.html\n│   │   ├── requestFriendDialog.html\n│   │   ├── selectFriend.html\n│   │   └── voiceCallDialog.html\n│   ├── message\n│   │   ├── cardMessage.html\n│   │   ├── fileMessage.html\n│   │   ├── imageMessage.html\n│   │   ├── textMessage.html\n│   │   ├── videoMessage.html\n│   │   └── voiceMessage.html\n│   └── widget\n│       ├── leftBotWidget.html\n│       ├── leftChatSessionWidget.html\n│       ├── leftDrawerMenuWidget.html\n│       ├── leftFriendWidget.html\n│       ├── leftGroupWidget.html\n│       ├── leftNoticeWidget.html\n│       ├── leftPanelWidget.html\n│       ├── leftUserWidget.html\n│       ├── middleChatInputWidget.html\n│       ├── middleChatMessageWidget.html\n│       ├── middlePanelWidget.html\n│       ├── mobileTopBarWidget.html\n│       └── rightPanelWidget.html\n├── page\n│   ├── index.html\n└── template\n    └── duoxingTemplate.html\n```\n\n## View页面 与 多星Server Http通信\n\nHttp通信 主要使用 jianghuAxios 调用 后端的`POST /duoxing/resource` 接口, 来实现:\n- 用户基本功能: 登录、获取用户信息\n- 聊天基本功能: 好友列表、群组列表、聊天会话列表、聊天历史、以及一些 群组操作/好友操作\n\n## View页面 与 多星Server Socket通信\n\nSocket通信 主要使用 `/view/common/socket.html`与 后端的`ws:127.0.0.1:8084/duoxing/socket.io`进行通信, socket.html中主要 socket事件:\n- connect: 建立连接\n- disconnect: 断开连接\n- resource: 接收服务端 发过来的socket请求. 备注: 对应的服务端也 有一个 resource 来接收客户端发过来的socket请求\n\nview页面 主要使用`await window.socket.emitMsg()` 向后端发送 resource 请求, 来实现:\n- 实时聊天消息\n- 好友操作/群组操作 触发的 实时消息', '<h2 id=\"h2-u670Du52A1u7AEFu4E4B20u804Au5929u76F8u5173u4EE3u7801\"><a class=\"reference-link\" name=\"服务端 之 聊天相关代码\"></a><span class=\"header-link octicon octicon-link\"></span>服务端 之 聊天相关代码</h2><p><mark>待完善</mark></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">app</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> common</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> commonUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> fileUtil</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> constant</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> constant</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> error</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> controller</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> README</span><span class=\"pun\">.</span><span class=\"pln\">md</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> schedule</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> archiveRequestLog</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> syncChatSession</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">└──</span><span class=\"pln\"> service</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> data</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> duoxingMessage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> duoxingFriend</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> duoxingGroup</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> duoxingMessage</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> duoxingSocket</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> duoxingUser</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> recordHistory</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">├──</span><span class=\"pln\"> userFriendManagement</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">└──</span><span class=\"pln\"> userManagement</span><span class=\"pun\">.</span><span class=\"pln\">js</span></code></li></ol></pre>\n<h2 id=\"h2-viewu9875u9762u4E4B20u804Au5929u76F8u5173u4EE3u7801\"><a class=\"reference-link\" name=\"View页面 之 聊天相关代码\"></a><span class=\"header-link octicon octicon-link\"></span>View页面 之 聊天相关代码</h2><p><mark>待完善</mark></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">view</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> common</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> appMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> socket</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> utils</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> components</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> common</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> clipboard</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> dxImage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> emotion</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> fileUpload</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> imgViewer</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> dialog</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> accountDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> editPasswordDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> editUserAvatarDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> inputDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> requestFriendDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> selectFriend</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> voiceCallDialog</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> message</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> cardMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> fileMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> imageMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> textMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> videoMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> voiceMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">└──</span><span class=\"pln\"> widget</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftBotWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftChatSessionWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftDrawerMenuWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftFriendWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftGroupWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftNoticeWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftPanelWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> leftUserWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> middleChatInputWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> middleChatMessageWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> middlePanelWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">├──</span><span class=\"pln\"> mobileTopBarWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">       </span><span class=\"pun\">└──</span><span class=\"pln\"> rightPanelWidget</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">├──</span><span class=\"pln\"> page</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">│</span><span class=\"pln\">   </span><span class=\"pun\">├──</span><span class=\"pln\"> index</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pun\">└──</span><span class=\"pln\"> template</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">└──</span><span class=\"pln\"> duoxingTemplate</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li></ol></pre>\n<h2 id=\"h2-viewu9875u9762u4E0E20u591Au661Fserver20httpu901Au4FE1\"><a class=\"reference-link\" name=\"View页面 与 多星Server Http通信\"></a><span class=\"header-link octicon octicon-link\"></span>View页面 与 多星Server Http通信</h2><p>Http通信 主要使用 jianghuAxios 调用 后端的<code>POST /duoxing/resource</code> 接口, 来实现:</p>\n<ul>\n<li>用户基本功能: 登录、获取用户信息</li><li>聊天基本功能: 好友列表、群组列表、聊天会话列表、聊天历史、以及一些 群组操作/好友操作</li></ul>\n<h2 id=\"h2-viewu9875u9762u4E0E20u591Au661Fserver20socketu901Au4FE1\"><a class=\"reference-link\" name=\"View页面 与 多星Server Socket通信\"></a><span class=\"header-link octicon octicon-link\"></span>View页面 与 多星Server Socket通信</h2><p>Socket通信 主要使用 <code>/view/common/socket.html</code>与 后端的<code>ws:127.0.0.1:8084/duoxing/socket.io</code>进行通信, socket.html中主要 socket事件:</p>\n<ul>\n<li>connect: 建立连接</li><li>disconnect: 断开连接</li><li>resource: 接收服务端 发过来的socket请求. 备注: 对应的服务端也 有一个 resource 来接收客户端发过来的socket请求</li></ul>\n<p>view页面 主要使用<code>await window.socket.emitMsg()</code> 向后端发送 resource 请求, 来实现:</p>\n<ul>\n<li>实时聊天消息</li><li>好友操作/群组操作 触发的 实时消息</li></ul>\n', NULL, NULL, NULL, '', '2022-05-24T20:42:38+08:00', 'm3611F', 'Colin', '2022-06-14T16:03:17+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-14T16:03:17+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1537, 10121, '10005', '02开发指南', '', 'login', '2022-05-24T20:43:55+08:00', '003多星App开发指南', NULL, '## Webview 与 App原生 通信\n\n> Flutter === 原生\n\nWebview就是一个浏览器\n\n我们使用 Flutter+Webview(原生+ H5)的形式来 做APP\n\n某些业务场景  Webview需要调用原生原生的 api, E.g: 选择手机上的文件，登录状态持久化 等等. 为此我们在Webview 《====》App原生 之间建立了一个 双向的通信\n\n\n\n相关代码:\n```bash\n- duoxing_v5/server/app/view/common/appMessage.html\n	- `appPostMessage()` ===> `DuoxingApp.postMessage(`${JSON.stringify(params)}`);`\n- duoxing_v5/duoxing_flutter_v5/lib/Utils/LocalStorageUtil.dart & JavascriptUtil.dart\n	- `JavascriptChannel messagePost(BuildContext context)`\n```\n\n## App原生 与 多星Server建立 Socket通信\n\n由于Webview 不能实时保活，手机锁屏后，Webview内的 View页面就接收不到 实时的聊天消息\n\n因此我们 使用 App原生 与 多星Server建立 Socket通信，来保证用户能实时收到聊天消息\n\n相关代码:\n```bash\n- duoxing_flutter_v5/lib/Utils/SocketUtil.dart\n```', '<h2 id=\"h2-webviewu4E0E20appu539Fu751F20u901Au4FE1\"><a class=\"reference-link\" name=\"Webview 与 App原生 通信\"></a><span class=\"header-link octicon octicon-link\"></span>Webview 与 App原生 通信</h2><blockquote class=\"default\">\n<p>Flutter === 原生</p>\n</blockquote>\n<p>Webview就是一个浏览器</p>\n<p>我们使用 Flutter+Webview(原生+ H5)的形式来 做APP</p>\n<p>某些业务场景  Webview需要调用原生原生的 api, E.g: 选择手机上的文件，登录状态持久化 等等. 为此我们在Webview 《====》App原生 之间建立了一个 双向的通信</p>\n<p>相关代码:</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">-</span><span class=\"pln\"> duoxing_v5</span><span class=\"pun\">/</span><span class=\"pln\">server</span><span class=\"pun\">/</span><span class=\"pln\">app</span><span class=\"pun\">/</span><span class=\"pln\">view</span><span class=\"pun\">/</span><span class=\"pln\">common</span><span class=\"pun\">/</span><span class=\"pln\">appMessage</span><span class=\"pun\">.</span><span class=\"pln\">html</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"str\">`appPostMessage()`</span><span class=\"pln\"> </span><span class=\"pun\">===&gt;</span><span class=\"pln\"> </span><span class=\"str\">`DuoxingApp.postMessage(`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">JSON</span><span class=\"pun\">.</span><span class=\"pln\">stringify</span><span class=\"pun\">(</span><span class=\"pln\">params</span><span class=\"pun\">)}</span><span class=\"str\">`);`</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pun\">-</span><span class=\"pln\"> duoxing_v5</span><span class=\"pun\">/</span><span class=\"pln\">duoxing_flutter_v5</span><span class=\"pun\">/</span><span class=\"pln\">lib</span><span class=\"pun\">/</span><span class=\"typ\">Utils</span><span class=\"pun\">/</span><span class=\"typ\">LocalStorageUtil</span><span class=\"pun\">.</span><span class=\"pln\">dart </span><span class=\"pun\">&amp;</span><span class=\"pln\"> </span><span class=\"typ\">JavascriptUtil</span><span class=\"pun\">.</span><span class=\"pln\">dart</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">-</span><span class=\"pln\"> </span><span class=\"str\">`JavascriptChannel messagePost(BuildContext context)`</span></code></li></ol></pre>\n<h2 id=\"h2-appu539Fu751Fu4E0E20u591Au661Fserveru5EFAu7ACB20socketu901Au4FE1\"><a class=\"reference-link\" name=\"App原生 与 多星Server建立 Socket通信\"></a><span class=\"header-link octicon octicon-link\"></span>App原生 与 多星Server建立 Socket通信</h2><p>由于Webview 不能实时保活，手机锁屏后，Webview内的 View页面就接收不到 实时的聊天消息</p>\n<p>因此我们 使用 App原生 与 多星Server建立 Socket通信，来保证用户能实时收到聊天消息</p>\n<p>相关代码:</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">-</span><span class=\"pln\"> duoxing_flutter_v5</span><span class=\"pun\">/</span><span class=\"pln\">lib</span><span class=\"pun\">/</span><span class=\"typ\">Utils</span><span class=\"pun\">/</span><span class=\"typ\">SocketUtil</span><span class=\"pun\">.</span><span class=\"pln\">dart</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-05-24T20:43:56+08:00', 'm3611F', 'Colin', '2022-06-14T16:06:32+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-14T16:06:32+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1538, 10122, '10005', '02开发指南', '', 'deleted', '2022-05-24T20:44:18+08:00', '003Flutter开发 之 Socket连接', NULL, NULL, NULL, NULL, NULL, NULL, '', '2022-05-24T20:44:18+08:00', 'm3611F', 'Colin', '2022-05-24T20:44:18+08:00', 'm3611F', 'Colin', 'update', 'm3611F', 'Colin', '2022-06-14T10:22:44+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1539, 10123, '10005', '04配置指南', '', 'login', '2022-05-24T20:44:47+08:00', '002默认头像', NULL, '## 配置默认头像\n\n\n\n## 使用默认头像', '<h2 id=\"h2-u914Du7F6Eu9ED8u8BA4u5934u50CF\"><a class=\"reference-link\" name=\"配置默认头像\"></a><span class=\"header-link octicon octicon-link\"></span>配置默认头像</h2><h2 id=\"h2-u4F7Fu7528u9ED8u8BA4u5934u50CF\"><a class=\"reference-link\" name=\"使用默认头像\"></a><span class=\"header-link octicon octicon-link\"></span>使用默认头像</h2>', NULL, NULL, NULL, '', '2022-05-24T20:44:47+08:00', 'm3611F', 'Colin', '2022-06-18T09:07:29+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-18T09:07:29+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1540, 10124, '10005', '04配置指南', '', 'login', '2022-05-24T20:45:02+08:00', '003多worker之redis-adapter配置', NULL, '## 背景\n\n生产环境使用`npm run start`启动的项目是 多wroker模式, 对应的每个worker都会 初始化一个socket server.\n\n为了解决 多worker之间 socket 通信的问题, 我们引入 `@socket.io/redis-adapter`\n\n## 环境\n\n- OS: Linux/Mac/Windows\n- redis: 6.x\n\n## 开启redis-adapter\n\n```bash\n    # 👉 /server/config/config.prod.js\n    socketIO: {\n      redis: {\n        host: \"127.0.0.1\",\n        port: \"6379\",\n        // password: \'\',\n        db: 0,\n      },\n    },\n```\n\n', '<h2 id=\"h2-u80CCu666F\"><a class=\"reference-link\" name=\"背景\"></a><span class=\"header-link octicon octicon-link\"></span>背景</h2><p>生产环境使用<code>npm run start</code>启动的项目是 多wroker模式, 对应的每个worker都会 初始化一个socket server.</p>\n<p>为了解决 多worker之间 socket 通信的问题, 我们引入 <code>@socket.io/redis-adapter</code></p>\n<h2 id=\"h2-u73AFu5883\"><a class=\"reference-link\" name=\"环境\"></a><span class=\"header-link octicon octicon-link\"></span>环境</h2><ul>\n<li>OS: Linux/Mac/Windows</li><li>redis: 6.x</li></ul>\n<h2 id=\"h2-u5F00u542Fredis-adapter\"><a class=\"reference-link\" name=\"开启redis-adapter\"></a><span class=\"header-link octicon octicon-link\"></span>开启redis-adapter</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"com\"># 👉 /server/config/config.prod.js</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    socketIO</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">      redis</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">        host</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"127.0.0.1\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">        port</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"6379\"</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">        </span><span class=\"pun\">//</span><span class=\"pln\"> password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">        db</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">0</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">      </span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-05-24T20:45:02+08:00', 'm3611F', 'Colin', '2022-06-18T09:22:44+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-18T09:22:44+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1541, 10125, '10005', '04配置指南', '', 'login', '2022-05-24T20:45:14+08:00', '004定时任务之聊天会话同步', NULL, '## 背景\n\n## 聊天会话同步 开启', '<h2 id=\"h2-u80CCu666F\"><a class=\"reference-link\" name=\"背景\"></a><span class=\"header-link octicon octicon-link\"></span>背景</h2><h2 id=\"h2-u804Au5929u4F1Au8BDDu540Cu6B65u5F00u542F\"><a class=\"reference-link\" name=\"聊天会话同步 开启\"></a><span class=\"header-link octicon octicon-link\"></span>聊天会话同步 开启</h2>', NULL, NULL, NULL, '', '2022-05-24T20:45:14+08:00', 'm3611F', 'Colin', '2022-06-18T09:26:44+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-18T09:26:44+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1542, 10126, '10005', '04配置指南', '', 'login', '2022-05-24T20:45:29+08:00', '005APP打包配置', NULL, '## 环境\n\n- android studio\n- flutter: 2.10+\n	> flutter 3.0  打包出来的apk，华为手机(android)webview 会闪退\n\n\n## 打包相关配置\n\n## 打包', '<h2 id=\"h2-u73AFu5883\"><a class=\"reference-link\" name=\"环境\"></a><span class=\"header-link octicon octicon-link\"></span>环境</h2><ul>\n<li>android studio</li><li>flutter: 2.10+<blockquote class=\"default\">\n<p>flutter 3.0  打包出来的apk，华为手机(android)webview 会闪退</p>\n</blockquote>\n</li></ul>\n<h2 id=\"h2-u6253u5305u76F8u5173u914Du7F6E\"><a class=\"reference-link\" name=\"打包相关配置\"></a><span class=\"header-link octicon octicon-link\"></span>打包相关配置</h2><h2 id=\"h2-u6253u5305\"><a class=\"reference-link\" name=\"打包\"></a><span class=\"header-link octicon octicon-link\"></span>打包</h2>', NULL, NULL, NULL, '', '2022-05-24T20:45:29+08:00', 'm3611F', 'Colin', '2022-06-18T09:35:25+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-18T09:35:25+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1543, 10127, '10005', '04配置指南', '', 'login', '2022-05-24T20:45:43+08:00', '001主题配置', NULL, '## 页面主题配置\n\n## APP主题配置\n', '<h2 id=\"h2-u9875u9762u4E3Bu9898u914Du7F6E\"><a class=\"reference-link\" name=\"页面主题配置\"></a><span class=\"header-link octicon octicon-link\"></span>页面主题配置</h2><h2 id=\"h2-appu4E3Bu9898u914Du7F6E\"><a class=\"reference-link\" name=\"APP主题配置\"></a><span class=\"header-link octicon octicon-link\"></span>APP主题配置</h2>', NULL, NULL, NULL, '', '2022-05-24T20:45:43+08:00', 'm3611F', 'Colin', '2022-06-18T08:35:59+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-18T08:35:59+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1544, 10128, '10005', '03施工方案/Api文档', '', 'login', '2022-05-24T20:47:17+08:00', '施工方案', NULL, '## _resource\n\n```yml\nallPage	                        getConstantList	✅ 获取全局常量\nallPage	                        userInfo	✅ 用户信息\nallPage	                        uploadByBase64	✅ 上传base64的文件\nallPage	                        uploadByStream	✅ 上传流文件\nallPage	                        logout	✅ 退出登录\nallPage	                        getChunkInfo	✅ 文件分片下载-获取分片信息\nallPage	                        uploadFileDone	✅ 文件分片上传-所有分片上传完毕\nallPage	                        httpUploadByStream	✅ 文件分片上传-http文件流\nallPage	                        httpUploadByBase64	✅ 文件分片上传-http base64\nallPage	                        socketUploadByStream	✅ 文件分片上传-socket 文件流\nallPage	                        socketUploadByBase64	✅ 文件分片上传-socket base64\nallPage	                        httpDownloadByBase64	✅ 文件分片下载-http base64\nallPage	                        socketDownloadByStream	✅ 文件分片下载-socket文件流\nallPage	                        socketDownloadByBase64	✅ 文件分片下载-socket base64\nchat	                        getUserInfo	✅ 查询用户信息\nchat	                        getUserFriend	✅ 查询好友列表\nchat	                        getUserFriendRequest	✅ 查询好友请求列表\nchat	                        addUserFriend	✅ 添加好友\nchat	                        acceptUserFriend	✅ 同意好友申请\nchat	                        rejectUserFriend	✅ 拒绝好友申请\nchat	                        delUserFriend	✅ 删除好友\nchat	                        getGroupInfo	✅ 获取群信息（群成员列表）\nchat	                        createGroup	✅ 创建群\nchat	                        destroyGroup	[需要指定groupId]✅ 删除群\nchat	                        addGroupUser	[需要指定groupId]✅ 邀请入群\nchat	                        delGroupUser	[需要指定groupId]✅ 删除群成员\nchat	                        setGroupInfo	[需要指定groupId]✅ 设置群信息\nchat	                        setGroupUserRole	[需要指定groupId]✅ 设置群成员角色\nchat	                        transferGroup	[需要指定groupId]✅ 移交群\nchat	                        quitGroup	[需要指定groupId]✅ 退出群\nchat	                        getChatSession	✅ 会话列表\nchat	                        getMessageHistory	✅ 消息列表[往历史找]\nchat	                        getMessageHistoryByMaxId	✅ 消息列表[往最新找]\nchat	                        revokeMessage	✅ 撤回消息\nchat	                        delMessageOffline	✅ 删除离线消息\nchat	                        toggleChatSession	✅ 置顶会话\nchat	                        deleteChatSession	✅ 删除会话\nchat	                        getUserBotList	✅查询聊天机器人 & 小程序机器人\nexternal                        getUserGroupRoleListByGroupIdList	✅ 批量获取群组的 userGroupRole 列表\nexternal                        getCggGroupList	✅ 获取 cgg 类型的 group 列表\nlogin	                        passwordLogin	✅ 密码登录\nnoticeManagement	            updateConstant	✅ 通知管理\nrecordHistoryManagement	        selectOnUseItemListByTable	✅获取指定表的使用中的数据列表\nrecordHistoryManagement	        selectDeletedItemListByTable	✅获取指定表的已删除的数据列表\nrecordHistoryManagement	        selectItemList	✅获取数据历史表\nrecordHistoryManagement	        restoreRecordByRecordHistory	✅还原数据\nsocket	                        connect	✅ socket 连接\nsocket	                        disconnect	✅ socket 关闭连接\nsocket	                        userSendMessageToUser	✅ socket 发送一对一聊天信息\nsocket	                        userSendMessageToGroup	✅ socket 发送群聊天信息\nsocket	                        botExchange	✅ 机器人交换消息\nuser	                        setUserDetail	✅ 设置用户信息\nuser	                        resetPassword	✅ 修改用户密码\nuserFriendManagement	        getUserFriendList	✅ 获取好友列表\nuserFriendManagement	        addUserFriend	✅ 添加好友关系\nuserFriendManagement	        delUserFriend	✅ 删除好友关系\nuserManagement	                getItemList	✅查询用户列表\nuserManagement	                addUser	✅ 插入新用户\nuserManagement	                setItem	✅ 更新用户\nuserManagement	                resetUserPassword	✅重新设置用户密码\nxiaochengxu	                    checkXiaochengxuIsOnline	✅检查小程序是否已经在线\n```\n\n## _ui\n\n```yml\nallPage	getConstantList	✅获取常量\nindex	disableSystemEvent	✅禁止系统菜单和文字选中\n\nindex	setSyncStatusToSyncing	✅同步中\nindex	initDefaultVariable	✅初始化状态变量\n\nindex	initWebSocket	✅初始化socket\n\nindex	getUserInfo	✅获取登录用户信息\nindex	windowBack	✅手动后退\nindex	logout	✅登出\nindex	registerSystemBackEvent	✅注册后退事件，初始化状态变量\n\nindex	setSyncStatusToSuccess	✅同步成功\nindex	onSocketReConnect	✅断线重连\nindex	pushState	✅更改路径state\nindex	getGroupInfo	✅获取群信息\nindex	closeGroupDialog	✅关闭右侧group弹框\nindex	mobileShowChattingPage	✅移动端展开聊天窗口\nindex	reFilterList	✅过滤和排序列表\nindex	atGroupUser	✅艾特群用户\nindex	openFriendDialog	✅打开朋友选择框\nindex	sendMsg	✅socket 发送消息\nindex	onGroupMessage	✅接收群消息后回调\nindex	onToggleChatSession	✅收到聊天消息回调\nindex	onDelMessageOffline	✅收到聊天消息删除的消息回调\nindex	onDeleteChatSession	✅收到聊天删除的消息回调\nindex	onUserMessage	✅接收到用户消息后回调\nindex	onUserNotice	✅接收到用户通知后回调\nindex	onGroupNotice	✅接收到群组通知后回调\nindex	showAccount	✅打开用户信息弹框\nindex	getFriendList	✅获取好友列表\nindex	getChatSessionList	✅获取聊天列表\nindex	getUserFriendRequest	✅获取好友请求列表\nindex	windowBack	✅返回上一页\nindex	onCreateGroup	✅打开创建群组弹框\nindex	onAddFriend	✅打开添加好友弹框\nindex	openMultiSendDialog	✅打开好友多选弹框\nindex	onQuoteMsg	✅引用消息\nindex	forwardSimple	✅单条转发\nindex	delMessageOffline	✅消息已读\nindex	sendRevokeMsg	✅发送撤回消息\nindex	reSendMsg	✅重新发送消息\nindex	moreSel	✅打开多选\nindex	preventDefault	✅现代浏览器阻止默认事件\nindex	voiceCall	✅发起通话\nindex	scrollToBottom	✅消息栏划到最新消息处\nindex	selectForwardFriendClose	✅消息转发好友选择框关闭回调\nindex	onSelectForwardFriend	✅消息转发好友选择框选择完成回调\nindex	forwardSimple	✅单条消息转发\nindex	fileInputTap	✅选择文件并发送\nindex	startRecordMethod	✅PC开始录音\nindex	startTouch	✅移动端开始录音\nindex	touchMove	✅移动端手指抬起时判断是否发送录音\nindex	stopRecord	✅移动端停止录音并发送音频文件\nindex	sendAudioMsg	✅发送语音消息\nnoticeManagement	getNotice	✅获取表格数据\nnoticeManagement	imageClick	✅禁用禁用\nnoticeManagement	uploadImage	✅禁用禁用\nnoticeManagement	submitNotice	✅禁用禁用\nrecordHistoryManagement	refreshTableData	✅获取表格数据\nrecordHistoryManagement	viewRecordHistory	✅版本历史列表\nrecordHistoryManagement	restoreRecordByRecordHistory	✅数据还原\nuiActionDemo	startCreateItem	✅打开创建数据抽屉\nuiActionDemo	createItem	✅创建数据\nuiActionDemo	startUpdateItem	✅打开更新数据抽屉\nuserFriendManagement	refreshTableData	✅获取表格数据\nuserFriendManagement	startCreateItem	✅打开创建数据抽屉\nuserFriendManagement	getConstantList	✅获取表格数据\nuserFriendManagement	createItem	✅创建数据\nuserFriendManagement	delFriendItem	✅禁用禁用\nuserManagement	refreshTableData	✅获取表格数据\nuserManagement	startCreateItem	✅打开创建数据抽屉\nuserManagement	getConstantList	✅获取表格数据\nuserManagement	createItem	✅创建数据\nuserManagement	startUpdateItem	✅打开更新数据抽屉\nuserManagement	updateItem	✅更新数据\nuserManagement	bannedItem	✅禁用禁用\nuserManagement	activeItem	✅激活用户\nuserManagement	startClearPassword	✅打开修改密码数据抽屉\nuserManagement	clearPassword	✅重置密码\n```', '<h2 id=\"h2-_resource\"><a class=\"reference-link\" name=\"_resource\"></a><span class=\"header-link octicon octicon-link\"></span>_resource</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">allPage                            getConstantList    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">获取全局常量</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">allPage                            userInfo    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">用户信息</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">allPage                            uploadByBase64    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">上传</span><span class=\"pln\">base64</span><span class=\"pun\">的文件</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">allPage                            uploadByStream    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">上传流文件</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">allPage                            logout    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">退出登录</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">allPage                            getChunkInfo    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片下载-获取分片信息</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">allPage                            uploadFileDone    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片上传-所有分片上传完毕</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">allPage                            httpUploadByStream    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片上传-</span><span class=\"pln\">http</span><span class=\"pun\">文件流</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">allPage                            httpUploadByBase64    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片上传-</span><span class=\"pln\">http base64</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">allPage                            socketUploadByStream    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片上传-</span><span class=\"pln\">socket </span><span class=\"pun\">文件流</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">allPage                            socketUploadByBase64    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片上传-</span><span class=\"pln\">socket base64</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">allPage                            httpDownloadByBase64    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片下载-</span><span class=\"pln\">http base64</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">allPage                            socketDownloadByStream    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片下载-</span><span class=\"pln\">socket</span><span class=\"pun\">文件流</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">allPage                            socketDownloadByBase64    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">文件分片下载-</span><span class=\"pln\">socket base64</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">chat                            getUserInfo    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">查询用户信息</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">chat                            getUserFriend    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">查询好友列表</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">chat                            getUserFriendRequest    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">查询好友请求列表</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">chat                            addUserFriend    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">添加好友</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">chat                            acceptUserFriend    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">同意好友申请</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">chat                            rejectUserFriend    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">拒绝好友申请</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">chat                            delUserFriend    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">删除好友</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">chat                            getGroupInfo    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">获取群信息（群成员列表）</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">chat                            createGroup    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">创建群</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">chat                            destroyGroup    </span><span class=\"pun\">[需要指定</span><span class=\"pln\">groupId</span><span class=\"pun\">]✅</span><span class=\"pln\"> </span><span class=\"pun\">删除群</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">chat                            addGroupUser    </span><span class=\"pun\">[需要指定</span><span class=\"pln\">groupId</span><span class=\"pun\">]✅</span><span class=\"pln\"> </span><span class=\"pun\">邀请入群</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">chat                            delGroupUser    </span><span class=\"pun\">[需要指定</span><span class=\"pln\">groupId</span><span class=\"pun\">]✅</span><span class=\"pln\"> </span><span class=\"pun\">删除群成员</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">chat                            setGroupInfo    </span><span class=\"pun\">[需要指定</span><span class=\"pln\">groupId</span><span class=\"pun\">]✅</span><span class=\"pln\"> </span><span class=\"pun\">设置群信息</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">chat                            setGroupUserRole    </span><span class=\"pun\">[需要指定</span><span class=\"pln\">groupId</span><span class=\"pun\">]✅</span><span class=\"pln\"> </span><span class=\"pun\">设置群成员角色</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">chat                            transferGroup    </span><span class=\"pun\">[需要指定</span><span class=\"pln\">groupId</span><span class=\"pun\">]✅</span><span class=\"pln\"> </span><span class=\"pun\">移交群</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">chat                            quitGroup    </span><span class=\"pun\">[需要指定</span><span class=\"pln\">groupId</span><span class=\"pun\">]✅</span><span class=\"pln\"> </span><span class=\"pun\">退出群</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">chat                            getChatSession    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">会话列表</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">chat                            getMessageHistory    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">消息列表[往历史找]</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">chat                            getMessageHistoryByMaxId    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">消息列表[往最新找]</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">chat                            revokeMessage    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">撤回消息</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">chat                            delMessageOffline    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">删除离线消息</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">chat                            toggleChatSession    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">置顶会话</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">chat                            deleteChatSession    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">删除会话</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">chat                            getUserBotList    </span><span class=\"pun\">✅查询聊天机器人</span><span class=\"pln\"> </span><span class=\"pun\">&amp;</span><span class=\"pln\"> </span><span class=\"pun\">小程序机器人</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">external                        getUserGroupRoleListByGroupIdList    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">批量获取群组的</span><span class=\"pln\"> userGroupRole </span><span class=\"pun\">列表</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">external                        getCggGroupList    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">获取</span><span class=\"pln\"> cgg </span><span class=\"pun\">类型的</span><span class=\"pln\"> </span><span class=\"kwd\">group</span><span class=\"pln\"> </span><span class=\"pun\">列表</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">login                            passwordLogin    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">密码登录</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">noticeManagement                updateConstant    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">通知管理</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">recordHistoryManagement            selectOnUseItemListByTable    </span><span class=\"pun\">✅获取指定表的使用中的数据列表</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">recordHistoryManagement            selectDeletedItemListByTable    </span><span class=\"pun\">✅获取指定表的已删除的数据列表</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">recordHistoryManagement            selectItemList    </span><span class=\"pun\">✅获取数据历史表</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">recordHistoryManagement            restoreRecordByRecordHistory    </span><span class=\"pun\">✅还原数据</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">socket                            connect    </span><span class=\"pun\">✅</span><span class=\"pln\"> socket </span><span class=\"pun\">连接</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">socket                            disconnect    </span><span class=\"pun\">✅</span><span class=\"pln\"> socket </span><span class=\"pun\">关闭连接</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">socket                            userSendMessageToUser    </span><span class=\"pun\">✅</span><span class=\"pln\"> socket </span><span class=\"pun\">发送一对一聊天信息</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">socket                            userSendMessageToGroup    </span><span class=\"pun\">✅</span><span class=\"pln\"> socket </span><span class=\"pun\">发送群聊天信息</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">socket                            botExchange    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">机器人交换消息</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">user                            setUserDetail    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">设置用户信息</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">user                            resetPassword    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">修改用户密码</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement            getUserFriendList    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">获取好友列表</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement            addUserFriend    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">添加好友关系</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement            delUserFriend    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">删除好友关系</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">userManagement                    getItemList    </span><span class=\"pun\">✅查询用户列表</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">userManagement                    addUser    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">插入新用户</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">userManagement                    setItem    </span><span class=\"pun\">✅</span><span class=\"pln\"> </span><span class=\"pun\">更新用户</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">userManagement                    resetUserPassword    </span><span class=\"pun\">✅重新设置用户密码</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">xiaochengxu                        checkXiaochengxuIsOnline    </span><span class=\"pun\">✅检查小程序是否已经在线</span></code></li></ol></pre>\n<h2 id=\"h2-_ui\"><a class=\"reference-link\" name=\"_ui\"></a><span class=\"header-link octicon octicon-link\"></span>_ui</h2><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">allPage    getConstantList    </span><span class=\"pun\">✅获取常量</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">index    disableSystemEvent    </span><span class=\"pun\">✅禁止系统菜单和文字选中</span></code></li><li class=\"L2\"><code class=\"language-yml\"></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">index    setSyncStatusToSyncing    </span><span class=\"pun\">✅同步中</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">index    initDefaultVariable    </span><span class=\"pun\">✅初始化状态变量</span></code></li><li class=\"L5\"><code class=\"language-yml\"></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">index    initWebSocket    </span><span class=\"pun\">✅初始化</span><span class=\"pln\">socket</span></code></li><li class=\"L7\"><code class=\"language-yml\"></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">index    getUserInfo    </span><span class=\"pun\">✅获取登录用户信息</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">index    windowBack    </span><span class=\"pun\">✅手动后退</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">index    logout    </span><span class=\"pun\">✅登出</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">index    registerSystemBackEvent    </span><span class=\"pun\">✅注册后退事件，初始化状态变量</span></code></li><li class=\"L2\"><code class=\"language-yml\"></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">index    setSyncStatusToSuccess    </span><span class=\"pun\">✅同步成功</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">index    onSocketReConnect    </span><span class=\"pun\">✅断线重连</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">index    pushState    </span><span class=\"pun\">✅更改路径</span><span class=\"pln\">state</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">index    getGroupInfo    </span><span class=\"pun\">✅获取群信息</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">index    closeGroupDialog    </span><span class=\"pun\">✅关闭右侧</span><span class=\"kwd\">group</span><span class=\"pun\">弹框</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">index    mobileShowChattingPage    </span><span class=\"pun\">✅移动端展开聊天窗口</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">index    reFilterList    </span><span class=\"pun\">✅过滤和排序列表</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">index    atGroupUser    </span><span class=\"pun\">✅艾特群用户</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">index    openFriendDialog    </span><span class=\"pun\">✅打开朋友选择框</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">index    sendMsg    </span><span class=\"pun\">✅</span><span class=\"pln\">socket </span><span class=\"pun\">发送消息</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">index    onGroupMessage    </span><span class=\"pun\">✅接收群消息后回调</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">index    onToggleChatSession    </span><span class=\"pun\">✅收到聊天消息回调</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">index    onDelMessageOffline    </span><span class=\"pun\">✅收到聊天消息删除的消息回调</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">index    onDeleteChatSession    </span><span class=\"pun\">✅收到聊天删除的消息回调</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">index    onUserMessage    </span><span class=\"pun\">✅接收到用户消息后回调</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">index    onUserNotice    </span><span class=\"pun\">✅接收到用户通知后回调</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">index    onGroupNotice    </span><span class=\"pun\">✅接收到群组通知后回调</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">index    showAccount    </span><span class=\"pun\">✅打开用户信息弹框</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">index    getFriendList    </span><span class=\"pun\">✅获取好友列表</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">index    getChatSessionList    </span><span class=\"pun\">✅获取聊天列表</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">index    getUserFriendRequest    </span><span class=\"pun\">✅获取好友请求列表</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">index    windowBack    </span><span class=\"pun\">✅返回上一页</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">index    onCreateGroup    </span><span class=\"pun\">✅打开创建群组弹框</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">index    onAddFriend    </span><span class=\"pun\">✅打开添加好友弹框</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">index    openMultiSendDialog    </span><span class=\"pun\">✅打开好友多选弹框</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">index    onQuoteMsg    </span><span class=\"pun\">✅引用消息</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">index    forwardSimple    </span><span class=\"pun\">✅单条转发</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">index    delMessageOffline    </span><span class=\"pun\">✅消息已读</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">index    sendRevokeMsg    </span><span class=\"pun\">✅发送撤回消息</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">index    reSendMsg    </span><span class=\"pun\">✅重新发送消息</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">index    moreSel    </span><span class=\"pun\">✅打开多选</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">index    preventDefault    </span><span class=\"pun\">✅现代浏览器阻止默认事件</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">index    voiceCall    </span><span class=\"pun\">✅发起通话</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">index    scrollToBottom    </span><span class=\"pun\">✅消息栏划到最新消息处</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">index    selectForwardFriendClose    </span><span class=\"pun\">✅消息转发好友选择框关闭回调</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">index    onSelectForwardFriend    </span><span class=\"pun\">✅消息转发好友选择框选择完成回调</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">index    forwardSimple    </span><span class=\"pun\">✅单条消息转发</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">index    fileInputTap    </span><span class=\"pun\">✅选择文件并发送</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">index    startRecordMethod    </span><span class=\"pun\">✅</span><span class=\"pln\">PC</span><span class=\"pun\">开始录音</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">index    startTouch    </span><span class=\"pun\">✅移动端开始录音</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">index    touchMove    </span><span class=\"pun\">✅移动端手指抬起时判断是否发送录音</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">index    stopRecord    </span><span class=\"pun\">✅移动端停止录音并发送音频文件</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">index    sendAudioMsg    </span><span class=\"pun\">✅发送语音消息</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">noticeManagement    getNotice    </span><span class=\"pun\">✅获取表格数据</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">noticeManagement    imageClick    </span><span class=\"pun\">✅禁用禁用</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">noticeManagement    uploadImage    </span><span class=\"pun\">✅禁用禁用</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">noticeManagement    submitNotice    </span><span class=\"pun\">✅禁用禁用</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">recordHistoryManagement    refreshTableData    </span><span class=\"pun\">✅获取表格数据</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">recordHistoryManagement    viewRecordHistory    </span><span class=\"pun\">✅版本历史列表</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">recordHistoryManagement    restoreRecordByRecordHistory    </span><span class=\"pun\">✅数据还原</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">uiActionDemo    startCreateItem    </span><span class=\"pun\">✅打开创建数据抽屉</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">uiActionDemo    createItem    </span><span class=\"pun\">✅创建数据</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">uiActionDemo    startUpdateItem    </span><span class=\"pun\">✅打开更新数据抽屉</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement    refreshTableData    </span><span class=\"pun\">✅获取表格数据</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement    startCreateItem    </span><span class=\"pun\">✅打开创建数据抽屉</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement    getConstantList    </span><span class=\"pun\">✅获取表格数据</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement    createItem    </span><span class=\"pun\">✅创建数据</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">userFriendManagement    delFriendItem    </span><span class=\"pun\">✅禁用禁用</span></code></li><li class=\"L1\"><code class=\"language-yml\"><span class=\"pln\">userManagement    refreshTableData    </span><span class=\"pun\">✅获取表格数据</span></code></li><li class=\"L2\"><code class=\"language-yml\"><span class=\"pln\">userManagement    startCreateItem    </span><span class=\"pun\">✅打开创建数据抽屉</span></code></li><li class=\"L3\"><code class=\"language-yml\"><span class=\"pln\">userManagement    getConstantList    </span><span class=\"pun\">✅获取表格数据</span></code></li><li class=\"L4\"><code class=\"language-yml\"><span class=\"pln\">userManagement    createItem    </span><span class=\"pun\">✅创建数据</span></code></li><li class=\"L5\"><code class=\"language-yml\"><span class=\"pln\">userManagement    startUpdateItem    </span><span class=\"pun\">✅打开更新数据抽屉</span></code></li><li class=\"L6\"><code class=\"language-yml\"><span class=\"pln\">userManagement    updateItem    </span><span class=\"pun\">✅更新数据</span></code></li><li class=\"L7\"><code class=\"language-yml\"><span class=\"pln\">userManagement    bannedItem    </span><span class=\"pun\">✅禁用禁用</span></code></li><li class=\"L8\"><code class=\"language-yml\"><span class=\"pln\">userManagement    activeItem    </span><span class=\"pun\">✅激活用户</span></code></li><li class=\"L9\"><code class=\"language-yml\"><span class=\"pln\">userManagement    startClearPassword    </span><span class=\"pun\">✅打开修改密码数据抽屉</span></code></li><li class=\"L0\"><code class=\"language-yml\"><span class=\"pln\">userManagement    clearPassword    </span><span class=\"pun\">✅重置密码</span></code></li></ol></pre>\n', NULL, NULL, NULL, '', '2022-05-24T20:47:17+08:00', 'm3611F', 'Colin', '2022-06-15T08:41:36+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-15T08:41:36+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1546, 10129, '10005', '05多星Bot开发指南', '', 'login', '2022-05-24T20:49:48+08:00', '001多星Bot架构', NULL, '## 架构\n\n- 多星Bot类型\n	- bot_chatbot\n	- bot_xiaochengxu\n	- bot_databot\n\n![多星机器人架构.png](/upload/articleMaterial/10129/1655253888956_多星机器人架构.png)\n\n## 相关仓库 & 代码\n\n- [egg-jianghu](https://github.com/fsll-tech/egg-jianghu)\n- [egg-duoxing](https://github.com/fsll-tech/egg-duoxing)\n- [duoxing_v5](https://github.com/fsll-tech/duoxing_v5)\n	- duoxing_v5/server/app/service/duoxingSocket.js ==botExchange==\n	- duoxing_v5/server/app/view/page/xiaochengxu.html\n	- duoxing_v5/server/app/view/common/duoxingAxios.html\n\n## 多星Bot案例\n\n- [md_duoxing_bot_chatbot_demo](https://github.com/fsll-tech/md_duoxing_bot_chatbot_demo)\n- [md_duoxing_bot_xiaochengxu_demo](https://github.com/fsll-tech/md_duoxing_bot_xiaochengxu_demo)\n- [md_duoxing_bot_databot_demo](https://github.com/fsll-tech/md_duoxing_bot_databot_demo)\n', '<h2 id=\"h2-u67B6u6784\"><a class=\"reference-link\" name=\"架构\"></a><span class=\"header-link octicon octicon-link\"></span>架构</h2><ul>\n<li>多星Bot类型<ul>\n<li>bot_chatbot</li><li>bot_xiaochengxu</li><li>bot_databot</li></ul>\n</li></ul>\n<p><img alt=\"多星机器人架构.png\" title=\"null\" src=\"/upload/articleMaterial/10129/1655253888956_多星机器人架构.png\"></p>\n<h2 id=\"h2-u76F8u5173u4ED3u5E9326amp3B20u4EE3u7801\"><a class=\"reference-link\" name=\"相关仓库 &amp; 代码\"></a><span class=\"header-link octicon octicon-link\"></span>相关仓库 &amp; 代码</h2><ul>\n<li><a href=\"https://github.com/fsll-tech/egg-jianghu\">egg-jianghu</a></li><li><a href=\"https://github.com/fsll-tech/egg-duoxing\">egg-duoxing</a></li><li><a href=\"https://github.com/fsll-tech/duoxing_v5\">duoxing_v5</a><ul>\n<li>duoxing_v5/server/app/service/duoxingSocket.js ==botExchange==</li><li>duoxing_v5/server/app/view/page/xiaochengxu.html</li><li>duoxing_v5/server/app/view/common/duoxingAxios.html</li></ul>\n</li></ul>\n<h2 id=\"h2-u591Au661Fbotu6848u4F8B\"><a class=\"reference-link\" name=\"多星Bot案例\"></a><span class=\"header-link octicon octicon-link\"></span>多星Bot案例</h2><ul>\n<li><a href=\"https://github.com/fsll-tech/md_duoxing_bot_chatbot_demo\">md_duoxing_bot_chatbot_demo</a></li><li><a href=\"https://github.com/fsll-tech/md_duoxing_bot_xiaochengxu_demo\">md_duoxing_bot_xiaochengxu_demo</a></li><li><a href=\"https://github.com/fsll-tech/md_duoxing_bot_databot_demo\">md_duoxing_bot_databot_demo</a></li></ul>\n', NULL, NULL, NULL, '', '2022-05-24T20:49:48+08:00', 'm3611F', 'Colin', '2022-06-15T09:03:46+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-15T09:03:46+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1547, 10130, '10005', '05多星Bot开发指南', '', 'login', '2022-05-24T20:50:13+08:00', '002多星chatbot开发指南', NULL, '## 参考项目\n\n- [md_duoxing_bot_chatbot_demo](https://github.com/fsll-tech/md_duoxing_bot_chatbot_demo)\n\n## 应用场景\n\n- 群机器人/一对一机器人\n	- 查天气\n	- 查成绩\n	- 定时通知\n	- 查值班\n	- 监控通知\n\n## 环境\n\n- duoxing 账号\n- nodejs 16+\n- windows/mac/linux\n\n## 从0创建一个chatbot项目\n\n> 这里使用 https://duoxing-v5.openjianghu.org\n\n1. 初始一个eggjs 项目👉[eggjs quickstart](https://www.eggjs.org/intro/quickstart)\n1. package.json 添加`\"egg-duoxing\"`依赖. 注意: 需要重新`npm i`\n```bash\n  #  package.json\n  \"dependencies\": {\n    \"egg\": \"^2.15.1\",\n    \"egg-scripts\": \"^2.11.0\",\n    \"egg-duoxing\": \"1.0.1\"\n  },\n```\n1. 启用 `egg-duoxing`插件，并添加多星Bot相关配置\n```bash\n    # 👉`config/plugin.js`\n   eggDuoxing: {\n     enable: true,\n     package: \"egg-duoxing\",\n   },\n    # 👉`config/config.default.js`\n    duoxingBot: {\n      server: \"https://duoxing-v5.openjianghu.org\",\n      userId: \"W00001\",\n      password: \"123456\",\n      serverAppId: \"duoxing\",\n      deviceType: \"bot_chatbot\",\n    },\n```\n1. 添加chatbot代码👉`app/listener/chatbot.js`\n```bash\n	\"use strict\";\n	const BaseListener = require(\"egg-duoxing/app/listener/core/base\");\n	const {\n	  duoxingMessageContentTypeEnum,\n	} = require(\"egg-duoxing/app/constant/constant\");\n	/**\n	 * demo: 一个 echo 监听处理\n	 */\n	 class EchoListener extends BaseListener {\n	  /**\n	   * 配置\n	   */\n	  static get config() {\n		return {\n		  // 监听的 action 列表\n		  listenActions: [\"userMessage\", \"groupMessage\"],\n		  // 开关\n		  disable: false,\n		};\n	  }\n	  /**\n	   * 处理 action 的回调函数\n	   */\n	  async handle(actionId, message) {\n		this.app.logger.info(\n		  \"[chatbot.js]\",\n		  `handle actionId ${actionId}, message: ${message}`\n		);\n		const {\n		  fromUserId,\n		  fromUsername,\n		  toGroupId,\n		  messageContentType,\n		  messageContent,\n		} = message.appData.actionData;\n		// 过滤自己的发言\n		if (fromUserId === this.duoxingClient.duoxingConfig.userId) {\n		  return;\n		}\n		if (actionId === \"userMessage\") {\n		  const reply = await this.replyUser({\n			messageContentType,\n			messageContent,\n			fromUserId,\n			fromUsername\n		  });\n		  await this.duoxingClient.sendMsgToPerson({\n			message: reply,\n			toUserId: fromUserId,\n			messageContentType: duoxingMessageContentTypeEnum.text,\n		  });\n		} else if (actionId === \"groupMessage\") {\n		  const reply = await this.replyGroup({\n			messageContentType,\n			messageContent,\n			fromUserId,\n			fromUsername,\n		  });\n		  await this.duoxingClient.sendMsgToGroup({\n			message: reply,\n			toGroupId,\n			messageContentType: duoxingMessageContentTypeEnum.text,\n		  });\n		}\n	  }\n	  replyUser({messageContentType, messageContent, fromUserId, fromUsername}) {\n		const reply = this.analyzeMessageContentAndReply({messageContent});\n		return reply;\n		// return `你好呀，[${fromUsername}]，你刚才发的消息是【${messageContent}】，机器人更多功能尽请期待~`;\n	  }\n	  replyGroup({messageContentType, messageContent, fromUserId, fromUsername}) {\n		const reply = this.analyzeMessageContentAndReply({messageContent});\n		return reply;\n		// if (messageContent.includes(\"/hi\")) {\n		//   return `你好呀，[${fromUsername}]，你刚才发的消息是【${messageContent}】，机器人更多功能尽请期待~`;\n		// }\n	  }\n	  async analyzeMessageContentAndReply({ messageContent }) {\n		if (messageContent.includes(\"查成绩\")) {\n		  const dataArray = messageContent.split(\" \");\n		  if (dataArray.length < 2) {\n			return `请按这个格式输入: 查成绩 张三丰`;\n		  }\n		  const targetUsername = dataArray[1];\n		  const scoreDataMap = {\n			\"张三丰\": 100,\n			\"洪七公\": 80,\n			\"岳不群\": 90,\n		  };\n		  return `${targetUsername} 本次考试的成绩: ${scoreDataMap[targetUsername] || \'暂无结果\'}`;\n		}\n		if (messageContent.includes(\"查天气\")) {\n		  return `今天：阵雨 12°~21°C 北风3-4级; 出门记得带🌂`;\n		}\n		return `请输入: \\n  查成绩 张三丰/洪七公/岳不群 \\n  查天气`;\n	  }\n	}\n	module.exports = EchoListener;\n```\n1. 启动项目`npm run dev`\n```bash\n2022-06-15 13:59:32,881 INFO 9265 [egg-duoxing-bot] 挂载 this.app.duoxingClient\n2022-06-15 13:59:32,881 INFO 9265 [egg-duoxing-bot] 开始创建 socket 连接，并注册多星 bot 消息监听器\n2022-06-15 13:59:32,947 INFO 9265 [egg-duoxing-bot] 注册多星 bot 消息监听器  {\n  action: [ \'botExchange\' ],\n  module: [class XiaochenghuListener extends BaseListener],\n  path: \'/Users/colin/work/xiaochengxu/bot_chatbot_demo/node_modules/egg-duoxing/app/listener/xiaochengxu.js\'\n}\n2022-06-15 13:59:32,948 INFO 9265 [egg-duoxing-bot] 注册多星 bot 消息监听器  {\n  action: [ \'userMessage\', \'groupMessage\' ],\n  module: [class EchoListener extends BaseListener],\n  path: \'/Users/colin/work/xiaochengxu/bot_chatbot_demo/app/listener/chatbotTest.js\'\n}\n2022-06-15 13:59:32,962 INFO 9254 [master] egg started on http://127.0.0.1:7001 (1055ms)\n2022-06-15 13:59:33,482 INFO 9263 [duoxingClient.js] {\n  msg: \'duoxing bot login success\',\n  deviceId: \'172.20.10.2_darwin_a0:78:17:99:8d:3a_bot_chatbot\',\n  deviceType: \'bot_chatbot\',\n  userId: \'W00001\',\n  server: \'https://duoxing-v5.openjianghu.org\',\n  serverAppId: \'duoxing\',\n  authToken: \'gNfWay1ht5z46XT7jz2pgiPgYn_Z2s2SV1WB\'\n}\n2022-06-15 13:59:33,853 INFO 9263 [duoxingSocketAgent.js] ==== [socket channel.onConnect] user(W00001) connect to wss://duoxing-v5.openjianghu.org/duoxing/socket.io success\n```\n1. 访问多星检查 chatbot是否显示 在**机器人列表**，然后发送消息测试一下功能\n> 注意：当前账户必须和机器人建立`好友关系`，才能看到**机器人列表**/config.default.js`\n', '<h2 id=\"h2-u53C2u8003u9879u76EE\"><a class=\"reference-link\" name=\"参考项目\"></a><span class=\"header-link octicon octicon-link\"></span>参考项目</h2><ul>\n<li><a href=\"https://github.com/fsll-tech/md_duoxing_bot_chatbot_demo\">md_duoxing_bot_chatbot_demo</a></li></ul>\n<h2 id=\"h2-u5E94u7528u573Au666F\"><a class=\"reference-link\" name=\"应用场景\"></a><span class=\"header-link octicon octicon-link\"></span>应用场景</h2><ul>\n<li>群机器人/一对一机器人<ul>\n<li>查天气</li><li>查成绩</li><li>定时通知</li><li>查值班</li><li>监控通知</li></ul>\n</li></ul>\n<h2 id=\"h2-u73AFu5883\"><a class=\"reference-link\" name=\"环境\"></a><span class=\"header-link octicon octicon-link\"></span>环境</h2><ul>\n<li>duoxing 账号</li><li>nodejs 16+</li><li>windows/mac/linux</li></ul>\n<h2 id=\"h2-u4ECE0u521Bu5EFAu4E00u4E2Achatbotu9879u76EE\"><a class=\"reference-link\" name=\"从0创建一个chatbot项目\"></a><span class=\"header-link octicon octicon-link\"></span>从0创建一个chatbot项目</h2><blockquote class=\"default\">\n<p>这里使用 <a href=\"https://duoxing-v5.openjianghu.org\">https://duoxing-v5.openjianghu.org</a></p>\n</blockquote>\n<ol>\n<li>初始一个eggjs 项目👉<a href=\"https://www.eggjs.org/intro/quickstart\">eggjs quickstart</a></li><li>package.json 添加<code>\"egg-duoxing\"</code>依赖. 注意: 需要重新<code>npm i</code><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"com\">#  package.json</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"str\">\"dependencies\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"^2.15.1\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg-scripts\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"^2.11.0\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg-duoxing\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"1.0.1\"</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li>启用 <code>egg-duoxing</code>插件，并添加多星Bot相关配置<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"com\"># 👉`config/plugin.js`</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">eggDuoxing</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">  enable</span><span class=\"pun\">:</span><span class=\"pln\"> true</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">  package</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"egg-duoxing\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"com\"># 👉`config/config.default.js`</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\"> duoxingBot</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">   server</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"https://duoxing-v5.openjianghu.org\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">   userId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"W00001\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"123456\"</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   serverAppId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"duoxing\"</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">   deviceType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"bot_chatbot\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li>添加chatbot代码👉<code>app/listener/chatbot.js</code><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"use strict\"</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\"> const </span><span class=\"typ\">BaseListener</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\"egg-duoxing/app/listener/core/base\"</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> const </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">   duoxingMessageContentTypeEnum</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\"egg-duoxing/app/constant/constant\"</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">/**</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">  </span><span class=\"pun\">*</span><span class=\"pln\"> demo</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">一个</span><span class=\"pln\"> echo </span><span class=\"pun\">监听处理</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">  </span><span class=\"pun\">*/</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">  class </span><span class=\"typ\">EchoListener</span><span class=\"pln\"> extends </span><span class=\"typ\">BaseListener</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">/**</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">配置</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*/</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">   static get config</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">监听的</span><span class=\"pln\"> action </span><span class=\"pun\">列表</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">       listenActions</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"str\">\"userMessage\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"groupMessage\"</span><span class=\"pun\">],</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">开关</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">       disable</span><span class=\"pun\">:</span><span class=\"pln\"> false</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">};</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">/**</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">处理</span><span class=\"pln\"> action </span><span class=\"pun\">的回调函数</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*/</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">   async handle</span><span class=\"pun\">(</span><span class=\"pln\">actionId</span><span class=\"pun\">,</span><span class=\"pln\"> message</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">logger</span><span class=\"pun\">.</span><span class=\"pln\">info</span><span class=\"pun\">(</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"str\">\"[chatbot.js]\"</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"str\">`handle actionId ${actionId}, message: ${message}`</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">);</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">       fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">       fromUsername</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">       toGroupId</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       messageContentType</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">       messageContent</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">actionData</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">过滤自己的发言</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">fromUserId </span><span class=\"pun\">===</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">duoxingClient</span><span class=\"pun\">.</span><span class=\"pln\">duoxingConfig</span><span class=\"pun\">.</span><span class=\"pln\">userId</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">actionId </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\"userMessage\"</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">       const reply </span><span class=\"pun\">=</span><span class=\"pln\"> await this</span><span class=\"pun\">.</span><span class=\"pln\">replyUser</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">         messageContentType</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">         messageContent</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">         fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">         fromUsername</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">});</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">       await this</span><span class=\"pun\">.</span><span class=\"pln\">duoxingClient</span><span class=\"pun\">.</span><span class=\"pln\">sendMsgToPerson</span><span class=\"pun\">({</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">         message</span><span class=\"pun\">:</span><span class=\"pln\"> reply</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">         toUserId</span><span class=\"pun\">:</span><span class=\"pln\"> fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">         messageContentType</span><span class=\"pun\">:</span><span class=\"pln\"> duoxingMessageContentTypeEnum</span><span class=\"pun\">.</span><span class=\"pln\">text</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">});</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">actionId </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\"groupMessage\"</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       const reply </span><span class=\"pun\">=</span><span class=\"pln\"> await this</span><span class=\"pun\">.</span><span class=\"pln\">replyGroup</span><span class=\"pun\">({</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">         messageContentType</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">         messageContent</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">         fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">         fromUsername</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">});</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">       await this</span><span class=\"pun\">.</span><span class=\"pln\">duoxingClient</span><span class=\"pun\">.</span><span class=\"pln\">sendMsgToGroup</span><span class=\"pun\">({</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">         message</span><span class=\"pun\">:</span><span class=\"pln\"> reply</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">         toGroupId</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">         messageContentType</span><span class=\"pun\">:</span><span class=\"pln\"> duoxingMessageContentTypeEnum</span><span class=\"pun\">.</span><span class=\"pln\">text</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">});</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">   replyUser</span><span class=\"pun\">({</span><span class=\"pln\">messageContentType</span><span class=\"pun\">,</span><span class=\"pln\"> messageContent</span><span class=\"pun\">,</span><span class=\"pln\"> fromUserId</span><span class=\"pun\">,</span><span class=\"pln\"> fromUsername</span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     const reply </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">analyzeMessageContentAndReply</span><span class=\"pun\">({</span><span class=\"pln\">messageContent</span><span class=\"pun\">});</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> reply</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">`你好呀，[${fromUsername}]，你刚才发的消息是【${messageContent}】，机器人更多功能尽请期待~`</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   replyGroup</span><span class=\"pun\">({</span><span class=\"pln\">messageContentType</span><span class=\"pun\">,</span><span class=\"pln\"> messageContent</span><span class=\"pun\">,</span><span class=\"pln\"> fromUserId</span><span class=\"pun\">,</span><span class=\"pln\"> fromUsername</span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     const reply </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">analyzeMessageContentAndReply</span><span class=\"pun\">({</span><span class=\"pln\">messageContent</span><span class=\"pun\">});</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> reply</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">messageContent</span><span class=\"pun\">.</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"str\">\"/hi\"</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">//</span><span class=\"pln\">   </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">`你好呀，[${fromUsername}]，你刚才发的消息是【${messageContent}】，机器人更多功能尽请期待~`</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">   async analyzeMessageContentAndReply</span><span class=\"pun\">({</span><span class=\"pln\"> messageContent </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">messageContent</span><span class=\"pun\">.</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"str\">\"查成绩\"</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">       const dataArray </span><span class=\"pun\">=</span><span class=\"pln\"> messageContent</span><span class=\"pun\">.</span><span class=\"pln\">split</span><span class=\"pun\">(</span><span class=\"str\">\" \"</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">dataArray</span><span class=\"pun\">.</span><span class=\"pln\">length </span><span class=\"pun\">&lt;</span><span class=\"pln\"> </span><span class=\"lit\">2</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">         </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">`请按这个格式输入: 查成绩 张三丰`</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">       const targetUsername </span><span class=\"pun\">=</span><span class=\"pln\"> dataArray</span><span class=\"pun\">[</span><span class=\"lit\">1</span><span class=\"pun\">];</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">       const scoreDataMap </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">         </span><span class=\"str\">\"张三丰\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">         </span><span class=\"str\">\"洪七公\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">80</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">         </span><span class=\"str\">\"岳不群\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">90</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">};</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">`${targetUsername} 本次考试的成绩: ${scoreDataMap[targetUsername] || \'暂无结果\'}`</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">messageContent</span><span class=\"pun\">.</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"str\">\"查天气\"</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">`今天：阵雨 12°~21°C 北风3-4级; 出门记得带🌂`</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"str\">`请输入: \\n&nbsp;&nbsp;查成绩 张三丰/洪七公/岳不群 \\n&nbsp;&nbsp;查天气`</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\"> module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">EchoListener</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li><li>启动项目<code>npm run dev</code><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">06</span><span class=\"pun\">-</span><span class=\"lit\">15</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">59</span><span class=\"pun\">:</span><span class=\"lit\">32</span><span class=\"pun\">,</span><span class=\"lit\">881</span><span class=\"pln\"> INFO </span><span class=\"lit\">9265</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">duoxing</span><span class=\"pun\">-</span><span class=\"pln\">bot</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">挂载</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">duoxingClient</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">06</span><span class=\"pun\">-</span><span class=\"lit\">15</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">59</span><span class=\"pun\">:</span><span class=\"lit\">32</span><span class=\"pun\">,</span><span class=\"lit\">881</span><span class=\"pln\"> INFO </span><span class=\"lit\">9265</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">duoxing</span><span class=\"pun\">-</span><span class=\"pln\">bot</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">开始创建</span><span class=\"pln\"> socket </span><span class=\"pun\">连接，并注册多星</span><span class=\"pln\"> bot </span><span class=\"pun\">消息监听器</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">06</span><span class=\"pun\">-</span><span class=\"lit\">15</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">59</span><span class=\"pun\">:</span><span class=\"lit\">32</span><span class=\"pun\">,</span><span class=\"lit\">947</span><span class=\"pln\"> INFO </span><span class=\"lit\">9265</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">duoxing</span><span class=\"pun\">-</span><span class=\"pln\">bot</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">注册多星</span><span class=\"pln\"> bot </span><span class=\"pun\">消息监听器</span><span class=\"pln\">  </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">action</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"str\">\'botExchange\'</span><span class=\"pln\"> </span><span class=\"pun\">],</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">module</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">class </span><span class=\"typ\">XiaochenghuListener</span><span class=\"pln\"> extends </span><span class=\"typ\">BaseListener</span><span class=\"pun\">],</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">path</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'/Users/colin/work/xiaochengxu/bot_chatbot_demo/node_modules/egg-duoxing/app/listener/xiaochengxu.js\'</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">06</span><span class=\"pun\">-</span><span class=\"lit\">15</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">59</span><span class=\"pun\">:</span><span class=\"lit\">32</span><span class=\"pun\">,</span><span class=\"lit\">948</span><span class=\"pln\"> INFO </span><span class=\"lit\">9265</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">egg</span><span class=\"pun\">-</span><span class=\"pln\">duoxing</span><span class=\"pun\">-</span><span class=\"pln\">bot</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">注册多星</span><span class=\"pln\"> bot </span><span class=\"pun\">消息监听器</span><span class=\"pln\">  </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">action</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\"> </span><span class=\"str\">\'userMessage\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'groupMessage\'</span><span class=\"pln\"> </span><span class=\"pun\">],</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">module</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">class </span><span class=\"typ\">EchoListener</span><span class=\"pln\"> extends </span><span class=\"typ\">BaseListener</span><span class=\"pun\">],</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">path</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'/Users/colin/work/xiaochengxu/bot_chatbot_demo/app/listener/chatbotTest.js\'</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">06</span><span class=\"pun\">-</span><span class=\"lit\">15</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">59</span><span class=\"pun\">:</span><span class=\"lit\">32</span><span class=\"pun\">,</span><span class=\"lit\">962</span><span class=\"pln\"> INFO </span><span class=\"lit\">9254</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">master</span><span class=\"pun\">]</span><span class=\"pln\"> egg started on http</span><span class=\"pun\">://</span><span class=\"lit\">127.0</span><span class=\"pun\">.</span><span class=\"lit\">0.1</span><span class=\"pun\">:</span><span class=\"lit\">7001</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"lit\">1055ms</span><span class=\"pun\">)</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">06</span><span class=\"pun\">-</span><span class=\"lit\">15</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">59</span><span class=\"pun\">:</span><span class=\"lit\">33</span><span class=\"pun\">,</span><span class=\"lit\">482</span><span class=\"pln\"> INFO </span><span class=\"lit\">9263</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">duoxingClient</span><span class=\"pun\">.</span><span class=\"pln\">js</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">msg</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'duoxing bot login success\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">deviceId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'172.20.10.2_darwin_a0:78:17:99:8d:3a_bot_chatbot\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">deviceType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'bot_chatbot\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">userId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'W00001\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">server</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'https://duoxing-v5.openjianghu.org\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">serverAppId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'duoxing\'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">authToken</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'gNfWay1ht5z46XT7jz2pgiPgYn_Z2s2SV1WB\'</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"lit\">2022</span><span class=\"pun\">-</span><span class=\"lit\">06</span><span class=\"pun\">-</span><span class=\"lit\">15</span><span class=\"pln\"> </span><span class=\"lit\">13</span><span class=\"pun\">:</span><span class=\"lit\">59</span><span class=\"pun\">:</span><span class=\"lit\">33</span><span class=\"pun\">,</span><span class=\"lit\">853</span><span class=\"pln\"> INFO </span><span class=\"lit\">9263</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">duoxingSocketAgent</span><span class=\"pun\">.</span><span class=\"pln\">js</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">====</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"pln\">socket channel</span><span class=\"pun\">.</span><span class=\"pln\">onConnect</span><span class=\"pun\">]</span><span class=\"pln\"> user</span><span class=\"pun\">(</span><span class=\"pln\">W00001</span><span class=\"pun\">)</span><span class=\"pln\"> connect to wss</span><span class=\"pun\">://</span><span class=\"pln\">duoxing</span><span class=\"pun\">-</span><span class=\"pln\">v5</span><span class=\"pun\">.</span><span class=\"pln\">openjianghu</span><span class=\"pun\">.</span><span class=\"pln\">org</span><span class=\"pun\">/</span><span class=\"pln\">duoxing</span><span class=\"pun\">/</span><span class=\"pln\">socket</span><span class=\"pun\">.</span><span class=\"pln\">io success</span></code></li></ol></pre>\n</li><li>访问多星检查 chatbot是否显示 在<strong>机器人列表</strong>，然后发送消息测试一下功能<blockquote class=\"default\">\n<p>注意：当前账户必须和机器人建立<code>好友关系</code>，才能看到<strong>机器人列表</strong>/config.default.js`</p>\n</blockquote>\n</li></ol>\n', NULL, NULL, NULL, '', '2022-05-24T20:50:13+08:00', 'm3611F', 'Colin', '2022-06-17T08:10:20+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-17T08:10:20+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1548, 10131, '10010', '直播', '', 'login', '2022-05-24T20:50:35+08:00', '架构', NULL, NULL, NULL, NULL, NULL, NULL, '', '2022-05-24T20:50:35+08:00', 'm3611F', 'Colin', '2022-05-24T23:06:53+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-24T23:06:53+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1549, 10132, '10010', '直播', '', 'login', '2022-05-24T20:51:01+08:00', '多星直播 之 xxx', NULL, NULL, NULL, NULL, NULL, NULL, '', '2022-05-24T20:51:01+08:00', 'm3611F', 'Colin', '2022-05-24T23:07:19+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-24T23:07:19+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1550, 10133, '10005', '06拓展', '', 'login', '2022-05-24T20:51:48+08:00', 'FRP内网穿透', NULL, NULL, NULL, NULL, NULL, NULL, '', '2022-05-24T20:51:48+08:00', 'm3611F', 'Colin', '2022-05-24T20:51:48+08:00', 'm3611F', 'Colin', 'jhInsert', 'm3611F', 'Colin', '2022-05-24T20:51:48+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1551, 10134, '10005', '06拓展', '', 'login', '2022-05-24T20:52:05+08:00', 'FRP增加安全性', NULL, NULL, NULL, NULL, NULL, NULL, '', '2022-05-24T20:52:05+08:00', 'm3611F', 'Colin', '2022-05-24T20:52:05+08:00', 'm3611F', 'Colin', 'jhInsert', 'm3611F', 'Colin', '2022-05-24T20:52:05+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1552, 10135, '10005', '06拓展', '', 'login', '2022-05-24T20:53:21+08:00', '自签名SSL证书', NULL, NULL, NULL, NULL, NULL, NULL, '', '2022-05-24T20:53:21+08:00', 'm3611F', 'Colin', '2022-05-24T20:53:21+08:00', 'm3611F', 'Colin', 'jhInsert', 'm3611F', 'Colin', '2022-05-24T20:53:21+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1554, 10137, '10012', '', '', 'public', '2022-05-27T00:59:50+08:00', '【学习方法课程】IT初级编程 附录01 - 回顾Vuetify数据表格CRUD操作', NULL, '任务1：弄清楚Vuetify数据表格的代码，吃透，看明白\n\n任务2：魔改模板，改到好读、好用\n\n任务3：模板和函数要搞清楚。\n函数要弄清数组和对象的操作，会对照文档看明白\n\n任务4：要明白数据打包的概念，也就是给一个对象放进数值，照着江湖框架来放，知道可以有接口把数据穿回去就行。所以要理解江湖框架的概念。\n\n读不懂不要闷着\n\n每一两天有十分钟到半小时的答疑解惑。周六晚上答疑。\n\n不要把自己给读懵，要从已知的向未知的推进。', '<p>任务1：弄清楚Vuetify数据表格的代码，吃透，看明白</p>\n<p>任务2：魔改模板，改到好读、好用</p>\n<p>任务3：模板和函数要搞清楚。<br>函数要弄清数组和对象的操作，会对照文档看明白</p>\n<p>任务4：要明白数据打包的概念，也就是给一个对象放进数值，照着江湖框架来放，知道可以有接口把数据穿回去就行。所以要理解江湖框架的概念。</p>\n<p>读不懂不要闷着</p>\n<p>每一两天有十分钟到半小时的答疑解惑。周六晚上答疑。</p>\n<p>不要把自己给读懵，要从已知的向未知的推进。</p>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level01-appendix01-2022-05-27.mp4', '2022-05-27T00:56:03+08:00', '100005W', '安宁', '2022-05-27T00:59:50+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-05-27T00:59:50+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1555, 10138, '10004', '02应用协议', '', 'public', '2022-05-29T20:44:55+08:00', '代码规范', NULL, '- egg-js lint\n\n- 单元测试\n\n- Agent进程', '<ul>\n<li><p>egg-js lint</p>\n</li><li><p>单元测试</p>\n</li><li><p>Agent进程</p>\n</li></ul>\n', NULL, NULL, NULL, '', '2022-05-29T20:44:55+08:00', 'm3611F', 'Colin', '2022-06-12T05:05:00+08:00', 'admin', '武林盟主', 'jhUpdate', 'admin', '武林盟主', '2022-06-12T05:05:00+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1556, 10139, '10015', '江湖JS-运维', 'SSH,root,login,password,authorization,permission,security,root用户,登录,密码,权限,安全', 'public', '2022-05-29T22:06:34+08:00', 'CentOS7安全强化：禁止root用户通过SSH登录', NULL, '## 禁止root用户通过SSH登录[1]\n修改```/etc/ssh/sshd_config```，将其中的 ```PermitRootLogin yes``` 改为 ```PermitRootLogin no```。之后运行 ```service sshd restart```重启SSH服务。\n\n## 设置具有root权限的新用户[2]\n\n创建新用户并设置密码：（用户名自定）\n```\nuseradd newuser\npasswd newuser\n```\n\n使用该用户通过SSH登录系统。需要root权限时，使用```su root```命令切换用户。\n\n也可以给该用户添加sudu权限[4]。\n\n## 参考资料\n\n[1] CentOS7 禁用root用户登录配置sudo用户：https://www.jianshu.com/p/b1bc1415e7af\n[2] Centos7 SSH防暴力破解五种方法：https://blog.csdn.net/zhuxiongyin/article/details/97662740\n[3] 基于Linux下限制指定用户或IP地址通过SSH登录（访问控制）：https://blog.csdn.net/qq_44895681/article/details/106833019\n[4] 给用户添加sudo权限：https://www.cnblogs.com/leoshi/p/12432525.html\n', '<h2 id=\"h2-u7981u6B62rootu7528u6237u901Au8FC7sshu767Bu5F555B15D\"><a class=\"reference-link\" name=\"禁止root用户通过SSH登录[1]\"></a><span class=\"header-link octicon octicon-link\"></span>禁止root用户通过SSH登录[1]</h2><p>修改<code>/etc/ssh/sshd_config</code>，将其中的 <code>PermitRootLogin yes</code> 改为 <code>PermitRootLogin no</code>。之后运行 <code>service sshd restart</code>重启SSH服务。</p>\n<h2 id=\"h2-u8BBEu7F6Eu5177u6709rootu6743u9650u7684u65B0u7528u62375B25D\"><a class=\"reference-link\" name=\"设置具有root权限的新用户[2]\"></a><span class=\"header-link octicon octicon-link\"></span>设置具有root权限的新用户[2]</h2><p>创建新用户并设置密码：（用户名自定）</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code><span class=\"pln\">useradd newuser</span></code></li><li class=\"L1\"><code><span class=\"pln\">passwd newuser</span></code></li></ol></pre>\n<p>使用该用户通过SSH登录系统。需要root权限时，使用<code>su root</code>命令切换用户。</p>\n<p>也可以给该用户添加sudu权限[4]。</p>\n<h2 id=\"h2-u53C2u8003u8D44u6599\"><a class=\"reference-link\" name=\"参考资料\"></a><span class=\"header-link octicon octicon-link\"></span>参考资料</h2><p>[1] CentOS7 禁用root用户登录配置sudo用户：<a href=\"https://www.jianshu.com/p/b1bc1415e7af\">https://www.jianshu.com/p/b1bc1415e7af</a><br>[2] Centos7 SSH防暴力破解五种方法：<a href=\"https://blog.csdn.net/zhuxiongyin/article/details/97662740\">https://blog.csdn.net/zhuxiongyin/article/details/97662740</a><br>[3] 基于Linux下限制指定用户或IP地址通过SSH登录（访问控制）：<a href=\"https://blog.csdn.net/qq_44895681/article/details/106833019\">https://blog.csdn.net/qq_44895681/article/details/106833019</a><br>[4] 给用户添加sudo权限：<a href=\"https://www.cnblogs.com/leoshi/p/12432525.html\">https://www.cnblogs.com/leoshi/p/12432525.html</a></p>\n', NULL, NULL, NULL, '', '2022-05-29T22:06:35+08:00', '100005W', '安宁', '2022-06-18T19:27:00+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-18T19:27:00+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1557, 10140, '10004', '08江湖JS-工具', '', 'login', '2022-05-30T13:51:25+08:00', '江湖Studio', NULL, '## 江湖Studio\n\n- 基于VSCode插件机制开发 的 egg-jianghu编辑器, 主要用做xxx\n\n## 链接\n\n- [vscode-database-client](https://github.com/cweijan/vscode-database-client)\n- [从0到1开发一款自己的VSCode插件](https://segmentfault.com/a/1190000040720760)\n\n##  VSCode 插件相关配置\n\n-  VSCode插件存放目录: `~/.vscode/extensions`\n- 创建vscode 插件项目, [参考](https://segmentfault.com/a/1190000041105032)\n```bash\nnpm install -g yo generator-code\nyo code\n```\n\n## 江湖Studio本地启动\n\n1. 下载项目&安装依赖\n```bash\ngit clone git@github.com:fsll-tech/jianghu-studio-demo.git\ncd jianghu-studio-demo/demo\nnpm install\n```\n2. 运行/部署 江湖Studio 到 VSCode\n- 方案一: 使用 vscode extensionHost 启动 demo项目 ===》打开一个新窗口\n- 方案二: 使用 软链接将 `demo`目录 挂载到 ~/.vscode/extensions/demo ;然后重启vscode\n3. 使用江湖Studio\n	- 在当前 vscode 面板打开一个 egg-jianghu 项目，并创建`.jhconfig`文件\n	- 在vscode 左侧插件列表 点击 江湖\n	- dd\n\n## 开发风格\n\n- 需求优先级: 先把功能 走通，然后再做优化的部分\n\n## FAQ\n\n问题：开发(vscode extensionHos)时候如何 热重启/部署?\n问题Fix: 在工作目录`command` + `r` 刷新窗口\n\n问题: 数据配置信息\n问题Fix: `treeInit.ts`, 取当前项目config/config.local.js 内的 knex配置信息\n\n问题: .jhconfig  的作用？\n问题Fix: 江湖项目的标识, 所有的egg-jianghu项目都带有\n\n问题: launch.json.Extension Tests 中`\"--extensionTestsPath=${workspaceFolder}/out/test/suite/index\"` 参数的做用\n问题Fix: 指向/执行 一个测试文件\n', '<h2 id=\"h2-u6C5Fu6E56studio\"><a class=\"reference-link\" name=\"江湖Studio\"></a><span class=\"header-link octicon octicon-link\"></span>江湖Studio</h2><ul>\n<li>基于VSCode插件机制开发 的 egg-jianghu编辑器, 主要用做xxx</li></ul>\n<h2 id=\"h2-u94FEu63A5\"><a class=\"reference-link\" name=\"链接\"></a><span class=\"header-link octicon octicon-link\"></span>链接</h2><ul>\n<li><a href=\"https://github.com/cweijan/vscode-database-client\">vscode-database-client</a></li><li><a href=\"https://segmentfault.com/a/1190000040720760\">从0到1开发一款自己的VSCode插件</a></li></ul>\n<h2 id=\"h2-vscodeu63D2u4EF6u76F8u5173u914Du7F6E\"><a class=\"reference-link\" name=\"VSCode 插件相关配置\"></a><span class=\"header-link octicon octicon-link\"></span>VSCode 插件相关配置</h2><ul>\n<li> VSCode插件存放目录: <code>~/.vscode/extensions</code></li><li>创建vscode 插件项目, <a href=\"https://segmentfault.com/a/1190000041105032\">参考</a><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">npm install </span><span class=\"pun\">-</span><span class=\"pln\">g yo generator</span><span class=\"pun\">-</span><span class=\"pln\">code</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">yo code</span></code></li></ol></pre>\n</li></ul>\n<h2 id=\"h2-u6C5Fu6E56studiou672Cu5730u542Fu52A8\"><a class=\"reference-link\" name=\"江湖Studio本地启动\"></a><span class=\"header-link octicon octicon-link\"></span>江湖Studio本地启动</h2><ol>\n<li>下载项目&amp;安装依赖<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">git clone git@github</span><span class=\"pun\">.</span><span class=\"pln\">com</span><span class=\"pun\">:</span><span class=\"pln\">fsll</span><span class=\"pun\">-</span><span class=\"pln\">tech</span><span class=\"pun\">/</span><span class=\"pln\">jianghu</span><span class=\"pun\">-</span><span class=\"pln\">studio</span><span class=\"pun\">-</span><span class=\"pln\">demo</span><span class=\"pun\">.</span><span class=\"pln\">git</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">cd jianghu</span><span class=\"pun\">-</span><span class=\"pln\">studio</span><span class=\"pun\">-</span><span class=\"pln\">demo</span><span class=\"pun\">/</span><span class=\"pln\">demo</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">npm install</span></code></li></ol></pre>\n</li><li>运行/部署 江湖Studio 到 VSCode</li></ol>\n<ul>\n<li>方案一: 使用 vscode extensionHost 启动 demo项目 ===》打开一个新窗口</li><li>方案二: 使用 软链接将 <code>demo</code>目录 挂载到 ~/.vscode/extensions/demo ;然后重启vscode</li></ul>\n<ol start=\"3\">\n<li>使用江湖Studio<ul>\n<li>在当前 vscode 面板打开一个 egg-jianghu 项目，并创建<code>.jhconfig</code>文件</li><li>在vscode 左侧插件列表 点击 江湖</li><li>dd</li></ul>\n</li></ol>\n<h2 id=\"h2-u5F00u53D1u98CEu683C\"><a class=\"reference-link\" name=\"开发风格\"></a><span class=\"header-link octicon octicon-link\"></span>开发风格</h2><ul>\n<li>需求优先级: 先把功能 走通，然后再做优化的部分</li></ul>\n<h2 id=\"h2-faq\"><a class=\"reference-link\" name=\"FAQ\"></a><span class=\"header-link octicon octicon-link\"></span>FAQ</h2><p>问题：开发(vscode extensionHos)时候如何 热重启/部署?<br>问题Fix: 在工作目录<code>command</code> + <code>r</code> 刷新窗口</p>\n<p>问题: 数据配置信息<br>问题Fix: <code>treeInit.ts</code>, 取当前项目config/config.local.js 内的 knex配置信息</p>\n<p>问题: .jhconfig  的作用？<br>问题Fix: 江湖项目的标识, 所有的egg-jianghu项目都带有</p>\n<p>问题: launch.json.Extension Tests 中<code>\"--extensionTestsPath=${workspaceFolder}/out/test/suite/index\"</code> 参数的做用<br>问题Fix: 指向/执行 一个测试文件</p>\n', NULL, NULL, NULL, '', '2022-05-30T13:51:25+08:00', 'm3611F', 'Colin', '2022-05-31T16:07:48+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-05-31T16:07:48+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1558, 10141, '10014', 'Vuetify', '', 'public', '2022-06-03T00:15:07+08:00', '【学习方法课程】IT中级编程 第01课 - Vuetify数据表格的CRUD操作简化-模板', NULL, '## 学习IT课程的目的\n\n学会学习。要有工程师的思维：\n\n1. 抓概念 \n2. 读文档：最重要的是建立框架，知道要找啥，哪些需要、哪些不需要。\n3. 一定要自己亲手去尝试，亲手做一下，概念就明白了 \n\n## 深入理解：数据表格的CRUD（增删改查） \n\n重要概念：\n- 对话框：<v-dialog></v-dialog>\n- 输入框：<v-text-field></v-text-field>\n- 按钮：<v-btn></v-btn>\n- 函数调用：@click\n- 数据表格：<v-datatable></v-datatable>\n- 插槽：v-slot\n\n## 作业\n\n- 自己尝试动手修改简化版数据表格CRUD的这段代码，强化前面提到的这些概念。\n  - 自己增加一个对话框\n  - 自己增加一个插槽的按钮 \n\n点击[这里下载简化版数据表格CRUD的代码](https://dl.openjianghu.org/training/download-code-it-training-level02-lesson01-2022-06-02.zip \"这里下载简化版数据表格CRUD的代码\")。\n\n## 参考资料\n\n- 菜鸟教程：VueJS\n  - 教程：https://www.runoob.com/vue2/vue-tutorial.html\n\n- Vuetify：\n  - 安装 - CDN：https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\n  - 数据表格 - 基本：https://vuetifyjs.com/zh-Hans/components/data-tables/\n  - 数据表格 - CRUD操作：https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\n  - 对话框：https://vuetifyjs.com/zh-Hans/components/dialogs/', '<h2 id=\"h2-u5B66u4E60itu8BFEu7A0Bu7684u76EEu7684\"><a class=\"reference-link\" name=\"学习IT课程的目的\"></a><span class=\"header-link octicon octicon-link\"></span>学习IT课程的目的</h2><p>学会学习。要有工程师的思维：</p>\n<ol>\n<li>抓概念 </li><li>读文档：最重要的是建立框架，知道要找啥，哪些需要、哪些不需要。</li><li>一定要自己亲手去尝试，亲手做一下，概念就明白了 </li></ol>\n<h2 id=\"h2-u6DF1u5165u7406u89E3uFF1Au6570u636Eu8868u683Cu7684cruduFF08u589Eu5220u6539u67E5uFF09\"><a class=\"reference-link\" name=\"深入理解：数据表格的CRUD（增删改查）\"></a><span class=\"header-link octicon octicon-link\"></span>深入理解：数据表格的CRUD（增删改查）</h2><p>重要概念：</p>\n<ul>\n<li>对话框：&lt;v-dialog&gt;&lt;/v-dialog&gt;</li><li>输入框：&lt;v-text-field&gt;&lt;/v-text-field&gt;</li><li>按钮：&lt;v-btn&gt;&lt;/v-btn&gt;</li><li>函数调用：@click</li><li>数据表格：&lt;v-datatable&gt;&lt;/v-datatable&gt;</li><li>插槽：v-slot</li></ul>\n<h2 id=\"h2-u4F5Cu4E1A\"><a class=\"reference-link\" name=\"作业\"></a><span class=\"header-link octicon octicon-link\"></span>作业</h2><ul>\n<li>自己尝试动手修改简化版数据表格CRUD的这段代码，强化前面提到的这些概念。<ul>\n<li>自己增加一个对话框</li><li>自己增加一个插槽的按钮 </li></ul>\n</li></ul>\n<p>点击<a title=\"这里下载简化版数据表格CRUD的代码\" href=\"https://dl.openjianghu.org/training/download-code-it-training-level02-lesson01-2022-06-02.zip\">这里下载简化版数据表格CRUD的代码</a>。</p>\n<h2 id=\"h2-u53C2u8003u8D44u6599\"><a class=\"reference-link\" name=\"参考资料\"></a><span class=\"header-link octicon octicon-link\"></span>参考资料</h2><ul>\n<li><p>菜鸟教程：VueJS</p>\n<ul>\n<li>教程：<a href=\"https://www.runoob.com/vue2/vue-tutorial.html\">https://www.runoob.com/vue2/vue-tutorial.html</a></li></ul>\n</li><li><p>Vuetify：</p>\n<ul>\n<li>安装 - CDN：<a href=\"https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\">https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5</a></li><li>数据表格 - 基本：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/\">https://vuetifyjs.com/zh-Hans/components/data-tables/</a></li><li>数据表格 - CRUD操作：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\">https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c</a></li><li>对话框：<a href=\"https://vuetifyjs.com/zh-Hans/components/dialogs/\">https://vuetifyjs.com/zh-Hans/components/dialogs/</a></li></ul>\n</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level02-lesson01-2022-06-02.mp4', '2022-06-03T00:02:25+08:00', '100005W', '安宁', '2022-06-10T02:47:53+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-10T02:47:53+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1559, 10142, '10004', '06框架进阶', '', 'public', '2022-06-03T21:29:13+08:00', 'jianghuKnex用法总结', NULL, '- 本文的目标：介绍在江湖JS框架中如何使用JianghuKnex这个插件来进行数据库增删改查操作。\n\n## 什么是jianghuKnex？\n\n在阅读本文之前，\n\n- 你需要先对eggJS有一定的了解。\n- 对SQL有一定的了解。\n- 对KnexJS的语句有一定的了解。\n\njianghuKnex是jianghuJS框架提供的一个插件，用来构建查询语句，实现对MySQL数据库里的增删改查操作。\n\njianghuKnex是在EggJS的基础上开发的，因此它可以通过EggJS框架提供的ctx环境变量，跟网页的前后端通信完全兼容。\n\njianghuKnex是对Knex的一个封装，可以很方便构建各种增删改查的查询语句。\n\njianghuKnex可以保存数据历史记录。比如说：删除记录时，你只需要调用jianghuKnex的jhDelete语句，它就会自动在历史记录表里保留一份被删除的记录，并且可以随时恢复。\n\n## 什么时候使用jianghuKnex？\n\n在jianghuJS框架中，jianghuKnex最常使用的场景是：\n\n- resourceHook（参见：jianghuJS文档 “应用协议配置”中的“Resource Hook”部分 https://cn.openjianghu.org/doc/page/article/10008 ）\n- 自定义的service中\n\n## 怎么使用jianghuKnex\n\njianghuKnex是挂载在框架内置对象app下面的。在egg-jianghu中，使用jianghuKnex不需要在代码中引入代码库。\n\n在使用jianghuKnex时，只需要在你所创建的Service函数里，通过以下代码加入常量 jianghuKnex:\n\n```js\n// 定义一个常量：jianghuKnex\n\nconst { jianghuKnex } = this.app;\n```\n\n示例代码：\n\n```js\n// app/service/demo.js\n\nclass DemoService extends Service {\n  async demoSelectFunction() {\n    const { ctx, app } = this;\n    const { jianghuKnex } = app;\n    const result = await jianghuKnex(\'sample-table\').select();\n    return result;\n  }\n    \n  async demoInsertFunction() {\n    const { ctx, app } = this;\n    const { jianghuKnex } = app;\n    const result = await jianghuKnex(\'sample-table\', ctx).insert({id: 100, name: \'张三\'});\n    return result;\n  }\n}\n\nmodule.exports = DemoService;\n```\n\n通常，jianghuKnex都跟ctx一起使用，ctx指的是eggJS的前后端通信的请求和响应的数据（参见：eggJS文档）。\n\n\n\n## 使用jianghuKnex之前的准备工作\n\n### 安装\n\njianghuKnex是jianghuJS框架的默认插件。只要你的项目是基于jianghuJS框架的，就已经自动安装了jianghuKnex插件。\n\n### 数据库设置\n\n在使用jianghuKnex进行开发之前，请先确保你的数据库表符合jianghuJS框架里的数据库结构规范（https://openjianghu.org/doc/23/）\n\n接下来，在配置文件 `config/config.${env}.js` 配置各个环境的数据库连接信息。\n\n```js\n// config/config.${env}.js\nexports.knex = {\n  client: {\n    dialect: \'mysql\',\n      connection: {\n        host: \'127.0.0.1\',\n        port: 3306,\n        user: \'root\',\n        password: \'123456\',\n        database: \'${数据库名}\',\n      },\n      pool: { min: 10, max: 100 },\n      acquireConnectionTimeout: 30000,\n    },\n    app: true,\n  },\n};\n```\n\n## 使用方法\n\n### 基本格式\n\n在你的代码中使用jianghuKnex时，你可以按照以下的基本格式：\n\n```js\n// 选择全部数据记录\nawait this.app.jianghuKnex(\'${表的名字}\').select(); \n// 增加一条数据记录\nawait this.app.jianghuKnex(\'${表的名字}\').jhInsert({id: 1, data: \'abc\'}); \n// 更新id为1的数据记录\nawait this.app.jianghuKnex(\'${表的名字}\').where({id: 1}).jhUpdate({data: \'123\'}); \n```\n\n接下来，我们以一个学生管理系统为例，示范各种SQL数据操作的写法。\n\n- 示例数据表名：\'student_basic\'\n- 数据表部分数据字段：\n  - id：记录序号\n  - studentId：学生编号\n  - name：学生姓名\n  - gender：性别\n  - dateOfBirth：出生日期\n  - classId：班级编号\n  - level：年级\n\n### 读取数据\n\n- 读全部数据\n\n```js\nawait this.app.jianghuKnex(\'student_basic\').select();\n```\n\n- 读取第一条数据\n\n```js\nawait this.app.jianghuKnex(\'student_basic\').first();\n```\n\n- 仅读取某些字段 【需要试验】\n\n```js\n// 读取第一条数据\nawait this.app.jianghuKnex(\'student_basic\').column(\'studentId\', \'name\', \'classId\').first();\n\n// 读取全部数据\nawait this.app.jianghuKnex(\'student_basic\').column(\'studentId\', \'name\', \'classId\').select();\n```\n\n### 设置各种Where条件\n\n在jianghuKnex中，where条件并非必要，根据查询的需要增加即可。\n\n#### 普通查询条件：where\n\n``` js\n// 查询名叫“张三丰”、班级编号是“2021-01级-02班”的学生\nawait this.app.jianghuKnex(\'student_basic\').where({ name: ‘张三丰’, classId: ‘2021-01级-02班’}).select();\n```\n\n#### 在查询条件中规定多个值：whereIn\n\n```js\n// 查找所有名字是“张三丰”或者“张无忌”的学生\nawait this.app.jianghuKnex(\'student_basic\').whereIn({ \"name\": [\"张三丰\", \"张无忌\"] }).select();\n```\n\n#### 模糊查询条件：whereLike\n\n```js\n// 查询所有名字中含有“张”这个字的学生：\nawait this.app.jianghuKnex(\'${表的名字}\').whereLike({ \"name\": \"张\" }).select();\n```\n\n#### 高级搜索条件：whereOptions\n\n使用多元数组，规定多个查询条件。查询条件彼此之间是AND的关系。\n\n也就是说：查询符合所有Where条件的记录。\n\n在whereOptions中，可以指定进行数据比较的操作符，例如\"=\"、\"LIKE\"、“>”等等。\n\n```js\n// 查询条件：\n// 1. 名字为\"张无忌\"\n// 2. 年级为\"3\"年级以上\n// 3. 班级编号里含有\"2021\"\nawait this.app.jianghuKnex(\'student_basic\').whereOptions([[‘name’, ‘=’, ‘张无忌’],[‘level’, ‘>’, 3],[‘classId’, ‘LIKE’, ‘%2021%’]]).select();\n```\n\n#### 高级搜索条件：whereOrOptions\n\n使用多元数组，规定多个查询条件。查询条件彼此之间是OR的关系。\n\n也就是说：查询符合至少一条Where条件的记录。\n\n在whereOrOptions中，可以指定进行数据比较的操作符，例如\"=\"、\"LIKE\"、“>”等等。\n\n```js\n// 查询条件：\n// 1. 名字为\"张无忌\" 或者\n// 2. 年级为\"3\"年级以上 或者\n// 3. 班级编号里含有\"2021\"\nawait this.app.jianghuKnex(\'student_basic\').whereOrOptions([[‘name’, ‘=’, ‘张无忌’],[‘level’, ‘>’, 3],[‘classId’, ‘LIKE’, ‘%2021%’]]).select();\n```\n\n### 设置Order By、Limit等条件\n\n在jianghuKnex中，我们还可以对查询设置起始位置、条数以及排序规则。这些规则不是必须的，根据需要选填即可。\n\n#### 设置查询起始位置 offset\n\n例如，从第100位开始查询：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\').offset(100).select();\n```\n\n#### 设置查询条数 limit\n\n例如，查询前10条数据：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\').limit(10).select();\n```\n\n#### 设置排序规则\n\n例如，按照年龄倒序排列：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\').orderBy(\'age\', \'desc\').select();\n```\n\n也可以设置多个排序规则。例如，按照班级正序排列，再按年龄倒序排列：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\').orderBy([\n  \'classId\', { column: \'age\', order: \'desc\' }\n]).select();\n```\n\n### 插入数据 Insert\n\n插入一条数据：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\', ctx).jhInsert({\n  studentId: \'G00100\',\n  name: \'小虾米\',\n  gender: \'男\',\n  dateOfBirth：\'2010-01-01\',\n  classId：\'2022-01级-01班\'\n  level：1\n});\n```\n\n插入多条数据，需要使用数组：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\', ctx).jhInsert([{\n  studentId: \'G00003\',\n  name: \'小虾米\',\n  gender: \'male\',\n  dateOfBirth：\'2010-01-01\',\n  classId：\'2022-01级-02班\'\n  level：1\n}],[{\n  studentId: \'G00101\',\n  name: \'大虾米\',\n  gender: \'male\',\n  dateOfBirth：\'2010-01-02\',\n  classId：\'2022-01级-02班\'\n  level：1\n}]);\n```\n\n### 修改数据 Update\n\n修改学生编号为“G00101”的学生的姓名：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\',ctx).where({studentId: \'G00101\'}).jhUpdate({\n  name: \'张大虾\'\n});\n```\n\n可以通过设置where条件来修改多条数据。\n\n### 删除数据 Delete\n\n删除学生编号为“G00101”的数据：\n\n```js\nawait this.app.jianghuKnex(\'student_basic\',ctx).where({studentId: \'G00101\'}).jhDelete();\n```\n\n可以通过设置where条件来删除多条数据。\n\n### 注意事项：使用jhInsert/Update/Delete要传入ctx\n\njianghuKnex在对数据进行插入、修改或删除时，可以将数据的历史记录，存入```_record_history```表中。但需要注意的是，你需要把环境变量```ctx```作为一个参数传入```jianghuKnex()```函数中，这样才能记录是哪个用户执行了这个操作。\n\n在service中，一个完整的函数的写法是：\n\n```js\n// app/service/demo.js\n\nclass DemoService extends Service {\n  async demoSelectFunction() {\n    const { ctx, app } = this;\n    const { jianghuKnex } = app;\n    const result = await jianghuKnex(\'sample-table\').select();\n    return result;\n  }\n    \n  async demoInsertFunction() {\n    const { ctx, app } = this;\n    const { jianghuKnex } = app;\n    const result = await jianghuKnex(\'sample-table\', ctx).insert({id: 100, name: \'张三\'});\n    return result;\n  }\n}\n\nmodule.exports = DemoService;\n```\n\n## 参考资料：\n\n[1] Knex.js Guide 链接：http://knexjs.org/guide/', '<ul>\n<li>本文的目标：介绍在江湖JS框架中如何使用JianghuKnex这个插件来进行数据库增删改查操作。</li></ul>\n<h2 id=\"h2-u4EC0u4E48u662FjianghuknexuFF1F\"><a class=\"reference-link\" name=\"什么是jianghuKnex？\"></a><span class=\"header-link octicon octicon-link\"></span>什么是jianghuKnex？</h2><p>在阅读本文之前，</p>\n<ul>\n<li>你需要先对eggJS有一定的了解。</li><li>对SQL有一定的了解。</li><li>对KnexJS的语句有一定的了解。</li></ul>\n<p>jianghuKnex是jianghuJS框架提供的一个插件，用来构建查询语句，实现对MySQL数据库里的增删改查操作。</p>\n<p>jianghuKnex是在EggJS的基础上开发的，因此它可以通过EggJS框架提供的ctx环境变量，跟网页的前后端通信完全兼容。</p>\n<p>jianghuKnex是对Knex的一个封装，可以很方便构建各种增删改查的查询语句。</p>\n<p>jianghuKnex可以保存数据历史记录。比如说：删除记录时，你只需要调用jianghuKnex的jhDelete语句，它就会自动在历史记录表里保留一份被删除的记录，并且可以随时恢复。</p>\n<h2 id=\"h2-u4EC0u4E48u65F6u5019u4F7Fu7528jianghuknexuFF1F\"><a class=\"reference-link\" name=\"什么时候使用jianghuKnex？\"></a><span class=\"header-link octicon octicon-link\"></span>什么时候使用jianghuKnex？</h2><p>在jianghuJS框架中，jianghuKnex最常使用的场景是：</p>\n<ul>\n<li>resourceHook（参见：jianghuJS文档 “应用协议配置”中的“Resource Hook”部分 <a href=\"https://cn.openjianghu.org/doc/page/article/10008\">https://cn.openjianghu.org/doc/page/article/10008</a> ）</li><li>自定义的service中</li></ul>\n<h2 id=\"h2-u600Eu4E48u4F7Fu7528jianghuknex\"><a class=\"reference-link\" name=\"怎么使用jianghuKnex\"></a><span class=\"header-link octicon octicon-link\"></span>怎么使用jianghuKnex</h2><p>jianghuKnex是挂载在框架内置对象app下面的。在egg-jianghu中，使用jianghuKnex不需要在代码中引入代码库。</p>\n<p>在使用jianghuKnex时，只需要在你所创建的Service函数里，通过以下代码加入常量 jianghuKnex:</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 定义一个常量：jianghuKnex</span></code></li><li class=\"L1\"><code class=\"language-js\"></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">;</span></code></li></ol></pre>\n<p>示例代码：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// app/service/demo.js</span></code></li><li class=\"L1\"><code class=\"language-js\"></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"typ\">DemoService</span><span class=\"pln\"> extends </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">  async demoSelectFunction</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> ctx</span><span class=\"pun\">,</span><span class=\"pln\"> app </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> app</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'sample-table\'</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li><li class=\"L7\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> result</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-js\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-js\"><span class=\"pln\">    </span></code></li><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">  async demoInsertFunction</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> ctx</span><span class=\"pun\">,</span><span class=\"pln\"> app </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> app</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'sample-table\'</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">).</span><span class=\"pln\">insert</span><span class=\"pun\">({</span><span class=\"pln\">id</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pun\">,</span><span class=\"pln\"> name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'张三\'</span><span class=\"pun\">});</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> result</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-js\"></code></li><li class=\"L8\"><code class=\"language-js\"><span class=\"pln\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">DemoService</span><span class=\"pun\">;</span></code></li></ol></pre>\n<p>通常，jianghuKnex都跟ctx一起使用，ctx指的是eggJS的前后端通信的请求和响应的数据（参见：eggJS文档）。</p>\n<h2 id=\"h2-u4F7Fu7528jianghuknexu4E4Bu524Du7684u51C6u5907u5DE5u4F5C\"><a class=\"reference-link\" name=\"使用jianghuKnex之前的准备工作\"></a><span class=\"header-link octicon octicon-link\"></span>使用jianghuKnex之前的准备工作</h2><h3 id=\"h3-u5B89u88C5\"><a class=\"reference-link\" name=\"安装\"></a><span class=\"header-link octicon octicon-link\"></span>安装</h3><p>jianghuKnex是jianghuJS框架的默认插件。只要你的项目是基于jianghuJS框架的，就已经自动安装了jianghuKnex插件。</p>\n<h3 id=\"h3-u6570u636Eu5E93u8BBEu7F6E\"><a class=\"reference-link\" name=\"数据库设置\"></a><span class=\"header-link octicon octicon-link\"></span>数据库设置</h3><p>在使用jianghuKnex进行开发之前，请先确保你的数据库表符合jianghuJS框架里的数据库结构规范（<a href=\"https://openjianghu.org/doc/23/）\">https://openjianghu.org/doc/23/）</a></p>\n<p>接下来，在配置文件 <code>config/config.${env}.js</code> 配置各个环境的数据库连接信息。</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// config/config.${env}.js</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">exports</span><span class=\"pun\">.</span><span class=\"pln\">knex </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pln\">  client</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">    dialect</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'mysql\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">      connection</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">        host</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'127.0.0.1\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pln\">        port</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">3306</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-js\"><span class=\"pln\">        user</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'root\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-js\"><span class=\"pln\">        password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'123456\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-js\"><span class=\"pln\">        database</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'${数据库名}\'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">      </span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">      pool</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> min</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">10</span><span class=\"pun\">,</span><span class=\"pln\"> max</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pln\">      acquireConnectionTimeout</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">30000</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">    app</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">  </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pun\">};</span></code></li></ol></pre>\n<h2 id=\"h2-u4F7Fu7528u65B9u6CD5\"><a class=\"reference-link\" name=\"使用方法\"></a><span class=\"header-link octicon octicon-link\"></span>使用方法</h2><h3 id=\"h3-u57FAu672Cu683Cu5F0F\"><a class=\"reference-link\" name=\"基本格式\"></a><span class=\"header-link octicon octicon-link\"></span>基本格式</h3><p>在你的代码中使用jianghuKnex时，你可以按照以下的基本格式：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 选择全部数据记录</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'${表的名字}\'</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span><span class=\"pln\"> </span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"com\">// 增加一条数据记录</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'${表的名字}\'</span><span class=\"pun\">).</span><span class=\"pln\">jhInsert</span><span class=\"pun\">({</span><span class=\"pln\">id</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pun\">,</span><span class=\"pln\"> data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'abc\'</span><span class=\"pun\">});</span><span class=\"pln\"> </span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"com\">// 更新id为1的数据记录</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'${表的名字}\'</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\">id</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">1</span><span class=\"pun\">}).</span><span class=\"pln\">jhUpdate</span><span class=\"pun\">({</span><span class=\"pln\">data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'123\'</span><span class=\"pun\">});</span><span class=\"pln\"> </span></code></li></ol></pre>\n<p>接下来，我们以一个学生管理系统为例，示范各种SQL数据操作的写法。</p>\n<ul>\n<li>示例数据表名：\'student_basic\'</li><li>数据表部分数据字段：<ul>\n<li>id：记录序号</li><li>studentId：学生编号</li><li>name：学生姓名</li><li>gender：性别</li><li>dateOfBirth：出生日期</li><li>classId：班级编号</li><li>level：年级</li></ul>\n</li></ul>\n<h3 id=\"h3-u8BFBu53D6u6570u636E\"><a class=\"reference-link\" name=\"读取数据\"></a><span class=\"header-link octicon octicon-link\"></span>读取数据</h3><ul>\n<li>读全部数据</li></ul>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<ul>\n<li>读取第一条数据</li></ul>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">first</span><span class=\"pun\">();</span></code></li></ol></pre>\n<ul>\n<li>仅读取某些字段 【需要试验】</li></ul>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 读取第一条数据</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">column</span><span class=\"pun\">(</span><span class=\"str\">\'studentId\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'name\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'classId\'</span><span class=\"pun\">).</span><span class=\"pln\">first</span><span class=\"pun\">();</span></code></li><li class=\"L2\"><code class=\"language-js\"></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"com\">// 读取全部数据</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">column</span><span class=\"pun\">(</span><span class=\"str\">\'studentId\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'name\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'classId\'</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h3 id=\"h3-u8BBEu7F6Eu5404u79CDwhereu6761u4EF6\"><a class=\"reference-link\" name=\"设置各种Where条件\"></a><span class=\"header-link octicon octicon-link\"></span>设置各种Where条件</h3><p>在jianghuKnex中，where条件并非必要，根据查询的需要增加即可。</p>\n<h4 id=\"h4-u666Eu901Au67E5u8BE2u6761u4EF6uFF1Awhere\"><a class=\"reference-link\" name=\"普通查询条件：where\"></a><span class=\"header-link octicon octicon-link\"></span>普通查询条件：where</h4><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 查询名叫“张三丰”、班级编号是“2021-01级-02班”的学生</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\"> name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">‘张三丰’,</span><span class=\"pln\"> classId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">‘</span><span class=\"lit\">2021</span><span class=\"pun\">-</span><span class=\"lit\">01</span><span class=\"pun\">级-</span><span class=\"lit\">02</span><span class=\"pun\">班’}).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h4 id=\"h4-u5728u67E5u8BE2u6761u4EF6u4E2Du89C4u5B9Au591Au4E2Au503CuFF1Awherein\"><a class=\"reference-link\" name=\"在查询条件中规定多个值：whereIn\"></a><span class=\"header-link octicon octicon-link\"></span>在查询条件中规定多个值：whereIn</h4><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 查找所有名字是“张三丰”或者“张无忌”的学生</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">whereIn</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"str\">\"name\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"str\">\"张三丰\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"张无忌\"</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">}).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h4 id=\"h4-u6A21u7CCAu67E5u8BE2u6761u4EF6uFF1Awherelike\"><a class=\"reference-link\" name=\"模糊查询条件：whereLike\"></a><span class=\"header-link octicon octicon-link\"></span>模糊查询条件：whereLike</h4><pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 查询所有名字中含有“张”这个字的学生：</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'${表的名字}\'</span><span class=\"pun\">).</span><span class=\"pln\">whereLike</span><span class=\"pun\">({</span><span class=\"pln\"> </span><span class=\"str\">\"name\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"张\"</span><span class=\"pln\"> </span><span class=\"pun\">}).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h4 id=\"h4-u9AD8u7EA7u641Cu7D22u6761u4EF6uFF1Awhereoptions\"><a class=\"reference-link\" name=\"高级搜索条件：whereOptions\"></a><span class=\"header-link octicon octicon-link\"></span>高级搜索条件：whereOptions</h4><p>使用多元数组，规定多个查询条件。查询条件彼此之间是AND的关系。</p>\n<p>也就是说：查询符合所有Where条件的记录。</p>\n<p>在whereOptions中，可以指定进行数据比较的操作符，例如\"=\"、\"LIKE\"、“&gt;”等等。</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 查询条件：</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"com\">// 1. 名字为\"张无忌\"</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"com\">// 2. 年级为\"3\"年级以上</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"com\">// 3. 班级编号里含有\"2021\"</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">whereOptions</span><span class=\"pun\">([[‘</span><span class=\"pln\">name</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘=’,</span><span class=\"pln\"> </span><span class=\"pun\">‘张无忌’],[‘</span><span class=\"pln\">level</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘&gt;’,</span><span class=\"pln\"> </span><span class=\"lit\">3</span><span class=\"pun\">],[‘</span><span class=\"pln\">classId</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘</span><span class=\"pln\">LIKE</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘%</span><span class=\"lit\">2021</span><span class=\"pun\">%’]]).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h4 id=\"h4-u9AD8u7EA7u641Cu7D22u6761u4EF6uFF1Awhereoroptions\"><a class=\"reference-link\" name=\"高级搜索条件：whereOrOptions\"></a><span class=\"header-link octicon octicon-link\"></span>高级搜索条件：whereOrOptions</h4><p>使用多元数组，规定多个查询条件。查询条件彼此之间是OR的关系。</p>\n<p>也就是说：查询符合至少一条Where条件的记录。</p>\n<p>在whereOrOptions中，可以指定进行数据比较的操作符，例如\"=\"、\"LIKE\"、“&gt;”等等。</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// 查询条件：</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"com\">// 1. 名字为\"张无忌\" 或者</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"com\">// 2. 年级为\"3\"年级以上 或者</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"com\">// 3. 班级编号里含有\"2021\"</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">whereOrOptions</span><span class=\"pun\">([[‘</span><span class=\"pln\">name</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘=’,</span><span class=\"pln\"> </span><span class=\"pun\">‘张无忌’],[‘</span><span class=\"pln\">level</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘&gt;’,</span><span class=\"pln\"> </span><span class=\"lit\">3</span><span class=\"pun\">],[‘</span><span class=\"pln\">classId</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘</span><span class=\"pln\">LIKE</span><span class=\"pun\">’,</span><span class=\"pln\"> </span><span class=\"pun\">‘%</span><span class=\"lit\">2021</span><span class=\"pun\">%’]]).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h3 id=\"h3-u8BBEu7F6Eorderbyu3001limitu7B49u6761u4EF6\"><a class=\"reference-link\" name=\"设置Order By、Limit等条件\"></a><span class=\"header-link octicon octicon-link\"></span>设置Order By、Limit等条件</h3><p>在jianghuKnex中，我们还可以对查询设置起始位置、条数以及排序规则。这些规则不是必须的，根据需要选填即可。</p>\n<h4 id=\"h4-u8BBEu7F6Eu67E5u8BE2u8D77u59CBu4F4Du7F6Eoffset\"><a class=\"reference-link\" name=\"设置查询起始位置 offset\"></a><span class=\"header-link octicon octicon-link\"></span>设置查询起始位置 offset</h4><p>例如，从第100位开始查询：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">offset</span><span class=\"pun\">(</span><span class=\"lit\">100</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h4 id=\"h4-u8BBEu7F6Eu67E5u8BE2u6761u6570limit\"><a class=\"reference-link\" name=\"设置查询条数 limit\"></a><span class=\"header-link octicon octicon-link\"></span>设置查询条数 limit</h4><p>例如，查询前10条数据：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">limit</span><span class=\"pun\">(</span><span class=\"lit\">10</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h4 id=\"h4-u8BBEu7F6Eu6392u5E8Fu89C4u5219\"><a class=\"reference-link\" name=\"设置排序规则\"></a><span class=\"header-link octicon octicon-link\"></span>设置排序规则</h4><p>例如，按照年龄倒序排列：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">orderBy</span><span class=\"pun\">(</span><span class=\"str\">\'age\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'desc\'</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<p>也可以设置多个排序规则。例如，按照班级正序排列，再按年龄倒序排列：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">).</span><span class=\"pln\">orderBy</span><span class=\"pun\">([</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">  </span><span class=\"str\">\'classId\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> column</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'age\'</span><span class=\"pun\">,</span><span class=\"pln\"> order</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'desc\'</span><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pun\">]).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li></ol></pre>\n<h3 id=\"h3-u63D2u5165u6570u636Einsert\"><a class=\"reference-link\" name=\"插入数据 Insert\"></a><span class=\"header-link octicon octicon-link\"></span>插入数据 Insert</h3><p>插入一条数据：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">).</span><span class=\"pln\">jhInsert</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">  studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'G00100\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pln\">  name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'小虾米\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">  gender</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'男\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">  dateOfBirth</span><span class=\"pun\">：</span><span class=\"str\">\'2010-01-01\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">  classId</span><span class=\"pun\">：</span><span class=\"str\">\'2022-01级-01班\'</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pln\">  level</span><span class=\"pun\">：</span><span class=\"lit\">1</span></code></li><li class=\"L7\"><code class=\"language-js\"><span class=\"pun\">});</span></code></li></ol></pre>\n<p>插入多条数据，需要使用数组：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">).</span><span class=\"pln\">jhInsert</span><span class=\"pun\">([{</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">  studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'G00003\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pln\">  name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'小虾米\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">  gender</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'male\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">  dateOfBirth</span><span class=\"pun\">：</span><span class=\"str\">\'2010-01-01\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">  classId</span><span class=\"pun\">：</span><span class=\"str\">\'2022-01级-02班\'</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pln\">  level</span><span class=\"pun\">：</span><span class=\"lit\">1</span></code></li><li class=\"L7\"><code class=\"language-js\"><span class=\"pun\">}],[{</span></code></li><li class=\"L8\"><code class=\"language-js\"><span class=\"pln\">  studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'G00101\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-js\"><span class=\"pln\">  name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'大虾米\'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">  gender</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'male\'</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">  dateOfBirth</span><span class=\"pun\">：</span><span class=\"str\">\'2010-01-02\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pln\">  classId</span><span class=\"pun\">：</span><span class=\"str\">\'2022-01级-02班\'</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">  level</span><span class=\"pun\">：</span><span class=\"lit\">1</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pun\">}]);</span></code></li></ol></pre>\n<h3 id=\"h3-u4FEEu6539u6570u636Eupdate\"><a class=\"reference-link\" name=\"修改数据 Update\"></a><span class=\"header-link octicon octicon-link\"></span>修改数据 Update</h3><p>修改学生编号为“G00101”的学生的姓名：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">,</span><span class=\"pln\">ctx</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\">studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'G00101\'</span><span class=\"pun\">}).</span><span class=\"pln\">jhUpdate</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">  name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'张大虾\'</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pun\">});</span></code></li></ol></pre>\n<p>可以通过设置where条件来修改多条数据。</p>\n<h3 id=\"h3-u5220u9664u6570u636Edelete\"><a class=\"reference-link\" name=\"删除数据 Delete\"></a><span class=\"header-link octicon octicon-link\"></span>删除数据 Delete</h3><p>删除学生编号为“G00101”的数据：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'student_basic\'</span><span class=\"pun\">,</span><span class=\"pln\">ctx</span><span class=\"pun\">).</span><span class=\"pln\">where</span><span class=\"pun\">({</span><span class=\"pln\">studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'G00101\'</span><span class=\"pun\">}).</span><span class=\"pln\">jhDelete</span><span class=\"pun\">();</span></code></li></ol></pre>\n<p>可以通过设置where条件来删除多条数据。</p>\n<h3 id=\"h3-u6CE8u610Fu4E8Bu9879uFF1Au4F7Fu7528jhinsert/update/deleteu8981u4F20u5165ctx\"><a class=\"reference-link\" name=\"注意事项：使用jhInsert/Update/Delete要传入ctx\"></a><span class=\"header-link octicon octicon-link\"></span>注意事项：使用jhInsert/Update/Delete要传入ctx</h3><p>jianghuKnex在对数据进行插入、修改或删除时，可以将数据的历史记录，存入<code>_record_history</code>表中。但需要注意的是，你需要把环境变量<code>ctx</code>作为一个参数传入<code>jianghuKnex()</code>函数中，这样才能记录是哪个用户执行了这个操作。</p>\n<p>在service中，一个完整的函数的写法是：</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-js\"><span class=\"com\">// app/service/demo.js</span></code></li><li class=\"L1\"><code class=\"language-js\"></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"kwd\">class</span><span class=\"pln\"> </span><span class=\"typ\">DemoService</span><span class=\"pln\"> extends </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">  async demoSelectFunction</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> ctx</span><span class=\"pun\">,</span><span class=\"pln\"> app </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> app</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'sample-table\'</span><span class=\"pun\">).</span><span class=\"pln\">select</span><span class=\"pun\">();</span></code></li><li class=\"L7\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> result</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-js\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-js\"><span class=\"pln\">    </span></code></li><li class=\"L0\"><code class=\"language-js\"><span class=\"pln\">  async demoInsertFunction</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> ctx</span><span class=\"pun\">,</span><span class=\"pln\"> app </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> jianghuKnex </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> app</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> await jianghuKnex</span><span class=\"pun\">(</span><span class=\"str\">\'sample-table\'</span><span class=\"pun\">,</span><span class=\"pln\"> ctx</span><span class=\"pun\">).</span><span class=\"pln\">insert</span><span class=\"pun\">({</span><span class=\"pln\">id</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pun\">,</span><span class=\"pln\"> name</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'张三\'</span><span class=\"pun\">});</span></code></li><li class=\"L4\"><code class=\"language-js\"><span class=\"pln\">    </span><span class=\"kwd\">return</span><span class=\"pln\"> result</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-js\"><span class=\"pln\">  </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-js\"><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-js\"></code></li><li class=\"L8\"><code class=\"language-js\"><span class=\"pln\">module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">DemoService</span><span class=\"pun\">;</span></code></li></ol></pre>\n<h2 id=\"h2-u53C2u8003u8D44u6599uFF1A\"><a class=\"reference-link\" name=\"参考资料：\"></a><span class=\"header-link octicon octicon-link\"></span>参考资料：</h2><p>[1] Knex.js Guide 链接：<a href=\"http://knexjs.org/guide/\">http://knexjs.org/guide/</a></p>\n', NULL, NULL, NULL, '', '2022-06-03T21:29:15+08:00', '100005W', '安宁', '2022-06-03T21:55:02+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-03T21:55:02+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1560, 10143, '10014', 'Vuetify', '', 'public', '2022-06-10T02:47:26+08:00', '【学习方法课程】IT中级编程 第02课 - Vuetify数据表格的CRUD操作简化 - 函数', NULL, '## Vuetify数据表格CRUD操作：简化函数的写法\n\n数据表格CRUD的函数部分可以被进一步简化。\n\n简化的原则：\n\n- 按照功能，不同的模板分开写，不同的函数也分开写，不要混在一起。\n- 变量的名字、函数的名字，要有意义，不要起没有意义的名字，不然不好懂。\n- 页面点击的操作，都调用同一个函数，将点击操作的类型传入作为参数，这样所有的操作函数都会被放在一起，功能和结构就会清楚了。\n\n## 作业：\n\n- 读简化版数据表格CRUD的代码，强化前面提到的这些概念。\n- 理解新增、修改和删除操作都调用了哪些函数，分别完成了哪些功能。\n\n[点击这里下载简化版数据表格CRUD的代码](https://dl.openjianghu.org/training/download-code-it-training-level02-lesson02-2022-06-09.zip \"点击这里下载简化版数据表格CRUD的代码\")。\n\n## 参考资料\n\n- 菜鸟教程：VueJS\n  - 教程：https://www.runoob.com/vue2/vue-tutorial.html\n\n- Vuetify：\n  - 安装 - CDN：https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\n  - 数据表格 - 基本：https://vuetifyjs.com/zh-Hans/components/data-tables/\n  - 数据表格 - CRUD操作：https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\n  - 对话框：https://vuetifyjs.com/zh-Hans/components/dialogs/', '<h2 id=\"h2-vuetifyu6570u636Eu8868u683Ccrudu64CDu4F5CuFF1Au7B80u5316u51FDu6570u7684u5199u6CD5\"><a class=\"reference-link\" name=\"Vuetify数据表格CRUD操作：简化函数的写法\"></a><span class=\"header-link octicon octicon-link\"></span>Vuetify数据表格CRUD操作：简化函数的写法</h2><p>数据表格CRUD的函数部分可以被进一步简化。</p>\n<p>简化的原则：</p>\n<ul>\n<li>按照功能，不同的模板分开写，不同的函数也分开写，不要混在一起。</li><li>变量的名字、函数的名字，要有意义，不要起没有意义的名字，不然不好懂。</li><li>页面点击的操作，都调用同一个函数，将点击操作的类型传入作为参数，这样所有的操作函数都会被放在一起，功能和结构就会清楚了。</li></ul>\n<h2 id=\"h2-u4F5Cu4E1AuFF1A\"><a class=\"reference-link\" name=\"作业：\"></a><span class=\"header-link octicon octicon-link\"></span>作业：</h2><ul>\n<li>读简化版数据表格CRUD的代码，强化前面提到的这些概念。</li><li>理解新增、修改和删除操作都调用了哪些函数，分别完成了哪些功能。</li></ul>\n<p><a title=\"点击这里下载简化版数据表格CRUD的代码\" href=\"https://dl.openjianghu.org/training/download-code-it-training-level02-lesson02-2022-06-09.zip\">点击这里下载简化版数据表格CRUD的代码</a>。</p>\n<h2 id=\"h2-u53C2u8003u8D44u6599\"><a class=\"reference-link\" name=\"参考资料\"></a><span class=\"header-link octicon octicon-link\"></span>参考资料</h2><ul>\n<li><p>菜鸟教程：VueJS</p>\n<ul>\n<li>教程：<a href=\"https://www.runoob.com/vue2/vue-tutorial.html\">https://www.runoob.com/vue2/vue-tutorial.html</a></li></ul>\n</li><li><p>Vuetify：</p>\n<ul>\n<li>安装 - CDN：<a href=\"https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5\">https://vuetifyjs.com/zh-Hans/getting-started/installation/#cdn-768475286cd5</a></li><li>数据表格 - 基本：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/\">https://vuetifyjs.com/zh-Hans/components/data-tables/</a></li><li>数据表格 - CRUD操作：<a href=\"https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c\">https://vuetifyjs.com/zh-Hans/components/data-tables/#crud-64cd4f5c</a></li><li>对话框：<a href=\"https://vuetifyjs.com/zh-Hans/components/dialogs/\">https://vuetifyjs.com/zh-Hans/components/dialogs/</a></li></ul>\n</li></ul>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level02-lesson02-2022-06-09.mp4', '2022-06-10T02:33:44+08:00', '100005W', '安宁', '2022-06-10T02:47:26+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-10T02:47:26+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1561, 10144, '10005', '05多星Bot开发指南', '', 'login', '2022-06-11T22:15:29+08:00', '006FAQ', NULL, '## 多星小程序 chrome抓包\n\n- 问题: 通过小程序访问的页面 ，页面内触发的 socket请求没有记录在 chrome network中\n- 问题Fixed: 这是一个开发者体验的问题，暂时使用console查看socket请求日志。==待解决==', '<h2 id=\"h2-u591Au661Fu5C0Fu7A0Bu5E8Fchromeu6293u5305\"><a class=\"reference-link\" name=\"多星小程序 chrome抓包\"></a><span class=\"header-link octicon octicon-link\"></span>多星小程序 chrome抓包</h2><ul>\n<li>问题: 通过小程序访问的页面 ，页面内触发的 socket请求没有记录在 chrome network中</li><li>问题Fixed: 这是一个开发者体验的问题，暂时使用console查看socket请求日志。==待解决==</li></ul>\n', NULL, NULL, NULL, '', '2022-06-11T22:15:29+08:00', 'm3611F', 'Colin', '2022-06-18T08:29:51+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-18T08:29:51+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1562, 10145, '10010', '05其他', '', 'public', '2022-06-13T20:18:55+08:00', 'coturn 打洞实现 P2P通信', NULL, '## 链接\n\n- [contrun docker](https://hub.docker.com/r/instrumentisto/coturn)\n- [coturn github](https://github.com/coturn/coturn)\n- [coturn docker 运行注意事项](https://www.wyr.me/post/640)\n\n## 背景\n\n- P2P通信不经过服务端. E.g: 一对一私密通话\n- 自己搭建一个 类似于 `stun:stun.l.google.com:19302`的服务\n\n## SRS 打洞实现 P2P通信逻辑\n\n1. 信令服务：初始化或关闭通信并报告错误\n1. 网络配置：ICE将首先使用带有UDP的STUN建立起一个P2P端对端的连接，如果失败，将回退到TURN中继服务器。\n  - Candidate：主要包含了相关方的网络信息，包括自身局域网的ip、公网ip、turn服务器ip、stun服务器ip等\n1. 媒体配置：交换有关媒体的信息，例如分辨率和编解码器。\n  - SDP(Session Description Protocol)：描述建立音视频连接的一些属性，如音频的编码格式、视频的编码格式、是否接收/发送音视频等等SDP\n1. 客户端在SDP和Candidate握手成功后, 视频流就能直接传输, 不需要经过服务器啦\n> 备注: 默认使用`stun:stun.l.google.com:19302`打洞\n\n## coturn docker安装\n\n1. 启动coturn\n```bash\ndocker rm -f coturn\ndocker run -d --restart unless-stopped --network=host -v=/www/wwwroot/docker-data/coturn/:/var/lib/coturn/  --name coturn instrumentisto/coturn:4.5.2\n```\n2. 开放端口\n	- tcp 3478:3478\n	- udp 49152-65535\n3. 测试coturn服务; `stun:ipv6:3478` ===> [在线测试stun](https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/)\n\n\n\n\n', '<h2 id=\"h2-u94FEu63A5\"><a class=\"reference-link\" name=\"链接\"></a><span class=\"header-link octicon octicon-link\"></span>链接</h2><ul>\n<li><a href=\"https://hub.docker.com/r/instrumentisto/coturn\">contrun docker</a></li><li><a href=\"https://github.com/coturn/coturn\">coturn github</a></li><li><a href=\"https://www.wyr.me/post/640\">coturn docker 运行注意事项</a></li></ul>\n<h2 id=\"h2-u80CCu666F\"><a class=\"reference-link\" name=\"背景\"></a><span class=\"header-link octicon octicon-link\"></span>背景</h2><ul>\n<li>P2P通信不经过服务端. E.g: 一对一私密通话</li><li>自己搭建一个 类似于 <code>stun:stun.l.google.com:19302</code>的服务</li></ul>\n<h2 id=\"h2-srsu6253u6D1Eu5B9Eu73B020p2pu901Au4FE1u903Bu8F91\"><a class=\"reference-link\" name=\"SRS 打洞实现 P2P通信逻辑\"></a><span class=\"header-link octicon octicon-link\"></span>SRS 打洞实现 P2P通信逻辑</h2><ol>\n<li>信令服务：初始化或关闭通信并报告错误</li><li>网络配置：ICE将首先使用带有UDP的STUN建立起一个P2P端对端的连接，如果失败，将回退到TURN中继服务器。</li></ol>\n<ul>\n<li>Candidate：主要包含了相关方的网络信息，包括自身局域网的ip、公网ip、turn服务器ip、stun服务器ip等</li></ul>\n<ol>\n<li>媒体配置：交换有关媒体的信息，例如分辨率和编解码器。</li></ol>\n<ul>\n<li>SDP(Session Description Protocol)：描述建立音视频连接的一些属性，如音频的编码格式、视频的编码格式、是否接收/发送音视频等等SDP</li></ul>\n<ol>\n<li>客户端在SDP和Candidate握手成功后, 视频流就能直接传输, 不需要经过服务器啦<blockquote class=\"default\">\n<p>备注: 默认使用<code>stun:stun.l.google.com:19302</code>打洞</p>\n</blockquote>\n</li></ol>\n<h2 id=\"h2-coturndockeru5B89u88C5\"><a class=\"reference-link\" name=\"coturn docker安装\"></a><span class=\"header-link octicon octicon-link\"></span>coturn docker安装</h2><ol>\n<li>启动coturn<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">docker rm </span><span class=\"pun\">-</span><span class=\"pln\">f coturn</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">docker run </span><span class=\"pun\">-</span><span class=\"pln\">d </span><span class=\"pun\">--</span><span class=\"pln\">restart unless</span><span class=\"pun\">-</span><span class=\"pln\">stopped </span><span class=\"pun\">--</span><span class=\"pln\">network</span><span class=\"pun\">=</span><span class=\"pln\">host </span><span class=\"pun\">-</span><span class=\"pln\">v</span><span class=\"pun\">=/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">wwwroot</span><span class=\"pun\">/</span><span class=\"pln\">docker</span><span class=\"pun\">-</span><span class=\"pln\">data</span><span class=\"pun\">/</span><span class=\"pln\">coturn</span><span class=\"pun\">/:/</span><span class=\"pln\">var</span><span class=\"pun\">/</span><span class=\"pln\">lib</span><span class=\"pun\">/</span><span class=\"pln\">coturn</span><span class=\"pun\">/</span><span class=\"pln\">  </span><span class=\"pun\">--</span><span class=\"pln\">name coturn instrumentisto</span><span class=\"pun\">/</span><span class=\"pln\">coturn</span><span class=\"pun\">:</span><span class=\"lit\">4.5</span><span class=\"pun\">.</span><span class=\"lit\">2</span></code></li></ol></pre>\n</li><li>开放端口<ul>\n<li>tcp 3478:3478</li><li>udp 49152-65535</li></ul>\n</li><li>测试coturn服务; <code>stun:ipv6:3478</code> ===&gt; <a href=\"https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/\">在线测试stun</a></li></ol>\n', NULL, NULL, NULL, '', '2022-06-13T20:18:55+08:00', 'm3611F', 'Colin', '2022-06-13T20:30:26+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-13T20:30:26+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1563, 10146, '10015', '江湖JS-工具', '', 'login', '2022-06-14T15:27:01+08:00', 'ferry(工单系统)部署', NULL, '## 链接\n\n- [ferry github](https://github.com/lanyulei/ferry)\n- [ferry docker部署](https://www.fdevops.com/docs/ferry-tutorial-document/docker-ferry-install)\n\n## ferry docker部署\n\n> [测试环境 demo https://ferry.openjianghu.org/](https://ferry.openjianghu.org/)   admin/123456\n\n1. git clone https://github.com/lanyulei/ferry.git\n1. 修改配置\n```bash\n# 创建`ferry/config/needinit`\nvim ./ferry/config/needinit\n# 创建ferry数据库\ncreate database `ferry` default character set utf8mb4 collate utf8mb4_bin;\n# 修改/config/settings.yml 中的 mysql 配置 & redis配置\n  database:\n    dbtype: mysql\n    host: ipv4\n    name: ferry\n    password: 123456\n    port: 3306\n    username: root\n  redis:\n    url: redis://123456@ipv4:6379\n```\n1. 启动ferry\n```bash\ndocker run -itd --name ferry -v /www/wwwroot/ferry/config:/opt/workflow/ferry/config -p 8002:8002 lanyulei/ferry:1.0.1\n```\n1. 删除 ferry/config/needinit, 避免下次重复初始化\n', '<h2 id=\"h2-u94FEu63A5\"><a class=\"reference-link\" name=\"链接\"></a><span class=\"header-link octicon octicon-link\"></span>链接</h2><ul>\n<li><a href=\"https://github.com/lanyulei/ferry\">ferry github</a></li><li><a href=\"https://www.fdevops.com/docs/ferry-tutorial-document/docker-ferry-install\">ferry docker部署</a></li></ul>\n<h2 id=\"h2-ferrydockeru90E8u7F72\"><a class=\"reference-link\" name=\"ferry docker部署\"></a><span class=\"header-link octicon octicon-link\"></span>ferry docker部署</h2><blockquote class=\"default\">\n<p><a href=\"https://ferry.openjianghu.org/\">测试环境 demo https://ferry.openjianghu.org/</a>   admin/123456</p>\n</blockquote>\n<ol>\n<li>git clone <a href=\"https://github.com/lanyulei/ferry.git\">https://github.com/lanyulei/ferry.git</a></li><li>修改配置<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"com\"># 创建`ferry/config/needinit`</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">vim </span><span class=\"pun\">./</span><span class=\"pln\">ferry</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">/</span><span class=\"pln\">needinit</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"com\"># 创建ferry数据库</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">create database </span><span class=\"str\">`ferry`</span><span class=\"pln\"> default character </span><span class=\"kwd\">set</span><span class=\"pln\"> utf8mb4 collate utf8mb4_bin</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"com\"># 修改/config/settings.yml 中的 mysql 配置 &amp; redis配置</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">database</span><span class=\"pun\">:</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\"> dbtype</span><span class=\"pun\">:</span><span class=\"pln\"> mysql</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\"> host</span><span class=\"pun\">:</span><span class=\"pln\"> ipv4</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\"> name</span><span class=\"pun\">:</span><span class=\"pln\"> ferry</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\"> password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">123456</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> port</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">3306</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\"> username</span><span class=\"pun\">:</span><span class=\"pln\"> root</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">redis</span><span class=\"pun\">:</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> url</span><span class=\"pun\">:</span><span class=\"pln\"> redis</span><span class=\"pun\">://</span><span class=\"lit\">123456@ipv4</span><span class=\"pun\">:</span><span class=\"lit\">6379</span></code></li></ol></pre>\n</li><li>启动ferry<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">docker run </span><span class=\"pun\">-</span><span class=\"pln\">itd </span><span class=\"pun\">--</span><span class=\"pln\">name ferry </span><span class=\"pun\">-</span><span class=\"pln\">v </span><span class=\"pun\">/</span><span class=\"pln\">www</span><span class=\"pun\">/</span><span class=\"pln\">wwwroot</span><span class=\"pun\">/</span><span class=\"pln\">ferry</span><span class=\"pun\">/</span><span class=\"pln\">config</span><span class=\"pun\">:/</span><span class=\"pln\">opt</span><span class=\"pun\">/</span><span class=\"pln\">workflow</span><span class=\"pun\">/</span><span class=\"pln\">ferry</span><span class=\"pun\">/</span><span class=\"pln\">config </span><span class=\"pun\">-</span><span class=\"pln\">p </span><span class=\"lit\">8002</span><span class=\"pun\">:</span><span class=\"lit\">8002</span><span class=\"pln\"> lanyulei</span><span class=\"pun\">/</span><span class=\"pln\">ferry</span><span class=\"pun\">:</span><span class=\"lit\">1.0</span><span class=\"pun\">.</span><span class=\"lit\">1</span></code></li></ol></pre>\n</li><li>删除 ferry/config/needinit, 避免下次重复初始化</li></ol>\n', NULL, NULL, NULL, '', '2022-06-14T15:27:02+08:00', 'm3611F', 'Colin', '2022-06-14T15:40:01+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-14T15:40:01+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1564, 10147, '10005', '05多星Bot开发指南', '', 'login', '2022-06-15T09:04:40+08:00', '003多星xiaochengxu开发指南', NULL, '## 参考项目\n\n- [md_duoxing_bot_xiaochengxu_demo](https://github.com/fsll-tech/md_duoxing_bot_xiaochengxu_demo)\n\n## 应用场景\n\n- 类似于微信/钉钉 的小程序\n	- 关注(加好友)之后就可以访问 小程序内的页面\n\n## 环境\n\n- duoxing 账号\n- nodejs 16+\n- windows/mac/linux\n- mysql 5.7+\n\n## 从0创建一个xiaochengxu项目\n\n> 这里使用 https://duoxing-v5.openjianghu.org\n\n1. [使用jianghu-init 创建一个单应用项目](https://cn.openjianghu.org/doc/page/article/10005#h2-u793Au4F8Bu4E00uFF1Au521Bu5EFAu4E00u4E2Au72ECu7ACBu5E94u7528u9879u76EE28u5355u5E94u752829)\n1. package.json 添加`\"egg-duoxing\"`依赖. 注意: 需要重新`npm i`\n```bash\n  #  package.json\n  \"dependencies\": {\n    \"egg\": \"^2.15.1\",\n    \"egg-scripts\": \"^2.11.0\",\n    \"egg-duoxing\": \"1.0.1\"\n  },\n```\n1. 启用 `egg-duoxing`插件，并添加多星Bot相关配置\n```bash\n    # 👉`config/plugin.js`\n   eggDuoxing: {\n     enable: true,\n     package: \"egg-duoxing\",\n   },\n   # 👉`config/config.default.js`\n   view: {\n      defaultViewEngine: \"nunjucks\",\n      mapping: { \".html\": \"nunjucks\" },\n      root: [\n        path.join(appInfo.baseDir, \"app/view\"),\n        path.join(appInfo.baseDir, \"node_modules/egg-duoxing\", \"app/view\"),\n        path.join(eggJianghuPath, \"app/view\"),\n      ].join(\",\"),\n    },\n    # 👉`config/config.local.js`\n    duoxingBot: {\n      server: \"https://duoxing-v5.openjianghu.org\",\n      userId: \"W00001\",\n      password: \"123456\",\n      serverAppId: \"duoxing\",\n      deviceType: \"bot_xiaochengxu\",\n    },\n```\n1. 添加数据\n```mysql\n	INSERT INTO `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'xiaochengxu\', \'getView\', \'✅小程序：获取前端页面\', \'service\', \'{}\', \'{ \\\"service\\\": \\\"xiaochengxu\\\", \\\"serviceFunction\\\": \\\"getView\\\" }\', \'insert\', NULL, NULL, NULL);\n	\n	INSERT INTO  `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`,`operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'index\', \'selectItemListUseAccessControl\', \'✅服务端查询-查询列表(使用accsee control)\', \'sql\', \'{}\', \'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"select\\\" }\', \'insert\', NULL, NULL, NULL);\n	INSERT INTO `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'index\', \'selectItemList\', \'✅服务端查询-查询列表\', \'sql\', \'{}\', \'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"select\\\" }\', \'insert\', NULL, NULL, NULL);\n	INSERT INTO `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'index\', \'insertItem\', \'✅服务端查询-添加成员\', \'sql\', \'{}\', \'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"insert\\\" }\', \'insert\', NULL, NULL, NULL);\n	INSERT INTO `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'index\', \'updateItem\', \'✅服务端查询-更新成员\', \'sql\', \'{}\', \'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"jhUpdate\\\" }\', \'insert\', NULL, NULL, NULL);\n	INSERT INTO `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'index\', \'deleteItem\', \'✅服务端查询-删除信息\', \'sql\', \'{}\', \'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"jhDelete\\\" }\', \'insert\', NULL, NULL, NULL);\n\n	INSERT INTO `_user_group_role_resource` (`user`, `group`, `role`, `resource`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (\'*\', \'public\', \'*\', \'xiaochengxu.getView\', \'allow\', \'小程序获取页面内容, 开放给所有用户\', \'insert\', NULL, NULL, NULL);\n	INSERT INTO `_user_group_role_resource` (`user`, `group`, `role`, `resource`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (\'*\', \'public\', \'*\', \'index.*\', \'allow\', \'小程序首页, 开放给所有用户\', \'insert\', NULL, NULL, NULL);\n\n	INSERT INTO `_page` (`pageId`, `pageName`, `pageType`, `sort`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (\'index\', \'首页\', \'showInMenu\', \'1\', \'insert\', NULL, NULL, NULL);\n\n	INSERT INTO `_user_group_role_page` (`user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (\'*\', \'public\', \'*\', \'index\', \'allow\', \'首页; 开放给所有用户;\', \'insert\', NULL, NULL, NULL);\n```\n1. 创建小程序首页 `app/view/page/index.html`\n```html\n	{% extends \'template/xiaochengxuTemplate.html\'%}\n	{% block vue_template %}\n	<xiaochengxu-layout>\n	<!-- 页面主要内容 -->\n	<v-container class=\"fullScreen d-flex flex-column pa-xs-0 pa-0\">\n	  <v-row class=\"ma-0 pa-xs-4 align-center flex-none pt-0 \" :class=\"{\'pa-4\': !isMobile, \'pb-0\': !isMobile, \'pa-2\': isMobile}\">\n		<v-col cols=\"12\" sm=\"12\" md=\"3\" xl=\"2\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  <v-text-field v-model=\"serverSearchInput.studentId\" label=\"学生ID\" class=\"cus-v-input \" :class=\"{\'mr-2\': !isMobile}\" dense outlined></v-text-field>\n		</v-col>\n		<v-col cols=\"12\" sm=\"12\" md=\"3\" xl=\"2\" class=\"pa-xs-0 pb-3\" :class=\"{\'pb-xs-4\': !isMobile, \'mt-2\': isMobile}\">\n		  <v-text-field v-model=\"serverSearchInput.classId\" label=\"班级ID\" class=\"cus-v-input\" :class=\"{\'mr-2\': !isMobile}\" dense outlined></v-text-field>\n		</v-col>\n		<v-col :class=\"{\'pb-xs-4\': !isMobile, \'pt-2\': isMobile, \'pl-0\': isMobile}\" cols=\"12\" md=\"2\" sm=\"12\" xl=\"3\">\n		  <v-btn\n			  class=\"elevation-0\"\n			  color=\"success\"\n			  dark\n			  @click=\"getTableData\"\n		  >\n			查询\n		  </v-btn>\n		</v-col>\n	  </v-row>\n\n	  <v-divider></v-divider>\n	  <v-row class=\"ma-0 pa-xs-4 align-center flex-none pt-0 \" :class=\"{\'pa-4\': !isMobile, \'pb-0\': !isMobile, \'pa-2\': isMobile}\">\n\n		<v-col cols=\"12\" xs=\"4\" sm=\"4\" md=\"4\" xl=\"4\" class=\"pl-0\">\n		  <v-btn color=\"success\" small dark class=\"elevation-0 mr-2\" @click=\"handleTableButton({ text: \'新增\', buttonType: \'add\' }, null)\">新增</v-btn>\n		  <span class=\"body-2\">共{{ tableData.length }}条记录</span>\n		</v-col>\n\n		<v-spacer></v-spacer>\n\n		<v-col cols=\"12\" xs=\"8\" sm=\"3\" md=\"2\" xl=\"2\" class=\"pa-xs-0 pa-xs-2 col-sm-8-flex pl-0\">\n		  <v-select class=\"cus-v-input mr-2\" v-model=\"currentTableGenderType\" :items=\"[{value: \'all\', text: \'全部\'}, ...constantCollection.gender]\"\n					prefix=\"性别：\" dense item-text=\"text\" item-value=\"value\" dense outlined></v-select>\n		</v-col>\n\n		<v-col cols=\"12\" xs=\"8\" sm=\"4\" md=\"3\" xl=\"3\" class=\"pa-xs-0 pa-xs-2 col-sm-8-flex\">\n		  <v-text-field v-model=\"searchInput\" label=\"表格过滤\" class=\"cus-v-input\" dense outlined></v-text-field>\n		</v-col>\n\n	  </v-row>\n	  <v-data-table fixed-header\n					:headers=\"headers\"\n					:items=\"tableData\"\n					:search=\"searchInput\"\n					:footer-props=\"{ itemsPerPageOptions: [20, 40, 60, 100, -1] }\"\n					:items-per-page=\"20\"\n					mobile-breakpoint=\"0\"\n					:loading=\"isTableLoading\"\n					checkbox-color=\"success\"\n					class=\"elevation-0 mt-0 mb-xs-4 flex-fill d-flex flex-column\">\n		<template v-slot:item.gender=\"{ item }\">\n		  {{ getConstantCollectionItemText(\'gender\', item.gender) }}\n		</template>\n		<template v-slot:item.level=\"{ item }\">\n		  {{ getConstantCollectionItemText(\'level\', item.level) }}\n		</template>\n		<template v-slot:item.action=\"{ item }\">\n		  <v-btn small class=\"mr-2\" :class=\"tableButton.color\" v-for=\"tableButton of tableButtonList\" @click=\"handleTableButton(tableButton, item)\">\n			{{ tableButton.text }}\n		  </v-btn>\n		</template>\n	  </v-data-table>\n	</v-container>\n\n	<!-- 编辑抽屉 -->\n	<v-navigation-drawer v-model=\"isEditDrawerShow\" absolute temporary right width=\"80%\" hide-overlay\n						 class=\"elevation-24\">\n	  <v-form v-model=\"isFormValid\" v-if=\"isEditDrawerShow\" ref=\"form\" lazy-validation>\n		<v-row>\n		  <span class=\"title pa-6\">{{ currentClickButton.title }}信息</span>\n		  <v-spacer></v-spacer>\n		  <v-btn class=\"mt-7 mr-8 elevation-0\" fab x-small @click=\"isEditDrawerShow = false\">\n			<v-icon dark>mdi-close</v-icon>\n		  </v-btn>\n		</v-row>\n		<v-row class=\"pa-0 ma-0 pa-xs-4 pb-xs-4 flex-none\">\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-text-field class=\"cus-v-input mr-2\" dense outlined label=\"学生ID\" v-model=\"editItem.studentId\" :rules=\"requireRules\"></v-text-field>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-select class=\"cus-v-input mr-2\" dense outlined clearable label=\"班级ID\" v-model=\"editItem.classId\" :items=\"constantCollection.classId\"></v-select>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-text-field class=\"cus-v-input mr-2\" dense outlined label=\"学生名字\" v-model=\"editItem.name\"></v-text-field>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-select class=\"cus-v-input mr-2\" dense outlined clearable label=\"年级\" v-model=\"editItem.level\" :items=\"constantCollection.level\"></v-select>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-select class=\"cus-v-input mr-2\" dense outlined clearable label=\"性别\" v-model=\"editItem.gender\" :items=\"constantCollection.gender\"></v-select>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-menu class=\"cus-v-input mr-2\" offset-y max-width=\"290\">\n			  <template v-slot:activator=\"{ on, attrs }\">\n				<v-text-field class=\"cus-v-input mr-2\" dense outlined v-on=\"on\" label=\"出生日期\" v-model=\"editItem.dateOfBirth\"></v-text-field>\n			  </template>\n			  <v-date-picker color=\"success\" elevation=\"20\" v-model=\"editItem.dateOfBirth\"></v-date-picker>\n			</v-menu>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-text-field class=\"cus-v-input mr-2\" dense outlined label=\"身高\" v-model=\"editItem.bodyHeight\"></v-text-field>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-select class=\"cus-v-input mr-2\" dense outlined clearable label=\"学生状态\" v-model=\"editItem.studentStatus\" :items=\"constantCollection.studentStatus\"></v-select>\n		  </v-col>\n		  <v-col cols=\"12\" sm=\"12\" md=\"4\" xl=\"3\" class=\"pa-xs-0 pb-xs-4 pb-3\">\n			<v-text-field class=\"cus-v-input mr-2\" dense outlined label=\"备注\" v-model=\"editItem.remarks\"></v-text-field>\n		  </v-col>\n		</v-row>\n		<v-row class=\"justify-end pr-6\">\n		  <v-btn color=\"success\" small @click=\"saveInfo\" :style=\"{width: isMobile ? \'calc(100% - 45px)\' : \'200px\'}\" :class=\"{\'mb-2\': isMobile, \'mr-4\': isMobile}\">保存</v-btn>\n		  <v-btn class=\"ml-2\" small @click=\"isEditDrawerShow = false\" :style=\"{width: isMobile ? \'calc(100% - 45px)\' : \'200px\'}\" :class=\"{\'mr-4\': isMobile}\">取消</v-btn>\n		</v-row>\n	  </v-form>\n	</v-navigation-drawer>\n\n	</xiaochengxu-layout>\n\n	{% endblock %}\n\n	{% block vue_body %}\n\n	{% include \'layout/xiaochengxuLayout.html\' %}\n	{% include \'common/resetTableMaxHeight.html\' %}\n\n	<script type=\"module\">\n	new Vue({\n	  el: \'#app\',\n	  template: \'#app-template\',\n	  vuetify: new Vuetify(),\n	  data: () => ({\n		// 表格相关数据\n		isFormValid: true,\n		requireRules: [\n		  v => !!v || \'This is required\',\n		],\n		constantCollection: {\n		  gender: [{\"value\": \"male\", \"text\": \"男\"}, {\"value\": \"female\", \"text\": \"女\"}],\n		  classId: [\n			{\"value\": \"2021-01级-01班\", \"text\": \"2021-01级-01班\"}, {\"value\": \"2021-01级-02班\", \"text\": \"2021-01级-02班\"},\n			{\"value\": \"2021-02级-01班\", \"text\": \"2021-02级-01班\"}, {\"value\": \"2021-02级-02班\", \"text\": \"2021-02级-02班\"},\n			{\"value\": \"2021-03级-01班\", \"text\": \"2021-03级-01班\"}, {\"value\": \"2021-03级-02班\", \"text\": \"2021-03级-02班\"}\n		  ],\n		  level: [{\"value\": \"01\", \"text\": \"一年级\"}, {\"value\": \"02\", \"text\": \"二年级\"}, {\"value\": \"03\", \"text\": \"三年级\"}],\n		  icType: [{\"value\": \"身份证\", \"text\": \"身份证\"}, {\"value\": \"护照\", \"text\": \"护照\"}],\n		  enrollmentType: [{\"value\": \"正常升学\", \"text\": \"正常升学\"}, {\"value\": \"借读\", \"text\": \"借读\"}],\n		  studentStatus: [{\"value\": \"正常\", \"text\": \"正常\"}, {\"value\": \"退学\", \"text\": \"退学\"}]\n		},\n\n		serverSearchInput: {\n		  studentId: null,\n		  classId: null\n		},\n		currentTableGenderType: \'all\',\n		isEditDrawerShow: false,\n		searchInput: null,\n		isTableLoading: true,\n		tableDataFromBackend: [],\n		headers: [\n		  {text: \"学生ID\", value: \"studentId\", width: 120, class: \'fixed\', cellClass: \'fixed\'},\n		  {text: \"班级ID\", value: \"classId\", width: 140},\n		  {text: \"学生名字\", value: \"name\", width: 120},\n		  {text: \"年级\", value: \"level\", width: 120},\n		  {text: \"性别\", value: \"gender\", width: 120},\n		  {text: \"出生日期\", value: \"dateOfBirth\", width: 120},\n		  {text: \"身高\", value: \"bodyHeight\", width: 120},\n		  {text: \"学生状态\", value: \"studentStatus\", width: 120},\n		  {text: \"备注\", value: \"remarks\", width: 120},\n		  {text: \"操作者\", value: \"operationByUser\", width: 120},\n		  {text: \"操作时间\", value: \"operationAt\", width: 250},\n		  {text: \'操作\', value: \'action\', align: \'center\', sortable: false, width: 350, class: \'fixed\', cellClass: \'fixed\'},\n		],\n\n		currentClickButton: {title: \'新增\', action: \'add\'},\n		editItem: {},\n		tableButtonList: [\n		  {text: \'修改\', buttonType: \'edit\', color: \'success\',},\n		  {text: \'删除\', buttonType: \'delete\', color: \'error\',},\n		],\n	  }),\n	  computed: {\n		isMobile() {\n		  return window.innerWidth < 600;\n		},\n		tableData() {\n		  if (!this.currentTableGenderType || this.currentTableGenderType === \'all\') {\n			return this.tableDataFromBackend;\n		  }\n		  return this.tableDataFromBackend.filter(({gender}) => gender === this.currentTableGenderType);\n		},\n		computedEditItem() {\n		  return this.editItem;\n		},\n	  },\n	  watch: {},\n	  async created() {\n		await this.getTableData();\n	  },\n	  mounted() {},\n	  methods: {\n		/**\n		 * 获取表格数据\n		 */\n		async getTableData() {\n		  this.isTableLoading = true;\n		  const serverSearchInput = _.pickBy(this.serverSearchInput, value=> !!value);\n		  const { rows } = (await window.jianghuAxios({\n			data: {\n			  appData: {\n				pageId: \'index\',\n				actionId: \'selectItemList\',\n				actionData: {},\n				where: {},\n				whereLike: serverSearchInput,\n				orderBy: [{column: \'operationAt\', order: \'desc\'}]\n			  }\n			}\n		  })).data.appData.resultData;\n\n		  this.tableDataFromBackend = rows;\n		  this.isTableLoading = false;\n		},\n\n		/**\n		 * 点击表格数据按钮\n		 */\n		async handleTableButton(button, item) {\n		  const buttonType = button.buttonType;\n		  switch (buttonType) {\n			case \'edit\':\n			  this.currentClickButton = {action: \'edit\', title: \'修改\'};\n			  this.editItem = {...item};\n			  this.isEditDrawerShow = true;\n			  break;\n			case \'add\':\n			  this.currentClickButton = {action: \'add\', title: \'新增\'};\n			  this.editItem = {};\n			  this.isEditDrawerShow = true;\n			  break;\n			case \'delete\':\n			  this.editItem = {...item};\n			  await this.deleteStudent();\n			  break;\n		  }\n		},\n		/**\n		 * 删除学生\n		 */\n		async deleteStudent() {\n		  const dialogDone = await window.confirmDialog({ title: \'删除\', content: \'确定删除吗？\'});\n		  if (!dialogDone) {\n			return false;\n		  }\n		  const { id } = this.computedEditItem;\n		  await window.vtoast.loading(\"删除学生\");\n		  await window.jianghuAxios({\n			data: {\n			  appData: {\n				pageId: \'index\',\n				actionId: \'deleteItem\',\n				actionData: {},\n				where: { id: id }\n			  }\n			}\n		  });\n		  await window.vtoast.success(\"删除学生成功\");\n		  await this.getTableData();\n		},\n		/**\n		 * 保存数据\n		 */\n		async saveInfo() {\n		  if (this.currentClickButton.action === \'add\') {\n			await this.insertStudent();\n		  }\n		  if (this.currentClickButton.action === \'edit\') {\n			await this.updateStudent();\n		  }\n		},\n		/**\n		 * 新增学生\n		 */\n		async insertStudent() {\n		  if (await window.confirmDialog({ title: \'新增\', content: \'确定新增吗？\'})) {\n			delete this.computedEditItem.id;\n			await window.vtoast.loading(\"新增学生\");\n			await window.jianghuAxios({\n			  data: {\n				appData: {\n				  pageId: \'index\',\n				  actionId: \'insertItem\',\n				  actionData: this.computedEditItem\n				}\n			  }\n			})\n			await window.vtoast.success(\"新增学生成功\");\n			this.isEditDrawerShow = false;\n			await this.getTableData();\n		  }\n		},\n		/**\n		 * 保存学生\n		 */\n		async updateStudent() {\n		  if (await window.confirmDialog({ title: \'修改\', content: \'确定修改吗？\'})) {\n			const id = this.computedEditItem.id;\n			delete this.computedEditItem.id;\n			await window.vtoast.loading(\"修改学生\");\n			await window.jianghuAxios({\n			  data: {\n				appData: {\n				  pageId: \'index\',\n				  actionId: \'updateItem\',\n				  actionData: this.computedEditItem,\n				  where: {id: id}\n				}\n			  }\n			})\n			await window.vtoast.success(\"修改学生成功\");\n			this.isEditDrawerShow = false;\n			await this.getTableData();\n		  }\n		},\n		getConstantCollectionItemText(key, _value) {\n		  const constantCollectionItemFind = this.constantCollection[key].find(({value}) => value === _value);\n		  if(constantCollectionItemFind) {\n			return constantCollectionItemFind.text;\n		  }\n		  return null;\n		},\n		goToAnotherXiaochengxu({ botUserId, studentId }) {\n		  const xiaochengxuPageUrl = \"<$ ctx.app.config.duoxingBot.server $>/<$ ctx.app.config.duoxingBot.serverAppId $>/page/xiaochengxu\";\n		  const queryParams = {\n			botUserId, \n			pageId: \'fileManagement\',\n			studentId,\n		  };\n		  const queryStrings = Object.keys(queryParams)\n			.map(k => encodeURIComponent(k) + \'=\' + encodeURIComponent(queryParams[k]))\n			.join(\'&\');\n		  window.location.href = `${xiaochengxuPageUrl}?${queryStrings}`\n		}\n	  }\n	})\n	</script>\n\n	<style scoped>\n	</style>\n	{% endblock %}\n```\n1. 启动项目`npm run dev`\n1. 访问多星检查 xiaochengxu 是否显示 在**机器人列表**，然后测试一下页面功能\n> 注意：\n>   1. 当前账户必须和 机器人建立`好友关系`，才能看到**机器人列表**\n>   2. 当前账户必须 在 小程序-机器人的`_user`表内 有数据', '<h2 id=\"h2-u53C2u8003u9879u76EE\"><a class=\"reference-link\" name=\"参考项目\"></a><span class=\"header-link octicon octicon-link\"></span>参考项目</h2><ul>\n<li><a href=\"https://github.com/fsll-tech/md_duoxing_bot_xiaochengxu_demo\">md_duoxing_bot_xiaochengxu_demo</a></li></ul>\n<h2 id=\"h2-u5E94u7528u573Au666F\"><a class=\"reference-link\" name=\"应用场景\"></a><span class=\"header-link octicon octicon-link\"></span>应用场景</h2><ul>\n<li>类似于微信/钉钉 的小程序<ul>\n<li>关注(加好友)之后就可以访问 小程序内的页面</li></ul>\n</li></ul>\n<h2 id=\"h2-u73AFu5883\"><a class=\"reference-link\" name=\"环境\"></a><span class=\"header-link octicon octicon-link\"></span>环境</h2><ul>\n<li>duoxing 账号</li><li>nodejs 16+</li><li>windows/mac/linux</li><li>mysql 5.7+</li></ul>\n<h2 id=\"h2-u4ECE0u521Bu5EFAu4E00u4E2Axiaochengxuu9879u76EE\"><a class=\"reference-link\" name=\"从0创建一个xiaochengxu项目\"></a><span class=\"header-link octicon octicon-link\"></span>从0创建一个xiaochengxu项目</h2><blockquote class=\"default\">\n<p>这里使用 <a href=\"https://duoxing-v5.openjianghu.org\">https://duoxing-v5.openjianghu.org</a></p>\n</blockquote>\n<ol>\n<li><p><a href=\"https://cn.openjianghu.org/doc/page/article/10005#h2-u793Au4F8Bu4E00uFF1Au521Bu5EFAu4E00u4E2Au72ECu7ACBu5E94u7528u9879u76EE28u5355u5E94u752829\">使用jianghu-init 创建一个单应用项目</a></p>\n</li><li><p>package.json 添加<code>\"egg-duoxing\"</code>依赖. 注意: 需要重新<code>npm i</code></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"com\">#  package.json</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"str\">\"dependencies\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"^2.15.1\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg-scripts\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"^2.11.0\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg-duoxing\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"1.0.1\"</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li><p>启用 <code>egg-duoxing</code>插件，并添加多星Bot相关配置</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"com\"># 👉`config/plugin.js`</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">eggDuoxing</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">  enable</span><span class=\"pun\">:</span><span class=\"pln\"> true</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">  package</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"egg-duoxing\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"com\"># 👉`config/config.default.js`</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">view</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">   defaultViewEngine</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"nunjucks\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">   mapping</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span><span class=\"str\">\".html\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"nunjucks\"</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   root</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">     path</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">baseDir</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"app/view\"</span><span class=\"pun\">),</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     path</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"pln\">appInfo</span><span class=\"pun\">.</span><span class=\"pln\">baseDir</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"node_modules/egg-duoxing\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"app/view\"</span><span class=\"pun\">),</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">     path</span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"pln\">eggJianghuPath</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"app/view\"</span><span class=\"pun\">),</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">].</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"str\">\",\"</span><span class=\"pun\">),</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"com\"># 👉`config/config.local.js`</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\"> duoxingBot</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">   server</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"https://duoxing-v5.openjianghu.org\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">   userId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"W00001\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"123456\"</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   serverAppId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"duoxing\"</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">   deviceType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"bot_xiaochengxu\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li><p>添加数据</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'xiaochengxu\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'getView\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅小程序：获取前端页面\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'service\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"service\\\": \\\"xiaochengxu\\\", \\\"serviceFunction\\\": \\\"getView\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-mysql\"><span class=\"pln\"> </span></code></li><li class=\"L2\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO  </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'selectItemListUseAccessControl\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅服务端查询-查询列表(使用accsee control)\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'sql\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"select\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'selectItemList\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅服务端查询-查询列表\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'sql\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"select\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insertItem\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅服务端查询-添加成员\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'sql\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"insert\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L5\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'updateItem\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅服务端查询-更新成员\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'sql\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"jhUpdate\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'deleteItem\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅服务端查询-删除信息\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'sql\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"table\\\": \\\"student\\\", \\\"operation\\\": \\\"jhDelete\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L7\"><code class=\"language-mysql\"></code></li><li class=\"L8\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_user_group_role_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`user`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`group`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`role`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resource`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`allowOrDeny`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'public\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'xiaochengxu.getView\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'allow\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'小程序获取页面内容, 开放给所有用户\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_user_group_role_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`user`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`group`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`role`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resource`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`allowOrDeny`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'public\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'index.*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'allow\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'小程序首页, 开放给所有用户\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-mysql\"></code></li><li class=\"L1\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_page`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageName`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`sort`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'首页\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'showInMenu\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'1\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-mysql\"></code></li><li class=\"L3\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_user_group_role_page`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`user`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`group`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`role`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`page`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`allowOrDeny`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'public\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'allow\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'首页; 开放给所有用户;\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li></ol></pre>\n</li><li><p>创建小程序首页 <code>app/view/page/index.html</code></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\"> {% extends \'template/xiaochengxuTemplate.html\'%}</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\"> {% block vue_template %}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;xiaochengxu-layout&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"com\">&lt;!-- 页面主要内容 --&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;v-container</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"fullScreen d-flex flex-column pa-xs-0 pa-0\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;v-row</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"ma-0 pa-xs-4 align-center flex-none pt-0 \"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pa-4\': !isMobile, \'pb-0\': !isMobile, \'pa-2\': isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"2\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"serverSearchInput.studentId\"</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"学生ID\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input \"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'mr-2\': !isMobile}\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"2\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile, \'mt-2\': isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"serverSearchInput.classId\"</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"班级ID\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'mr-2\': !isMobile}\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile, \'pt-2\': isMobile, \'pl-0\': isMobile}\"</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"2\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"elevation-0\"</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"success\"</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"atn\">dark</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">           @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"getTableData\"</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">         查询</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;v-divider&gt;&lt;/v-divider&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;v-row</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"ma-0 pa-xs-4 align-center flex-none pt-0 \"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pa-4\': !isMobile, \'pb-0\': !isMobile, \'pa-2\': isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">xs</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pl-0\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"success\"</span><span class=\"pln\"> </span><span class=\"atn\">small</span><span class=\"pln\"> </span><span class=\"atn\">dark</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"elevation-0 mr-2\"</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"handleTableButton({ text: \'新增\', buttonType: \'add\' }, null)\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">新增</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;span</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"body-2\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">共{{ tableData.length }}条记录</span><span class=\"tag\">&lt;/span&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-spacer&gt;&lt;/v-spacer&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">xs</span><span class=\"pun\">=</span><span class=\"atv\">\"8\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"2\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"2\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pa-xs-2 col-sm-8-flex pl-0\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-select</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"currentTableGenderType\"</span><span class=\"pln\"> :</span><span class=\"atn\">items</span><span class=\"pun\">=</span><span class=\"atv\">\"[{value: \'all\', text: \'全部\'}, ...constantCollection.gender]\"</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">                 </span><span class=\"atn\">prefix</span><span class=\"pun\">=</span><span class=\"atv\">\"性别：\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">item-text</span><span class=\"pun\">=</span><span class=\"atv\">\"text\"</span><span class=\"pln\"> </span><span class=\"atn\">item-value</span><span class=\"pun\">=</span><span class=\"atv\">\"value\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"tag\">&gt;&lt;/v-select&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">xs</span><span class=\"pun\">=</span><span class=\"atv\">\"8\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pa-xs-2 col-sm-8-flex\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"searchInput\"</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"表格过滤\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;v-data-table</span><span class=\"pln\"> </span><span class=\"atn\">fixed-header</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">                 :</span><span class=\"atn\">headers</span><span class=\"pun\">=</span><span class=\"atv\">\"headers\"</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">                 :</span><span class=\"atn\">items</span><span class=\"pun\">=</span><span class=\"atv\">\"tableData\"</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">                 :</span><span class=\"atn\">search</span><span class=\"pun\">=</span><span class=\"atv\">\"searchInput\"</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">                 :</span><span class=\"atn\">footer-props</span><span class=\"pun\">=</span><span class=\"atv\">\"{ itemsPerPageOptions: [20, 40, 60, 100, -1] }\"</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">                 :</span><span class=\"atn\">items-per-page</span><span class=\"pun\">=</span><span class=\"atv\">\"20\"</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">                 </span><span class=\"atn\">mobile-breakpoint</span><span class=\"pun\">=</span><span class=\"atv\">\"0\"</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">                 :</span><span class=\"atn\">loading</span><span class=\"pun\">=</span><span class=\"atv\">\"isTableLoading\"</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">                 </span><span class=\"atn\">checkbox-color</span><span class=\"pun\">=</span><span class=\"atv\">\"success\"</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">                 </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"elevation-0 mt-0 mb-xs-4 flex-fill d-flex flex-column\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;template</span><span class=\"pln\"> </span><span class=\"atn\">v-slot:item</span><span class=\"pln\">.</span><span class=\"atn\">gender</span><span class=\"pun\">=</span><span class=\"atv\">\"{ item }\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       {{ getConstantCollectionItemText(\'gender\', item.gender) }}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/template&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;template</span><span class=\"pln\"> </span><span class=\"atn\">v-slot:item</span><span class=\"pln\">.</span><span class=\"atn\">level</span><span class=\"pun\">=</span><span class=\"atv\">\"{ item }\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       {{ getConstantCollectionItemText(\'level\', item.level) }}</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/template&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;template</span><span class=\"pln\"> </span><span class=\"atn\">v-slot:item</span><span class=\"pln\">.</span><span class=\"atn\">action</span><span class=\"pun\">=</span><span class=\"atv\">\"{ item }\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">small</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"mr-2\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"tableButton.color\"</span><span class=\"pln\"> </span><span class=\"atn\">v-for</span><span class=\"pun\">=</span><span class=\"atv\">\"tableButton of tableButtonList\"</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"handleTableButton(tableButton, item)\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">         {{ tableButton.text }}</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/template&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;/v-data-table&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/v-container&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"com\">&lt;!-- 编辑抽屉 --&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;v-navigation-drawer</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"isEditDrawerShow\"</span><span class=\"pln\"> </span><span class=\"atn\">absolute</span><span class=\"pln\"> </span><span class=\"atn\">temporary</span><span class=\"pln\"> </span><span class=\"atn\">right</span><span class=\"pln\"> </span><span class=\"atn\">width</span><span class=\"pun\">=</span><span class=\"atv\">\"80%\"</span><span class=\"pln\"> </span><span class=\"atn\">hide-overlay</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">                      </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"elevation-24\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;v-form</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"isFormValid\"</span><span class=\"pln\"> </span><span class=\"atn\">v-if</span><span class=\"pun\">=</span><span class=\"atv\">\"isEditDrawerShow\"</span><span class=\"pln\"> </span><span class=\"atn\">ref</span><span class=\"pun\">=</span><span class=\"atv\">\"form\"</span><span class=\"pln\"> </span><span class=\"atn\">lazy-validation</span><span class=\"tag\">&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-row&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;span</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"title pa-6\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">{{ currentClickButton.title }}信息</span><span class=\"tag\">&lt;/span&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-spacer&gt;&lt;/v-spacer&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"mt-7 mr-8 elevation-0\"</span><span class=\"pln\"> </span><span class=\"atn\">fab</span><span class=\"pln\"> </span><span class=\"atn\">x-small</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"isEditDrawerShow = false\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-icon</span><span class=\"pln\"> </span><span class=\"atn\">dark</span><span class=\"tag\">&gt;</span><span class=\"pln\">mdi-close</span><span class=\"tag\">&lt;/v-icon&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-row</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-0 ma-0 pa-xs-4 pb-xs-4 flex-none\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"学生ID\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.studentId\"</span><span class=\"pln\"> :</span><span class=\"atn\">rules</span><span class=\"pun\">=</span><span class=\"atv\">\"requireRules\"</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-select</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">clearable</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"班级ID\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.classId\"</span><span class=\"pln\"> :</span><span class=\"atn\">items</span><span class=\"pun\">=</span><span class=\"atv\">\"constantCollection.classId\"</span><span class=\"tag\">&gt;&lt;/v-select&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"学生名字\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.name\"</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-select</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">clearable</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"年级\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.level\"</span><span class=\"pln\"> :</span><span class=\"atn\">items</span><span class=\"pun\">=</span><span class=\"atv\">\"constantCollection.level\"</span><span class=\"tag\">&gt;&lt;/v-select&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-select</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">clearable</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"性别\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.gender\"</span><span class=\"pln\"> :</span><span class=\"atn\">items</span><span class=\"pun\">=</span><span class=\"atv\">\"constantCollection.gender\"</span><span class=\"tag\">&gt;&lt;/v-select&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-menu</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">offset-y</span><span class=\"pln\"> </span><span class=\"atn\">max-width</span><span class=\"pun\">=</span><span class=\"atv\">\"290\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"tag\">&lt;template</span><span class=\"pln\"> </span><span class=\"atn\">v-slot:activator</span><span class=\"pun\">=</span><span class=\"atv\">\"{ on, attrs }\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">             </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">v-on</span><span class=\"pun\">=</span><span class=\"atv\">\"on\"</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"出生日期\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.dateOfBirth\"</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"tag\">&lt;/template&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"tag\">&lt;v-date-picker</span><span class=\"pln\"> </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"success\"</span><span class=\"pln\"> </span><span class=\"atn\">elevation</span><span class=\"pun\">=</span><span class=\"atv\">\"20\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.dateOfBirth\"</span><span class=\"tag\">&gt;&lt;/v-date-picker&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;/v-menu&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"身高\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.bodyHeight\"</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-select</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">clearable</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"学生状态\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.studentStatus\"</span><span class=\"pln\"> :</span><span class=\"atn\">items</span><span class=\"pun\">=</span><span class=\"atv\">\"constantCollection.studentStatus\"</span><span class=\"tag\">&gt;&lt;/v-select&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pb-xs-4 pb-3\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input mr-2\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"备注\"</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"editItem.remarks\"</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-row</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"justify-end pr-6\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">color</span><span class=\"pun\">=</span><span class=\"atv\">\"success\"</span><span class=\"pln\"> </span><span class=\"atn\">small</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"saveInfo\"</span><span class=\"pln\"> :</span><span class=\"atn\">style</span><span class=\"pun\">=</span><span class=\"atv\">\"</span><span class=\"pun\">{</span><span class=\"pln\">width</span><span class=\"pun\">:</span><span class=\"pln\"> isMobile </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"str\">\'calc(100% - 45px)\'</span><span class=\"pln\"> </span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'200px\'</span><span class=\"pun\">}</span><span class=\"atv\">\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'mb-2\': isMobile, \'mr-4\': isMobile}\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">保存</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"ml-2\"</span><span class=\"pln\"> </span><span class=\"atn\">small</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"isEditDrawerShow = false\"</span><span class=\"pln\"> :</span><span class=\"atn\">style</span><span class=\"pun\">=</span><span class=\"atv\">\"</span><span class=\"pun\">{</span><span class=\"pln\">width</span><span class=\"pun\">:</span><span class=\"pln\"> isMobile </span><span class=\"pun\">?</span><span class=\"pln\"> </span><span class=\"str\">\'calc(100% - 45px)\'</span><span class=\"pln\"> </span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'200px\'</span><span class=\"pun\">}</span><span class=\"atv\">\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'mr-4\': isMobile}\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">取消</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;/v-form&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/v-navigation-drawer&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/xiaochengxu-layout&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\"> {% endblock %}</span></code></li><li class=\"L3\"><code class=\"language-html\"></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\"> {% block vue_body %}</span></code></li><li class=\"L5\"><code class=\"language-html\"></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\"> {% include \'layout/xiaochengxuLayout.html\' %}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\"> {% include \'common/resetTableMaxHeight.html\' %}</span></code></li><li class=\"L8\"><code class=\"language-html\"></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">type</span><span class=\"pun\">=</span><span class=\"atv\">\"module\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vue</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">   el</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'#app\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">   template</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'#app-template\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">   vuetify</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vuetify</span><span class=\"pun\">(),</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">   data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">({</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">// 表格相关数据</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     isFormValid</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     requireRules</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       v </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">!!</span><span class=\"pln\">v </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'This is required\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">],</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     constantCollection</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       gender</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"male\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"男\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"female\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"女\"</span><span class=\"pun\">}],</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       classId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-01班\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-01班\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-02班\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-01级-02班\"</span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-01班\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-01班\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-02班\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-02级-02班\"</span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-01班\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-01班\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-02班\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"2021-03级-02班\"</span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">],</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       level</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"01\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"一年级\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"02\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"二年级\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"03\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"三年级\"</span><span class=\"pun\">}],</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       icType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"身份证\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"身份证\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"护照\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"护照\"</span><span class=\"pun\">}],</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       enrollmentType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"正常升学\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"正常升学\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"借读\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"借读\"</span><span class=\"pun\">}],</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       studentStatus</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"正常\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"正常\"</span><span class=\"pun\">},</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"str\">\"value\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"退学\"</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\"text\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"退学\"</span><span class=\"pun\">}]</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-html\"></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     serverSearchInput</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       studentId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       classId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     currentTableGenderType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'all\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     isEditDrawerShow</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     searchInput</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     isTableLoading</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     tableDataFromBackend</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[],</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     headers</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"学生ID\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"studentId\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'fixed\'</span><span class=\"pun\">,</span><span class=\"pln\"> cellClass</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'fixed\'</span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"班级ID\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"classId\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">140</span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"学生名字\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"name\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"年级\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"level\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"性别\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"gender\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"出生日期\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"dateOfBirth\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"身高\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"bodyHeight\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"学生状态\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"studentStatus\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"备注\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"remarks\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"操作者\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"operationByUser\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">120</span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"操作时间\"</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"operationAt\"</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">250</span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'操作\'</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'action\'</span><span class=\"pun\">,</span><span class=\"pln\"> align</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'center\'</span><span class=\"pun\">,</span><span class=\"pln\"> sortable</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">,</span><span class=\"pln\"> width</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">350</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"kwd\">class</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'fixed\'</span><span class=\"pun\">,</span><span class=\"pln\"> cellClass</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'fixed\'</span><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">],</span></code></li><li class=\"L6\"><code class=\"language-html\"></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     currentClickButton</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'新增\'</span><span class=\"pun\">,</span><span class=\"pln\"> action</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'add\'</span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     editItem</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     tableButtonList</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'修改\'</span><span class=\"pun\">,</span><span class=\"pln\"> buttonType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'edit\'</span><span class=\"pun\">,</span><span class=\"pln\"> color</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'success\'</span><span class=\"pun\">,},</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">{</span><span class=\"pln\">text</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'删除\'</span><span class=\"pun\">,</span><span class=\"pln\"> buttonType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'delete\'</span><span class=\"pun\">,</span><span class=\"pln\"> color</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'error\'</span><span class=\"pun\">,},</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">],</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">}),</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">   computed</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     isMobile</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> window</span><span class=\"pun\">.</span><span class=\"pln\">innerWidth </span><span class=\"pun\">&lt;</span><span class=\"pln\"> </span><span class=\"lit\">600</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     tableData</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">currentTableGenderType </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">currentTableGenderType </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'all\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">tableDataFromBackend</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">tableDataFromBackend</span><span class=\"pun\">.</span><span class=\"pln\">filter</span><span class=\"pun\">(({</span><span class=\"pln\">gender</span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> gender </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">currentTableGenderType</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     computedEditItem</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">editItem</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">   watch</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">   async created</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">getTableData</span><span class=\"pun\">();</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">   mounted</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">   methods</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">/**</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"com\">      * 获取表格数据</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"com\">      */</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     async getTableData</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">isTableLoading </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> serverSearchInput </span><span class=\"pun\">=</span><span class=\"pln\"> _</span><span class=\"pun\">.</span><span class=\"pln\">pickBy</span><span class=\"pun\">(</span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">serverSearchInput</span><span class=\"pun\">,</span><span class=\"pln\"> value</span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">!!</span><span class=\"pln\">value</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> rows </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">         data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">           appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">             pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">             actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'selectItemList\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">             actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">             where</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">             whereLike</span><span class=\"pun\">:</span><span class=\"pln\"> serverSearchInput</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">             orderBy</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[{</span><span class=\"pln\">column</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'operationAt\'</span><span class=\"pun\">,</span><span class=\"pln\"> order</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'desc\'</span><span class=\"pun\">}]</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">})).</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">resultData</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-html\"></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">tableDataFromBackend </span><span class=\"pun\">=</span><span class=\"pln\"> rows</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">isTableLoading </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-html\"></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">/**</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"com\">      * 点击表格数据按钮</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"com\">      */</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     async handleTableButton</span><span class=\"pun\">(</span><span class=\"pln\">button</span><span class=\"pun\">,</span><span class=\"pln\"> item</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> buttonType </span><span class=\"pun\">=</span><span class=\"pln\"> button</span><span class=\"pun\">.</span><span class=\"pln\">buttonType</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">switch</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">buttonType</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'edit\'</span><span class=\"pun\">:</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">currentClickButton </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">action</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'edit\'</span><span class=\"pun\">,</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'修改\'</span><span class=\"pun\">};</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">editItem </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{...</span><span class=\"pln\">item</span><span class=\"pun\">};</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">isEditDrawerShow </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'add\'</span><span class=\"pun\">:</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">currentClickButton </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">action</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'add\'</span><span class=\"pun\">,</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'新增\'</span><span class=\"pun\">};</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">editItem </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{};</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">isEditDrawerShow </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">case</span><span class=\"pln\"> </span><span class=\"str\">\'delete\'</span><span class=\"pun\">:</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">editItem </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{...</span><span class=\"pln\">item</span><span class=\"pun\">};</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">           await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">deleteStudent</span><span class=\"pun\">();</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"kwd\">break</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">/**</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"com\">      * 删除学生</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"com\">      */</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     async deleteStudent</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> dialogDone </span><span class=\"pun\">=</span><span class=\"pln\"> await window</span><span class=\"pun\">.</span><span class=\"pln\">confirmDialog</span><span class=\"pun\">({</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'删除\'</span><span class=\"pun\">,</span><span class=\"pln\"> content</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'确定删除吗？\'</span><span class=\"pun\">});</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">dialogDone</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> id </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">computedEditItem</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       await window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(</span><span class=\"str\">\"删除学生\"</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">           appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">             pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">             actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'deleteItem\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">             actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">             where</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> id</span><span class=\"pun\">:</span><span class=\"pln\"> id </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">});</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       await window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\"删除学生成功\"</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">getTableData</span><span class=\"pun\">();</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">/**</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"com\">      * 保存数据</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"com\">      */</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     async saveInfo</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">currentClickButton</span><span class=\"pun\">.</span><span class=\"pln\">action </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'add\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">         await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">insertStudent</span><span class=\"pun\">();</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">currentClickButton</span><span class=\"pun\">.</span><span class=\"pln\">action </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\'edit\'</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">updateStudent</span><span class=\"pun\">();</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">/**</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"com\">      * 新增学生</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"com\">      */</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     async insertStudent</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">await window</span><span class=\"pun\">.</span><span class=\"pln\">confirmDialog</span><span class=\"pun\">({</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'新增\'</span><span class=\"pun\">,</span><span class=\"pln\"> content</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'确定新增吗？\'</span><span class=\"pun\">}))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">delete</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">computedEditItem</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">         await window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(</span><span class=\"str\">\"新增学生\"</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">           data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">             appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">               pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">               actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'insertItem\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">               actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">computedEditItem</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">             </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">})</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">         await window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\"新增学生成功\"</span><span class=\"pun\">);</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">isEditDrawerShow </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">         await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">getTableData</span><span class=\"pun\">();</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">/**</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"com\">      * 保存学生</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"com\">      */</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     async updateStudent</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">await window</span><span class=\"pun\">.</span><span class=\"pln\">confirmDialog</span><span class=\"pun\">({</span><span class=\"pln\"> title</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'修改\'</span><span class=\"pun\">,</span><span class=\"pln\"> content</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'确定修改吗？\'</span><span class=\"pun\">}))</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">const</span><span class=\"pln\"> id </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">computedEditItem</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">delete</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">computedEditItem</span><span class=\"pun\">.</span><span class=\"pln\">id</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">         await window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">loading</span><span class=\"pun\">(</span><span class=\"str\">\"修改学生\"</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">         await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">           data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">             appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">               pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'index\'</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">               actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'updateItem\'</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">               actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">computedEditItem</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">               where</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">id</span><span class=\"pun\">:</span><span class=\"pln\"> id</span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">             </span><span class=\"pun\">}</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">})</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">         await window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\"修改学生成功\"</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">isEditDrawerShow </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">false</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">         await </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">getTableData</span><span class=\"pun\">();</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     getConstantCollectionItemText</span><span class=\"pun\">(</span><span class=\"pln\">key</span><span class=\"pun\">,</span><span class=\"pln\"> _value</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> constantCollectionItemFind </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">constantCollection</span><span class=\"pun\">[</span><span class=\"pln\">key</span><span class=\"pun\">].</span><span class=\"pln\">find</span><span class=\"pun\">(({</span><span class=\"pln\">value</span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> value </span><span class=\"pun\">===</span><span class=\"pln\"> _value</span><span class=\"pun\">);</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">if</span><span class=\"pun\">(</span><span class=\"pln\">constantCollectionItemFind</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"kwd\">return</span><span class=\"pln\"> constantCollectionItemFind</span><span class=\"pun\">.</span><span class=\"pln\">text</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     goToAnotherXiaochengxu</span><span class=\"pun\">({</span><span class=\"pln\"> botUserId</span><span class=\"pun\">,</span><span class=\"pln\"> studentId </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> xiaochengxuPageUrl </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">\"&lt;$ ctx.app.config.duoxingBot.server $&gt;/&lt;$ ctx.app.config.duoxingBot.serverAppId $&gt;/page/xiaochengxu\"</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> queryParams </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">         botUserId</span><span class=\"pun\">,</span><span class=\"pln\"> </span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">         pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'fileManagement\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">         studentId</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">};</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> queryStrings </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">Object</span><span class=\"pun\">.</span><span class=\"pln\">keys</span><span class=\"pun\">(</span><span class=\"pln\">queryParams</span><span class=\"pun\">)</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">.</span><span class=\"pln\">map</span><span class=\"pun\">(</span><span class=\"pln\">k </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> encodeURIComponent</span><span class=\"pun\">(</span><span class=\"pln\">k</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> </span><span class=\"str\">\'=\'</span><span class=\"pln\"> </span><span class=\"pun\">+</span><span class=\"pln\"> encodeURIComponent</span><span class=\"pun\">(</span><span class=\"pln\">queryParams</span><span class=\"pun\">[</span><span class=\"pln\">k</span><span class=\"pun\">]))</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">.</span><span class=\"pln\">join</span><span class=\"pun\">(</span><span class=\"str\">\'&amp;\'</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       window</span><span class=\"pun\">.</span><span class=\"pln\">location</span><span class=\"pun\">.</span><span class=\"pln\">href </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">`</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">xiaochengxuPageUrl</span><span class=\"pun\">}?</span><span class=\"pln\">$</span><span class=\"pun\">{</span><span class=\"pln\">queryStrings</span><span class=\"pun\">}`</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/script&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;style</span><span class=\"pln\"> </span><span class=\"atn\">scoped</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/style&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\"> {% endblock %}</span></code></li></ol></pre>\n</li><li><p>启动项目<code>npm run dev</code></p>\n</li><li><p>访问多星检查 xiaochengxu 是否显示 在<strong>机器人列表</strong>，然后测试一下页面功能</p>\n<blockquote class=\"default\">\n<p>注意：</p>\n<ol>\n<li>当前账户必须和 机器人建立<code>好友关系</code>，才能看到<strong>机器人列表</strong></li><li>当前账户必须 在 小程序-机器人的<code>_user</code>表内 有数据</li></ol>\n</blockquote>\n</li></ol>\n', NULL, NULL, NULL, '', '2022-06-15T09:04:41+08:00', 'm3611F', 'Colin', '2022-06-17T09:03:47+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-17T09:03:47+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1565, 10148, '10005', '05多星Bot开发指南', '', 'login', '2022-06-15T09:05:02+08:00', '004多星databot开发指南', NULL, '## 参考项目\n\n- [md_duoxing_bot_databot_demo](https://github.com/fsll-tech/md_duoxing_bot_databot_demo)\n\n## 应用场景\n\n- RPC: 远程调用服务\n	- 通过多星开放 一个口子供其他 服务器调用\n\n## 环境\n\n- duoxing 账号\n- nodejs 16+\n- windows/mac/linux\n- mysql 5.7+\n- 代码\n	- bot_xiaochengxu_demo: 通过 **003多星xiaochengxu开发指南** 搭建\n\n## 在已有项目上 集成 databot\n\n目标: **a项目**有一个 查成绩的页面，页面上的成绩数据 通过调用 **b项目**的多星databot获取\n\na项目: 使用**003多星xiaochengxu开发指南**搭建, 项目名👉bot_xiaochengxu_demo\n\nb项目: 初始一个eggjs 项目👉[eggjs quickstart](https://www.eggjs.org/intro/quickstart), 项目名👉bot_databot_demo\n\n1. **b项目**---package.json 添加\"egg-duoxing\"依赖. 注意: 端口设置成7002 & 需要重新npm i\n```bash\n  #  package.json\n  \"dependencies\": {\n    \"egg\": \"^2.15.1\",\n    \"egg-scripts\": \"^2.11.0\",\n    \"egg-duoxing\": \"1.0.1\"\n  },\n  \"scripts\": {\n    \"start\": \"egg-scripts start --daemon --port=7002 --title=egg-server-bot_databot_demo\",\n    \"stop\": \"egg-scripts stop --title=egg-server-bot_databot_demo\",\n    \"dev\": \"egg-bin dev  --port=7002\"\n  },\n```\n1. **b项目**---启用 `egg-duoxing`插件，并添加多星Bot相关配置\n```bash\n    # 👉`config/plugin.js`\n   eggDuoxing: {\n     enable: true,\n     package: \"egg-duoxing\",\n   },\n    # 👉`config/config.default.js`\n    duoxingBot: {\n      server: \"https://duoxing-v5.openjianghu.org\",\n      userId: \"W00002\",\n      password: \"123456\",\n      serverAppId: \"duoxing\",\n      deviceType: \"bot_databot\",\n    },\n```\n1. **b项目**---添加databot代码👉`app/listener/databot.js`\n```bash\n	\"use strict\";\n\n	const BaseListener = require(\"egg-duoxing/app/listener/core/base\");\n	const {\n	  duoxingMessageContentTypeEnum,\n	} = require(\"egg-duoxing/app/constant/constant\");\n\n	/**\n	 * 数据通讯类的数据\n	 */\n	class DatabotListener extends BaseListener {\n	  /**\n	   * 配置\n	   */\n	  static get config() {\n		return {\n		  // 监听的 action 列表\n		  listenActions: [\"botExchange\"],\n		  // 开关\n		  disable: false,\n		};\n	  }\n\n	  /**\n	   * 处理 action 的回调函数\n	   */\n	  async handle(actionId, message) {\n		this.app.logger.info(\n		  \"[databot.js]\",\n		  `handle actionId ${actionId}, message: ${message}`\n		);\n		const {\n		  fromUserId,\n		  fromUsername,\n		  toGroupId,\n		  messageContentType,\n		  messageContent,\n		} = message.appData.actionData;\n		const { fromSocketId } = message.appData;\n		if (messageContentType === duoxingMessageContentTypeEnum.databotRequest) {\n		  const reply = await this.replyDataCall({\n			messageContentType,\n			messageContent,\n			fromUserId,\n			fromUsername,\n		  });\n		  await this.duoxingClient.sendMsgToBotExchange({\n			message: {\n			  packageId: messageContent.packageId,\n			  appData: {\n				...reply,\n			  },\n			},\n			toUserId: fromUserId,\n			toSocketId: fromSocketId,\n			messageContentType: duoxingMessageContentTypeEnum.databotResponse,\n		  });\n		}\n	  }\n\n	  /**\n	   * 回复通过 databot 协议发过来的调用\n	   */\n	  async replyDataCall({\n		messageContentType,\n		messageContent,\n		fromUserId,\n		fromUsername,\n	  }) {\n		const config = this.app.config;\n		const { command, data } = messageContent;\n		const scoreDataMap = {\n		  \"张三丰\": 100,\n		  \"洪七公\": 80,\n		  \"岳不群\": 90,\n		};\n		if (command === \"getInfo\") {\n		  const { appTitle, duoxingBot } = config;\n		  const { userId } = duoxingBot;\n		  return {\n			resultData: {\n			  appTitle,\n			  userId,\n			}\n		  };\n		}\n\n		if (command === \"getStudentScore\") {\n		  const { actionData } = data;\n		  const { username } = actionData\n		  const score = scoreDataMap[username] || \'暂无结果\';\n		  return { \n			resultData: { username, score }\n		  };\n		}\n\n		return {\n		  errorCode: \"unknow command\",\n		  errorReason: \"请输入正确的指令\",\n		};\n	  }\n	}\n\n	module.exports = DatabotListener;\n```\n1. **a项目**---添加配置\n```bash\n    # 👉`config/config.local.js`\n    botConfig: {\n      bUserId: \"W00002\",\n    },\n```\n1. **a项目**---添加数据\n```mysql\n	INSERT INTO `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'studentScore\', \'getBotInfo\', \'✅学生成绩查询-查询机器人信息\', \'service\', \'{}\', \'{ \\\"service\\\": \\\"studentScore\\\", \\\"serviceFunction\\\": \\\"getBotInfo\\\" }\', \'insert\', NULL, NULL, NULL);\n	INSERT INTO `_resource` (`accessControlTable`, `resourceHook`, `pageId`, `actionId`, `desc`, `resourceType`, `appDataSchema`, `resourceData`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (NULL, NULL, \'studentScore\', \'getStudentScore\', \'✅学生成绩查询-查询学生成绩\', \'service\', \'{}\', \'{ \\\"service\\\": \\\"studentScore\\\", \\\"serviceFunction\\\": \\\"getStudentScore\\\" }\', \'insert\', NULL, NULL, NULL);\n\n	 INSERT INTO `_user_group_role_resource` (`user`, `group`, `role`, `resource`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (\'*\', \'login\', \'*\', \'studentScore.*\', \'allow\', \'学生成绩查询, 开放给所有登录用户\', \'insert\', NULL, NULL, NULL);\n\n	 INSERT INTO `_page` (`pageId`, `pageName`, `pageType`, `sort`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (\'studentScore\', \'学生成绩\', \'showInMenu\', \'1\', \'insert\', NULL, NULL, NULL);\n	 INSERT INTO `_user_group_role_page` (`user`, `group`, `role`, `page`, `allowOrDeny`, `desc`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (\'*\', \'login\', \'*\', \'studentScore\', \'allow\', \'学生成绩查询; 开放给所有登录用户;\', \'insert\', NULL, NULL, NULL);\n```\n1. **a项目**---添加页面`app/view/page/studentScore.html`\n```html\n	{% extends \'template/xiaochengxuTemplate.html\'%}\n	{% block vue_template %}\n	<xiaochengxu-layout>\n	<!-- 页面主要内容 -->\n	<v-container class=\"fullScreen d-flex flex-column pa-xs-0 pa-0\">\n	  <v-row class=\"ma-0 pa-xs-4 align-center flex-none pt-0 \" :class=\"{\'pa-4\': !isMobile, \'pb-0\': !isMobile, \'pa-2\': isMobile}\">\n		<v-col cols=\"12\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  <v-btn class=\"primary\" @click=\"getInfo\">获取“小程序A” & “数据机器人B” 的信息</v-btn>\n		</v-col>\n		<v-col cols=\"12\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  小程序A名: {{ xiaochengxuAInfo.appTitle }}\n		</v-col>\n		<v-col cols=\"12\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  启动小程序A的用户ID: {{ xiaochengxuAInfo.userId }}\n		</v-col>\n		<v-col cols=\"12\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  数据机器人B名: {{ databotBInfo.appTitle }}\n		</v-col>  \n		<v-col cols=\"12\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  启动数据机器人B的用户ID: {{ databotBInfo.userId }}\n		</v-col>  \n\n		<v-divider />\n\n		<v-col cols=\"8\" xs=\"8\" sm=\"4\" md=\"3\" xl=\"3\" class=\"pa-xs-0 pa-xs-2 col-sm-8-flex\">\n		  <v-text-field v-model=\"studentInfo.username\" label=\"学生姓名; E.g: 张三丰、洪七公、岳不群\" class=\"cus-v-input\" dense outlined></v-text-field>\n		</v-col>\n		<v-col cols=\"4\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  <v-btn class=\"primary\" @click=\"getStudentScore\">查询成绩</v-btn>\n		</v-col>\n		<v-col cols=\"12\" class=\"pa-xs-0  pb-3\" :class=\"{\'pb-xs-4\': !isMobile}\">\n		  分数: {{ studentInfo.score }}\n		</v-col>    \n	  </v-row>\n\n	</v-container>\n\n	</xiaochengxu-layout>\n\n	{% endblock %}\n\n	{% block vue_body %}\n\n	{% include \'layout/xiaochengxuLayout.html\' %}\n\n	<script type=\"module\">\n	new Vue({\n	  el: \'#app\',\n	  template: \'#app-template\',\n	  vuetify: new Vuetify(),\n	  data: () => ({\n		// 表格相关数据\n		isFormValid: true,\n		requireRules: [\n		  v => !!v || \'This is required\',\n		],\n		xiaochengxuAInfo: {},\n		databotBInfo: {},\n		studentInfo: {\n		  username: \'张三丰\',\n		  score: null,\n		}\n	  }),\n	  computed: {\n		isMobile() {\n		  return window.innerWidth < 600;\n		},\n	  },\n	  watch: {},\n	  async created() {\n	  },\n	  mounted() {},\n	  methods: {\n		async getInfo() {\n		  const result = (await window.jianghuAxios({\n			data: {\n			  appData: {\n				pageId: \'studentScore\',\n				actionId: \'getBotInfo\',\n				actionData: {},\n			  }\n			}\n		  })).data.appData.resultData;\n		  const { xiaochengxuAInfo, databotBInfo } = result;\n		  this.xiaochengxuAInfo = xiaochengxuAInfo;\n		  this.databotBInfo = databotBInfo;\n		},\n		async getStudentScore() {\n		  const resultData = (await window.jianghuAxios({\n			data: {\n			  appData: {\n				pageId: \'studentScore\',\n				actionId: \'getStudentScore\',\n				actionData: {\n				  username: this.studentInfo.username\n				},\n			  }\n			}\n		  })).data.appData.resultData;\n		  const { score } = resultData;\n		  this.studentInfo.score = score;\n		  window.vtoast.success(\'查询成功\');\n		},\n	  }\n	})\n	</script>\n\n	<style scoped>\n	</style>\n	{% endblock %}\n```\n1. **a项目**---添加页面`app/service/studentScore.js`\n```bash\n	\'use strict\';\n	const Service = require(\'egg\').Service;\n\n	class IndexService extends Service {\n	  async getBotInfo() {\n		const { duoxingBot, appTitle, botConfig } = this.app.config;\n		const { bUserId } = botConfig;\n		const { userId } = duoxingBot;\n		const xiaochengxuAInfo = { appTitle, userId };\n\n		const toUserId = bUserId;\n		const databotBResult = await this.app.duoxingClient.callToDatabot({\n		  message: { command: \'getInfo\' },\n		  toUserId,\n		});\n		const { resultData } = databotBResult.appData;\n		return { xiaochengxuAInfo, databotBInfo: resultData };\n	  }\n\n	  async getStudentScore() {\n		const { botConfig } = this.app.config;\n		const { bUserId } = botConfig;\n\n		const { actionData } = this.ctx.request.body.appData;\n		const { username } = actionData;\n\n		const databotBResult = await this.app.duoxingClient.callToDatabot({\n		  message: {\n			command: \'getStudentScore\',\n			data: {\n			  actionData: { username },\n			},\n		  },\n		  toUserId: bUserId,\n		});\n		const { resultData } = databotBResult.appData;\n		return resultData;\n	  }\n	}\n\n	module.exports = IndexService;\n```\n1. 分别启动 **a项目** &  **b项目**\n1. 访问多星检查 xiaochengxu 是否显示 在机器人列表，然后测试一下`学生成绩查询`页面功能\n> 注意：\n>   1. 当前账户必须和 机器人建立`好友关系`，才能看到**机器人列表**\n>   2. 当前账户必须 在 小程序-机器人的`_user`表内 有数据\n>   3. a & b机器人必须建立`好友关系`', '<h2 id=\"h2-u53C2u8003u9879u76EE\"><a class=\"reference-link\" name=\"参考项目\"></a><span class=\"header-link octicon octicon-link\"></span>参考项目</h2><ul>\n<li><a href=\"https://github.com/fsll-tech/md_duoxing_bot_databot_demo\">md_duoxing_bot_databot_demo</a></li></ul>\n<h2 id=\"h2-u5E94u7528u573Au666F\"><a class=\"reference-link\" name=\"应用场景\"></a><span class=\"header-link octicon octicon-link\"></span>应用场景</h2><ul>\n<li>RPC: 远程调用服务<ul>\n<li>通过多星开放 一个口子供其他 服务器调用</li></ul>\n</li></ul>\n<h2 id=\"h2-u73AFu5883\"><a class=\"reference-link\" name=\"环境\"></a><span class=\"header-link octicon octicon-link\"></span>环境</h2><ul>\n<li>duoxing 账号</li><li>nodejs 16+</li><li>windows/mac/linux</li><li>mysql 5.7+</li><li>代码<ul>\n<li>bot_xiaochengxu_demo: 通过 <strong>003多星xiaochengxu开发指南</strong> 搭建</li></ul>\n</li></ul>\n<h2 id=\"h2-u5728u5DF2u6709u9879u76EEu4E0Au96C6u621020databot\"><a class=\"reference-link\" name=\"在已有项目上 集成 databot\"></a><span class=\"header-link octicon octicon-link\"></span>在已有项目上 集成 databot</h2><p>目标: <strong>a项目</strong>有一个 查成绩的页面，页面上的成绩数据 通过调用 <strong>b项目</strong>的多星databot获取</p>\n<p>a项目: 使用<strong>003多星xiaochengxu开发指南</strong>搭建, 项目名👉bot_xiaochengxu_demo</p>\n<p>b项目: 初始一个eggjs 项目👉<a href=\"https://www.eggjs.org/intro/quickstart\">eggjs quickstart</a>, 项目名👉bot_databot_demo</p>\n<ol>\n<li><p><strong>b项目</strong>---package.json 添加\"egg-duoxing\"依赖. 注意: 端口设置成7002 &amp; 需要重新npm i</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"com\">#  package.json</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"str\">\"dependencies\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"^2.15.1\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg-scripts\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"^2.11.0\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"egg-duoxing\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"1.0.1\"</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"str\">\"scripts\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"start\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"egg-scripts start --daemon --port=7002 --title=egg-server-bot_databot_demo\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"stop\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"egg-scripts stop --title=egg-server-bot_databot_demo\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"dev\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"egg-bin dev  --port=7002\"</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li><p><strong>b项目</strong>---启用 <code>egg-duoxing</code>插件，并添加多星Bot相关配置</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"com\"># 👉`config/plugin.js`</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">eggDuoxing</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">  enable</span><span class=\"pun\">:</span><span class=\"pln\"> true</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">  package</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"egg-duoxing\"</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pun\">},</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"com\"># 👉`config/config.default.js`</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\"> duoxingBot</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">   server</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"https://duoxing-v5.openjianghu.org\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">   userId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"W00002\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   password</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"123456\"</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   serverAppId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"duoxing\"</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">   deviceType</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"bot_databot\"</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li><p><strong>b项目</strong>---添加databot代码👉<code>app/listener/databot.js</code></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\"use strict\"</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\"> const </span><span class=\"typ\">BaseListener</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\"egg-duoxing/app/listener/core/base\"</span><span class=\"pun\">);</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> const </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">   duoxingMessageContentTypeEnum</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\"egg-duoxing/app/constant/constant\"</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-bash\"></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">/**</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">  </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">数据通讯类的数据</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">  </span><span class=\"pun\">*/</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> class </span><span class=\"typ\">DatabotListener</span><span class=\"pln\"> extends </span><span class=\"typ\">BaseListener</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">/**</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">配置</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*/</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">   static get config</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">监听的</span><span class=\"pln\"> action </span><span class=\"pun\">列表</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">       listenActions</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span><span class=\"str\">\"botExchange\"</span><span class=\"pun\">],</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">//</span><span class=\"pln\"> </span><span class=\"pun\">开关</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">       disable</span><span class=\"pun\">:</span><span class=\"pln\"> false</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">};</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-bash\"></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">/**</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">处理</span><span class=\"pln\"> action </span><span class=\"pun\">的回调函数</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*/</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">   async handle</span><span class=\"pun\">(</span><span class=\"pln\">actionId</span><span class=\"pun\">,</span><span class=\"pln\"> message</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">logger</span><span class=\"pun\">.</span><span class=\"pln\">info</span><span class=\"pun\">(</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"str\">\"[databot.js]\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"str\">`handle actionId ${actionId}, message: ${message}`</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">       fromUsername</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">       toGroupId</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">       messageContentType</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">       messageContent</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">actionData</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> fromSocketId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> message</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">messageContentType </span><span class=\"pun\">===</span><span class=\"pln\"> duoxingMessageContentTypeEnum</span><span class=\"pun\">.</span><span class=\"pln\">databotRequest</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">       const reply </span><span class=\"pun\">=</span><span class=\"pln\"> await this</span><span class=\"pun\">.</span><span class=\"pln\">replyDataCall</span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">         messageContentType</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">         messageContent</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">         fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">         fromUsername</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">});</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">       await this</span><span class=\"pun\">.</span><span class=\"pln\">duoxingClient</span><span class=\"pun\">.</span><span class=\"pln\">sendMsgToBotExchange</span><span class=\"pun\">({</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">         message</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">           packageId</span><span class=\"pun\">:</span><span class=\"pln\"> messageContent</span><span class=\"pun\">.</span><span class=\"pln\">packageId</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">           appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">             </span><span class=\"pun\">...</span><span class=\"pln\">reply</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">           </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">         </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">         toUserId</span><span class=\"pun\">:</span><span class=\"pln\"> fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">         toSocketId</span><span class=\"pun\">:</span><span class=\"pln\"> fromSocketId</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">         messageContentType</span><span class=\"pun\">:</span><span class=\"pln\"> duoxingMessageContentTypeEnum</span><span class=\"pun\">.</span><span class=\"pln\">databotResponse</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">});</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-bash\"></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">/**</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*</span><span class=\"pln\"> </span><span class=\"pun\">回复通过</span><span class=\"pln\"> databot </span><span class=\"pun\">协议发过来的调用</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">    </span><span class=\"pun\">*/</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">   async replyDataCall</span><span class=\"pun\">({</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     messageContentType</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     messageContent</span><span class=\"pun\">,</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     fromUserId</span><span class=\"pun\">,</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     fromUsername</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">})</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">     const config </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">config</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> command</span><span class=\"pun\">,</span><span class=\"pln\"> data </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> messageContent</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     const scoreDataMap </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"str\">\"张三丰\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">100</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"str\">\"洪七公\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">80</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"str\">\"岳不群\"</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"lit\">90</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">};</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">command </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\"getInfo\"</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">       const </span><span class=\"pun\">{</span><span class=\"pln\"> appTitle</span><span class=\"pun\">,</span><span class=\"pln\"> duoxingBot </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> config</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">       const </span><span class=\"pun\">{</span><span class=\"pln\"> userId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> duoxingBot</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">         resultData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">           appTitle</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">           userId</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">         </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">};</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L6\"><code class=\"language-bash\"></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">command </span><span class=\"pun\">===</span><span class=\"pln\"> </span><span class=\"str\">\"getStudentScore\"</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">       const </span><span class=\"pun\">{</span><span class=\"pln\"> actionData </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> data</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">       const </span><span class=\"pun\">{</span><span class=\"pln\"> username </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> actionData</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">       const score </span><span class=\"pun\">=</span><span class=\"pln\"> scoreDataMap</span><span class=\"pun\">[</span><span class=\"pln\">username</span><span class=\"pun\">]</span><span class=\"pln\"> </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'暂无结果\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> </span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">         resultData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> username</span><span class=\"pun\">,</span><span class=\"pln\"> score </span><span class=\"pun\">}</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">};</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L5\"><code class=\"language-bash\"></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">       errorCode</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"unknow command\"</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">       errorReason</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"请输入正确的指令\"</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">};</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-bash\"></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">DatabotListener</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li><li><p><strong>a项目</strong>---添加配置</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"com\"># 👉`config/config.local.js`</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\"> botConfig</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">   bUserId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\"W00002\"</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li></ol></pre>\n</li><li><p><strong>a项目</strong>---添加数据</p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'studentScore\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'getBotInfo\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅学生成绩查询-查询机器人信息\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'service\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"service\\\": \\\"studentScore\\\", \\\"serviceFunction\\\": \\\"getBotInfo\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L1\"><code class=\"language-mysql\"><span class=\"pln\"> INSERT INTO </span><span class=\"str\">`_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`accessControlTable`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceHook`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`actionId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`appDataSchema`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resourceData`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"pln\">NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'studentScore\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'getStudentScore\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'✅学生成绩查询-查询学生成绩\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'service\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{}\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'{ \\\"service\\\": \\\"studentScore\\\", \\\"serviceFunction\\\": \\\"getStudentScore\\\" }\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-mysql\"></code></li><li class=\"L3\"><code class=\"language-mysql\"><span class=\"pln\">  INSERT INTO </span><span class=\"str\">`_user_group_role_resource`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`user`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`group`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`role`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`resource`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`allowOrDeny`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'login\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'studentScore.*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'allow\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'学生成绩查询, 开放给所有登录用户\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L4\"><code class=\"language-mysql\"></code></li><li class=\"L5\"><code class=\"language-mysql\"><span class=\"pln\">  INSERT INTO </span><span class=\"str\">`_page`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`pageId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageName`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`pageType`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`sort`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"str\">\'studentScore\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'学生成绩\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'showInMenu\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'1\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li><li class=\"L6\"><code class=\"language-mysql\"><span class=\"pln\">  INSERT INTO </span><span class=\"str\">`_user_group_role_page`</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"str\">`user`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`group`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`role`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`page`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`allowOrDeny`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`desc`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operation`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUserId`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationByUser`</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">`operationAt`</span><span class=\"pun\">)</span><span class=\"pln\"> VALUES </span><span class=\"pun\">(</span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'login\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'*\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'studentScore\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'allow\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'学生成绩查询; 开放给所有登录用户;\'</span><span class=\"pun\">,</span><span class=\"pln\"> </span><span class=\"str\">\'insert\'</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">,</span><span class=\"pln\"> NULL</span><span class=\"pun\">);</span></code></li></ol></pre>\n</li><li><p><strong>a项目</strong>---添加页面<code>app/view/page/studentScore.html</code></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\"> {% extends \'template/xiaochengxuTemplate.html\'%}</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\"> {% block vue_template %}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;xiaochengxu-layout&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"com\">&lt;!-- 页面主要内容 --&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;v-container</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"fullScreen d-flex flex-column pa-xs-0 pa-0\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;v-row</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"ma-0 pa-xs-4 align-center flex-none pt-0 \"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pa-4\': !isMobile, \'pb-0\': !isMobile, \'pa-2\': isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"primary\"</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"getInfo\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">获取“小程序A” &amp; “数据机器人B” 的信息</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       小程序A名: {{ xiaochengxuAInfo.appTitle }}</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       启动小程序A的用户ID: {{ xiaochengxuAInfo.userId }}</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">       数据机器人B名: {{ databotBInfo.appTitle }}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span><span class=\"pln\">  </span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       启动数据机器人B的用户ID: {{ databotBInfo.userId }}</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span><span class=\"pln\">  </span></code></li><li class=\"L1\"><code class=\"language-html\"></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-divider</span><span class=\"pln\"> </span><span class=\"tag\">/&gt;</span></code></li><li class=\"L3\"><code class=\"language-html\"></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"8\"</span><span class=\"pln\"> </span><span class=\"atn\">xs</span><span class=\"pun\">=</span><span class=\"atv\">\"8\"</span><span class=\"pln\"> </span><span class=\"atn\">sm</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">md</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">xl</span><span class=\"pun\">=</span><span class=\"atv\">\"3\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0 pa-xs-2 col-sm-8-flex\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-text-field</span><span class=\"pln\"> </span><span class=\"atn\">v-model</span><span class=\"pun\">=</span><span class=\"atv\">\"studentInfo.username\"</span><span class=\"pln\"> </span><span class=\"atn\">label</span><span class=\"pun\">=</span><span class=\"atv\">\"学生姓名; E.g: 张三丰、洪七公、岳不群\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"cus-v-input\"</span><span class=\"pln\"> </span><span class=\"atn\">dense</span><span class=\"pln\"> </span><span class=\"atn\">outlined</span><span class=\"tag\">&gt;&lt;/v-text-field&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"4\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"tag\">&lt;v-btn</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"primary\"</span><span class=\"pln\"> @</span><span class=\"atn\">click</span><span class=\"pun\">=</span><span class=\"atv\">\"getStudentScore\"</span><span class=\"tag\">&gt;</span><span class=\"pln\">查询成绩</span><span class=\"tag\">&lt;/v-btn&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;v-col</span><span class=\"pln\"> </span><span class=\"atn\">cols</span><span class=\"pun\">=</span><span class=\"atv\">\"12\"</span><span class=\"pln\"> </span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"pa-xs-0  pb-3\"</span><span class=\"pln\"> :</span><span class=\"atn\">class</span><span class=\"pun\">=</span><span class=\"atv\">\"{\'pb-xs-4\': !isMobile}\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       分数: {{ studentInfo.score }}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"tag\">&lt;/v-col&gt;</span><span class=\"pln\">    </span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"tag\">&lt;/v-row&gt;</span></code></li><li class=\"L4\"><code class=\"language-html\"></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/v-container&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/xiaochengxu-layout&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\"> {% endblock %}</span></code></li><li class=\"L0\"><code class=\"language-html\"></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\"> {% block vue_body %}</span></code></li><li class=\"L2\"><code class=\"language-html\"></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\"> {% include \'layout/xiaochengxuLayout.html\' %}</span></code></li><li class=\"L4\"><code class=\"language-html\"></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;script</span><span class=\"pln\"> </span><span class=\"atn\">type</span><span class=\"pun\">=</span><span class=\"atv\">\"module\"</span><span class=\"tag\">&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vue</span><span class=\"pun\">({</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">   el</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'#app\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">   template</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'#app-template\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">   vuetify</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Vuetify</span><span class=\"pun\">(),</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">   data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">({</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"com\">// 表格相关数据</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     isFormValid</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">true</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     requireRules</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">[</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       v </span><span class=\"pun\">=&gt;</span><span class=\"pln\"> </span><span class=\"pun\">!!</span><span class=\"pln\">v </span><span class=\"pun\">||</span><span class=\"pln\"> </span><span class=\"str\">\'This is required\'</span><span class=\"pun\">,</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">],</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     xiaochengxuAInfo</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     databotBInfo</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">     studentInfo</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       username</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'张三丰\'</span><span class=\"pun\">,</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       score</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">null</span><span class=\"pun\">,</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">}),</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">   computed</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">     isMobile</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">return</span><span class=\"pln\"> window</span><span class=\"pun\">.</span><span class=\"pln\">innerWidth </span><span class=\"pun\">&lt;</span><span class=\"pln\"> </span><span class=\"lit\">600</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">},</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">   watch</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">   async created</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">   mounted</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">   methods</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">     async getInfo</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> result </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">         data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">           appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">             pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'studentScore\'</span><span class=\"pun\">,</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">             actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'getBotInfo\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">             actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{},</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"pun\">}</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">}</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">})).</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">resultData</span><span class=\"pun\">;</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> xiaochengxuAInfo</span><span class=\"pun\">,</span><span class=\"pln\"> databotBInfo </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> result</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">xiaochengxuAInfo </span><span class=\"pun\">=</span><span class=\"pln\"> xiaochengxuAInfo</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">databotBInfo </span><span class=\"pun\">=</span><span class=\"pln\"> databotBInfo</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">     async getStudentScore</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> resultData </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">(</span><span class=\"pln\">await window</span><span class=\"pun\">.</span><span class=\"pln\">jianghuAxios</span><span class=\"pun\">({</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">         data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">           appData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">             pageId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'studentScore\'</span><span class=\"pun\">,</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">             actionId</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'getStudentScore\'</span><span class=\"pun\">,</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">             actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\">               username</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">studentInfo</span><span class=\"pun\">.</span><span class=\"pln\">username</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\">             </span><span class=\"pun\">},</span></code></li><li class=\"L6\"><code class=\"language-html\"><span class=\"pln\">           </span><span class=\"pun\">}</span></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\">         </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"pun\">})).</span><span class=\"pln\">data</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">.</span><span class=\"pln\">resultData</span><span class=\"pun\">;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">const</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> score </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> resultData</span><span class=\"pun\">;</span></code></li><li class=\"L0\"><code class=\"language-html\"><span class=\"pln\">       </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">studentInfo</span><span class=\"pun\">.</span><span class=\"pln\">score </span><span class=\"pun\">=</span><span class=\"pln\"> score</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-html\"><span class=\"pln\">       window</span><span class=\"pun\">.</span><span class=\"pln\">vtoast</span><span class=\"pun\">.</span><span class=\"pln\">success</span><span class=\"pun\">(</span><span class=\"str\">\'查询成功\'</span><span class=\"pun\">);</span></code></li><li class=\"L2\"><code class=\"language-html\"><span class=\"pln\">     </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-html\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L4\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"pun\">})</span></code></li><li class=\"L5\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/script&gt;</span></code></li><li class=\"L6\"><code class=\"language-html\"></code></li><li class=\"L7\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;style</span><span class=\"pln\"> </span><span class=\"atn\">scoped</span><span class=\"tag\">&gt;</span></code></li><li class=\"L8\"><code class=\"language-html\"><span class=\"pln\"> </span><span class=\"tag\">&lt;/style&gt;</span></code></li><li class=\"L9\"><code class=\"language-html\"><span class=\"pln\"> {% endblock %}</span></code></li></ol></pre>\n</li><li><p><strong>a项目</strong>---添加页面<code>app/service/studentScore.js</code></p>\n<pre class=\"prettyprint linenums prettyprinted\" style=\"\"><ol class=\"linenums\"><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"str\">\'use strict\'</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\"> const </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> require</span><span class=\"pun\">(</span><span class=\"str\">\'egg\'</span><span class=\"pun\">).</span><span class=\"typ\">Service</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-bash\"></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\"> class </span><span class=\"typ\">IndexService</span><span class=\"pln\"> extends </span><span class=\"typ\">Service</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">   async getBotInfo</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> duoxingBot</span><span class=\"pun\">,</span><span class=\"pln\"> appTitle</span><span class=\"pun\">,</span><span class=\"pln\"> botConfig </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">config</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> bUserId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> botConfig</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> userId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> duoxingBot</span><span class=\"pun\">;</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">     const xiaochengxuAInfo </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> appTitle</span><span class=\"pun\">,</span><span class=\"pln\"> userId </span><span class=\"pun\">};</span></code></li><li class=\"L9\"><code class=\"language-bash\"></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">     const toUserId </span><span class=\"pun\">=</span><span class=\"pln\"> bUserId</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     const databotBResult </span><span class=\"pun\">=</span><span class=\"pln\"> await this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">duoxingClient</span><span class=\"pun\">.</span><span class=\"pln\">callToDatabot</span><span class=\"pun\">({</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       message</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> command</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'getInfo\'</span><span class=\"pln\"> </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">       toUserId</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">});</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> resultData </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> databotBResult</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> xiaochengxuAInfo</span><span class=\"pun\">,</span><span class=\"pln\"> databotBInfo</span><span class=\"pun\">:</span><span class=\"pln\"> resultData </span><span class=\"pun\">};</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-bash\"></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">   async getStudentScore</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> botConfig </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">config</span><span class=\"pun\">;</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> bUserId </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> botConfig</span><span class=\"pun\">;</span></code></li><li class=\"L2\"><code class=\"language-bash\"></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> actionData </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> this</span><span class=\"pun\">.</span><span class=\"pln\">ctx</span><span class=\"pun\">.</span><span class=\"pln\">request</span><span class=\"pun\">.</span><span class=\"pln\">body</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">;</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> username </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> actionData</span><span class=\"pun\">;</span></code></li><li class=\"L5\"><code class=\"language-bash\"></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     const databotBResult </span><span class=\"pun\">=</span><span class=\"pln\"> await this</span><span class=\"pun\">.</span><span class=\"pln\">app</span><span class=\"pun\">.</span><span class=\"pln\">duoxingClient</span><span class=\"pun\">.</span><span class=\"pln\">callToDatabot</span><span class=\"pun\">({</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">       message</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\">         command</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"str\">\'getStudentScore\'</span><span class=\"pun\">,</span></code></li><li class=\"L9\"><code class=\"language-bash\"><span class=\"pln\">         data</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\">           actionData</span><span class=\"pun\">:</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\"> username </span><span class=\"pun\">},</span></code></li><li class=\"L1\"><code class=\"language-bash\"><span class=\"pln\">         </span><span class=\"pun\">},</span></code></li><li class=\"L2\"><code class=\"language-bash\"><span class=\"pln\">       </span><span class=\"pun\">},</span></code></li><li class=\"L3\"><code class=\"language-bash\"><span class=\"pln\">       toUserId</span><span class=\"pun\">:</span><span class=\"pln\"> bUserId</span><span class=\"pun\">,</span></code></li><li class=\"L4\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"pun\">});</span></code></li><li class=\"L5\"><code class=\"language-bash\"><span class=\"pln\">     const </span><span class=\"pun\">{</span><span class=\"pln\"> resultData </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"pun\">=</span><span class=\"pln\"> databotBResult</span><span class=\"pun\">.</span><span class=\"pln\">appData</span><span class=\"pun\">;</span></code></li><li class=\"L6\"><code class=\"language-bash\"><span class=\"pln\">     </span><span class=\"kwd\">return</span><span class=\"pln\"> resultData</span><span class=\"pun\">;</span></code></li><li class=\"L7\"><code class=\"language-bash\"><span class=\"pln\">   </span><span class=\"pun\">}</span></code></li><li class=\"L8\"><code class=\"language-bash\"><span class=\"pln\"> </span><span class=\"pun\">}</span></code></li><li class=\"L9\"><code class=\"language-bash\"></code></li><li class=\"L0\"><code class=\"language-bash\"><span class=\"pln\"> module</span><span class=\"pun\">.</span><span class=\"pln\">exports </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"typ\">IndexService</span><span class=\"pun\">;</span></code></li></ol></pre>\n</li><li><p>分别启动 <strong>a项目</strong> &amp;  <strong>b项目</strong></p>\n</li><li><p>访问多星检查 xiaochengxu 是否显示 在机器人列表，然后测试一下<code>学生成绩查询</code>页面功能</p>\n<blockquote class=\"default\">\n<p>注意：</p>\n<ol>\n<li>当前账户必须和 机器人建立<code>好友关系</code>，才能看到<strong>机器人列表</strong></li><li>当前账户必须 在 小程序-机器人的<code>_user</code>表内 有数据</li><li>a &amp; b机器人必须建立<code>好友关系</code></li></ol>\n</blockquote>\n</li></ol>\n', NULL, NULL, NULL, '', '2022-06-15T09:05:02+08:00', 'm3611F', 'Colin', '2022-06-17T13:43:05+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-17T13:43:05+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1566, 10149, '10014', '', '', 'public', '2022-06-17T00:23:36+08:00', '【学习方法课程】IT中级编程 第03课 - 深入了解Vuetify数据表格各组件', NULL, '## 学习内容\n\n- v-dialog\n- v-datatable\n- v-btn\n- v-slot\n- Object.assign 与 ... 的功能与区别\n\n## 作业\n\n- 自己尝试动手做一做，改一改，强化前面提到的这些概念。你还有哪些不明白的组件？也可以这样修改一下\n\n点击[这里下载今天用到的代码](https://dl.openjianghu.org/training/download-code-it-training-level02-lesson03-2022-06-16.zip \"这里下载今天用到的代码\")。', '<h2 id=\"h2-u5B66u4E60u5185u5BB9\"><a class=\"reference-link\" name=\"学习内容\"></a><span class=\"header-link octicon octicon-link\"></span>学习内容</h2><ul>\n<li>v-dialog</li><li>v-datatable</li><li>v-btn</li><li>v-slot</li><li>Object.assign 与 ... 的功能与区别</li></ul>\n<h2 id=\"h2-u4F5Cu4E1A\"><a class=\"reference-link\" name=\"作业\"></a><span class=\"header-link octicon octicon-link\"></span>作业</h2><ul>\n<li>自己尝试动手做一做，改一改，强化前面提到的这些概念。你还有哪些不明白的组件？也可以这样修改一下</li></ul>\n<p>点击<a title=\"这里下载今天用到的代码\" href=\"https://dl.openjianghu.org/training/download-code-it-training-level02-lesson03-2022-06-16.zip\">这里下载今天用到的代码</a>。</p>\n', NULL, NULL, NULL, '/materialRepo/video/it-training-level02-lesson03-2022-06-17.mp4', '2022-06-17T00:17:55+08:00', '100005W', '安宁', '2022-06-17T00:24:11+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-17T00:24:11+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1567, 10150, '10004', '', '', 'deleted', '2022-07-02T14:29:47+08:00', 'test', NULL, '# testtttttttttttttt', '<h1 id=\"h1-testtttttttttttttt\"><a class=\"reference-link\" name=\"testtttttttttttttt\"></a><span class=\"header-link octicon octicon-link\"></span>testtttttttttttttt</h1>', NULL, NULL, NULL, '', '2022-07-02T14:29:48+08:00', 'admin', '武林盟主', '2022-07-02T14:30:12+08:00', 'admin', '武林盟主', 'update', 'admin', '武林盟主', '2022-07-02T16:33:07+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1568, 10151, NULL, '', '', 'deleted', '2022-07-14T17:15:32+08:00', 'test', NULL, '# test1111111', '<h1 id=\"h1-test1111111\"><a class=\"reference-link\" name=\"test1111111\"></a><span class=\"header-link octicon octicon-link\"></span>test1111111</h1>', NULL, NULL, NULL, '', '2022-07-14T17:15:32+08:00', 'admin', '武林盟主', '2022-07-14T17:15:32+08:00', 'admin', '武林盟主', 'update', 'admin', '武林盟主', '2022-07-14T23:20:38+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1569, 10152, NULL, '', '', 'deleted', '2022-07-15T10:17:20+08:00', 'test111', NULL, '# test1111', '<h1 id=\"h1-test1111\"><a class=\"reference-link\" name=\"test1111\"></a><span class=\"header-link octicon octicon-link\"></span>test1111</h1>', NULL, NULL, NULL, '', '2022-07-15T10:17:20+08:00', 'admin', '武林盟主', '2022-07-15T10:17:20+08:00', 'admin', '武林盟主', 'update', 'admin', '武林盟主', '2022-08-27T19:35:10+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1570, 10153, NULL, '', '', 'login', '2022-08-27T20:48:41+08:00', 'test1111', '/articleMaterial/10153/1661604649367_yz1ssovgppe (2)的副本17.jpg', 'test111111', '<p>test111111</p>\n', NULL, NULL, NULL, '', '2022-08-27T20:50:24+08:00', 'admin', '武林盟主', '2022-08-27T20:51:14+08:00', 'admin', '武林盟主', 'update', 'admin', '武林盟主', '2022-08-27T20:51:36+08:00');
INSERT INTO `article` (`id`, `articleId`, `categoryId`, `articleGroupName`, `articleTagList`, `articlePublishStatus`, `articlePublishTime`, `articleTitle`, `articleCoverImage`, `articleContent`, `articleContentForSeo`, `articleAssignmentList`, `articleAssignmentListWithAnswer`, `articleAudioUrl`, `articleVideoUrl`, `articleCreateTime`, `articleCreateUserId`, `articleCreateUsername`, `articleUpdateTime`, `articleUpdateUserId`, `articleUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (1571, 10154, NULL, '', '', 'login', '2022-08-27T21:00:22+08:00', 'test111', '/articleMaterial/10154/1661605235463_yz1ssovgppe (2)的副本2.jpg', 'testttttttttt', '<p>testttttttttt</p>\n', NULL, NULL, NULL, '', '2022-08-27T21:00:23+08:00', 'admin', '武林盟主', '2022-08-27T21:00:43+08:00', 'admin', '武林盟主', 'update', 'admin', '武林盟主', '2022-08-27T21:01:01+08:00');
COMMIT;

-- ----------------------------
-- Table structure for category
-- ----------------------------
DROP TABLE IF EXISTS `category`;
CREATE TABLE `category` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `categoryId` bigint(255) DEFAULT NULL COMMENT '分类id',
  `categoryName` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci DEFAULT '',
  `categoryArticleIgnoreTiltle` varchar(255) DEFAULT NULL COMMENT '目录中需要省略的文字',
  `categoryIntro` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_520_ci,
  `categoryGroup` varchar(255) DEFAULT NULL,
  `categoryGroupSort` varchar(255) DEFAULT NULL,
  `categoryPublishStatus` varchar(255) DEFAULT '',
  `categoryCreateTime` varchar(255) DEFAULT '',
  `categoryCreateUserId` varchar(255) DEFAULT '',
  `categoryCreateUsername` varchar(255) DEFAULT '',
  `categoryUpdateTime` varchar(255) DEFAULT '',
  `categoryUpdateUserId` varchar(255) DEFAULT '',
  `categoryUpdateUsername` varchar(255) DEFAULT '',
  `operation` varchar(255) DEFAULT '',
  `operationByUserId` varchar(255) DEFAULT '',
  `operationByUser` varchar(255) DEFAULT '',
  `operationAt` varchar(255) DEFAULT '',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `categoryId_unique` (`categoryId`) USING BTREE,
  KEY `categoryName_unique` (`categoryName`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=145 DEFAULT CHARSET=utf8mb4;

-- ----------------------------
-- Records of category
-- ----------------------------
BEGIN;
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (129, 10000, '测试分类01', NULL, '测试分类01', '测试分类', '1', 'deleted', '2022-04-21T21:01:43+08:00', 'm3611F', '刘计', '2022-04-23T13:38:09+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-23T13:38:09+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (130, 10001, '测试分类02', NULL, '测试分类02', '测试分类', '2', 'deleted', '2022-04-21T21:02:03+08:00', 'm3611F', '刘计', '2022-04-23T13:38:13+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-23T13:38:13+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (131, 10002, '测试分类03', NULL, '测试分类03', '测试分类', '3', 'deleted', '2022-04-21T21:02:44+08:00', 'm3611F', '刘计', '2022-04-23T13:38:16+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-23T13:38:16+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (132, 10003, '测试分类04', NULL, '测试分类04', '测试分类', '4', 'deleted', '2022-04-22T13:57:53+08:00', 'm3611F', '刘计', '2022-04-23T13:38:19+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-23T13:38:19+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (133, 10004, '江湖JS', NULL, '小白也容易学习的企业级框架', '江湖JS', '0', 'public', '2022-04-23T13:37:19+08:00', 'm3611F', '刘计', '2022-04-23T13:37:58+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-04-23T13:37:58+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (134, 10005, '多星-即时通讯', NULL, '暂无文集简介', '多星-即时通讯', '5', 'public', '2022-04-23T20:24:44+08:00', 'm3611F', '刘计', '2022-05-03T21:49:35+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-05-03T21:49:35+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (135, 10006, ' 江湖JS-工具', NULL, '暂无文集简介', ' 江湖JS-工具', '4', 'deleted', '2022-04-23T22:01:57+08:00', 'W00001', '张三丰', '2022-05-03T21:47:36+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-05-03T21:47:36+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (136, 10007, '江湖JS-部署', NULL, '暂无文集简介', '江湖JS-部署', '6', 'deleted', '2022-04-23T22:07:49+08:00', 'W00001', '张三丰', '2022-05-03T21:49:17+08:00', 'm3611F', '刘计', 'jhUpdate', 'm3611F', '刘计', '2022-05-03T21:49:17+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (137, 10008, '机器学习训练营 - 资料', NULL, '暂无文集简介', '机器学习训练营 - 资料', '4', 'deleted', '2022-04-23T22:14:30+08:00', 'W00001', '张三丰', '2022-04-23T22:17:35+08:00', 'W00001', '张三丰', 'jhUpdate', 'W00001', '张三丰', '2022-04-23T22:17:35+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (138, 10009, '旋风-内容管理', NULL, '旋风-内容管理', '旋风', '7', 'login', '2022-05-03T21:51:52+08:00', 'm3611F', '刘计', '2022-05-03T21:51:52+08:00', 'm3611F', '刘计', 'jhInsert', 'm3611F', '刘计', '2022-05-03T21:51:52+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (139, 10010, '武林-直播课堂', NULL, '武林-直播课堂', '武林', '8', 'login', '2022-05-03T21:52:21+08:00', 'm3611F', '刘计', '2022-05-03T21:52:21+08:00', 'm3611F', '刘计', 'jhInsert', 'm3611F', '刘计', '2022-05-03T21:52:21+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (140, 10011, 'Training', NULL, 'Collection of IT Training tutorials and documents.', 'Training', '1', 'public', '2022-05-10T19:06:25+08:00', '100005W', '安宁', '2022-05-10T19:06:25+08:00', '100005W', '安宁', 'jhInsert', '100005W', '安宁', '2022-05-10T19:06:25+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (141, 10012, 'IT初级编程培训', '【学习方法课程】IT初级编程', 'IT中文初级编程培训', 'IT培训', '1', 'public', '2022-05-15T23:32:29+08:00', '100002D', '王番', '2022-06-12T14:42:05+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T14:42:05+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (142, 10013, '江湖JS框架编程培训', '【学习方法课程】IT高级编程', 'IT江湖JS框架编程培训', 'IT培训', '3', 'public', '2022-05-15T23:42:35+08:00', '100002D', '王番', '2022-06-12T14:59:11+08:00', 'm3611F', 'Colin', 'jhUpdate', 'm3611F', 'Colin', '2022-06-12T14:59:11+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (143, 10014, 'IT中级编程培训', NULL, 'IT中文中级编程培训', 'IT培训', '2', 'public', '2022-06-03T00:00:46+08:00', '100005W', '安宁', '2022-06-03T00:01:19+08:00', '100005W', '安宁', 'jhUpdate', '100005W', '安宁', '2022-06-03T00:01:19+08:00');
INSERT INTO `category` (`id`, `categoryId`, `categoryName`, `categoryArticleIgnoreTiltle`, `categoryIntro`, `categoryGroup`, `categoryGroupSort`, `categoryPublishStatus`, `categoryCreateTime`, `categoryCreateUserId`, `categoryCreateUsername`, `categoryUpdateTime`, `categoryUpdateUserId`, `categoryUpdateUsername`, `operation`, `operationByUserId`, `operationByUser`, `operationAt`) VALUES (144, 10015, '江湖JS-草稿', NULL, '江湖JS-草稿', '江湖JS', '9', 'login', '2022-06-12T16:14:55+08:00', 'm3611F', 'Colin', '2022-06-12T16:14:55+08:00', 'm3611F', 'Colin', 'jhInsert', 'm3611F', 'Colin', '2022-06-12T16:14:55+08:00');
COMMIT;

-- ----------------------------
-- View structure for view01_article
-- ----------------------------
DROP VIEW IF EXISTS `view01_article`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `view01_article` AS select `article`.`id` AS `id`,`article`.`articleId` AS `articleId`,`article`.`categoryId` AS `categoryId`,`article`.`articleGroupName` AS `articleGroupName`,`article`.`articleTagList` AS `articleTagList`,`article`.`articlePublishStatus` AS `articlePublishStatus`,`article`.`articlePublishTime` AS `articlePublishTime`,`article`.`articleTitle` AS `articleTitle`,`article`.`articleCoverImage` AS `articleCoverImage`,`article`.`articleAudioUrl` AS `articleAudioUrl`,`article`.`articleVideoUrl` AS `articleVideoUrl`,`article`.`articleCreateTime` AS `articleCreateTime`,`article`.`articleCreateUserId` AS `articleCreateUserId`,`article`.`articleCreateUsername` AS `articleCreateUsername`,`article`.`articleUpdateTime` AS `articleUpdateTime`,`article`.`articleUpdateUserId` AS `articleUpdateUserId`,`article`.`articleUpdateUsername` AS `articleUpdateUsername`,`article`.`operation` AS `operation`,`article`.`operationByUserId` AS `operationByUserId`,`article`.`operationByUser` AS `operationByUser`,`article`.`operationAt` AS `operationAt`,`category`.`categoryName` AS `categoryName`,`category`.`categoryIntro` AS `categoryIntro`,`category`.`categoryGroup` AS `categoryGroup`,`category`.`categoryGroupSort` AS `categoryGroupSort` from (`article` left join `category` on((`article`.`categoryId` = `category`.`categoryId`)));

-- ----------------------------
-- View structure for view01_category
-- ----------------------------
DROP VIEW IF EXISTS `view01_category`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `view01_category` AS select count((`article`.`articlePublishStatus` in ('public','login'))) AS `count`,`category`.`id` AS `id`,`category`.`categoryId` AS `categoryId`,`category`.`categoryName` AS `categoryName`,`category`.`categoryArticleIgnoreTiltle` AS `categoryArticleIgnoreTiltle`,`category`.`categoryGroup` AS `categoryGroup`,`category`.`categoryGroupSort` AS `categoryGroupSort`,concat('<',`category`.`categoryGroup`,`category`.`categoryGroupSort`,'>') AS `categoryGroupConcat`,`category`.`categoryIntro` AS `categoryIntro`,`category`.`categoryPublishStatus` AS `categoryPublishStatus`,`category`.`categoryCreateTime` AS `categoryCreateTime`,`category`.`categoryCreateUserId` AS `categoryCreateUserId`,`category`.`categoryCreateUsername` AS `categoryCreateUsername`,`category`.`categoryUpdateTime` AS `categoryUpdateTime`,`category`.`categoryUpdateUserId` AS `categoryUpdateUserId`,`category`.`categoryUpdateUsername` AS `categoryUpdateUsername`,`category`.`operation` AS `operation`,`category`.`operationByUserId` AS `operationByUserId`,`category`.`operationByUser` AS `operationByUser`,`category`.`operationAt` AS `operationAt` from (`category` left join `article` on((`category`.`categoryId` = `article`.`categoryId`))) group by `category`.`categoryId`;

-- ----------------------------
-- View structure for _view01_user
-- ----------------------------
DROP VIEW IF EXISTS `_view01_user`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `_view01_user` AS select `_user`.`id` AS `id`,`_user`.`userId` AS `userId`,`_user`.`username` AS `username`,`_user`.`userAvatar` AS `userAvatar`,`_user`.`contactNumber` AS `contactNumber`,`_user`.`gender` AS `gender`,`_user`.`birthday` AS `birthday`,`_user`.`signature` AS `signature`,`_user`.`email` AS `email`,`_user`.`clearTextPassword` AS `clearTextPassword`,`_user`.`password` AS `password`,`_user`.`md5Salt` AS `md5Salt`,`_user`.`userType` AS `userType`,`_user`.`userStatus` AS `userStatus`,`_user`.`config` AS `config`,`_user`.`operation` AS `operation`,`_user`.`operationByUserId` AS `operationByUserId`,`_user`.`operationByUser` AS `operationByUser`,`_user`.`operationAt` AS `operationAt` from `_user`;

SET FOREIGN_KEY_CHECKS = 1;
