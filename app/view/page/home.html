{% extends 'template/homeTemplate.html' %}

<!-- 引入静态文件 -->
{% set static = "/" + ctx.app.config.appId + "/public/" %}
{% set url = "/" +ctx.app.config.appId + "/page/" %}
{% block header %}
    <div class="layui-fluid layui-container " style="height: 100%">
        <i class="layui-icon header-menu-icon layui-icon-slider layui-show-xs-inline" style="display: none" onclick="showCategory()"></i>
        <a class="logo" href="/">
            <img src="https://yun.startalk.tech/index.php/s/JxPejNyea9bn3gB/download" style="width: auto;" alt="layui">
        </a>
        <div class="layui-hide-xs site-notice"></div>

        <ul class="layui-nav layui-hide-xs" id="LAY_NAV_TOP" style="position: absolute">
            <li class="layui-nav-item layui-this">
                <a href="/">首&nbsp;&nbsp;页</a>
            </li>
            {% for category in categoryList %}
            <li class="layui-nav-item ">
                <a href="/<$ ctx.app.config.appId $>/page/article/<$ category.articleList[0].articleId $>/"><$ category.categoryName $></a>
            </li>
            {% endfor %}
            <span class="layui-nav-bar" style="left: 64px; top: 55px; width: 0px; opacity: 0;"></span></ul>
    </div>
{% endblock %}

{% block form %}
{% endblock %}
{% block page %}
<div class="layui-box layui-laypage layui-laypage-default">
    <!-- 上一页 -->

    <a href="javascript:;" class="layui-btn layui-btn-xs layui-btn-disabled">上一页</a>

    <!-- 当前页 -->
    <span class="layui-laypage-curr">
                <em class="layui-laypage-em"></em>
                <em>1/1</em>
            </span>
    <!-- 下一页 -->

    <a class="layui-btn layui-btn-xs layui-btn-disabled">下一页</a>

</div>
{% endblock %}

var category = <$ category $>
{% block custom_script %}
<script type="text/javascript">
  function showCategory() {
    // $('body').addClass('big-page');
    layer.open({
      type: 1,
      // r表示right,b表示bottom
      offset: 'lb',
      // 文集目录
      title: '文集目录',
      //
      // anim 特效 0-平滑放大 1-从上掉落 2-从底部往上滑入 3-从左滑入 4-从左翻转 5-渐显 6-抖动
      anim: 5,
      shadeClose: true, //开启遮罩关闭
      // 第一个参数宽度，第二个参数高度
      area: ['300px', '100%'],
      // 内容区 在body中写入<div id="draw">。。。。</div>代码，即弹窗内容
      content: $("#drawer").html(),
    })
  }
    function toArticleDetail(obj) {
        let articleCount = $(obj).attr('data-article');
        let app = $('body').attr('data-app');
        if (articleCount) {
            location.href = `/${app}/page/article/${articleCount}`;
        }
    }
    function makeUrl() {

    }
    function searchCategory() {
        let keyword = $('.mrdoc-search-input').val();
        let app = $('body').attr('data-app');
        if (!keyword) {
            return
        }
        location.href = `/${app}/page/home?keyword=${keyword}`;
        return false
    }
    function updateUrlParam(name) {
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
      var r = window.location.search.substr(1).match(reg); //匹配目标参数
      if (r === null) {
        return
      }
      $('.mrdoc-search-input').val(unescape(r[2]));
    }

    updateUrlParam('keyword');
</script>
{% endblock %}
<style>
    @media screen and (max-width: 768px) {
        .logo {
            margin: 0 auto;
        }
    }
</style>
